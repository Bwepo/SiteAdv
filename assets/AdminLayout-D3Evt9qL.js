import{c as d,r as o,j as e,A as Q,m as c,e as l,X as U,ap as $,U as Z,p as G,Z as W,s as X,ar as Y,l as k,L as f,as as J,at as ee,au as ae}from"./index-Biahl3aJ.js";import{D as te,a as se,O as P,h as O,k as ie,i as R,j as T,R as ne,T as re,P as oe,C as le,B as de}from"./dialog-CBjoaVcQ.js";import{B as p}from"./button-CUO3VXc_.js";import{H as S}from"./heart-DtQMgtTA.js";import{S as C}from"./sparkles-3sK8AtzB.js";import{H as ce}from"./house-C1HAWG3y.js";import{a as me,M as he}from"./menu-BUSbRU4x.js";import{C as xe}from"./calendar-Dw4C96fz.js";import{U as pe}from"./users--H8gaffH.js";import{F as I}from"./file-text-DZ81pTfZ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=d("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=d("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=d("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=d("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=d("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=d("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=d("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=d("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=d("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=d("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=d("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=d("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),L="mladv_welcome_shown";function we(){const[i,n]=o.useState(!1);o.useEffect(()=>{if(!sessionStorage.getItem(L)){const m=setTimeout(()=>n(!0),600);return()=>clearTimeout(m)}},[]);const s=()=>{sessionStorage.setItem(L,"true"),n(!1)};return e.jsx(te,{open:i,onOpenChange:h=>{h||s()},children:e.jsx(se,{className:"sm:max-w-md border-none bg-gradient-to-br from-rose-50 via-white to-pink-50 dark:from-rose-950/40 dark:via-background dark:to-pink-950/30 shadow-2xl p-0 overflow-hidden",children:e.jsx(Q,{children:i&&e.jsxs(c.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.5,ease:"easeOut"},className:"p-8 text-center",children:[e.jsxs("div",{className:"relative flex justify-center mb-6",children:[e.jsx(c.div,{animate:{y:[0,-8,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(S,{className:"w-16 h-16 text-rose-400 fill-rose-400 drop-shadow-lg"})}),e.jsx(c.div,{className:"absolute -left-2 top-0",animate:{y:[0,-6,0],opacity:[.4,1,.4]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut",delay:.3},children:e.jsx(C,{className:"w-5 h-5 text-amber-400"})}),e.jsx(c.div,{className:"absolute -right-2 top-2",animate:{y:[0,-5,0],opacity:[.5,1,.5]},transition:{duration:2.2,repeat:1/0,ease:"easeInOut",delay:.6},children:e.jsx(C,{className:"w-4 h-4 text-amber-400"})})]}),e.jsx(c.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-2xl font-bold bg-gradient-to-r from-rose-600 to-pink-600 dark:from-rose-400 dark:to-pink-400 bg-clip-text text-transparent mb-4",children:"Bem-vinda, meu amor! ðŸ’•"}),e.jsxs(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-3 text-sm leading-relaxed text-muted-foreground",children:[e.jsx("p",{children:"Este portal foi feito com muito carinho, especialmente pra vocÃª."}),e.jsx("p",{children:"Ã‰ o meu presente â€” um cantinho digital onde vocÃª pode organizar sua agenda, suas tarefas, seus clientes e tudo o que precisar para brilhar ainda mais no seu trabalho."}),e.jsx("p",{className:"text-base font-medium text-foreground/80",children:"Eu te amo. Sempre. ðŸ¤"})]}),e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"mt-8",children:e.jsxs(p,{onClick:s,className:"bg-gradient-to-r from-rose-500 to-pink-500 hover:from-rose-600 hover:to-pink-600 text-white px-8 shadow-lg shadow-rose-200 dark:shadow-rose-900/30",children:[e.jsx(S,{className:"w-4 h-4 mr-2 fill-white"}),"ComeÃ§ar"]})}),e.jsx(c.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"mt-4 text-[11px] text-muted-foreground/60 italic",children:"â€” Com amor, CÃ¡ssio"})]})})})})}const ke=ne,Se=re,Ce=oe,E=o.forwardRef(({className:i,...n},s)=>e.jsx(P,{className:l("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",i),...n,ref:s}));E.displayName=P.displayName;const Me=$("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),H=o.forwardRef(({side:i="right",className:n,children:s,...h},m)=>e.jsxs(Ce,{children:[e.jsx(E,{}),e.jsxs(O,{ref:m,className:l(Me({side:i}),n),...h,children:[s,e.jsxs(ie,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));H.displayName=O.displayName;const V=({className:i,...n})=>e.jsx("div",{className:l("flex flex-col space-y-2 text-center sm:text-left",i),...n});V.displayName="SheetHeader";const Le=({className:i,...n})=>e.jsx("div",{className:l("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",i),...n});Le.displayName="SheetFooter";const _=o.forwardRef(({className:i,...n},s)=>e.jsx(R,{ref:s,className:l("text-lg font-semibold text-foreground",i),...n}));_.displayName=R.displayName;const ze=o.forwardRef(({className:i,...n},s)=>e.jsx(T,{ref:s,className:l("text-sm text-muted-foreground",i),...n}));ze.displayName=T.displayName;const z=[{title:"VisÃ£o geral",items:[{href:"/admin",label:"Dashboard",icon:D}]},{title:"CRM",items:[{href:"/admin/crm",label:"Painel CRM",icon:de},{href:"/admin/agenda",label:"Agenda",icon:xe},{href:"/admin/tarefas",label:"Tarefas",icon:ue},{href:"/admin/projetos",label:"Projetos",icon:fe},{href:"/admin/bosi",label:"BOSI",icon:pe}]},{title:"ConteÃºdo",items:[{href:"/admin/posts",label:"Posts",icon:I},{href:"/admin/comments",label:"ComentÃ¡rios",icon:A},{href:"/admin/newsletter",label:"Inscritos",icon:he},{href:"/admin/newsletter/campaigns",label:"Campanhas",icon:ye},{href:"/admin/newsletter/settings",label:"Config. Newsletter",icon:Ne}]},{title:"Conta",items:[{href:"/admin/security",label:"SeguranÃ§a",icon:ve}]}],Pe=[{href:"/admin",label:"InÃ­cio",icon:D},{href:"/admin/posts",label:"Posts",icon:I},{href:"/admin/comments",label:"Coment.",icon:A},{href:"/admin/posts/new",label:"Novo",icon:q}];function _e({children:i,title:n}){const{user:s,signOut:h}=Z(),m=G(),g=W(),[F,y]=o.useState(!1),[b,j]=o.useState(!1),[u,N]=o.useState(null),[r,B]=o.useState(()=>typeof window<"u"?localStorage.getItem("admin-sidebar-collapsed")==="true":!1);o.useEffect(()=>{localStorage.setItem("admin-sidebar-collapsed",String(r))},[r]),o.useEffect(()=>{X.from("mladv_crm_sync_status").select("completed_at").order("completed_at",{ascending:!1}).limit(1).single().then(({data:a})=>{a!=null&&a.completed_at&&N(new Date(a.completed_at))})},[]);const K=o.useCallback(async()=>{j(!0);try{await Y(),g.invalidateQueries({queryKey:["crm"]}),N(new Date),k.success("Dados sincronizados")}catch{k.error("Erro ao sincronizar")}finally{j(!1)}},[g]),v=a=>{const t=Math.floor((Date.now()-a.getTime())/6e4);if(t<1)return"agora";if(t<60)return`${t}min atrÃ¡s`;const x=Math.floor(t/60);return x<24?`${x}h atrÃ¡s`:a.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})},w=async()=>{await h()};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(we,{}),e.jsx("header",{className:"sticky top-0 z-50 border-b border-border bg-card/80 backdrop-blur-sm",children:e.jsxs("div",{className:"container mx-auto px-4 md:px-6 h-14 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(f,{to:"/",className:"flex items-center gap-1.5 text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Voltar ao site"}),e.jsx(ce,{className:"w-4 h-4 sm:hidden"})]}),e.jsx("span",{className:"text-border hidden sm:inline",children:"|"}),e.jsx("span",{className:"font-semibold text-sm text-foreground hidden sm:inline",children:"Painel Admin"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs(J,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(p,{variant:"ghost",size:"sm",onClick:K,disabled:b,className:"text-muted-foreground h-8 px-2 gap-1",children:[e.jsx(je,{className:l("w-3.5 h-3.5",b&&"animate-spin")}),u&&e.jsx("span",{className:"text-[10px] hidden sm:inline text-muted-foreground/70",children:v(u)})]})}),e.jsx(ae,{side:"bottom",className:"text-xs",children:u?`Ãšltima sync: ${v(u)}`:"Sincronizar CRM"})]}),e.jsx("span",{className:"text-xs text-muted-foreground hidden md:block truncate max-w-[200px]",children:s==null?void 0:s.email}),e.jsxs(p,{variant:"ghost",size:"sm",onClick:w,className:"text-muted-foreground hover:text-destructive h-8 px-2",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline ml-1.5",children:"Sair"})]})]})]})}),e.jsxs("div",{className:"flex",children:[e.jsxs("aside",{className:l("border-r border-border bg-card/50 min-h-[calc(100vh-3.5rem)] hidden md:flex md:flex-col transition-all duration-200",r?"w-[4.25rem]":"w-60"),children:[e.jsx("nav",{className:"p-3 space-y-3 flex-1",children:z.map(a=>e.jsxs("div",{children:[!r&&e.jsx("p",{className:"px-3 text-[11px] font-semibold uppercase tracking-wider text-muted-foreground/60 mb-1.5",children:a.title}),e.jsx("div",{className:"space-y-0.5",children:a.items.map(t=>{const x=m.pathname===t.href;return e.jsxs(f,{to:t.href,title:r?t.label:void 0,className:l("flex items-center gap-3 rounded-lg transition-colors",r?"justify-center p-2.5":"px-3 py-2",x?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-muted/50"),children:[e.jsx(t.icon,{className:"w-[18px] h-[18px] shrink-0"}),!r&&e.jsx("span",{className:"text-sm font-medium",children:t.label})]},t.href)})})]},a.title))}),e.jsxs("div",{className:"p-3 space-y-2 border-t border-border",children:[e.jsx(f,{to:"/admin/posts/new",className:"block",children:e.jsxs(p,{className:l("w-full justify-center",r&&"px-0"),size:"sm",title:r?"Novo Post":void 0,children:[e.jsx(q,{className:"w-4 h-4 shrink-0"}),!r&&e.jsx("span",{className:"ml-2",children:"Novo Post"})]})}),e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>B(!r),className:l("w-full text-muted-foreground",r?"justify-center px-0":"justify-start"),title:r?"Expandir menu":"Recolher menu",children:r?e.jsx(be,{className:"w-4 h-4"}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-xs",children:"Recolher"})]})})]})]}),e.jsx("main",{className:"flex-1 p-4 sm:p-6 md:p-8 pb-24 md:pb-8 min-w-0",children:e.jsxs(c.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.2},children:[e.jsx("div",{className:"mb-6",children:e.jsx("h1",{className:"text-xl sm:text-2xl font-serif font-bold text-foreground",children:n})}),i]})})]}),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card/95 backdrop-blur-sm border-t border-border px-1 py-1.5 md:hidden z-40",children:e.jsxs("div",{className:"flex justify-around items-center max-w-md mx-auto",children:[Pe.map(a=>{const t=m.pathname===a.href;return e.jsxs(f,{to:a.href,className:l("flex flex-col items-center gap-0.5 p-1.5 rounded-lg transition-colors min-w-[3.5rem]",t?"text-primary":"text-muted-foreground"),children:[e.jsx(a.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[10px] leading-tight font-medium",children:a.label})]},a.href)}),e.jsxs(ke,{open:F,onOpenChange:y,children:[e.jsx(Se,{asChild:!0,children:e.jsxs("button",{className:"flex flex-col items-center gap-0.5 p-1.5 rounded-lg text-muted-foreground min-w-[3.5rem]",children:[e.jsx(me,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[10px] leading-tight font-medium",children:"Mais"})]})}),e.jsxs(H,{side:"bottom",className:"rounded-t-2xl pb-safe",children:[e.jsx(V,{className:"mb-2",children:e.jsx(_,{className:"text-left text-base",children:"Menu"})}),e.jsx("div",{className:"space-y-1 max-h-[60vh] overflow-y-auto",children:z.map(a=>e.jsxs("div",{children:[e.jsx("p",{className:"px-3 pt-3 pb-1 text-[11px] font-semibold uppercase tracking-wider text-muted-foreground/60",children:a.title}),a.items.map(t=>{const x=m.pathname===t.href;return e.jsxs(f,{to:t.href,onClick:()=>y(!1),className:l("flex items-center gap-3 px-3 py-3 rounded-lg transition-colors",x?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-muted/50"),children:[e.jsx(t.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium text-sm",children:t.label})]},t.href)})]},a.title))}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-border flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground truncate mr-4",children:s==null?void 0:s.email}),e.jsxs(p,{variant:"ghost",size:"sm",onClick:()=>{w(),y(!1)},className:"text-destructive h-8 shrink-0",children:[e.jsx(M,{className:"w-4 h-4 mr-1"}),"Sair"]})]})]})]})]})})]})}export{_e as A,fe as F,ue as L,A as M,q as P,je as R,ke as S,H as a,V as b,_ as c,Ne as d,ve as e,ze as f,Le as g};
