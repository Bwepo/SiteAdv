import{c as se,a4 as it,at as ct,r as s,j as e,m as ye,e as b}from"./index-DecnLHKo.js";import{T as dt}from"./TarefaSheet-CgB3KpOC.js";import{u as ut,a as mt,C as xt,S as pt,D as ht,c as ft,b as gt,d as jt,e as bt,f as St,v as vt,P as Nt,g as Ct,h as yt}from"./SubtarefasTab-CgNqJAbe.js";import{C as Le,c as _e}from"./card-CiqP3Dhs.js";import{A as kt,a as Tt,b as wt,c as Dt,d as At,e as Lt,f as _t,g as It}from"./alert-dialog-BUy4Fiut.js";import{B as R}from"./badge-D5OiQakQ.js";import{B as ke}from"./button-blv5p1JR.js";import{I as Et}from"./input-b1PXoCdy.js";import{S as xe}from"./switch-CCw1S2WL.js";import{L as Ot}from"./label-B-BRMFKQ.js";import{S as y,f as k,g as T,h as w,i as x}from"./form-CMkr7sE5.js";import{P as Ft,a as Mt,b as Pt}from"./popover-BbKhP6JQ.js";import{T as te,b as pe,d as Rt,e as Bt}from"./crmTypes-3TDjSWGp.js";import{S as $t,T as Kt,K as Vt}from"./CrmSkeletons-CFJ1v4et.js";import{S as Ut}from"./search-BhDD_Kfz.js";import{P as zt}from"./plus-DvZzPKn5.js";import{L as Yt}from"./list-CffKj8ds.js";import{F as Ht}from"./folder-kanban-BwqRPhMg.js";import{C as Ie}from"./circle-alert-BWze0_kb.js";import{C as Zt}from"./calendar-CKfyerD0.js";import{U as Wt}from"./users-7BIpTiLP.js";import{C as qt}from"./clock-BAF3oms6.js";import{C as Gt}from"./circle-check-DneXFLNn.js";import{C as Xt}from"./circle-x-pzOoNft-.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=se("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=se("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=se("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),es=[{value:"deadline",label:"Prazo (mais próximo)"},{value:"priority",label:"Prioridade (Alta → Baixa)"},{value:"title",label:"Título (A → Z)"},{value:"client",label:"Cliente (A → Z)"}],we={alta:0,media:1,baixa:2};function De(l,r){return[...l].sort((o,c)=>{switch(r){case"deadline":return!o.dueDate&&!c.dueDate?0:o.dueDate?c.dueDate?o.dueDate.localeCompare(c.dueDate):-1:1;case"priority":return(we[o.priority]??1)-(we[c.priority]??1);case"title":return o.title.localeCompare(c.title,"pt-BR");case"client":return(o.client??"").localeCompare(c.client??"","pt-BR");default:return 0}})}const ts={client:!0,dueDate:!0,priority:!0,subtasks:!0,tags:!0,description:!0},Ae={client:"Cliente",dueDate:"Data de entrega",priority:"Prioridade",subtasks:"Subtarefas",tags:"Tags",description:"Descrição"},ee=["pendente","agendado","em_andamento","em_tramite","concluida","cancelada"],ss={pendente:"border-t-red-500/60",agendado:"border-t-blue-500/60",em_andamento:"border-t-yellow-500/60",em_tramite:"border-t-orange-500/60",concluida:"border-t-green-500/60",cancelada:"border-t-muted/60"},as={pendente:Ie,agendado:qt,em_andamento:Te,em_tramite:Te,concluida:Gt,cancelada:Xt},rs=[{value:"all",label:"Todos"},{value:"today",label:"Hoje"},{value:"this_week",label:"Esta semana"},{value:"this_month",label:"Este mês"},{value:"overdue",label:"Atrasadas"},{value:"no_deadline",label:"Sem prazo"}],he=s.memo(function({task:r,cardFields:o,today:c,isExpanded:E,onToggleExpand:S,onToggleSubtask:D,onEdit:f,onDelete:B,showStatus:O,isDragging:A,isOverlay:g,projectName:v}){const L=r.subtasks.filter(N=>N.completed).length,p=r.subtasks.length,_=r.dueDate&&r.dueDate<c&&r.status!=="concluida"&&r.status!=="cancelada";return e.jsx(Le,{className:b("relative group transition-all duration-200 hover:shadow-md cursor-pointer",A?"opacity-40 scale-95":"",g&&"shadow-2xl ring-2 ring-primary/40 rotate-[2deg] scale-105 cursor-grabbing","border-border/50 bg-card"),onClick:()=>f==null?void 0:f(r),children:e.jsxs(_e,{className:"p-3.5",children:[v&&e.jsx("div",{className:"mb-2",children:e.jsxs(R,{variant:"outline",className:"text-[10px] px-1.5 py-0 gap-1 font-normal",children:[e.jsx(Ht,{className:"w-3 h-3"}),v]})}),e.jsx("p",{className:"font-medium text-sm mb-1",children:r.title}),o.description&&r.description&&e.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[o.priority&&e.jsx(R,{variant:"secondary",className:`text-[10px] ${Rt[r.priority]}`,children:pe[r.priority]}),O&&e.jsx(R,{variant:"secondary",className:`text-[10px] ${Bt[r.status]}`,children:te[r.status]}),o.dueDate&&r.dueDate&&e.jsxs("span",{className:b("flex items-center gap-1",_&&"text-destructive font-medium"),children:[_?e.jsx(Ie,{className:"w-3 h-3"}):e.jsx(Zt,{className:"w-3 h-3"}),new Date(r.dueDate+"T12:00:00").toLocaleDateString("pt-BR")]}),_&&e.jsx("span",{className:"text-destructive font-medium",children:"Atrasada"}),r.assignee&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Wt,{className:"w-3 h-3"}),r.assignee]})]}),o.subtasks&&p>0&&!g&&e.jsx("div",{className:"flex justify-end mt-2",children:e.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-muted-foreground",children:[e.jsx(Ee,{className:"w-3 h-3"}),L,"/",p]})}),o.tags&&r.tags&&r.tags.length>0&&!g&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:r.tags.map(N=>e.jsx(R,{variant:"outline",className:"text-[10px]",children:N},N))})]})})});function ns(l){const{attributes:r,listeners:o,setNodeRef:c,transform:E,transition:S,isDragging:D}=Ct({id:l.task.id}),f={transform:yt.Transform.toString(E),transition:S};return e.jsx("div",{ref:c,style:f,...r,...o,children:e.jsx(he,{...l,isDragging:D})})}function ls({status:l,tasks:r,isOver:o,cardFields:c,today:E,expandedTasks:S,onToggleExpand:D,onToggleSubtask:f,onEdit:B,onDelete:O,projectMap:A}){const g=s.useMemo(()=>r.map(p=>p.id),[r]),{setNodeRef:v}=bt({id:l}),L=as[l];return e.jsxs("div",{className:b("flex flex-col rounded-xl border border-border border-t-4 bg-card/40 min-h-[400px] transition-colors",ss[l]||"border-t-muted/60",o&&"bg-card/80 ring-2 ring-primary/20"),children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 px-4",children:[e.jsx(L,{className:b("w-4 h-4",{"text-red-500":l==="pendente","text-blue-500":l==="agendado","text-yellow-500":l==="em_andamento","text-orange-500":l==="em_tramite","text-green-500":l==="concluida","text-muted-foreground":l==="cancelada"})}),e.jsx("span",{className:"text-sm font-medium",children:te[l]}),e.jsx(R,{variant:"secondary",className:"ml-auto text-xs bg-secondary/50 tabular-nums",children:r.length})]}),e.jsxs("div",{ref:v,"data-column-status":l,className:"flex-1 p-3 pt-0 space-y-3",children:[e.jsx(St,{items:g,strategy:vt,children:r.map(p=>e.jsx(ns,{task:p,cardFields:c,today:E,isExpanded:S.has(p.id),onToggleExpand:D,onToggleSubtask:f,onEdit:B,onDelete:O,projectName:A.get(p.projectId||"")},p.id))}),r.length===0&&e.jsx("div",{className:"flex flex-col items-center justify-center text-xs text-muted-foreground/50 border-2 border-dashed border-border/50 rounded-xl p-4 text-center gap-1 min-h-[100px]",children:e.jsx("span",{children:"Arraste tarefas para cá"})})]})]})}function os({projectId:l,hideHeader:r,forceTab:o}={}){const{tasks:c,setTasks:E,loading:S,syncing:D,error:f,lastSync:B,sync:O,updateTaskStatus:A,deleteTask:g,createTask:v,updateTask:L,createSubtask:p,updateSubtask:_,deleteSubtask:N}=it(),{projects:$}=ct(),[Oe,ae]=s.useState(!1),[Fe,fe]=s.useState(null),[i,K]=s.useState([]),[V,ge]=s.useState("kanban"),[U,Me]=s.useState(""),[z,Pe]=s.useState("all"),[Y,Re]=s.useState("all"),[H,Be]=s.useState("all"),[re,$e]=s.useState(l||"all"),[je,Ke]=s.useState(new Set),[Z,Ve]=s.useState(ts),[W,ne]=s.useState(null),[Ue,q]=s.useState(null),[F,ze]=s.useState("deadline"),[le,Ye]=s.useState(!1),[oe,He]=s.useState(!1),[G,Ze]=s.useState("all"),[X,We]=s.useState("all");s.useEffect(()=>{c.length>0&&K(c)},[c]);const I=s.useMemo(()=>{const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},[]),qe=s.useMemo(()=>[...new Set(i.map(t=>t.assignee).filter(Boolean))],[i]),M=s.useMemo(()=>{const t=l||re,a=new Date,n=new Date(a);n.setDate(a.getDate()+7);const d=new Date(a.getFullYear(),a.getMonth()+1,0),u=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`,C=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`,Q=i.filter(m=>{var j;if(U&&!m.title.toLowerCase().includes(U.toLowerCase())||z!=="all"&&m.status!==z||Y!=="all"&&m.priority!==Y||H!=="all"&&m.client!==H||X!=="all"&&m.assignee!==X||t!=="all"&&m.projectId!==t)return!1;if(G!=="all"){const h=(j=m.dueDate)==null?void 0:j.split("T")[0];switch(G){case"today":if(h!==I)return!1;break;case"this_week":if(!h||h<I||h>u)return!1;break;case"this_month":if(!h||h<I||h>C)return!1;break;case"overdue":if(!h||h>=I||m.status==="concluida"||m.status==="cancelada")return!1;break;case"no_deadline":if(h)return!1;break}}return!0});return De(Q,F)},[i,U,z,Y,H,X,re,F,G,I]),ie=I,ce=s.useMemo(()=>W?i.find(t=>t.id===W):null,[W,i]),be=s.useMemo(()=>[...new Set(i.map(t=>t.client).filter(Boolean))],[i]),de=s.useMemo(()=>{const t=new Map;return $.forEach(a=>t.set(a.id,a.name)),t},[$]),Ge=s.useMemo(()=>i.reduce((t,a)=>t+a.subtasks.length,0),[i]),Se=s.useCallback(t=>{Ke(a=>{const n=new Set(a);return n.has(t)?n.delete(t):n.add(t),n})},[]),ve=s.useCallback((t,a)=>{K(n=>n.map(d=>d.id===t?{...d,subtasks:d.subtasks.map(u=>u.id===a?{...u,completed:!u.completed}:u)}:d))},[]),[P,J]=s.useState(null),Xe=s.useCallback(async()=>{P&&(g(P),K(t=>t.filter(a=>a.id!==P)),J(null))},[P,g]),Je=s.useCallback(t=>{Ve(a=>({...a,[t]:!a[t]}))},[]),Qe=s.useCallback(()=>{fe(null),ae(!0)},[]),Ne=s.useCallback(t=>{fe(t),ae(!0)},[]),et=s.useCallback(async(t,a,n)=>{a?await v({title:t.title,deadline:t.deadline,priority:t.priority,status:t.status,clientName:t.clientName,projectId:t.projectId,assignee:t.assignee,description:t.description}):n&&await L(n,{title:t.title,deadline:t.deadline,priority:t.priority,status:t.status,clientName:t.clientName,projectId:t.projectId,assignee:t.assignee,description:t.description})},[v,L]),tt=ut(mt(Nt,{activationConstraint:{distance:8}}));s.useCallback(t=>{const a=i.find(n=>n.id===t);return a==null?void 0:a.status},[i]);const st=s.useCallback(t=>{ne(t.active.id)},[]),at=s.useCallback(t=>{const{over:a}=t;if(!a){q(null);return}const n=a.id,d=i.find(C=>C.id===n),u=d?d.status:ee.includes(n)?n:null;q(u)},[i]),rt=s.useCallback(t=>{const{active:a,over:n}=t;if(ne(null),q(null),!n)return;const d=a.id,u=n.id;if(d===u)return;const C=i.find(j=>j.id===d);if(!C)return;const Q=i.find(j=>j.id===u),m=Q?Q.status:ee.includes(u)?u:C.status;C.status!==m&&(K(j=>{const h=j.map(me=>me.id===d?{...me,status:m}:me);return De(h,F)}),A(d,m))},[i,A,F]),nt=s.useCallback(()=>{ne(null),q(null)},[]),lt=s.useMemo(()=>{const t={};return ee.forEach(a=>{t[a]=[]}),M.forEach(a=>{t[a.status]&&t[a.status].push(a)}),t},[M]),Ce=s.useMemo(()=>ee.filter(t=>!(le&&t==="concluida"||oe&&t==="cancelada")),[le,oe]),[ue,ot]=s.useState(o||"tarefas");return e.jsxs(ye.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[!o&&e.jsx("div",{className:"flex items-center gap-1 rounded-2xl border border-border bg-muted/40 p-1 w-fit backdrop-blur-sm mb-5",children:[{id:"tarefas",label:"Tarefas",icon:Jt,count:M.length},{id:"subtarefas",label:"Subtarefas",icon:Ee,count:Ge}].map(t=>{const a=ue===t.id,n=t.icon;return e.jsxs("button",{onClick:()=>ot(t.id),className:b("relative flex items-center gap-2 rounded-xl px-5 py-2.5 text-sm font-medium transition-all duration-200",a?"text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-background/50"),children:[a&&e.jsx(ye.div,{layoutId:"tarefas-tab-bg",className:"absolute inset-0 rounded-xl gold-gradient shadow-sm",transition:{type:"spring",bounce:.15,duration:.5}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx(n,{className:"h-4 w-4"}),t.label,e.jsx("span",{className:b("inline-flex items-center justify-center rounded-full px-2 py-0.5 text-[10px] font-semibold tabular-nums min-w-[22px] transition-colors",a?"bg-primary-foreground/20 text-primary-foreground":"bg-secondary text-muted-foreground"),children:t.count})]})]},t.id)})}),ue==="tarefas"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-3 glass p-4 rounded-xl border border-border shadow-sm mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:[e.jsxs("div",{className:"relative w-full sm:min-w-[220px] sm:max-w-xs",children:[e.jsx(Ut,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"}),e.jsx(Et,{placeholder:"Buscar tarefas...",value:U,onChange:t=>Me(t.target.value),className:"pl-9 w-full text-sm"})]}),e.jsxs("div",{className:"flex gap-2 items-center ml-auto flex-wrap",children:[e.jsxs(ke,{onClick:Qe,className:"gold-gradient text-primary-foreground shadow-md hover:opacity-90 transition-opacity h-9",children:[e.jsx(zt,{className:"mr-1.5 h-4 w-4"})," Nova Tarefa"]}),e.jsxs("div",{className:"flex border border-border rounded-lg overflow-hidden bg-muted/40",children:[e.jsxs("button",{onClick:()=>ge("kanban"),className:b("flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors",V==="kanban"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx(xt,{className:"w-4 h-4"})," Kanban"]}),e.jsxs("button",{onClick:()=>ge("list"),className:b("flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors",V==="list"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx(Yt,{className:"w-4 h-4"})," Lista"]})]}),e.jsx($t,{syncing:D,lastSync:B,onSync:O,error:f}),e.jsxs(Ft,{children:[e.jsx(Mt,{asChild:!0,children:e.jsx(ke,{variant:"outline",size:"icon",className:"h-9 w-9",children:e.jsx(pt,{className:"w-4 h-4"})})}),e.jsx(Pt,{className:"w-56",align:"end",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Mostrar nos cards"}),Object.keys(Ae).map(t=>e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsx(Ot,{htmlFor:`field-${t}`,className:"text-sm cursor-pointer",children:Ae[t]}),e.jsx(xe,{id:`field-${t}`,checked:Z[t],onCheckedChange:()=>Je(t)})]},t))]})})]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap items-end",children:[e.jsx(Qt,{className:"w-4 h-4 text-muted-foreground shrink-0 mb-2"}),e.jsxs("div",{className:"flex items-end gap-2 flex-wrap flex-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Status"}),e.jsxs(y,{value:z,onValueChange:Pe,children:[e.jsx(k,{className:"w-[130px] h-8 text-xs",children:e.jsx(T,{placeholder:"Todos Status"})}),e.jsxs(w,{children:[e.jsx(x,{value:"all",children:"Todos Status"}),Object.keys(te).map(t=>e.jsx(x,{value:t,children:te[t]},t))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Prioridade"}),e.jsxs(y,{value:Y,onValueChange:Re,children:[e.jsx(k,{className:"w-[110px] h-8 text-xs",children:e.jsx(T,{placeholder:"Todas"})}),e.jsxs(w,{children:[e.jsx(x,{value:"all",children:"Todas"}),Object.keys(pe).map(t=>e.jsx(x,{value:t,children:pe[t]},t))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Prazo"}),e.jsxs(y,{value:G,onValueChange:t=>Ze(t),children:[e.jsx(k,{className:"w-[110px] h-8 text-xs",children:e.jsx(T,{placeholder:"Todos"})}),e.jsx(w,{children:rs.map(t=>e.jsx(x,{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Responsável"}),e.jsxs(y,{value:X,onValueChange:We,children:[e.jsx(k,{className:"w-[120px] h-8 text-xs",children:e.jsx(T,{placeholder:"Todos"})}),e.jsxs(w,{children:[e.jsx(x,{value:"all",children:"Todos"}),qe.map(t=>e.jsx(x,{value:t,children:t},t))]})]})]}),!l&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Projeto"}),e.jsxs(y,{value:re,onValueChange:$e,children:[e.jsx(k,{className:"w-[150px] h-8 text-xs",children:e.jsx(T,{placeholder:"Todos"})}),e.jsxs(w,{children:[e.jsx(x,{value:"all",children:"Todos Projetos"}),$.map(t=>e.jsx(x,{value:t.id,children:t.name},t.id))]})]})]}),be.length>0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Cliente"}),e.jsxs(y,{value:H,onValueChange:Be,children:[e.jsx(k,{className:"w-[130px] h-8 text-xs",children:e.jsx(T,{placeholder:"Todos"})}),e.jsxs(w,{children:[e.jsx(x,{value:"all",children:"Todos Clientes"}),be.map(t=>e.jsx(x,{value:t,children:t},t))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Ordenar por"}),e.jsxs(y,{value:F,onValueChange:t=>ze(t),children:[e.jsx(k,{className:"w-[160px] h-8 text-xs",children:e.jsx(T,{})}),e.jsxs(w,{children:[e.jsx(x,{value:"deadline",children:"Sem ordenação"}),es.map(t=>e.jsx(x,{value:t.value,children:t.label},t.value))]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5 ml-auto shrink-0",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground cursor-pointer select-none justify-end",children:["Ocultar canceladas",e.jsx(xe,{checked:oe,onCheckedChange:He,className:"scale-75"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground cursor-pointer select-none justify-end",children:["Ocultar concluídas",e.jsx(xe,{checked:le,onCheckedChange:Ye,className:"scale-75"})]})]})]})]}),e.jsx(dt,{open:Oe,onOpenChange:ae,task:Fe,onSave:et,onCreateSubtask:p,onUpdateSubtask:_,onDeleteSubtask:N}),e.jsx(kt,{open:!!P,onOpenChange:t=>!t&&J(null),children:e.jsxs(Tt,{children:[e.jsxs(wt,{children:[e.jsx(Dt,{children:"Remover tarefa?"}),e.jsx(At,{children:"Esta ação não pode ser desfeita. A tarefa será removida permanentemente do Airtable e do banco local."})]}),e.jsxs(Lt,{children:[e.jsx(_t,{children:"Cancelar"}),e.jsx(It,{onClick:Xe,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remover"})]})]})}),S?V==="list"?e.jsx(Kt,{}):e.jsx(Vt,{}):V==="list"?e.jsx("div",{className:"space-y-3",children:M.length===0?e.jsx(Le,{children:e.jsx(_e,{className:"p-8 text-center text-muted-foreground",children:"Nenhuma tarefa encontrada."})}):M.map(t=>e.jsx(he,{task:t,cardFields:Z,today:ie,isExpanded:je.has(t.id),onToggleExpand:Se,onToggleSubtask:ve,onEdit:Ne,onDelete:J,showStatus:!0,projectName:de.get(t.projectId||"")},t.id))}):e.jsxs(ht,{sensors:tt,collisionDetection:ft,onDragStart:st,onDragOver:at,onDragEnd:rt,onDragCancel:nt,children:[e.jsx("div",{className:"overflow-x-auto -mx-2 px-2 pb-4",children:e.jsx("div",{className:"flex gap-4",style:{minWidth:`${Ce.length*280}px`},children:Ce.map(t=>e.jsx("div",{className:"flex-1 min-w-[260px]",children:e.jsx(ls,{status:t,tasks:lt[t],isOver:Ue===t&&W!==null,cardFields:Z,today:ie,expandedTasks:je,onToggleExpand:Se,onToggleSubtask:ve,onEdit:Ne,onDelete:J,projectMap:de})},t))})}),e.jsx(gt,{dropAnimation:{duration:200,easing:"cubic-bezier(0.18, 0.67, 0.6, 1.22)"},children:ce?e.jsx("div",{className:"w-[260px]",children:e.jsx(he,{task:ce,cardFields:Z,today:ie,isExpanded:!1,onToggleExpand:()=>{},onToggleSubtask:()=>{},onDelete:()=>{},isOverlay:!0,projectName:de.get(ce.projectId||"")})}):null})]})]}),ue==="subtarefas"&&e.jsx(jt,{tasks:l?i.filter(t=>t.projectId===l):i,projects:$,loading:S,onCreateSubtask:p,onUpdateSubtask:_,onDeleteSubtask:N})]})}const Is=Object.freeze(Object.defineProperty({__proto__:null,default:os},Symbol.toStringTag,{value:"Module"}));export{os as A,Jt as C,Ee as L,Is as a};
