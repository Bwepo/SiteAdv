import{c as D,r as v,j as e,e as _,s as we,m as K}from"./index-DuYpUTKK.js";import{u as Se,a as ke}from"./crmTypes-BsCBoVhV.js";import{C as Ce,P as _e}from"./ProjectOverview-C7i_P-IP.js";import{B as Ie,a as Z}from"./CrmSkeletons-B4zrSst7.js";import{u as Me}from"./useQuery-0YKFqAJ_.js";import{B as I}from"./button-BaZbB3CL.js";import{C as P,c as H}from"./card-XEyEcJI_.js";import{B as Le}from"./badge-CGBe5cMm.js";import{S as Y}from"./skeleton-B59VFncK.js";import{S as X,a as ee,b as te,c as se,d as ae}from"./select-BWg__xSA.js";import{C as re}from"./checkbox-CH_76p-f.js";import{C as Te}from"./chevron-left-Dizc6oNL.js";import{C as Ae}from"./chevron-right-CVfy_DZp.js";import{S as Be}from"./square-check-big-DgM4UFns.js";import{C as de}from"./clipboard-list-BH2rqcIa.js";import{L as ce,A as le}from"./AdminTarefas-5ijrrllf.js";import{S as Ee}from"./star-DHH3SpOg.js";import $e from"./AdminAgenda--qGOb9-C.js";import{B as ie}from"./building-2-CZUJ50UP.js";import{C as De}from"./circle-check-BMFoBYlw.js";import{C as Oe}from"./calendar-qVLdLw9k.js";import{F as qe}from"./file-text-C6j8P8EC.js";import"./TipTapEditor-BCTPZSMM.js";import"./index-715MoMN_.js";import"./dropdown-menu-C1MDxowZ.js";import"./index-ZHreZApB.js";import"./index-C0pTZULp.js";import"./index-sxVWkK-H.js";import"./check-MurjpEem.js";import"./input-B36pqhe-.js";import"./tabs-Bcv08EIN.js";import"./link-DNnULVdv.js";import"./loader-circle-C8D_-Cfk.js";import"./list-B2-ZsJm-.js";import"./quote-YXTMH2cy.js";import"./trash-2-KKKHzz3p.js";import"./trending-up-fqwLS8NU.js";import"./clock--AO1CzH0.js";import"./triangle-alert--9Jhv7Gh.js";import"./list-todo-CQpkW1wb.js";import"./alert-dialog-7rqofho9.js";import"./index-CBaptp_q.js";import"./pencil-CwGz_tPf.js";import"./arrow-up-down-BSmPjwcu.js";import"./index-lhKGyFAP.js";import"./chevron-up-D8kZiTUO.js";import"./formatters-6WSacDhj.js";import"./label-kqbA6Am2.js";import"./download-BqQtGVlk.js";import"./textarea-BgwPv-7s.js";import"./dialog-DvQ-4ZEs.js";import"./purify.es-D9RiKzGB.js";import"./TarefaSheet-cpmi4ScH.js";import"./form-mAbbeBph.js";import"./DatePickerInput-CdqlhjvS.js";import"./pt-BR-ZY5I46FX.js";import"./popover-C3jGNdu0.js";import"./useCrmFieldOptions-U5YGpQ6L.js";import"./useMutation-DamW9zaN.js";import"./sheet-DRLj1T87.js";import"./separator-B6JU4H-0.js";import"./ClientSelect-BGm4Xh-d.js";import"./search-DkiEmQVe.js";import"./ProcessosList-D_cFj4z3.js";import"./scale-C6Qg-cBA.js";import"./user-L4e2w8b1.js";import"./types-Ba-nZvwf.js";import"./switch-BThulJhH.js";import"./sortable.esm-qYSf17uQ.js";import"./users-CMb0IoXm.js";import"./folder-kanban-KvbDfyWb.js";import"./filter-CRAuu4Q2.js";import"./circle-x-BO88Ljuk.js";import"./scroll-area-BTCAAwXr.js";import"./AgendaEventSheet-6mwl6B9n.js";import"./map-pin-DGXvV5VT.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=D("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=D("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=D("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=D("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),V=r=>we.from(r),G=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"];function Pe(r){if(!r)return"";const a=String(r).slice(0,10);return/^\d{4}-\d{2}-\d{2}$/.test(a)?a:""}function A(r){const a=Pe(r);return a?`${a.slice(8,10)}/${a.slice(5,7)}/${a.slice(0,4)}`:String(r||"")}function Q(r){const a=String(r||"").trim().toLowerCase();return a.includes("conclu")||a.includes("finaliz")||a.includes("encerrad")?{label:"Concluído",kind:"done",order:0}:a.includes("andamento")||a.includes("trâmite")||a.includes("tramite")||a.includes("process")?{label:a.includes("trâmite")||a.includes("tramite")?"Em trâmite":"Em andamento",kind:"wip",order:1}:a.includes("agend")?{label:"Agendado",kind:"sched",order:2}:{label:r||"—",kind:"other",order:3}}function He(r){const a=r.match(/\s*\(([^)]+)\)\s*$/);return a?{titulo:r.replace(/\s*\(([^)]+)\)\s*$/,"").trim(),projeto:a[1].trim()}:{titulo:r,projeto:""}}function Ye(r){if(!r)return"";const a=String(r).split(/\r?\n/).map(i=>i.trim()).filter(Boolean);for(let i of a){i=i.replace(/^#{1,6}\s+/,"").replace(/^\d+\)\s+/,"").replace(/^(-|•|o)\s+/i,"");const d=i.replace(/\*\*(.+?)\*\*/g,"$1").replace(/[_`]+/g,"").replace(/\s+/g," ").trim();if(d)return d.length>140?d.slice(0,137).trim()+"...":d}return""}function Ve(r){if(!r)return e.jsx("span",{className:"text-muted-foreground text-xs italic",children:"Sem observações registradas."});const a=String(r).split(/\r?\n/).map(c=>c.trim()).filter(Boolean),i=[];let d=[],m=0;const x=c=>c.split(/\*\*(.+?)\*\*/g).map((g,y)=>y%2===1?e.jsx("strong",{children:g},y):g),f=()=>{d.length&&(i.push(e.jsx("ul",{className:"list-disc list-inside space-y-0.5 text-xs leading-relaxed ml-2",children:d.map((c,h)=>e.jsx("li",{children:x(c)},h))},m++)),d=[])};for(const c of a){const h=c.match(/^#{1,6}\s+(.+)$/);if(h){f(),i.push(e.jsx("p",{className:"text-xs font-bold mt-2 mb-1",children:x(h[1])},m++));continue}const g=c.match(/^(\d+)\)\s+(.+)$/);if(g){f(),i.push(e.jsxs("p",{className:"text-xs font-bold mt-2 mb-1",children:[g[1],") ",x(g[2])]},m++));continue}const y=c.match(/^\*\*(.+?)\*\*:?$/);if(y){f(),i.push(e.jsx("p",{className:"text-xs font-bold mt-2 mb-1",children:x(y[1])},m++));continue}if(/^(-|•|o)\s+/i.test(c)){d.push(c.replace(/^(-|•|o)\s+/i,""));continue}f(),i.push(e.jsx("p",{className:"text-xs leading-relaxed",children:x(c)},m++))}return f(),e.jsx(e.Fragment,{children:i})}const me={done:"bg-green-100 text-green-800 border-green-200",wip:"bg-amber-100 text-amber-800 border-amber-200",sched:"bg-orange-100 text-orange-700 border-orange-200",other:"bg-muted text-muted-foreground border-border"},Ge={reuniao:"Reunião",audiencia:"Audiência",prazo:"Prazo",consulta:"Consulta",lembrete:"Lembrete",outro:"Outro"},ne="bosi",oe="rec7FQdbM5wF0R5RW";async function Qe(){const[r,a,i]=await Promise.all([V("mladv_crm_tarefas").select("airtable_id, titulo, status, deadline, descricao, raw_fields, cliente, projeto_airtable_id, relatorio_mensal").or(`cliente.ilike.%${ne}%,projeto_airtable_id.eq.${oe}`),V("mladv_crm_agenda").select("airtable_id, titulo, status, tipo, data_local, hora_local, descricao, cliente, local_evento").or(`cliente.ilike.%${ne}%,projeto_airtable_id.eq.${oe}`),V("mladv_crm_subtarefas").select("airtable_id, titulo, status, deadline, responsavel, tarefa_airtable_id, numero_processo, relatorio_mensal")]);if(r.error)throw r.error;if(a.error)throw a.error;if(i.error)throw i.error;const d=r.data||[],m=a.data||[],x=new Set(d.map(c=>c.airtable_id)),f=(i.data||[]).filter(c=>c.tarefa_airtable_id&&x.has(c.tarefa_airtable_id));return{tasks:d,events:m,subtasks:f}}function We(){const r=v.useRef(null),a=new Date,[i,d]=v.useState(a.getFullYear()),[m,x]=v.useState(a.getMonth()),[f,c]=v.useState(new Set),[h,g]=v.useState(new Set),[y,N]=v.useState(null),{data:k,isLoading:xe}=Me({queryKey:["crm","bosi-report-all"],queryFn:Qe}),O=i===a.getFullYear()&&m===a.getMonth(),q=`${i}-${m}`,j=v.useMemo(()=>{if(!k)return[];const{tasks:t,events:o,subtasks:p}=k,u=[];return t.forEach(s=>{var B;if(!s.relatorio_mensal||((B=s.titulo)==null?void 0:B.toLowerCase())==="tarefa sem nome")return;const l=s.raw_fields||{},w=Q(s.status),C=l.Observações||s.descricao||null,{titulo:F,projeto:z}=He(s.titulo);u.push({id:`tarefa-${s.airtable_id}`,category:"tarefa",titulo:s.titulo,tituloClean:F,projeto:z,status:s.status,statusLabel:w.label,statusKind:w.kind,statusOrder:w.order,deadline:s.deadline,observacoes:C})}),o.forEach(s=>{const l=Q(s.status);u.push({id:`reuniao-${s.airtable_id}`,category:"reuniao",titulo:s.titulo,tituloClean:s.titulo,projeto:"",status:s.status,statusLabel:l.label,statusKind:l.kind,statusOrder:l.order,deadline:s.data_local,observacoes:s.descricao,extra:[Ge[s.tipo]||s.tipo,s.hora_local,s.local_evento].filter(Boolean).join(" · ")})}),p.forEach(s=>{if(!s.relatorio_mensal)return;const l=Q(s.status);u.push({id:`subtarefa-${s.airtable_id}`,category:"subtarefa",titulo:s.titulo,tituloClean:s.titulo,projeto:"",status:s.status,statusLabel:l.label,statusKind:l.kind,statusOrder:l.order,deadline:s.deadline,observacoes:null,extra:[s.responsavel,s.numero_processo].filter(Boolean).join(" · ")})}),u.sort((s,l)=>{if(s.category!==l.category){const w={tarefa:0,reuniao:1,subtarefa:2};return w[s.category]-w[l.category]}return s.statusOrder!==l.statusOrder?s.statusOrder-l.statusOrder:s.tituloClean.localeCompare(l.tituloClean,"pt-BR")}),u},[k]);v.useMemo(()=>{q!==y&&j.length>0&&(c(new Set(j.map(t=>t.id))),g(new Set),N(q))},[j,q,y]);const ue=()=>{m===0?(x(11),d(t=>t-1)):x(t=>t-1),N(null)},pe=()=>{m===11?(x(0),d(t=>t+1)):x(t=>t+1),N(null)},W=t=>{c(o=>{const p=new Set(o);return p.has(t)?(p.delete(t),g(u=>{const s=new Set(u);return s.delete(t),s})):p.add(t),p})},he=t=>{g(o=>{const p=new Set(o);return p.has(t)?p.delete(t):p.add(t),p})},be=t=>{const o=j.filter(u=>u.category===t),p=o.every(u=>f.has(u.id));c(u=>{const s=new Set(u);return o.forEach(l=>p?s.delete(l.id):s.add(l.id)),s})},fe=()=>c(new Set(j.map(t=>t.id))),ge=()=>{c(new Set),g(new Set)},S=v.useMemo(()=>j.filter(t=>f.has(t.id)),[j,f]),J=v.useMemo(()=>({endDay:O?String(a.getDate()).padStart(2,"0"):String(new Date(i,m+1,0).getDate()).padStart(2,"0")}),[i,m,O]),n=v.useMemo(()=>{if(S.length===0)return null;const t=`01 a ${J.endDay} de ${G[m]} de ${i}`,o=`${G[m]} de ${i}`,p=new Date,u=A(`${p.getFullYear()}-${String(p.getMonth()+1).padStart(2,"0")}-${String(p.getDate()).padStart(2,"0")}`),s=`${i}-${String(m+1).padStart(2,"0")}`,l=S.filter(b=>b.category==="tarefa"),w=S.filter(b=>b.category==="reuniao"),C=S.filter(b=>b.category==="subtarefa"),F=S.length,z=S.filter(b=>b.statusKind==="done").length,B=S.filter(b=>b.statusKind==="wip").length,Ne=S.filter(b=>b.statusKind==="sched").length,ye=S.filter(b=>h.has(b.id)).map(b=>({titulo:b.tituloClean,projeto:b.projeto,impacto:Ye(b.observacoes),statusLabel:b.statusLabel,statusKind:b.statusKind}));return{tarefas:l,reunioes:w,subtarefas:C,periodoTxt:t,mesAno:o,geradoEm:u,reportId:s,total:F,concluidas:z,emAndamento:B,agendado:Ne,destaques:ye}},[S,h,J,m,i]),U=v.useCallback(()=>{if(!r.current)return;const t=window.open("","_blank");if(!t)return;const o=r.current.innerHTML,u=Array.from(document.querySelectorAll('style, link[rel="stylesheet"]')).map(s=>s.outerHTML).join(`
`);t.document.write(`
      <!DOCTYPE html><html lang="pt-br"><head><meta charset="UTF-8">
      <title>Relatório Executivo – ${(n==null?void 0:n.mesAno)||""}</title>
      ${u}
      <style>
        @page { size: A4; margin: 12mm; }
        * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        body { margin: 0; padding: 0; background: white; }
        .page-break { page-break-before: always; break-before: page; }
      </style>
      </head><body>
      <div class="bg-white text-slate-900 p-6 sm:p-8 max-w-[680px] mx-auto">${o}</div>
      </body></html>
    `),t.document.close(),setTimeout(()=>t.print(),500)},[n]);if(xe)return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Y,{className:"h-8 w-48"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:[1,2,3,4].map(t=>e.jsx(Y,{className:"h-20"},t))}),e.jsx(Y,{className:"h-64"})]});const je={tarefa:j.filter(t=>t.category==="tarefa").length,reuniao:j.filter(t=>t.category==="reuniao").length,subtarefa:j.filter(t=>t.category==="subtarefa").length},ve={tarefa:j.filter(t=>t.category==="tarefa"&&f.has(t.id)).length,reuniao:j.filter(t=>t.category==="reuniao"&&f.has(t.id)).length,subtarefa:j.filter(t=>t.category==="subtarefa"&&f.has(t.id)).length},R=!n||n.total===0;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:ue,children:e.jsx(Te,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(X,{value:String(m),onValueChange:t=>{x(Number(t)),N(null)},children:[e.jsx(ee,{className:"w-[130px] h-8 text-xs capitalize",children:e.jsx(te,{})}),e.jsx(se,{children:G.map((t,o)=>e.jsx(ae,{value:String(o),className:"capitalize",children:t},o))})]}),e.jsxs(X,{value:String(i),onValueChange:t=>{d(Number(t)),N(null)},children:[e.jsx(ee,{className:"w-[80px] h-8 text-xs",children:e.jsx(te,{})}),e.jsx(se,{children:Array.from({length:5},(t,o)=>a.getFullYear()-o).map(t=>e.jsx(ae,{value:String(t),children:t},t))})]})]}),e.jsx(I,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:pe,disabled:O,children:e.jsx(Ae,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(I,{variant:"outline",size:"sm",className:"text-xs gap-1.5",onClick:fe,children:[e.jsx(Be,{className:"w-3.5 h-3.5"})," Todos"]}),e.jsxs(I,{variant:"outline",size:"sm",className:"text-xs gap-1.5",onClick:ge,children:[e.jsx(ze,{className:"w-3.5 h-3.5"})," Nenhum"]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:U,className:"gap-1.5 text-xs",disabled:R,children:[e.jsx(Re,{className:"w-3.5 h-3.5"})," PDF"]}),e.jsxs(I,{variant:"outline",size:"sm",disabled:R,onClick:U,className:"gap-1.5 text-xs",children:[e.jsx(Fe,{className:"w-3.5 h-3.5"})," Imprimir"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[380px_1fr] gap-4",children:[e.jsx("div",{className:"space-y-3 max-h-[calc(100vh-220px)] overflow-y-auto pr-1",children:j.length===0?e.jsx(P,{children:e.jsx(H,{className:"p-6 text-center text-muted-foreground",children:e.jsx("p",{className:"text-sm",children:"Nenhum item BOSI encontrado."})})}):[{cat:"tarefa",label:"Tarefas",icon:de},{cat:"reuniao",label:"Reuniões / Agenda",icon:Ce},{cat:"subtarefa",label:"Subtarefas",icon:ce}].map(({cat:t,label:o,icon:p})=>{const u=j.filter(l=>l.category===t);if(u.length===0)return null;const s=u.every(l=>f.has(l.id));return e.jsx(P,{children:e.jsxs(H,{className:"p-0",children:[e.jsxs("button",{onClick:()=>be(t),className:"w-full flex items-center gap-3 px-4 py-2.5 border-b border-border hover:bg-muted/30 transition-colors",children:[e.jsx(re,{checked:s,className:"pointer-events-none"}),e.jsx(p,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold flex-1 text-left",children:o}),e.jsxs(Le,{variant:"secondary",className:"text-xs",children:[ve[t],"/",je[t]]})]}),e.jsx("div",{className:"divide-y divide-border",children:u.map(l=>{const w=f.has(l.id),C=h.has(l.id);return e.jsxs("div",{className:_("flex items-start gap-2 px-3 py-2 transition-colors hover:bg-muted/20",!w&&"opacity-40"),children:[e.jsx("button",{onClick:()=>W(l.id),className:"mt-0.5 shrink-0",children:e.jsx(re,{checked:w,className:"pointer-events-none"})}),e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>W(l.id),children:[e.jsx("p",{className:"text-xs font-semibold truncate",children:l.tituloClean}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap",children:[l.deadline&&e.jsx("span",{className:"text-[10px] text-muted-foreground",children:A(l.deadline)}),l.extra&&e.jsx("span",{className:"text-[10px] text-muted-foreground",children:l.extra})]})]}),w&&e.jsx("button",{onClick:()=>he(l.id),className:_("mt-0.5 shrink-0 p-0.5 rounded transition-colors",C?"text-amber-500":"text-muted-foreground/40 hover:text-amber-400"),title:C?"Remover do destaque estratégico":"Marcar como destaque estratégico",children:C?e.jsx(Ee,{className:"w-3.5 h-3.5 fill-current"}):e.jsx(Ke,{className:"w-3.5 h-3.5"})}),e.jsx(T,{label:l.statusLabel,kind:l.statusKind})]},l.id)})})]})},t)})}),e.jsx(P,{className:"overflow-hidden",children:e.jsx(H,{className:"p-0 max-h-[calc(100vh-220px)] overflow-y-auto",children:R?e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:e.jsx("p",{className:"text-sm font-medium",children:"Selecione itens à esquerda para gerar o relatório."})}):e.jsxs("div",{ref:r,className:"bg-white text-slate-900 p-6 sm:p-8 max-w-[680px] mx-auto",children:[e.jsxs("div",{className:"report-header pb-3 mb-4 border-b-2 border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/logo-horizontal_transparent.png",alt:"Mariana Lima Advocacia",style:{maxHeight:70}}),e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/bosi_logo.png",alt:"BOSI",style:{maxHeight:34}})]}),e.jsxs("h1",{className:"text-lg font-extrabold text-slate-900",children:["Atuação jurídica do período – ",n.mesAno]}),e.jsxs("p",{className:"subtitle text-xs text-slate-500 mt-1",children:["Período: ",n.periodoTxt]})]}),e.jsxs("div",{className:"kpi-grid grid grid-cols-2 sm:grid-cols-4 gap-2.5 mb-5",children:[e.jsx(E,{label:"Total",value:n.total,kind:"other"}),e.jsx(E,{label:"Concluídas",value:n.concluidas,kind:"done"}),e.jsx(E,{label:"Em andamento",value:n.emAndamento,kind:"wip"}),e.jsx(E,{label:"Agendadas",value:n.agendado,kind:"sched"})]}),n.destaques.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsx("h2",{className:"section-title text-sm font-extrabold text-slate-900 mb-2 pb-1 border-b border-slate-200",children:"Destaques estratégicos"}),e.jsx("div",{className:"space-y-2",children:n.destaques.map((t,o)=>e.jsxs("div",{className:"flex items-start justify-between gap-3 py-2 border-b border-slate-100 last:border-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs font-extrabold text-slate-900",children:[t.titulo,t.projeto&&e.jsxs("span",{className:"text-slate-500 font-bold",children:[" · ",t.projeto]})]}),e.jsx("p",{className:"text-xs text-slate-600 font-semibold mt-0.5 leading-snug",children:t.impacto||"Atualização registrada no período."})]}),e.jsx(T,{label:t.statusLabel,kind:t.statusKind})]},o))})]}),n.tarefas.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("h2",{className:"section-title text-sm font-extrabold text-slate-900 mb-2 pb-1 border-b border-slate-200",children:["Tarefas (",n.tarefas.length,")"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4",children:[e.jsx($,{title:"Concluídas",kind:"done",tasks:n.tarefas.filter(t=>t.statusKind==="done")}),e.jsx($,{title:"Em andamento",kind:"wip",tasks:n.tarefas.filter(t=>t.statusKind==="wip")}),e.jsx($,{title:"Agendadas",kind:"sched",tasks:n.tarefas.filter(t=>t.statusKind==="sched")}),e.jsx($,{title:"Outras",kind:"other",tasks:n.tarefas.filter(t=>t.statusKind==="other")})]})]}),n.reunioes.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("h2",{className:"section-title text-sm font-extrabold text-slate-900 mb-2 pb-1 border-b border-slate-200",children:["Reuniões e compromissos (",n.reunioes.length,")"]}),e.jsx("div",{className:"space-y-0",children:n.reunioes.map((t,o)=>e.jsxs("div",{className:"flex items-start justify-between gap-2 py-1.5 border-b border-slate-100 last:border-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[11px] font-bold text-slate-900 leading-tight",children:t.tituloClean}),t.extra&&e.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5",children:t.extra}),t.deadline&&e.jsx("p",{className:"text-[10px] text-slate-500",children:A(t.deadline)})]}),e.jsx(T,{label:t.statusLabel,kind:t.statusKind})]},o))})]}),n.subtarefas.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("h2",{className:"section-title text-sm font-extrabold text-slate-900 mb-2 pb-1 border-b border-slate-200",children:["Subtarefas (",n.subtarefas.length,")"]}),e.jsx("div",{className:"space-y-0",children:n.subtarefas.map((t,o)=>e.jsxs("div",{className:"flex items-start justify-between gap-2 py-1.5 border-b border-slate-100 last:border-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[11px] font-bold text-slate-900 leading-tight",children:t.tituloClean}),t.extra&&e.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5",children:t.extra}),t.deadline&&e.jsx("p",{className:"text-[10px] text-slate-500",children:A(t.deadline)})]}),e.jsx(T,{label:t.statusLabel,kind:t.statusKind})]},o))})]}),n.tarefas.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"page-break"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-center py-4 mb-4 bg-slate-50 rounded-lg",children:[e.jsx("h2",{className:"text-base font-extrabold text-slate-900",children:"Detalhamento das Tarefas"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Resumo técnico e jurídico de cada frente acompanhada em ",e.jsx("strong",{children:n.mesAno}),"."]})]}),e.jsx("div",{className:"space-y-0",children:n.tarefas.map((t,o)=>e.jsxs("div",{className:"task-detail py-3 border-b border-slate-100 last:border-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("p",{className:"task-title text-xs font-extrabold text-slate-900",children:[o+1,". ",t.tituloClean,t.projeto&&e.jsxs("span",{className:"task-projeto text-slate-500 font-bold",children:[" · ",t.projeto]})]}),e.jsx(T,{label:t.statusLabel,kind:t.statusKind})]}),t.deadline&&e.jsxs("p",{className:"text-[11px] text-slate-600 font-semibold mt-1",children:["Prazo: ",A(t.deadline)]}),e.jsx("div",{className:"task-obs mt-2",children:Ve(t.observacoes)})]},o))})]})]}),e.jsxs("div",{className:"footer mt-6 pt-3 border-t-2 border-slate-200",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-extrabold text-slate-700",children:"Mariana Lima Advocacia"}),e.jsxs("p",{className:"text-[11px] text-slate-500 mt-1",children:["Telefone: (31) 99404-8797",e.jsx("br",{}),"E-mail: contato@marianalima.adv.br",e.jsx("br",{}),"Rua Hugo Santos Silva, nº 100 – Centro, Sete Lagoas – MG"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/logo-horizontal_transparent.png",alt:"Mariana Lima Advocacia",style:{maxHeight:70,marginLeft:"auto"},className:"mb-2"}),e.jsxs("p",{className:"text-[10px] text-slate-400",children:["Gerado em: ",n.geradoEm]}),e.jsxs("p",{className:"text-[10px] text-slate-400",children:["Relatório #",n.reportId]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-slate-100",children:[e.jsx("p",{className:"text-[10px] text-slate-400 italic",children:"Este relatório é confidencial e destinado exclusivamente ao destinatário."}),e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/bosi_logo.png",alt:"BOSI",style:{maxHeight:28}})]})]})]})})})]})]})}function E({label:r,value:a,kind:i}){const d={done:"bg-green-50 border-green-200 text-green-900",wip:"bg-amber-50 border-amber-200 text-amber-900",sched:"bg-orange-50 border-orange-200 text-orange-900",other:"bg-slate-50 border-slate-200 text-slate-900"};return e.jsxs("div",{className:_("kpi-card rounded-lg border p-3",d[i]),children:[e.jsx("p",{className:"value text-2xl font-black leading-none",children:a}),e.jsx("p",{className:"label text-[10px] font-bold uppercase tracking-wide mt-1.5",children:r})]})}function T({label:r,kind:a}){return e.jsx("span",{className:_("badge inline-block px-2 py-0.5 rounded-full text-[10px] font-bold border shrink-0 whitespace-nowrap",me[a]),children:r})}function $({title:r,kind:a,tasks:i}){return i.length===0?null:e.jsxs("div",{className:"mb-3 break-inside-avoid",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 pb-1",children:[e.jsx("p",{className:"text-xs font-extrabold text-slate-900",children:r}),e.jsx("span",{className:_("badge inline-block px-1.5 py-0 rounded-full text-[10px] font-black border",me[a]),children:i.length})]}),e.jsx("div",{className:"border-t border-slate-100",children:i.map((d,m)=>e.jsxs("div",{className:"flex items-center justify-between gap-2 py-1 border-b border-slate-50 last:border-0",children:[e.jsxs("p",{className:"text-[11px] font-bold text-slate-900 leading-tight flex-1 min-w-0",children:[d.tituloClean,d.projeto&&e.jsxs("span",{className:"text-slate-500 font-bold",children:[" · ",d.projeto]})]}),e.jsx(T,{label:d.statusLabel,kind:d.statusKind})]},m))})]})}const M="bosi",L="rec7FQdbM5wF0R5RW",Je=[{id:"visao_geral",label:"Visão Geral",icon:De},{id:"agenda",label:"Agenda",icon:Oe},{id:"tarefas",label:"Tarefas",icon:de},{id:"subtarefas",label:"Subtarefas",icon:ce},{id:"relatorio",label:"Relatório",icon:qe}];function js(){const{events:r,loading:a}=Se(),{tasks:i,loading:d}=ke(),m=a||d,[x,f]=v.useState("visao_geral"),c=v.useMemo(()=>{const h=r.filter(N=>{var k;return((k=N.client)==null?void 0:k.toLowerCase().includes(M))||N.projectId===L}),g=i.filter(N=>{var k;return((k=N.client)==null?void 0:k.toLowerCase().includes(M))||N.projectId===L}),y=g.flatMap(N=>N.subtasks);return{visao_geral:0,agenda:h.length,tarefas:g.length,subtarefas:y.length,relatorio:0}},[r,i]);return m?e.jsxs("div",{className:"space-y-6 pb-20 md:pb-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-primary/10 border border-primary/20",children:e.jsx(ie,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"BOSI Empreendimentos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Painel exclusivo do cliente"})]})]}),e.jsx(Ie,{}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(Z,{}),e.jsx(Z,{})]})]}):e.jsxs(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6 pb-20 md:pb-0",children:[e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-primary/10 border border-primary/20",children:e.jsx(ie,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"BOSI Empreendimentos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Painel exclusivo do cliente"})]})]})}),e.jsx("div",{className:"flex items-center gap-1 rounded-2xl border border-border bg-muted/40 p-1 w-fit backdrop-blur-sm overflow-x-auto",children:Je.map(h=>{const g=x===h.id,y=h.icon;return e.jsxs("button",{onClick:()=>f(h.id),className:_("relative flex items-center gap-2 rounded-xl px-5 py-2.5 text-sm font-medium transition-all duration-200 whitespace-nowrap",g?"text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-background/50"),children:[g&&e.jsx(K.div,{layoutId:"bosi-tab-bg",className:"absolute inset-0 rounded-xl gold-gradient shadow-sm",transition:{type:"spring",bounce:.15,duration:.5}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4"}),h.label,c[h.id]>0&&e.jsx("span",{className:_("inline-flex items-center justify-center rounded-full px-2 py-0.5 text-[10px] font-semibold tabular-nums min-w-[22px] transition-colors",g?"bg-primary-foreground/20 text-primary-foreground":"bg-secondary text-muted-foreground"),children:c[h.id]})]})]},h.id)})}),e.jsxs(K.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.2},children:[x==="visao_geral"&&e.jsx(_e,{projectId:L,clientFilter:M,tasks:i,events:r}),x==="agenda"&&e.jsx($e,{projectId:L,clientFilter:M,hideHeader:!0}),x==="tarefas"&&e.jsx(le,{projectId:L,clientNameFilter:M,hideHeader:!0,forceTab:"tarefas"}),x==="subtarefas"&&e.jsx(le,{projectId:L,clientNameFilter:M,hideHeader:!0,forceTab:"subtarefas"}),x==="relatorio"&&e.jsx(We,{})]},x)]})}export{js as default};
