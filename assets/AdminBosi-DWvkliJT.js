import{c as X,r as v,j as e,e as $,s as ge,m as L}from"./index-BQQTb6fi.js";import{u as fe,a as je}from"./crmTypes-CAMEoS1a.js";import{P as ve}from"./ProjectOverview-DiknASL7.js";import{B as Ne,a as q}from"./CrmSkeletons-BHdwdsjS.js";import{u as ye}from"./useQuery-CnOz2Hdf.js";import{B as C}from"./button-BYLOxE-2.js";import{C as K,c as H}from"./card-aso8O70y.js";import{S as F}from"./skeleton-C2gBzZvw.js";import{S as R,a as P,b as D,c as V,d as G}from"./select-DQAAOv5a.js";import{C as we}from"./chevron-left-zBvI7mwG.js";import{C as ke}from"./chevron-right-CI2J5RP5.js";import{E as Se}from"./tabs-BCef0ozh.js";import Ce from"./AdminAgenda-V0DmOsZ2.js";import{A as Q,L as Me}from"./AdminTarefas-Whim16ZE.js";import{B as U}from"./building-2-ChG9pH2U.js";import{C as $e}from"./chart-column-BQbn5kl8.js";import{C as Ae}from"./calendar-DF_IPi4K.js";import{C as Te}from"./clipboard-list-PlZO_TCQ.js";import{F as Be}from"./file-text-LQDXvIUg.js";import"./badge-AZvcS7pt.js";import"./TipTapEditor-CIWz2ATn.js";import"./index-Bu4-nO3Z.js";import"./dropdown-menu-Dd49uv-w.js";import"./index-7lbmCfx5.js";import"./index-DPfA20xD.js";import"./index-Q1Bk4gfk.js";import"./check-DkMO6O-V.js";import"./input-CE2c-gnk.js";import"./link-B45bLZfa.js";import"./loader-circle-xgMqgjFX.js";import"./list-CanTGTbl.js";import"./quote-CnlEkBNF.js";import"./trash-2-BJDwYsZn.js";import"./triangle-alert-CWbUnMF-.js";import"./clock-BDyA_6pe.js";import"./list-todo-DJ8gBY1U.js";import"./index-h0b3EOcB.js";import"./chevron-up-B-WZdaNo.js";import"./scroll-area-Dgk5itjZ.js";import"./alert-dialog-ChmPdjXe.js";import"./index-DejfxgUV.js";import"./AgendaEventSheet-Co20nqEN.js";import"./form-hJojq2nQ.js";import"./label-ULu1cug-.js";import"./sheet-4Od2LD5-.js";import"./textarea-DR-tS-F2.js";import"./useCrmFieldOptions-C6JGyQjT.js";import"./useMutation-BxR0bf9s.js";import"./ClientSelect-lI4Gz5nG.js";import"./popover-BKmSsf8O.js";import"./search-CUmnT7KL.js";import"./types-C9wiu8_K.js";import"./users-Dr_w_yN6.js";import"./map-pin-Bw4B_YQF.js";import"./pencil-CSW1l7Ok.js";import"./formatters-Bj0D2YiU.js";import"./download-rvRVf5jd.js";import"./dialog-BFbvaQ4H.js";import"./TarefaSheet-CFzUDMan.js";import"./separator-iHZbXC_6.js";import"./ProcessosList-CljVwuyv.js";import"./scale-IyStsT_j.js";import"./user-BUfEaEVo.js";import"./circle-check-DIlz5WY7.js";import"./switch-tQgrs0vF.js";import"./folder-kanban-CPklJxXh.js";import"./filter-XozgcQzK.js";import"./circle-x-D_AeKXof.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=X("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=X("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),Fe=a=>ge.from(a),M=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"];function ee(a){if(!a)return"";const s=String(a).slice(0,10);return/^\d{4}-\d{2}-\d{2}$/.test(s)?s:""}function W(a){const s=ee(a);return s?`${s.slice(8,10)}/${s.slice(5,7)}/${s.slice(0,4)}`:String(a||"")}function Z(a){if(typeof a=="boolean")return a;if(typeof a=="number")return a!==0;const s=String(a??"").trim().toLowerCase();return["true","yes","sim","1","checked","on","x"].includes(s)}function J(a){return ee(a.Date)}function _e(a){const s=String(a||"").trim().toLowerCase();return s.includes("conclu")||s.includes("finaliz")||s.includes("encerrad")?{label:"Concluído",kind:"done",order:0}:s.includes("andamento")||s.includes("trâmite")||s.includes("tramite")||s.includes("process")?{label:s.includes("trâmite")||s.includes("tramite")?"Em trâmite":"Em andamento",kind:"wip",order:1}:s.includes("agend")?{label:"Agendado",kind:"sched",order:2}:{label:a||"—",kind:"other",order:3}}function Ie(a){const s=a.match(/\s*\(([^)]+)\)\s*$/);return s?{titulo:a.replace(/\s*\(([^)]+)\)\s*$/,"").trim(),projeto:s[1].trim()}:{titulo:a,projeto:""}}function ze(a){if(!a)return"";const s=String(a).split(/\r?\n/).map(n=>n.trim()).filter(Boolean);for(let n of s){n=n.replace(/^#{1,6}\s+/,"").replace(/^\d+\)\s+/,"").replace(/^(-|•|o)\s+/i,"");const o=n.replace(/\*\*(.+?)\*\*/g,"$1").replace(/[_`]+/g,"").replace(/\s+/g," ").trim();if(o)return o.length>140?o.slice(0,137).trim()+"...":o}return""}function Oe(a){if(!a)return e.jsx("span",{className:"text-muted-foreground text-xs italic",children:"Sem observações registradas."});const s=String(a).split(/\r?\n/).map(x=>x.trim()).filter(Boolean),n=[];let o=[],m=0;const d=x=>x.split(/\*\*(.+?)\*\*/g).map((p,h)=>h%2===1?e.jsx("strong",{children:p},h):p),u=()=>{o.length&&(n.push(e.jsx("ul",{className:"list-disc list-inside space-y-0.5 text-xs leading-relaxed ml-2",children:o.map((x,c)=>e.jsx("li",{children:d(x)},c))},m++)),o=[])};for(const x of s){const c=x.match(/^#{1,6}\s+(.+)$/);if(c){u(),n.push(e.jsx("p",{className:"text-xs font-bold mt-2 mb-1",children:d(c[1])},m++));continue}const p=x.match(/^(\d+)\)\s+(.+)$/);if(p){u(),n.push(e.jsxs("p",{className:"text-xs font-bold mt-2 mb-1",children:[p[1],") ",d(p[2])]},m++));continue}const h=x.match(/^\*\*(.+?)\*\*:?$/);if(h){u(),n.push(e.jsx("p",{className:"text-xs font-bold mt-2 mb-1",children:d(h[1])},m++));continue}if(/^(-|•|o)\s+/i.test(x)){o.push(x.replace(/^(-|•|o)\s+/i,""));continue}u(),n.push(e.jsx("p",{className:"text-xs leading-relaxed",children:d(x)},m++))}return u(),e.jsx(e.Fragment,{children:n})}const te={done:"bg-green-100 text-green-800 border-green-200",wip:"bg-amber-100 text-amber-800 border-amber-200",sched:"bg-orange-100 text-orange-700 border-orange-200",other:"bg-muted text-muted-foreground border-border"};async function Ye(){const{data:a,error:s}=await Fe("mladv_crm_tarefas").select("titulo, status, deadline, descricao, raw_fields").ilike("cliente","%bosi%");if(s)throw s;return a||[]}function qe(){const a=v.useRef(null),s=new Date,[n,o]=v.useState(s.getFullYear()),[m,d]=v.useState(s.getMonth()),{data:u,isLoading:x}=ye({queryKey:["crm","bosi-report"],queryFn:Ye}),c=v.useMemo(()=>{if(!u)return[];const t=new Set;return u.forEach(l=>{const N=l.raw_fields||{};if(!Z(N.Bosi))return;const g=J(N);if(!g)return;const y=Number(g.slice(0,4)),j=Number(g.slice(5,7))-1;t.add(`${y}-${String(j).padStart(2,"0")}`)}),Array.from(t).sort().reverse()},[u]),p=()=>{m===0?(d(11),o(t=>t-1)):d(t=>t-1)},h=()=>{m===11?(d(0),o(t=>t+1)):d(t=>t+1)},b=n===s.getFullYear()&&m===s.getMonth(),r=v.useMemo(()=>{if(!u)return null;const t=n,l=m,N=`${t}-${String(l+1).padStart(2,"0")}-01`;let g;if(b){const i=new Date;g=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`}else{const i=new Date(t,l+1,0).getDate();g=`${t}-${String(l+1).padStart(2,"0")}-${String(i).padStart(2,"0")}`}const y=u.filter(i=>{const f=i.raw_fields||{};if(!Z(f.Bosi))return!1;const S=J(f);return S?S>=N&&S<=g:!1});if(y.length===0)return null;const j=y.filter(i=>i.titulo&&i.titulo.toLowerCase()!=="tarefa sem nome").map(i=>{var Y;const f=_e(i.status),S=((Y=i.raw_fields)==null?void 0:Y.Observações)||i.descricao||null,{titulo:he,projeto:be}=Ie(i.titulo);return{titulo:i.titulo,observacoes:S,deadline:i.deadline,statusLabel:f.label,statusKind:f.kind,statusOrder:f.order,projeto:be,tituloClean:he}}).sort((i,f)=>i.statusOrder!==f.statusOrder?i.statusOrder-f.statusOrder:i.tituloClean.localeCompare(f.tituloClean,"pt-BR")),de=`01 a ${g.slice(8,10)} de ${M[l]} de ${t}`,ce=j.length,me=j.filter(i=>i.statusKind==="done").length,xe=j.filter(i=>i.statusKind==="wip").length,pe=j.filter(i=>i.statusKind==="sched").length,ue=j.filter(i=>i.observacoes).slice(0,3).map(i=>({titulo:i.tituloClean,projeto:i.projeto,impacto:ze(i.observacoes),statusLabel:i.statusLabel,statusKind:i.statusKind})),E=new Date;return{tasks:j,periodoTxt:de,mesAno:`${M[l]} de ${t}`,geradoEm:W(`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}-${String(E.getDate()).padStart(2,"0")}`),reportId:`${t}-${String(l+1).padStart(2,"0")}`,total:ce,concluidas:me,emAndamento:xe,agendado:pe,destaques:ue}},[u,n,m,b]),I=v.useCallback(()=>{if(!a.current)return;const t=window.open("","_blank");if(!t)return;const l=a.current.innerHTML,g=Array.from(document.querySelectorAll('style, link[rel="stylesheet"]')).map(y=>y.outerHTML).join(`
`);t.document.write(`
      <!DOCTYPE html>
      <html lang="pt-br">
      <head>
        <meta charset="UTF-8">
        <title>Relatório Executivo – ${(r==null?void 0:r.mesAno)||""}</title>
        ${g}
        <style>
          @page { size: A4; margin: 12mm; }
          * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
          body { margin: 0; padding: 0; background: white; }
          .page-break { page-break-before: always; break-before: page; }
          @media print { body { padding: 0; } }
        </style>
      </head>
      <body>
        <div class="bg-white text-slate-900 p-6 sm:p-8 max-w-[680px] mx-auto">${l}</div>
      </body>
      </html>
    `),t.document.close(),setTimeout(()=>{t.print()},500)},[r]);if(x)return e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{className:"h-8 w-48"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:[1,2,3,4].map(t=>e.jsx(F,{className:"h-20"},t))}),e.jsx(F,{className:"h-64"})]});const B=!r||r.total===0,k=(r==null?void 0:r.tasks)??[],se=(r==null?void 0:r.periodoTxt)??"",z=(r==null?void 0:r.mesAno)??"",ae=(r==null?void 0:r.geradoEm)??"",re=(r==null?void 0:r.reportId)??"",ie=(r==null?void 0:r.total)??0,ne=(r==null?void 0:r.concluidas)??0,oe=(r==null?void 0:r.emAndamento)??0,le=(r==null?void 0:r.agendado)??0,O=(r==null?void 0:r.destaques)??[];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:p,children:e.jsx(we,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{value:String(m),onValueChange:t=>d(Number(t)),children:[e.jsx(P,{className:"w-[130px] h-8 text-xs capitalize",children:e.jsx(D,{})}),e.jsx(V,{children:M.map((t,l)=>e.jsx(G,{value:String(l),className:"capitalize",children:t},l))})]}),e.jsxs(R,{value:String(n),onValueChange:t=>o(Number(t)),children:[e.jsx(P,{className:"w-[80px] h-8 text-xs",children:e.jsx(D,{})}),e.jsx(V,{children:Array.from({length:5},(t,l)=>s.getFullYear()-l).map(t=>e.jsx(G,{value:String(t),children:t},t))})]})]}),e.jsx(C,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:h,disabled:b,children:e.jsx(ke,{className:"w-4 h-4"})}),!b&&e.jsx(C,{variant:"outline",size:"sm",className:"text-xs h-8",onClick:()=>{o(s.getFullYear()),d(s.getMonth())},children:"Mês atual"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(C,{variant:"outline",size:"sm",onClick:I,className:"gap-1.5",disabled:B,children:[e.jsx(Ee,{className:"w-3.5 h-3.5"}),"Exportar PDF"]}),e.jsxs(C,{variant:"outline",size:"sm",disabled:B,onClick:I,className:"gap-1.5",children:[e.jsx(Le,{className:"w-3.5 h-3.5"}),"Imprimir"]})]})]}),B?e.jsx(K,{children:e.jsxs(H,{className:"p-8 text-center text-muted-foreground",children:[e.jsx(Se,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsxs("p",{className:"text-sm font-medium",children:["Nenhuma tarefa BOSI encontrada para ",M[m]," de ",n,"."]}),e.jsx("p",{className:"text-xs mt-1",children:'Verifique se as tarefas possuem o campo "Bosi" marcado e "Date" preenchido.'}),c.length>0&&e.jsxs("p",{className:"text-xs mt-2 text-muted-foreground",children:["Meses com dados: ",c.slice(0,6).map(t=>{const[l,N]=t.split("-");return`${M[Number(N)]}/${l}`}).join(", ")]})]})}):e.jsx(e.Fragment,{children:e.jsx(K,{className:"overflow-hidden",children:e.jsx(H,{className:"p-0",children:e.jsxs("div",{ref:a,className:"bg-white text-slate-900 p-6 sm:p-8 max-w-[680px] mx-auto",children:[e.jsxs("div",{className:"report-header pb-3 mb-4 border-b-2 border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/logo-horizontal_transparent.png",alt:"Mariana Lima Advocacia",style:{maxHeight:70}}),e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/bosi_logo.png",alt:"BOSI",style:{maxHeight:34}})]}),e.jsxs("h1",{className:"text-lg font-extrabold text-slate-900",children:["Atuação jurídica do período – ",z]}),e.jsxs("p",{className:"subtitle text-xs text-slate-500 mt-1",children:["Período: ",se]})]}),e.jsxs("div",{className:"kpi-grid grid grid-cols-2 sm:grid-cols-4 gap-2.5 mb-5",children:[e.jsx(A,{label:"Total",value:ie,kind:"other"}),e.jsx(A,{label:"Concluídas",value:ne,kind:"done"}),e.jsx(A,{label:"Em andamento",value:oe,kind:"wip"}),e.jsx(A,{label:"Agendadas",value:le,kind:"sched"})]}),O.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsx("h2",{className:"section-title text-sm font-extrabold text-slate-900 mb-2 pb-1 border-b border-slate-200",children:"Destaques estratégicos"}),e.jsx("div",{className:"space-y-2",children:O.map((t,l)=>e.jsxs("div",{className:"flex items-start justify-between gap-3 py-2 border-b border-slate-100 last:border-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs font-extrabold text-slate-900",children:[t.titulo,t.projeto&&e.jsxs("span",{className:"text-slate-500 font-bold",children:[" · ",t.projeto]})]}),e.jsx("p",{className:"text-xs text-slate-600 font-semibold mt-0.5 leading-snug",children:t.impacto||"Atualização registrada no período."})]}),e.jsx(_,{label:t.statusLabel,kind:t.statusKind})]},l))})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("h2",{className:"section-title text-sm font-extrabold text-slate-900 mb-2 pb-1 border-b border-slate-200",children:"Frentes acompanhadas"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4",children:[e.jsx(T,{title:"Concluídas",kind:"done",tasks:k.filter(t=>t.statusKind==="done")}),e.jsx(T,{title:"Em andamento / Em trâmite",kind:"wip",tasks:k.filter(t=>t.statusKind==="wip")}),e.jsx(T,{title:"Agendadas",kind:"sched",tasks:k.filter(t=>t.statusKind==="sched")}),e.jsx(T,{title:"Outras",kind:"other",tasks:k.filter(t=>t.statusKind==="other")})]})]}),e.jsx("div",{className:"page-break"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-center py-4 mb-4 bg-slate-50 rounded-lg",children:[e.jsx("h2",{className:"text-base font-extrabold text-slate-900",children:"Detalhamento das Tarefas"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Resumo técnico e jurídico de cada frente acompanhada em ",e.jsx("strong",{children:z}),"."]})]}),e.jsx("div",{className:"space-y-0",children:k.map((t,l)=>e.jsxs("div",{className:"task-detail py-3 border-b border-slate-100 last:border-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("p",{className:"task-title text-xs font-extrabold text-slate-900",children:[l+1,". ",t.tituloClean,t.projeto&&e.jsxs("span",{className:"task-projeto text-slate-500 font-bold",children:[" · ",t.projeto]})]}),e.jsx(_,{label:t.statusLabel,kind:t.statusKind})]}),t.deadline&&e.jsxs("p",{className:"text-[11px] text-slate-600 font-semibold mt-1",children:["Prazo: ",W(t.deadline)]}),e.jsx("div",{className:"task-obs mt-2",children:Oe(t.observacoes)})]},l))})]}),e.jsxs("div",{className:"footer mt-6 pt-3 border-t-2 border-slate-200",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-extrabold text-slate-700",children:"Mariana Lima Advocacia"}),e.jsxs("p",{className:"text-[11px] text-slate-500 mt-1",children:["Telefone: (31) 99404-8797",e.jsx("br",{}),"E-mail: contato@marianalima.adv.br",e.jsx("br",{}),"Rua Hugo Santos Silva, nº 100 – Centro, Sete Lagoas – MG"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/logo-horizontal_transparent.png",alt:"Mariana Lima Advocacia",style:{maxHeight:70,marginLeft:"auto"},className:"mb-2"}),e.jsxs("p",{className:"text-[10px] text-slate-400",children:["Gerado em: ",ae]}),e.jsxs("p",{className:"text-[10px] text-slate-400",children:["Relatório #",re]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-slate-100",children:[e.jsx("p",{className:"text-[10px] text-slate-400 italic",children:"Este relatório é confidencial e destinado exclusivamente ao destinatário."}),e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/bosi_logo.png",alt:"BOSI",style:{maxHeight:28}})]})]})]})})})})]})}function A({label:a,value:s,kind:n}){const o={done:"bg-green-50 border-green-200 text-green-900",wip:"bg-amber-50 border-amber-200 text-amber-900",sched:"bg-orange-50 border-orange-200 text-orange-900",other:"bg-slate-50 border-slate-200 text-slate-900"};return e.jsxs("div",{className:$("kpi-card rounded-lg border p-3",o[n]),children:[e.jsx("p",{className:"value text-2xl font-black leading-none",children:s}),e.jsx("p",{className:"label text-[10px] font-bold uppercase tracking-wide mt-1.5",children:a})]})}function _({label:a,kind:s}){return e.jsx("span",{className:$("badge inline-block px-2 py-0.5 rounded-full text-[10px] font-bold border shrink-0 whitespace-nowrap",te[s]),children:a})}function T({title:a,kind:s,tasks:n}){return n.length===0?null:e.jsxs("div",{className:"mb-3 break-inside-avoid",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 pb-1",children:[e.jsx("p",{className:"text-xs font-extrabold text-slate-900",children:a}),e.jsx("span",{className:$("badge inline-block px-1.5 py-0 rounded-full text-[10px] font-black border",te[s]),children:n.length})]}),e.jsx("div",{className:"border-t border-slate-100",children:n.map((o,m)=>e.jsxs("div",{className:"flex items-center justify-between gap-2 py-1 border-b border-slate-50 last:border-0",children:[e.jsxs("p",{className:"text-[11px] font-bold text-slate-900 leading-tight flex-1 min-w-0",children:[o.tituloClean,o.projeto&&e.jsxs("span",{className:"text-slate-500 font-bold",children:[" · ",o.projeto]})]}),e.jsx(_,{label:o.statusLabel,kind:o.statusKind})]},m))})]})}const w="bosi",Ke=[{id:"visao_geral",label:"Visão Geral",icon:$e},{id:"agenda",label:"Agenda",icon:Ae},{id:"tarefas",label:"Tarefas",icon:Te},{id:"subtarefas",label:"Subtarefas",icon:Me},{id:"relatorio",label:"Relatório",icon:Be}];function as(){const{events:a,loading:s}=fe(),{tasks:n,loading:o}=je(),m=s||o,[d,u]=v.useState("visao_geral"),x=v.useMemo(()=>{const c=a.filter(b=>{var r;return(r=b.client)==null?void 0:r.toLowerCase().includes(w)}),p=n.filter(b=>{var r;return(r=b.client)==null?void 0:r.toLowerCase().includes(w)}),h=p.flatMap(b=>b.subtasks);return{visao_geral:0,agenda:c.length,tarefas:p.length,subtarefas:h.length,relatorio:0}},[a,n]);return m?e.jsxs("div",{className:"space-y-6 pb-20 md:pb-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-primary/10 border border-primary/20",children:e.jsx(U,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"BOSI Empreendimentos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Painel exclusivo do cliente"})]})]}),e.jsx(Ne,{}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(q,{}),e.jsx(q,{})]})]}):e.jsxs(L.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6 pb-20 md:pb-0",children:[e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-primary/10 border border-primary/20",children:e.jsx(U,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"BOSI Empreendimentos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Painel exclusivo do cliente"})]})]})}),e.jsx("div",{className:"flex items-center gap-1 rounded-2xl border border-border bg-muted/40 p-1 w-fit backdrop-blur-sm overflow-x-auto",children:Ke.map(c=>{const p=d===c.id,h=c.icon;return e.jsxs("button",{onClick:()=>u(c.id),className:$("relative flex items-center gap-2 rounded-xl px-5 py-2.5 text-sm font-medium transition-all duration-200 whitespace-nowrap",p?"text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-background/50"),children:[p&&e.jsx(L.div,{layoutId:"bosi-tab-bg",className:"absolute inset-0 rounded-xl gold-gradient shadow-sm",transition:{type:"spring",bounce:.15,duration:.5}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),c.label,x[c.id]>0&&e.jsx("span",{className:$("inline-flex items-center justify-center rounded-full px-2 py-0.5 text-[10px] font-semibold tabular-nums min-w-[22px] transition-colors",p?"bg-primary-foreground/20 text-primary-foreground":"bg-secondary text-muted-foreground"),children:x[c.id]})]})]},c.id)})}),e.jsxs(L.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.2},children:[d==="visao_geral"&&e.jsx(ve,{clientFilter:w,tasks:n,events:a}),d==="agenda"&&e.jsx(Ce,{clientFilter:w,hideHeader:!0}),d==="tarefas"&&e.jsx(Q,{clientNameFilter:w,hideHeader:!0,forceTab:"tarefas"}),d==="subtarefas"&&e.jsx(Q,{clientNameFilter:w,hideHeader:!0,forceTab:"subtarefas"}),d==="relatorio"&&e.jsx(qe,{})]},d)]})}export{as as default};
