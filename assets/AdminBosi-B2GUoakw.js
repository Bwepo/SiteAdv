import{c as ee,r as v,j as e,e as A,s as fe,m as I}from"./index-smzF9xFU.js";import{u as je,a as ve}from"./crmTypes-Bj3Db5Tk.js";import{P as Ne}from"./ProjectOverview-BY8HMc1E.js";import{B as ye,a as q}from"./CrmSkeletons-5JYbF8er.js";import{u as we}from"./useQuery-Y96e5RHM.js";import{B as M}from"./button-Ck_VOkfg.js";import{C as K,c as H}from"./card-DZOWhv2A.js";import{S as F}from"./skeleton-C9OMnXeM.js";import{S as P,a as D,b as V,c as G,d as Q}from"./select-BDvcMUI4.js";import{C as ke}from"./chevron-left-B4Av8MHz.js";import{C as Se}from"./chevron-right-Dy76YlAS.js";import{E as Ce}from"./tabs-D9Rm3_Us.js";import Me from"./AdminAgenda-h1Cu3_mz.js";import{A as W,L as $e}from"./AdminTarefas-CBFIFN0t.js";import{B as J}from"./building-2-BSCm_2xI.js";import{C as Ae}from"./circle-check-BqLWJgHU.js";import{C as Te}from"./calendar-DUouTQVE.js";import{C as Be}from"./clipboard-list-BZu0lC8y.js";import{F as Ee}from"./file-text-DE_n5TFL.js";import"./badge-C30MsJgd.js";import"./TipTapEditor-F5ZYsi-D.js";import"./index-CIi0CuQ7.js";import"./dropdown-menu-BZAidZS6.js";import"./index-D6GWdRZu.js";import"./index-BJ1Hz8gz.js";import"./index-BVhZ8oFw.js";import"./check-COCpFMNq.js";import"./input-CfIQJh7T.js";import"./link-Cy_t7_d9.js";import"./loader-circle-C7lIBhmN.js";import"./list-BvTMchgf.js";import"./quote-Da-gJVHH.js";import"./trash-2-DjioR_lI.js";import"./trending-up-BAideC-n.js";import"./clock-D4kVZX38.js";import"./triangle-alert-DmCAYqcK.js";import"./list-todo-DAGP3Usq.js";import"./checkbox-CvGqI5wt.js";import"./index-CC7WIepR.js";import"./alert-dialog-gxLfQo7O.js";import"./index-JALC5csx.js";import"./pencil-BLMzB_7l.js";import"./arrow-up-down-Pt0Re0nv.js";import"./chevron-up-D6hGkrBT.js";import"./scroll-area-BBvxBiln.js";import"./AgendaEventSheet-HC00vqtg.js";import"./form-BFKxDFOD.js";import"./label-DW0dUthe.js";import"./sheet-CAwvBPz-.js";import"./textarea-ZFwuZofO.js";import"./useCrmFieldOptions-CMlbNyst.js";import"./useMutation-BYHZT9cB.js";import"./ClientSelect-CpvR_OfS.js";import"./popover-CWtULFsN.js";import"./search-CMJcUDRu.js";import"./types-C9wiu8_K.js";import"./users-zraRD2Zr.js";import"./map-pin-B_6HwJnU.js";import"./formatters-DGcVFljL.js";import"./download-PiAtzrEz.js";import"./dialog-IZX4grGu.js";import"./TarefaSheet-Dpq3aAA3.js";import"./separator-Dr2X6tlB.js";import"./ProcessosList-DUmuINQW.js";import"./scale-DuXJL_Xf.js";import"./user-dsrQYXOZ.js";import"./format-Bo8wDDlG.js";import"./switch-CbuLSShH.js";import"./folder-kanban-C58RjAGN.js";import"./filter-B4x8QRNr.js";import"./circle-x-DnDhaEC-.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=ee("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=ee("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),Fe=a=>fe.from(a),$=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"];function te(a){if(!a)return"";const s=String(a).slice(0,10);return/^\d{4}-\d{2}-\d{2}$/.test(s)?s:""}function U(a){const s=te(a);return s?`${s.slice(8,10)}/${s.slice(5,7)}/${s.slice(0,4)}`:String(a||"")}function Z(a){if(typeof a=="boolean")return a;if(typeof a=="number")return a!==0;const s=String(a??"").trim().toLowerCase();return["true","yes","sim","1","checked","on","x"].includes(s)}function X(a){return te(a.Date)}function _e(a){const s=String(a||"").trim().toLowerCase();return s.includes("conclu")||s.includes("finaliz")||s.includes("encerrad")?{label:"Concluído",kind:"done",order:0}:s.includes("andamento")||s.includes("trâmite")||s.includes("tramite")||s.includes("process")?{label:s.includes("trâmite")||s.includes("tramite")?"Em trâmite":"Em andamento",kind:"wip",order:1}:s.includes("agend")?{label:"Agendado",kind:"sched",order:2}:{label:a||"—",kind:"other",order:3}}function Oe(a){const s=a.match(/\s*\(([^)]+)\)\s*$/);return s?{titulo:a.replace(/\s*\(([^)]+)\)\s*$/,"").trim(),projeto:s[1].trim()}:{titulo:a,projeto:""}}function ze(a){if(!a)return"";const s=String(a).split(/\r?\n/).map(n=>n.trim()).filter(Boolean);for(let n of s){n=n.replace(/^#{1,6}\s+/,"").replace(/^\d+\)\s+/,"").replace(/^(-|•|o)\s+/i,"");const o=n.replace(/\*\*(.+?)\*\*/g,"$1").replace(/[_`]+/g,"").replace(/\s+/g," ").trim();if(o)return o.length>140?o.slice(0,137).trim()+"...":o}return""}function Re(a){if(!a)return e.jsx("span",{className:"text-muted-foreground text-xs italic",children:"Sem observações registradas."});const s=String(a).split(/\r?\n/).map(x=>x.trim()).filter(Boolean),n=[];let o=[],m=0;const d=x=>x.split(/\*\*(.+?)\*\*/g).map((p,b)=>b%2===1?e.jsx("strong",{children:p},b):p),u=()=>{o.length&&(n.push(e.jsx("ul",{className:"list-disc list-inside space-y-0.5 text-xs leading-relaxed ml-2",children:o.map((x,c)=>e.jsx("li",{children:d(x)},c))},m++)),o=[])};for(const x of s){const c=x.match(/^#{1,6}\s+(.+)$/);if(c){u(),n.push(e.jsx("p",{className:"text-xs font-bold mt-2 mb-1",children:d(c[1])},m++));continue}const p=x.match(/^(\d+)\)\s+(.+)$/);if(p){u(),n.push(e.jsxs("p",{className:"text-xs font-bold mt-2 mb-1",children:[p[1],") ",d(p[2])]},m++));continue}const b=x.match(/^\*\*(.+?)\*\*:?$/);if(b){u(),n.push(e.jsx("p",{className:"text-xs font-bold mt-2 mb-1",children:d(b[1])},m++));continue}if(/^(-|•|o)\s+/i.test(x)){o.push(x.replace(/^(-|•|o)\s+/i,""));continue}u(),n.push(e.jsx("p",{className:"text-xs leading-relaxed",children:d(x)},m++))}return u(),e.jsx(e.Fragment,{children:n})}const se={done:"bg-green-100 text-green-800 border-green-200",wip:"bg-amber-100 text-amber-800 border-amber-200",sched:"bg-orange-100 text-orange-700 border-orange-200",other:"bg-muted text-muted-foreground border-border"};async function Ye(){const{data:a,error:s}=await Fe("mladv_crm_tarefas").select("titulo, status, deadline, descricao, raw_fields").ilike("cliente","%bosi%");if(s)throw s;return a||[]}function qe(){const a=v.useRef(null),s=new Date,[n,o]=v.useState(s.getFullYear()),[m,d]=v.useState(s.getMonth()),{data:u,isLoading:x}=we({queryKey:["crm","bosi-report"],queryFn:Ye}),c=v.useMemo(()=>{if(!u)return[];const t=new Set;return u.forEach(l=>{const N=l.raw_fields||{};if(!Z(N.Bosi))return;const g=X(N);if(!g)return;const y=Number(g.slice(0,4)),j=Number(g.slice(5,7))-1;t.add(`${y}-${String(j).padStart(2,"0")}`)}),Array.from(t).sort().reverse()},[u]),p=()=>{m===0?(d(11),o(t=>t-1)):d(t=>t-1)},b=()=>{m===11?(d(0),o(t=>t+1)):d(t=>t+1)},h=n===s.getFullYear()&&m===s.getMonth(),r=v.useMemo(()=>{if(!u)return null;const t=n,l=m,N=`${t}-${String(l+1).padStart(2,"0")}-01`;let g;if(h){const i=new Date;g=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`}else{const i=new Date(t,l+1,0).getDate();g=`${t}-${String(l+1).padStart(2,"0")}-${String(i).padStart(2,"0")}`}const y=u.filter(i=>{const f=i.raw_fields||{};if(!Z(f.Bosi))return!1;const C=X(f);return C?C>=N&&C<=g:!1});if(y.length===0)return null;const j=y.filter(i=>i.titulo&&i.titulo.toLowerCase()!=="tarefa sem nome").map(i=>{var Y;const f=_e(i.status),C=((Y=i.raw_fields)==null?void 0:Y.Observações)||i.descricao||null,{titulo:be,projeto:ge}=Oe(i.titulo);return{titulo:i.titulo,observacoes:C,deadline:i.deadline,statusLabel:f.label,statusKind:f.kind,statusOrder:f.order,projeto:ge,tituloClean:be}}).sort((i,f)=>i.statusOrder!==f.statusOrder?i.statusOrder-f.statusOrder:i.tituloClean.localeCompare(f.tituloClean,"pt-BR")),ce=`01 a ${g.slice(8,10)} de ${$[l]} de ${t}`,me=j.length,xe=j.filter(i=>i.statusKind==="done").length,pe=j.filter(i=>i.statusKind==="wip").length,ue=j.filter(i=>i.statusKind==="sched").length,he=j.filter(i=>i.observacoes).slice(0,3).map(i=>({titulo:i.tituloClean,projeto:i.projeto,impacto:ze(i.observacoes),statusLabel:i.statusLabel,statusKind:i.statusKind})),L=new Date;return{tasks:j,periodoTxt:ce,mesAno:`${$[l]} de ${t}`,geradoEm:U(`${L.getFullYear()}-${String(L.getMonth()+1).padStart(2,"0")}-${String(L.getDate()).padStart(2,"0")}`),reportId:`${t}-${String(l+1).padStart(2,"0")}`,total:me,concluidas:xe,emAndamento:pe,agendado:ue,destaques:he}},[u,n,m,h]),O=v.useCallback(()=>{if(!a.current)return;const t=window.open("","_blank");if(!t)return;const l=a.current.innerHTML,g=Array.from(document.querySelectorAll('style, link[rel="stylesheet"]')).map(y=>y.outerHTML).join(`
`);t.document.write(`
      <!DOCTYPE html>
      <html lang="pt-br">
      <head>
        <meta charset="UTF-8">
        <title>Relatório Executivo – ${(r==null?void 0:r.mesAno)||""}</title>
        ${g}
        <style>
          @page { size: A4; margin: 12mm; }
          * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
          body { margin: 0; padding: 0; background: white; }
          .page-break { page-break-before: always; break-before: page; }
          @media print { body { padding: 0; } }
        </style>
      </head>
      <body>
        <div class="bg-white text-slate-900 p-6 sm:p-8 max-w-[680px] mx-auto">${l}</div>
      </body>
      </html>
    `),t.document.close(),setTimeout(()=>{t.print()},500)},[r]);if(x)return e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{className:"h-8 w-48"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:[1,2,3,4].map(t=>e.jsx(F,{className:"h-20"},t))}),e.jsx(F,{className:"h-64"})]});const E=!r||r.total===0,S=(r==null?void 0:r.tasks)??[],ae=(r==null?void 0:r.periodoTxt)??"",z=(r==null?void 0:r.mesAno)??"",re=(r==null?void 0:r.geradoEm)??"",ie=(r==null?void 0:r.reportId)??"",ne=(r==null?void 0:r.total)??0,oe=(r==null?void 0:r.concluidas)??0,le=(r==null?void 0:r.emAndamento)??0,de=(r==null?void 0:r.agendado)??0,R=(r==null?void 0:r.destaques)??[];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:p,children:e.jsx(ke,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(P,{value:String(m),onValueChange:t=>d(Number(t)),children:[e.jsx(D,{className:"w-[130px] h-8 text-xs capitalize",children:e.jsx(V,{})}),e.jsx(G,{children:$.map((t,l)=>e.jsx(Q,{value:String(l),className:"capitalize",children:t},l))})]}),e.jsxs(P,{value:String(n),onValueChange:t=>o(Number(t)),children:[e.jsx(D,{className:"w-[80px] h-8 text-xs",children:e.jsx(V,{})}),e.jsx(G,{children:Array.from({length:5},(t,l)=>s.getFullYear()-l).map(t=>e.jsx(Q,{value:String(t),children:t},t))})]})]}),e.jsx(M,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:b,disabled:h,children:e.jsx(Se,{className:"w-4 h-4"})}),!h&&e.jsx(M,{variant:"outline",size:"sm",className:"text-xs h-8",onClick:()=>{o(s.getFullYear()),d(s.getMonth())},children:"Mês atual"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:O,className:"gap-1.5",disabled:E,children:[e.jsx(Le,{className:"w-3.5 h-3.5"}),"Exportar PDF"]}),e.jsxs(M,{variant:"outline",size:"sm",disabled:E,onClick:O,className:"gap-1.5",children:[e.jsx(Ie,{className:"w-3.5 h-3.5"}),"Imprimir"]})]})]}),E?e.jsx(K,{children:e.jsxs(H,{className:"p-8 text-center text-muted-foreground",children:[e.jsx(Ce,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsxs("p",{className:"text-sm font-medium",children:["Nenhuma tarefa BOSI encontrada para ",$[m]," de ",n,"."]}),e.jsx("p",{className:"text-xs mt-1",children:'Verifique se as tarefas possuem o campo "Bosi" marcado e "Date" preenchido.'}),c.length>0&&e.jsxs("p",{className:"text-xs mt-2 text-muted-foreground",children:["Meses com dados: ",c.slice(0,6).map(t=>{const[l,N]=t.split("-");return`${$[Number(N)]}/${l}`}).join(", ")]})]})}):e.jsx(e.Fragment,{children:e.jsx(K,{className:"overflow-hidden",children:e.jsx(H,{className:"p-0",children:e.jsxs("div",{ref:a,className:"bg-white text-slate-900 p-6 sm:p-8 max-w-[680px] mx-auto",children:[e.jsxs("div",{className:"report-header pb-3 mb-4 border-b-2 border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/logo-horizontal_transparent.png",alt:"Mariana Lima Advocacia",style:{maxHeight:70}}),e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/bosi_logo.png",alt:"BOSI",style:{maxHeight:34}})]}),e.jsxs("h1",{className:"text-lg font-extrabold text-slate-900",children:["Atuação jurídica do período – ",z]}),e.jsxs("p",{className:"subtitle text-xs text-slate-500 mt-1",children:["Período: ",ae]})]}),e.jsxs("div",{className:"kpi-grid grid grid-cols-2 sm:grid-cols-4 gap-2.5 mb-5",children:[e.jsx(T,{label:"Total",value:ne,kind:"other"}),e.jsx(T,{label:"Concluídas",value:oe,kind:"done"}),e.jsx(T,{label:"Em andamento",value:le,kind:"wip"}),e.jsx(T,{label:"Agendadas",value:de,kind:"sched"})]}),R.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsx("h2",{className:"section-title text-sm font-extrabold text-slate-900 mb-2 pb-1 border-b border-slate-200",children:"Destaques estratégicos"}),e.jsx("div",{className:"space-y-2",children:R.map((t,l)=>e.jsxs("div",{className:"flex items-start justify-between gap-3 py-2 border-b border-slate-100 last:border-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs font-extrabold text-slate-900",children:[t.titulo,t.projeto&&e.jsxs("span",{className:"text-slate-500 font-bold",children:[" · ",t.projeto]})]}),e.jsx("p",{className:"text-xs text-slate-600 font-semibold mt-0.5 leading-snug",children:t.impacto||"Atualização registrada no período."})]}),e.jsx(_,{label:t.statusLabel,kind:t.statusKind})]},l))})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("h2",{className:"section-title text-sm font-extrabold text-slate-900 mb-2 pb-1 border-b border-slate-200",children:"Frentes acompanhadas"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4",children:[e.jsx(B,{title:"Concluídas",kind:"done",tasks:S.filter(t=>t.statusKind==="done")}),e.jsx(B,{title:"Em andamento / Em trâmite",kind:"wip",tasks:S.filter(t=>t.statusKind==="wip")}),e.jsx(B,{title:"Agendadas",kind:"sched",tasks:S.filter(t=>t.statusKind==="sched")}),e.jsx(B,{title:"Outras",kind:"other",tasks:S.filter(t=>t.statusKind==="other")})]})]}),e.jsx("div",{className:"page-break"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-center py-4 mb-4 bg-slate-50 rounded-lg",children:[e.jsx("h2",{className:"text-base font-extrabold text-slate-900",children:"Detalhamento das Tarefas"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Resumo técnico e jurídico de cada frente acompanhada em ",e.jsx("strong",{children:z}),"."]})]}),e.jsx("div",{className:"space-y-0",children:S.map((t,l)=>e.jsxs("div",{className:"task-detail py-3 border-b border-slate-100 last:border-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("p",{className:"task-title text-xs font-extrabold text-slate-900",children:[l+1,". ",t.tituloClean,t.projeto&&e.jsxs("span",{className:"task-projeto text-slate-500 font-bold",children:[" · ",t.projeto]})]}),e.jsx(_,{label:t.statusLabel,kind:t.statusKind})]}),t.deadline&&e.jsxs("p",{className:"text-[11px] text-slate-600 font-semibold mt-1",children:["Prazo: ",U(t.deadline)]}),e.jsx("div",{className:"task-obs mt-2",children:Re(t.observacoes)})]},l))})]}),e.jsxs("div",{className:"footer mt-6 pt-3 border-t-2 border-slate-200",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-extrabold text-slate-700",children:"Mariana Lima Advocacia"}),e.jsxs("p",{className:"text-[11px] text-slate-500 mt-1",children:["Telefone: (31) 99404-8797",e.jsx("br",{}),"E-mail: contato@marianalima.adv.br",e.jsx("br",{}),"Rua Hugo Santos Silva, nº 100 – Centro, Sete Lagoas – MG"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/logo-horizontal_transparent.png",alt:"Mariana Lima Advocacia",style:{maxHeight:70,marginLeft:"auto"},className:"mb-2"}),e.jsxs("p",{className:"text-[10px] text-slate-400",children:["Gerado em: ",re]}),e.jsxs("p",{className:"text-[10px] text-slate-400",children:["Relatório #",ie]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-slate-100",children:[e.jsx("p",{className:"text-[10px] text-slate-400 italic",children:"Este relatório é confidencial e destinado exclusivamente ao destinatário."}),e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/bosi_logo.png",alt:"BOSI",style:{maxHeight:28}})]})]})]})})})})]})}function T({label:a,value:s,kind:n}){const o={done:"bg-green-50 border-green-200 text-green-900",wip:"bg-amber-50 border-amber-200 text-amber-900",sched:"bg-orange-50 border-orange-200 text-orange-900",other:"bg-slate-50 border-slate-200 text-slate-900"};return e.jsxs("div",{className:A("kpi-card rounded-lg border p-3",o[n]),children:[e.jsx("p",{className:"value text-2xl font-black leading-none",children:s}),e.jsx("p",{className:"label text-[10px] font-bold uppercase tracking-wide mt-1.5",children:a})]})}function _({label:a,kind:s}){return e.jsx("span",{className:A("badge inline-block px-2 py-0.5 rounded-full text-[10px] font-bold border shrink-0 whitespace-nowrap",se[s]),children:a})}function B({title:a,kind:s,tasks:n}){return n.length===0?null:e.jsxs("div",{className:"mb-3 break-inside-avoid",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 pb-1",children:[e.jsx("p",{className:"text-xs font-extrabold text-slate-900",children:a}),e.jsx("span",{className:A("badge inline-block px-1.5 py-0 rounded-full text-[10px] font-black border",se[s]),children:n.length})]}),e.jsx("div",{className:"border-t border-slate-100",children:n.map((o,m)=>e.jsxs("div",{className:"flex items-center justify-between gap-2 py-1 border-b border-slate-50 last:border-0",children:[e.jsxs("p",{className:"text-[11px] font-bold text-slate-900 leading-tight flex-1 min-w-0",children:[o.tituloClean,o.projeto&&e.jsxs("span",{className:"text-slate-500 font-bold",children:[" · ",o.projeto]})]}),e.jsx(_,{label:o.statusLabel,kind:o.statusKind})]},m))})]})}const w="bosi",k="rec7FQdbM5wF0R5RW",Ke=[{id:"visao_geral",label:"Visão Geral",icon:Ae},{id:"agenda",label:"Agenda",icon:Te},{id:"tarefas",label:"Tarefas",icon:Be},{id:"subtarefas",label:"Subtarefas",icon:$e},{id:"relatorio",label:"Relatório",icon:Ee}];function os(){const{events:a,loading:s}=je(),{tasks:n,loading:o}=ve(),m=s||o,[d,u]=v.useState("visao_geral"),x=v.useMemo(()=>{const c=a.filter(h=>{var r;return((r=h.client)==null?void 0:r.toLowerCase().includes(w))||h.projectId===k}),p=n.filter(h=>{var r;return((r=h.client)==null?void 0:r.toLowerCase().includes(w))||h.projectId===k}),b=p.flatMap(h=>h.subtasks);return{visao_geral:0,agenda:c.length,tarefas:p.length,subtarefas:b.length,relatorio:0}},[a,n]);return m?e.jsxs("div",{className:"space-y-6 pb-20 md:pb-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-primary/10 border border-primary/20",children:e.jsx(J,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"BOSI Empreendimentos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Painel exclusivo do cliente"})]})]}),e.jsx(ye,{}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(q,{}),e.jsx(q,{})]})]}):e.jsxs(I.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6 pb-20 md:pb-0",children:[e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-primary/10 border border-primary/20",children:e.jsx(J,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"BOSI Empreendimentos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Painel exclusivo do cliente"})]})]})}),e.jsx("div",{className:"flex items-center gap-1 rounded-2xl border border-border bg-muted/40 p-1 w-fit backdrop-blur-sm overflow-x-auto",children:Ke.map(c=>{const p=d===c.id,b=c.icon;return e.jsxs("button",{onClick:()=>u(c.id),className:A("relative flex items-center gap-2 rounded-xl px-5 py-2.5 text-sm font-medium transition-all duration-200 whitespace-nowrap",p?"text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-background/50"),children:[p&&e.jsx(I.div,{layoutId:"bosi-tab-bg",className:"absolute inset-0 rounded-xl gold-gradient shadow-sm",transition:{type:"spring",bounce:.15,duration:.5}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),c.label,x[c.id]>0&&e.jsx("span",{className:A("inline-flex items-center justify-center rounded-full px-2 py-0.5 text-[10px] font-semibold tabular-nums min-w-[22px] transition-colors",p?"bg-primary-foreground/20 text-primary-foreground":"bg-secondary text-muted-foreground"),children:x[c.id]})]})]},c.id)})}),e.jsxs(I.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.2},children:[d==="visao_geral"&&e.jsx(Ne,{projectId:k,clientFilter:w,tasks:n,events:a}),d==="agenda"&&e.jsx(Me,{projectId:k,clientFilter:w,hideHeader:!0}),d==="tarefas"&&e.jsx(W,{projectId:k,clientNameFilter:w,hideHeader:!0,forceTab:"tarefas"}),d==="subtarefas"&&e.jsx(W,{projectId:k,clientNameFilter:w,hideHeader:!0,forceTab:"subtarefas"}),d==="relatorio"&&e.jsx(qe,{})]},d)]})}export{os as default};
