import{c as J,U as Q,V as W,aj as X,ak as ee,r as u,j as e,L as c,e as B}from"./index-WUnrZKdN.js";import{A as se,F as re,L as v,B as y}from"./AdminLayout-DvTi3wlA.js";import{C as a,c as l,a as k,b as C}from"./card-CmbMuFhm.js";import{B as T}from"./button-CgK7Bebu.js";import{S as g}from"./skeleton-ttQyFX_M.js";import{S as _,a as $,b as I,d as O,e as b}from"./select-CAWNsf4J.js";import{E as te,a as ae,T as le,b as ie}from"./crmTypes-DtRnJ06N.js";import{C as N}from"./calendar-B6DaslpU.js";import{C as ne}from"./clock-albjjtjD.js";import{T as V}from"./triangle-alert-Db1oTeDM.js";import{C as z}from"./circle-check-ByEIWI-7.js";import{C as de}from"./chart-column-BrI6aubp.js";import{A as M}from"./arrow-right-DybyQFga.js";import{U as A}from"./users-DxEV7w1q.js";import"./dialog-DM9Thke_.js";import"./index-C9AHqlqe.js";import"./heart-DXdA30P2.js";import"./sparkles-JYOOdGXJ.js";import"./ThemeToggle-MpeSYwLb.js";import"./search-Dnc-XqOs.js";import"./house-BrsWlKck.js";import"./file-text-p3pvasp5.js";import"./index-8IKOjCQC.js";import"./index-DDnSQ9Bg.js";import"./chevron-up-CZCxO-ly.js";import"./check-TVEcfPpr.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=J("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function ce(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(d=>e.jsx(a,{children:e.jsxs(l,{className:"p-4 flex items-center gap-3",children:[e.jsx(g,{className:"h-10 w-10 rounded-lg"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(g,{className:"h-7 w-8"}),e.jsx(g,{className:"h-3 w-20"})]})]})},d))}),e.jsx("div",{className:"grid lg:grid-cols-2 gap-6",children:[1,2].map(d=>e.jsx(a,{children:e.jsxs(l,{className:"p-6 space-y-3",children:[e.jsx(g,{className:"h-5 w-40 mb-2"}),[1,2,3].map(w=>e.jsx(g,{className:"h-16 w-full rounded-lg"},w))]})},d))})]})}function me(){return new Intl.DateTimeFormat("sv-SE",{timeZone:"America/Sao_Paulo"}).format(new Date)}function Oe(){const{events:d,loading:w}=Q(),{tasks:j,loading:H}=W(),{clients:xe,loading:Y}=X(),{projects:m,loading:K}=ee(),[i,S]=u.useState("all"),[o,D]=u.useState("all"),U=w||H||Y||K,f=me(),Z=u.useMemo(()=>{const s=new Set;return j.forEach(r=>{r.client&&s.add(r.client)}),d.forEach(r=>{r.client&&s.add(r.client)}),[...s].sort()},[j,d]),n=u.useMemo(()=>{let s=j;if(i!=="all"&&(s=s.filter(r=>r.client===i)),o!=="all"){const r=m.find(t=>t.id===o);r&&(s=s.filter(t=>t.client===r.name))}return s},[j,i,o,m]),E=u.useMemo(()=>{let s=d;if(i!=="all"&&(s=s.filter(r=>r.client===i)),o!=="all"){const r=m.find(t=>t.id===o);r&&(s=s.filter(t=>t.client===r.name))}return s},[d,i,o,m]),q=E.filter(s=>s.date===f).length,F=n.filter(s=>s.dueDate&&s.dueDate<f&&s.status!=="concluida"&&s.status!=="cancelada").length,x=n.filter(s=>s.status==="em_andamento").length,h=n.filter(s=>s.status==="concluida").length,p=n.filter(s=>s.status==="pendente"||s.status==="agendado").length,L=E.filter(s=>s.date>=f&&s.status!=="cancelado").sort((s,r)=>s.date.localeCompare(r.date)||(s.time||"").localeCompare(r.time||"")).slice(0,6),P=n.filter(s=>s.status!=="concluida"&&s.status!=="cancelada").sort((s,r)=>{const t={alta:0,media:1,baixa:2};return t[s.priority]-t[r.priority]||(s.dueDate||"").localeCompare(r.dueDate||"")}).slice(0,6),G=s=>{const r=new Date(s+"T12:00:00"),t=new Date;t.setHours(12,0,0,0);const R=Math.round((r.getTime()-t.getTime())/864e5);return R===0?"Hoje":R===1?"Amanhã":r.toLocaleDateString("pt-BR",{weekday:"short",day:"2-digit",month:"short"})};return e.jsx(se,{title:"CRM — Painel",children:U?e.jsx(ce,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[e.jsx(oe,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs(_,{value:i,onValueChange:S,children:[e.jsx($,{className:"w-[220px]",children:e.jsx(I,{placeholder:"Filtrar por cliente"})}),e.jsxs(O,{children:[e.jsx(b,{value:"all",children:"Todos os clientes"}),Z.map(s=>e.jsx(b,{value:s,children:s},s))]})]}),e.jsxs(_,{value:o,onValueChange:D,children:[e.jsxs($,{className:"w-[220px]",children:[e.jsx(re,{className:"w-4 h-4 mr-1.5 text-muted-foreground"}),e.jsx(I,{placeholder:"Filtrar por projeto"})]}),e.jsxs(O,{children:[e.jsx(b,{value:"all",children:"Todos os projetos"}),m.map(s=>e.jsx(b,{value:s.id,children:s.name},s.id))]})]}),(i!=="all"||o!=="all")&&e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{S("all"),D("all")},className:"text-xs",children:"Limpar filtros"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[e.jsx(a,{className:"bg-gradient-to-br from-background to-blue-50/20 dark:to-blue-950/20 hover:shadow-md transition-all border-blue-100/50 dark:border-blue-900/50",children:e.jsxs(l,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-blue-100/80 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300 ring-1 ring-inset ring-blue-500/20",children:e.jsx(N,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold font-serif tracking-tight text-foreground/90",children:q}),e.jsx("p",{className:"text-[11px] font-medium uppercase tracking-wider text-muted-foreground",children:"Hoje"})]})]})}),e.jsx(a,{className:"bg-gradient-to-br from-background to-slate-50/20 dark:to-slate-900/20 hover:shadow-md transition-all border-slate-200/50 dark:border-slate-800/50",children:e.jsxs(l,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-slate-100/80 text-slate-700 dark:bg-slate-800/50 dark:text-slate-300 ring-1 ring-inset ring-slate-500/20",children:e.jsx(v,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold font-serif tracking-tight text-foreground/90",children:p}),e.jsx("p",{className:"text-[11px] font-medium uppercase tracking-wider text-muted-foreground",children:"A Fazer"})]})]})}),e.jsx(a,{className:"bg-gradient-to-br from-background to-blue-50/30 dark:to-blue-950/20 hover:shadow-md transition-all border-blue-200/40 dark:border-blue-800/40",children:e.jsxs(l,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-blue-100/80 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300 ring-1 ring-inset ring-blue-500/20",children:e.jsx(ne,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold font-serif tracking-tight text-foreground/90",children:x}),e.jsx("p",{className:"text-[11px] font-medium uppercase tracking-wider text-muted-foreground",children:"Em andamento"})]})]})}),e.jsx(a,{className:"bg-gradient-to-br from-background to-destructive/5 hover:shadow-md transition-all border-destructive/10",children:e.jsxs(l,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-red-100/80 text-red-700 dark:bg-red-900/50 dark:text-red-400 ring-1 ring-inset ring-red-500/20",children:e.jsx(V,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold font-serif tracking-tight text-destructive/90",children:F}),e.jsx("p",{className:"text-[11px] font-medium uppercase tracking-wider text-muted-foreground",children:"Atrasadas"})]})]})}),e.jsx(a,{className:"bg-gradient-to-br from-background to-emerald-50/30 dark:to-emerald-950/20 hover:shadow-md transition-all border-emerald-200/40 dark:border-emerald-800/40",children:e.jsxs(l,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-emerald-100/80 text-emerald-700 dark:bg-emerald-900/50 dark:text-emerald-400 ring-1 ring-inset ring-emerald-500/20",children:e.jsx(z,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold font-serif tracking-tight text-foreground/90",children:h}),e.jsx("p",{className:"text-[11px] font-medium uppercase tracking-wider text-muted-foreground",children:"Concluídas"})]})]})})]}),e.jsxs(a,{className:"mb-6",children:[e.jsx(k,{className:"pb-3 border-b border-border/40",children:e.jsxs(C,{className:"text-[15px] font-semibold flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4 text-primary"}),"Distribuição de Tarefas",i!=="all"&&e.jsx(y,{variant:"secondary",className:"text-[10px] ml-2 font-medium bg-primary/10 text-primary",children:i})]})}),e.jsxs(l,{className:"pt-4",children:[e.jsx("div",{className:"flex gap-1.5 h-3.5 rounded-full overflow-hidden bg-muted/50 p-0.5 border border-border/50",children:n.length>0&&e.jsxs(e.Fragment,{children:[p>0&&e.jsx("div",{className:"bg-slate-400 transition-all",style:{width:`${p/n.length*100}%`},title:`A Fazer: ${p}`}),x>0&&e.jsx("div",{className:"bg-blue-500 transition-all",style:{width:`${x/n.length*100}%`},title:`Em Andamento: ${x}`}),h>0&&e.jsx("div",{className:"bg-green-500 transition-all",style:{width:`${h/n.length*100}%`},title:`Concluídas: ${h}`})]})}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-3 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-slate-400 shadow-sm"})," A Fazer (",p,")"]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 shadow-sm"})," Andamento (",x,")"]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500 shadow-sm"})," Concluídas (",h,")"]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-destructive/80 shadow-sm"})," Atrasadas (",F,")"]})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(a,{children:[e.jsx(k,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(C,{className:"text-base flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),"Próximos Compromissos"]}),e.jsx(c,{to:"/admin/agenda",children:e.jsxs(T,{variant:"ghost",size:"sm",className:"text-xs",children:["Ver todos ",e.jsx(M,{className:"w-3 h-3 ml-1"})]})})]})}),e.jsx(l,{className:"space-y-3",children:L.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-6",children:"Nenhum compromisso próximo."}):L.map(s=>e.jsxs("div",{className:"flex items-start gap-3.5 p-3 rounded-xl border border-border/40 hover:bg-muted/40 hover:border-border/80 transition-all group",children:[e.jsxs("div",{className:"text-center min-w-[3.5rem] p-1.5 rounded-lg bg-background shadow-sm border border-border/30 group-hover:border-primary/20 transition-colors",children:[e.jsx("p",{className:"text-[10px] font-semibold uppercase tracking-wider text-muted-foreground",children:G(s.date).split(" ")[0]}),s.time&&e.jsx("p",{className:"text-sm font-bold text-foreground/90",children:s.time})]}),e.jsxs("div",{className:"flex-1 min-w-0 py-0.5",children:[e.jsx("p",{className:"text-sm font-semibold truncate group-hover:text-primary transition-colors",children:s.title}),s.client&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1.5 mt-1",children:[e.jsx(A,{className:"w-3 h-3 opacity-70"}),s.client]})]}),e.jsx(y,{variant:"secondary",className:B("text-[9px] uppercase tracking-widest shrink-0 py-0.5 font-semibold",te[s.type]),children:ae[s.type]})]},s.id))})]}),e.jsxs(a,{children:[e.jsx(k,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(C,{className:"text-base flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4"}),"Tarefas Pendentes"]}),e.jsx(c,{to:"/admin/tarefas",children:e.jsxs(T,{variant:"ghost",size:"sm",className:"text-xs",children:["Ver todas ",e.jsx(M,{className:"w-3 h-3 ml-1"})]})})]})}),e.jsx(l,{className:"space-y-3",children:P.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-6",children:"Nenhuma tarefa pendente."}):P.map(s=>{const r=s.dueDate&&s.dueDate<f;return e.jsxs("div",{className:`p-3.5 rounded-xl border transition-all duration-200 group ${r?"border-destructive/30 bg-destructive/5 hover:border-destructive/50":"border-border/40 hover:bg-muted/40 hover:border-border/80"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-[13px] font-semibold truncate group-hover:text-primary transition-colors",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:[s.client&&e.jsxs("span",{className:"text-[11px] text-muted-foreground bg-background px-1.5 py-0.5 rounded shadow-sm border border-border/30 flex items-center gap-1.5",children:[e.jsx(A,{className:"w-3 h-3 opacity-70"}),s.client]}),s.dueDate&&e.jsxs("span",{className:`text-[11px] font-medium flex items-center gap-1 ${r?"text-destructive":"text-muted-foreground"}`,children:[r?e.jsx(V,{className:"w-3 h-3"}):e.jsx(N,{className:"w-3 h-3"}),new Date(s.dueDate+"T12:00:00").toLocaleDateString("pt-BR")]})]})]}),e.jsx(y,{variant:"secondary",className:B("text-[9px] uppercase font-semibold tracking-wider shrink-0",le[s.priority]),children:ie[s.priority]})]}),s.subtasks.length>0&&e.jsxs("div",{className:"mt-3 bg-background/50 rounded-lg p-2 border border-border/20",children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] text-muted-foreground mb-1.5 font-medium",children:[e.jsxs("span",{children:["Subtarefas (",s.subtasks.filter(t=>t.completed).length,"/",s.subtasks.length,")"]}),e.jsxs("span",{children:[Math.round(s.subtasks.filter(t=>t.completed).length/s.subtasks.length*100),"%"]})]}),e.jsx("div",{className:"w-full bg-muted/50 rounded-full h-1.5 p-[1px] border border-border/30",children:e.jsx("div",{className:"bg-primary/90 rounded-full h-full transition-all duration-500 ease-out",style:{width:`${s.subtasks.filter(t=>t.completed).length/s.subtasks.length*100}%`}})})]})]},s.id)})})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsx(c,{to:"/admin/agenda",children:e.jsx(a,{className:"hover:border-primary/50 transition-colors cursor-pointer",children:e.jsxs(l,{className:"p-4 text-center",children:[e.jsx(N,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-sm font-medium",children:"Agenda"})]})})}),e.jsx(c,{to:"/admin/tarefas",children:e.jsx(a,{className:"hover:border-primary/50 transition-colors cursor-pointer",children:e.jsxs(l,{className:"p-4 text-center",children:[e.jsx(v,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-sm font-medium",children:"Tarefas"})]})})}),e.jsx(c,{to:"/admin/bosi",children:e.jsx(a,{className:"hover:border-primary/50 transition-colors cursor-pointer",children:e.jsxs(l,{className:"p-4 text-center",children:[e.jsx(A,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-sm font-medium",children:"BOSI"})]})})}),e.jsx(c,{to:"/admin/posts/new",children:e.jsx(a,{className:"hover:border-primary/50 transition-colors cursor-pointer",children:e.jsxs(l,{className:"p-4 text-center",children:[e.jsx(z,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-sm font-medium",children:"Novo Post"})]})})})]})]})})}export{Oe as default};
