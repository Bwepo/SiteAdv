import{c as me,r as n,j as e,m as K,S as W,P as F,T as ee,e as T,u as $e,s as Z,R as et,U as tt,l as rt,V as at,W as nt,Y as st,Z as lt,_ as je,h as we,L as Y,$ as ke,a0 as Ne,a1 as Ce,X as ot,a2 as it}from"./index-BYSmSza6.js";import{D as Te,a as De}from"./dialog-B5s9TH1T.js";import{B}from"./button-CjGghZSy.js";import{H as Se}from"./heart-D7ncAFtI.js";import{S as Ee}from"./sparkles-BAsYSIUs.js";import{R as dt,P as ct,O as ut,C as mt}from"./index-DtB--MGt.js";import{S as Oe}from"./search-CPaZT4n6.js";import{B as ft,P as pt}from"./badge-DbLWEFBC.js";import{L as ht}from"./loader-circle-Bfk0Z7Hm.js";import{L as fe}from"./list-todo-Da2zWk8K.js";import{C as pe}from"./calendar-Crva6Vwm.js";import{F as he}from"./folder-kanban-DmIi88ms.js";import{S as xt,a as gt,b as bt,c as vt,d as yt}from"./sheet-DY2_uc24.js";import{C as jt}from"./chevron-right-lLrSiwd0.js";import{C as wt}from"./chevron-left-BKXEPKIP.js";import{H as kt}from"./house-Dp8MCW7C.js";import{S as Nt,M as Ct,a as St}from"./sun-De5dLBkA.js";import{R as Et}from"./refresh-cw-DdzeX2Tc.js";import{S as Pe}from"./settings-D-9I9A1G.js";import{T as It}from"./triangle-alert-B3wsmQ_V.js";import{U as _t}from"./users-B2Ld1ESD.js";import{G as Lt}from"./globe-1IEtJJ8_.js";import"./index-CD86LXez.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=me("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=me("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),_e="mladv_welcome_shown";function Mt(){const[t,s]=n.useState(!1);n.useEffect(()=>{if(!sessionStorage.getItem(_e)){const l=setTimeout(()=>s(!0),600);return()=>clearTimeout(l)}},[]);const r=()=>{sessionStorage.setItem(_e,"true"),s(!1)};return e.jsx(Te,{open:t,onOpenChange:f=>{f||r()},children:e.jsx(De,{className:"sm:max-w-md border-none bg-gradient-to-br from-rose-50 via-white to-pink-50 dark:from-rose-950/40 dark:via-background dark:to-pink-950/30 shadow-2xl p-0 overflow-hidden",children:e.jsxs(K.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"p-8 text-center",children:[e.jsxs("div",{className:"relative flex justify-center mb-6",children:[e.jsx(K.div,{animate:{y:[0,-8,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(Se,{className:"w-16 h-16 text-rose-400 fill-rose-400 drop-shadow-lg"})}),e.jsx(K.div,{className:"absolute -left-2 top-0",animate:{y:[0,-6,0],opacity:[.4,1,.4]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut",delay:.3},children:e.jsx(Ee,{className:"w-5 h-5 text-amber-400"})}),e.jsx(K.div,{className:"absolute -right-2 top-2",animate:{y:[0,-5,0],opacity:[.5,1,.5]},transition:{duration:2.2,repeat:1/0,ease:"easeInOut",delay:.6},children:e.jsx(Ee,{className:"w-4 h-4 text-amber-400"})})]}),e.jsx(K.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-2xl font-bold bg-gradient-to-r from-rose-600 to-pink-600 dark:from-rose-400 dark:to-pink-400 bg-clip-text text-transparent mb-4",children:"Bem-vinda, meu amor! ðŸ’•"}),e.jsxs(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-3 text-sm leading-relaxed text-muted-foreground",children:[e.jsx("p",{children:"Este portal foi feito com muito carinho, especialmente pra vocÃª."}),e.jsx("p",{children:"Ã‰ o meu presente â€” um cantinho digital onde vocÃª pode organizar sua agenda, suas tarefas, seus clientes e tudo o que precisar para brilhar ainda mais no seu trabalho."}),e.jsx("p",{className:"text-base font-medium text-foreground/80",children:"Eu te amo. Sempre. ðŸ¤"})]}),e.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"mt-8",children:e.jsxs(B,{onClick:r,className:"bg-gradient-to-r from-rose-500 to-pink-500 hover:from-rose-600 hover:to-pink-600 text-white px-8 shadow-lg shadow-rose-200 dark:shadow-rose-900/30",children:[e.jsx(Se,{className:"w-4 h-4 mr-2 fill-white"}),"ComeÃ§ar"]})}),e.jsx(K.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"mt-4 text-[11px] text-muted-foreground/60 italic",children:"â€” Com amor, CÃ¡ssio"})]})})})}var Le=1,At=.9,$t=.8,Tt=.17,oe=.1,ie=.999,Dt=.9999,Ot=.99,Pt=/[\\\/_+.#"@\[\(\{&]/,zt=/[\\\/_+.#"@\[\(\{&]/g,Bt=/[\s-]/,Be=/[\s-]/g;function ce(t,s,r,f,l,d,c){if(d===s.length)return l===t.length?Le:Ot;var h=`${l},${d}`;if(c[h]!==void 0)return c[h];for(var k=f.charAt(d),o=r.indexOf(k,l),b=0,y,p,m,N;o>=0;)y=ce(t,s,r,f,o+1,d+1,c),y>b&&(o===l?y*=Le:Pt.test(t.charAt(o-1))?(y*=$t,m=t.slice(l,o-1).match(zt),m&&l>0&&(y*=Math.pow(ie,m.length))):Bt.test(t.charAt(o-1))?(y*=At,N=t.slice(l,o-1).match(Be),N&&l>0&&(y*=Math.pow(ie,N.length))):(y*=Tt,l>0&&(y*=Math.pow(ie,o-l))),t.charAt(o)!==s.charAt(d)&&(y*=Dt)),(y<oe&&r.charAt(o-1)===f.charAt(d+1)||f.charAt(d+1)===f.charAt(d)&&r.charAt(o-1)!==f.charAt(d))&&(p=ce(t,s,r,f,o+1,d+2,c),p*oe>y&&(y=p*oe)),y>b&&(b=y),o=r.indexOf(k,o+1);return c[h]=b,b}function Re(t){return t.toLowerCase().replace(Be," ")}function Kt(t,s,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,ce(t,s,Re(t),Re(s),0,0,{})}var J='[cmdk-group=""]',de='[cmdk-group-items=""]',qt='[cmdk-group-heading=""]',Ke='[cmdk-item=""]',Me=`${Ke}:not([aria-disabled="true"])`,ue="cmdk-item-select",G="data-value",Ft=(t,s,r)=>Kt(t,s,r),qe=n.createContext(void 0),te=()=>n.useContext(qe),Fe=n.createContext(void 0),xe=()=>n.useContext(Fe),Ve=n.createContext(void 0),He=n.forwardRef((t,s)=>{let r=U(()=>{var a,u;return{search:"",value:(u=(a=t.value)!=null?a:t.defaultValue)!=null?u:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),f=U(()=>new Set),l=U(()=>new Map),d=U(()=>new Map),c=U(()=>new Set),h=Ge(t),{label:k,children:o,value:b,onValueChange:y,filter:p,shouldFilter:m,loop:N,disablePointerSelection:_=!1,vimBindings:R=!0,...I}=t,D=W(),O=W(),g=W(),z=n.useRef(null),S=er();V(()=>{if(b!==void 0){let a=b.trim();r.current.value=a,L.emit()}},[b]),V(()=>{S(6,j)},[]);let L=n.useMemo(()=>({subscribe:a=>(c.current.add(a),()=>c.current.delete(a)),snapshot:()=>r.current,setState:(a,u,x)=>{var i,w,C,$;if(!Object.is(r.current[a],u)){if(r.current[a]=u,a==="search")v(),X(),S(1,H);else if(a==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let M=document.getElementById(g);M?M.focus():(i=document.getElementById(D))==null||i.focus()}if(S(7,()=>{var M;r.current.selectedItemId=(M=E())==null?void 0:M.id,L.emit()}),x||S(5,j),((w=h.current)==null?void 0:w.value)!==void 0){let M=u??"";($=(C=h.current).onValueChange)==null||$.call(C,M);return}}L.emit()}},emit:()=>{c.current.forEach(a=>a())}}),[]),Q=n.useMemo(()=>({value:(a,u,x)=>{var i;u!==((i=d.current.get(a))==null?void 0:i.value)&&(d.current.set(a,{value:u,keywords:x}),r.current.filtered.items.set(a,re(u,x)),S(2,()=>{X(),L.emit()}))},item:(a,u)=>(f.current.add(a),u&&(l.current.has(u)?l.current.get(u).add(a):l.current.set(u,new Set([a]))),S(3,()=>{v(),X(),r.current.value||H(),L.emit()}),()=>{d.current.delete(a),f.current.delete(a),r.current.filtered.items.delete(a);let x=E();S(4,()=>{v(),(x==null?void 0:x.getAttribute("id"))===a&&H(),L.emit()})}),group:a=>(l.current.has(a)||l.current.set(a,new Set),()=>{d.current.delete(a),l.current.delete(a)}),filter:()=>h.current.shouldFilter,label:k||t["aria-label"],getDisablePointerSelection:()=>h.current.disablePointerSelection,listId:D,inputId:g,labelId:O,listInnerRef:z}),[]);function re(a,u){var x,i;let w=(i=(x=h.current)==null?void 0:x.filter)!=null?i:Ft;return a?w(a,r.current.search,u):0}function X(){if(!r.current.search||h.current.shouldFilter===!1)return;let a=r.current.filtered.items,u=[];r.current.filtered.groups.forEach(i=>{let w=l.current.get(i),C=0;w.forEach($=>{let M=a.get($);C=Math.max(M,C)}),u.push([i,C])});let x=z.current;P().sort((i,w)=>{var C,$;let M=i.getAttribute("id"),ae=w.getAttribute("id");return((C=a.get(ae))!=null?C:0)-(($=a.get(M))!=null?$:0)}).forEach(i=>{let w=i.closest(de);w?w.appendChild(i.parentElement===w?i:i.closest(`${de} > *`)):x.appendChild(i.parentElement===x?i:i.closest(`${de} > *`))}),u.sort((i,w)=>w[1]-i[1]).forEach(i=>{var w;let C=(w=z.current)==null?void 0:w.querySelector(`${J}[${G}="${encodeURIComponent(i[0])}"]`);C==null||C.parentElement.appendChild(C)})}function H(){let a=P().find(x=>x.getAttribute("aria-disabled")!=="true"),u=a==null?void 0:a.getAttribute(G);L.setState("value",u||void 0)}function v(){var a,u,x,i;if(!r.current.search||h.current.shouldFilter===!1){r.current.filtered.count=f.current.size;return}r.current.filtered.groups=new Set;let w=0;for(let C of f.current){let $=(u=(a=d.current.get(C))==null?void 0:a.value)!=null?u:"",M=(i=(x=d.current.get(C))==null?void 0:x.keywords)!=null?i:[],ae=re($,M);r.current.filtered.items.set(C,ae),ae>0&&w++}for(let[C,$]of l.current)for(let M of $)if(r.current.filtered.items.get(M)>0){r.current.filtered.groups.add(C);break}r.current.filtered.count=w}function j(){var a,u,x;let i=E();i&&(((a=i.parentElement)==null?void 0:a.firstChild)===i&&((x=(u=i.closest(J))==null?void 0:u.querySelector(qt))==null||x.scrollIntoView({block:"nearest"})),i.scrollIntoView({block:"nearest"}))}function E(){var a;return(a=z.current)==null?void 0:a.querySelector(`${Ke}[aria-selected="true"]`)}function P(){var a;return Array.from(((a=z.current)==null?void 0:a.querySelectorAll(Me))||[])}function se(a){let u=P()[a];u&&L.setState("value",u.getAttribute(G))}function le(a){var u;let x=E(),i=P(),w=i.findIndex($=>$===x),C=i[w+a];(u=h.current)!=null&&u.loop&&(C=w+a<0?i[i.length-1]:w+a===i.length?i[0]:i[w+a]),C&&L.setState("value",C.getAttribute(G))}function ge(a){let u=E(),x=u==null?void 0:u.closest(J),i;for(;x&&!i;)x=a>0?Jt(x,J):Zt(x,J),i=x==null?void 0:x.querySelector(Me);i?L.setState("value",i.getAttribute(G)):le(a)}let be=()=>se(P().length-1),ve=a=>{a.preventDefault(),a.metaKey?be():a.altKey?ge(1):le(1)},ye=a=>{a.preventDefault(),a.metaKey?se(0):a.altKey?ge(-1):le(-1)};return n.createElement(F.div,{ref:s,tabIndex:-1,...I,"cmdk-root":"",onKeyDown:a=>{var u;(u=I.onKeyDown)==null||u.call(I,a);let x=a.nativeEvent.isComposing||a.keyCode===229;if(!(a.defaultPrevented||x))switch(a.key){case"n":case"j":{R&&a.ctrlKey&&ve(a);break}case"ArrowDown":{ve(a);break}case"p":case"k":{R&&a.ctrlKey&&ye(a);break}case"ArrowUp":{ye(a);break}case"Home":{a.preventDefault(),se(0);break}case"End":{a.preventDefault(),be();break}case"Enter":{a.preventDefault();let i=E();if(i){let w=new Event(ue);i.dispatchEvent(w)}}}}},n.createElement("label",{"cmdk-label":"",htmlFor:Q.inputId,id:Q.labelId,style:rr},k),ne(t,a=>n.createElement(Fe.Provider,{value:L},n.createElement(qe.Provider,{value:Q},a))))}),Vt=n.forwardRef((t,s)=>{var r,f;let l=W(),d=n.useRef(null),c=n.useContext(Ve),h=te(),k=Ge(t),o=(f=(r=k.current)==null?void 0:r.forceMount)!=null?f:c==null?void 0:c.forceMount;V(()=>{if(!o)return h.item(l,c==null?void 0:c.id)},[o]);let b=Ue(l,d,[t.value,t.children,d],t.keywords),y=xe(),p=q(S=>S.value&&S.value===b.current),m=q(S=>o||h.filter()===!1?!0:S.search?S.filtered.items.get(l)>0:!0);n.useEffect(()=>{let S=d.current;if(!(!S||t.disabled))return S.addEventListener(ue,N),()=>S.removeEventListener(ue,N)},[m,t.onSelect,t.disabled]);function N(){var S,L;_(),(L=(S=k.current).onSelect)==null||L.call(S,b.current)}function _(){y.setState("value",b.current,!0)}if(!m)return null;let{disabled:R,value:I,onSelect:D,forceMount:O,keywords:g,...z}=t;return n.createElement(F.div,{ref:ee(d,s),...z,id:l,"cmdk-item":"",role:"option","aria-disabled":!!R,"aria-selected":!!p,"data-disabled":!!R,"data-selected":!!p,onPointerMove:R||h.getDisablePointerSelection()?void 0:_,onClick:R?void 0:N},t.children)}),Ht=n.forwardRef((t,s)=>{let{heading:r,children:f,forceMount:l,...d}=t,c=W(),h=n.useRef(null),k=n.useRef(null),o=W(),b=te(),y=q(m=>l||b.filter()===!1?!0:m.search?m.filtered.groups.has(c):!0);V(()=>b.group(c),[]),Ue(c,h,[t.value,t.heading,k]);let p=n.useMemo(()=>({id:c,forceMount:l}),[l]);return n.createElement(F.div,{ref:ee(h,s),...d,"cmdk-group":"",role:"presentation",hidden:y?void 0:!0},r&&n.createElement("div",{ref:k,"cmdk-group-heading":"","aria-hidden":!0,id:o},r),ne(t,m=>n.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?o:void 0},n.createElement(Ve.Provider,{value:p},m))))}),Gt=n.forwardRef((t,s)=>{let{alwaysRender:r,...f}=t,l=n.useRef(null),d=q(c=>!c.search);return!r&&!d?null:n.createElement(F.div,{ref:ee(l,s),...f,"cmdk-separator":"",role:"separator"})}),Ut=n.forwardRef((t,s)=>{let{onValueChange:r,...f}=t,l=t.value!=null,d=xe(),c=q(o=>o.search),h=q(o=>o.selectedItemId),k=te();return n.useEffect(()=>{t.value!=null&&d.setState("search",t.value)},[t.value]),n.createElement(F.input,{ref:s,...f,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":k.listId,"aria-labelledby":k.labelId,"aria-activedescendant":h,id:k.inputId,type:"text",value:l?t.value:c,onChange:o=>{l||d.setState("search",o.target.value),r==null||r(o.target.value)}})}),Wt=n.forwardRef((t,s)=>{let{children:r,label:f="Suggestions",...l}=t,d=n.useRef(null),c=n.useRef(null),h=q(o=>o.selectedItemId),k=te();return n.useEffect(()=>{if(c.current&&d.current){let o=c.current,b=d.current,y,p=new ResizeObserver(()=>{y=requestAnimationFrame(()=>{let m=o.offsetHeight;b.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return p.observe(o),()=>{cancelAnimationFrame(y),p.unobserve(o)}}},[]),n.createElement(F.div,{ref:ee(d,s),...l,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":h,"aria-label":f,id:k.listId},ne(t,o=>n.createElement("div",{ref:ee(c,k.listInnerRef),"cmdk-list-sizer":""},o)))}),Qt=n.forwardRef((t,s)=>{let{open:r,onOpenChange:f,overlayClassName:l,contentClassName:d,container:c,...h}=t;return n.createElement(dt,{open:r,onOpenChange:f},n.createElement(ct,{container:c},n.createElement(ut,{"cmdk-overlay":"",className:l}),n.createElement(mt,{"aria-label":t.label,"cmdk-dialog":"",className:d},n.createElement(He,{ref:s,...h}))))}),Xt=n.forwardRef((t,s)=>q(r=>r.filtered.count===0)?n.createElement(F.div,{ref:s,...t,"cmdk-empty":"",role:"presentation"}):null),Yt=n.forwardRef((t,s)=>{let{progress:r,children:f,label:l="Loading...",...d}=t;return n.createElement(F.div,{ref:s,...d,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":l},ne(t,c=>n.createElement("div",{"aria-hidden":!0},c)))}),A=Object.assign(He,{List:Wt,Item:Vt,Input:Ut,Group:Ht,Separator:Gt,Dialog:Qt,Empty:Xt,Loading:Yt});function Jt(t,s){let r=t.nextElementSibling;for(;r;){if(r.matches(s))return r;r=r.nextElementSibling}}function Zt(t,s){let r=t.previousElementSibling;for(;r;){if(r.matches(s))return r;r=r.previousElementSibling}}function Ge(t){let s=n.useRef(t);return V(()=>{s.current=t}),s}var V=typeof window>"u"?n.useEffect:n.useLayoutEffect;function U(t){let s=n.useRef();return s.current===void 0&&(s.current=t()),s}function q(t){let s=xe(),r=()=>t(s.snapshot());return n.useSyncExternalStore(s.subscribe,r,r)}function Ue(t,s,r,f=[]){let l=n.useRef(),d=te();return V(()=>{var c;let h=(()=>{var o;for(let b of r){if(typeof b=="string")return b.trim();if(typeof b=="object"&&"current"in b)return b.current?(o=b.current.textContent)==null?void 0:o.trim():l.current}})(),k=f.map(o=>o.trim());d.value(t,h,k),(c=s.current)==null||c.setAttribute(G,h),l.current=h}),l}var er=()=>{let[t,s]=n.useState(),r=U(()=>new Map);return V(()=>{r.current.forEach(f=>f()),r.current=new Map},[t]),(f,l)=>{r.current.set(f,l),s({})}};function tr(t){let s=t.type;return typeof s=="function"?s(t.props):"render"in s?s.render(t.props):t}function ne({asChild:t,children:s},r){return t&&n.isValidElement(s)?n.cloneElement(tr(s),{ref:s.ref},r(s.props.children)):r(s)}var rr={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const We=n.forwardRef(({className:t,...s},r)=>e.jsx(A,{ref:r,className:T("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...s}));We.displayName=A.displayName;const ar=({children:t,...s})=>e.jsx(Te,{...s,children:e.jsx(De,{className:"overflow-hidden p-0 shadow-lg max-h-[85vh] flex flex-col border-border/50 [&_[cmdk-input-wrapper]]:ring-0 [&_[cmdk-input-wrapper]]:ring-offset-0 [&_*:focus-visible]:ring-0 [&_*:focus-visible]:ring-offset-0",children:e.jsx(We,{className:"flex flex-col flex-1 overflow-hidden [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:t})})}),Qe=n.forwardRef(({className:t,...s},r)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Oe,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(A.Input,{ref:r,className:T("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...s})]}));Qe.displayName=A.Input.displayName;const Xe=n.forwardRef(({className:t,...s},r)=>e.jsx(A.List,{ref:r,className:T("flex-1 overflow-y-auto overflow-x-hidden",t),...s}));Xe.displayName=A.List.displayName;const Ye=n.forwardRef((t,s)=>e.jsx(A.Empty,{ref:s,className:"py-6 text-center text-sm",...t}));Ye.displayName=A.Empty.displayName;const Je=n.forwardRef(({className:t,...s},r)=>e.jsx(A.Group,{ref:r,className:T("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...s}));Je.displayName=A.Group.displayName;const nr=n.forwardRef(({className:t,...s},r)=>e.jsx(A.Separator,{ref:r,className:T("-mx-1 h-px bg-border",t),...s}));nr.displayName=A.Separator.displayName;const Ze=n.forwardRef(({className:t,...s},r)=>e.jsx(A.Item,{ref:r,className:T("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",t),...s}));Ze.displayName=A.Item.displayName;const sr={tarefa:{label:"Tarefa",icon:fe,className:"bg-yellow-500/10 text-yellow-700 dark:text-yellow-400 border-yellow-500/20"},subtarefa:{label:"Subtarefa",icon:Rt,className:"bg-blue-500/10 text-blue-700 dark:text-blue-400 border-blue-500/20"},agenda:{label:"Agenda",icon:pe,className:"bg-purple-500/10 text-purple-700 dark:text-purple-400 border-purple-500/20"},projeto:{label:"Projeto",icon:he,className:"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20"}};function lr(){const[t,s]=n.useState(!1),[r,f]=n.useState(""),[l,d]=n.useState(!1),[c,h]=n.useState({tarefas:[],subtarefas:[],agenda:[],projetos:[]}),k=$e();n.useEffect(()=>{const p=m=>{(m.key==="k"&&(m.metaKey||m.ctrlKey)||m.key==="/")&&(m.preventDefault(),s(N=>!N))};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[]),n.useEffect(()=>{if(!t)return;d(!0),(async()=>{const[m,N,_,R]=await Promise.all([Z.from("mladv_crm_tarefas").select("airtable_id, titulo, status, cliente, deadline").limit(1e3),Z.from("mladv_crm_subtarefas").select("airtable_id, titulo, status, deadline, tarefa_airtable_id").limit(1e3),Z.from("mladv_crm_agenda").select("airtable_id, titulo, tipo, status, data_local, cliente").limit(1e3),Z.from("mladv_crm_projetos").select("airtable_id, nome, status, tipo").limit(1e3)]);h({tarefas:m.data||[],subtarefas:N.data||[],agenda:_.data||[],projetos:R.data||[]}),d(!1)})()},[t]);const o=n.useMemo(()=>{var N,_,R,I,D,O;const p=r.toLowerCase().trim();if(!p)return[];const m=[];for(const g of c.tarefas)((N=g.titulo)!=null&&N.toLowerCase().includes(p)||(_=g.cliente)!=null&&_.toLowerCase().includes(p))&&m.push({id:`t-${g.airtable_id}`,title:g.titulo,subtitle:[g.status,g.cliente].filter(Boolean).join(" Â· "),type:"tarefa",href:"/admin/tarefas"});for(const g of c.subtarefas)(R=g.titulo)!=null&&R.toLowerCase().includes(p)&&m.push({id:`s-${g.airtable_id}`,title:g.titulo,subtitle:g.status,type:"subtarefa",href:"/admin/tarefas"});for(const g of c.agenda)((I=g.titulo)!=null&&I.toLowerCase().includes(p)||(D=g.cliente)!=null&&D.toLowerCase().includes(p))&&m.push({id:`a-${g.airtable_id}`,title:g.titulo,subtitle:[g.tipo,g.data_local,g.cliente].filter(Boolean).join(" Â· "),type:"agenda",href:"/admin/agenda"});for(const g of c.projetos)(O=g.nome)!=null&&O.toLowerCase().includes(p)&&m.push({id:`p-${g.airtable_id}`,title:g.nome,subtitle:[g.status,g.tipo].filter(Boolean).join(" Â· "),type:"projeto",href:"/admin/projetos"});return m.slice(0,50)},[r,c]),b=n.useMemo(()=>{const p={};for(const m of o)p[m.type]||(p[m.type]=[]),p[m.type].push(m);return p},[o]),y=n.useCallback(p=>{s(!1),f(""),k(p)},[k]);return e.jsxs(e.Fragment,{children:[e.jsxs(B,{variant:"outline",size:"sm",onClick:()=>s(!0),className:"text-muted-foreground h-8 px-3 gap-2 border-border/60 hover:border-primary/40 hover:text-foreground transition-colors",children:[e.jsx(Oe,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Buscar..."}),e.jsx("kbd",{className:"hidden sm:inline-flex pointer-events-none h-5 select-none items-center gap-0.5 rounded border border-border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground ml-2",children:"âŒ˜K"})]}),e.jsxs(ar,{open:t,onOpenChange:s,children:[e.jsx(Qe,{placeholder:"Buscar tarefas, agenda, projetos...",value:r,onValueChange:f}),e.jsxs(Xe,{children:[l&&e.jsxs("div",{className:"flex items-center justify-center py-8 gap-2 text-muted-foreground",children:[e.jsx(ht,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Carregando..."})]}),!l&&r&&o.length===0&&e.jsx(Ye,{children:"Nenhum resultado encontrado."}),!l&&!r&&e.jsx("div",{className:"py-8 text-center text-sm text-muted-foreground",children:"Digite para buscar tarefas, agenda e projetos..."}),!l&&o.length>0&&e.jsxs("div",{className:"px-1 py-1 text-xs text-muted-foreground border-b border-border/50 mb-1",children:[o.length," resultado",o.length!==1?"s":""]}),Object.entries(b).map(([p,m])=>{const N=sr[p];return e.jsx(Je,{heading:`${N.label} (${m.length})`,children:m.map(_=>{const R=N.icon;return e.jsxs(Ze,{value:_.title,onSelect:()=>y(_.href),className:"flex items-center gap-2.5 py-2.5 px-2 rounded-md cursor-pointer",children:[e.jsx("div",{className:`p-1 rounded ${N.className}`,children:e.jsx(R,{className:"w-3.5 h-3.5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm font-medium truncate block",children:_.title}),_.subtitle&&e.jsx("span",{className:"text-xs text-muted-foreground truncate block mt-0.5",children:_.subtitle})]}),e.jsx(ft,{variant:"outline",className:`text-[10px] shrink-0 ${N.className}`,children:N.label})]},_.id)})},p)})]})]})]})}const Ae=[{title:"VisÃ£o geral",items:[{href:"/admin",label:"Dashboard",icon:ze}]},{title:"CRM",items:[{href:"/admin/projetos",label:"Projetos",icon:he},{href:"/admin/agenda",label:"Agenda",icon:pe},{href:"/admin/tarefas",label:"Tarefas",icon:fe},{href:"/admin/bosi",label:"BOSI",icon:_t}]},{title:"ConteÃºdo",items:[{href:"/admin/blog",label:"Blog Site",icon:Lt}]},{title:"Conta",items:[{href:"/admin/configuracoes",label:"ConfiguraÃ§Ãµes",icon:Pe}]}],or=[{href:"/admin",label:"InÃ­cio",icon:ze},{href:"/admin/projetos",label:"Projetos",icon:he},{href:"/admin/agenda",label:"Agenda",icon:pe},{href:"/admin/tarefas",label:"Tarefas",icon:fe}];function Rr(){const{user:t,signOut:s}=et(),{prefs:r,loaded:f,updatePref:l}=tt(),d=$e(),c=rt(),h=at(),[k,o]=n.useState(!1),[b,y]=n.useState(!1),[p,m]=n.useState(null),{limitExceeded:N,error:_,dismiss:R}=nt(),[I,D]=n.useState(!0),O=n.useRef(null),g=n.useCallback(()=>{O.current&&(clearTimeout(O.current),O.current=null),D(!1)},[]),z=n.useCallback(()=>{O.current=setTimeout(()=>{D(!0)},300)},[]),S=st.includes(r.color_theme),L=r.theme==="dark",Q=()=>{l("theme",L?"light":"dark")};n.useEffect(()=>{Z.from("mladv_crm_sync_status").select("completed_at").order("completed_at",{ascending:!1}).limit(1).single().then(({data:v})=>{v!=null&&v.completed_at&&m(new Date(v.completed_at))})},[]);const re=n.useCallback(async()=>{y(!0);try{const v=await lt(),j=Object.entries((v==null?void 0:v.results)||{}).filter(([,E])=>E==null?void 0:E.error).map(([E,P])=>`${E}: ${P.error}`);if(j.length>0){const E=j.some(P=>P.includes("429")||P.includes("BILLING_LIMIT"));je(!0,E?"Limite mensal da API do Airtable atingido.":`Erro na sincronizaÃ§Ã£o: ${j[0].slice(0,120)}`)}else je(!1),we.success("Dados sincronizados");h.invalidateQueries({queryKey:["crm"]}),m(new Date)}catch{we.error("Erro ao sincronizar")}finally{y(!1)}},[h]),X=v=>{const j=Math.floor((Date.now()-v.getTime())/6e4);if(j<1)return"agora";if(j<60)return`${j}min atrÃ¡s`;const E=Math.floor(j/60);return E<24?`${E}h atrÃ¡s`:v.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})},H=async()=>{await s(),d("/")};return e.jsxs("div",{className:"flex min-h-screen bg-background",children:[e.jsx(Mt,{}),e.jsxs("aside",{className:T("hidden md:flex flex-col border-r border-sidebar-border bg-sidebar transition-all duration-300 shrink-0",I?"w-14":"w-60"),onMouseEnter:g,onMouseLeave:z,children:[e.jsxs("div",{className:"flex h-12 items-center justify-between border-b border-sidebar-border px-3",children:[!I&&e.jsx("span",{className:"font-serif text-lg font-semibold text-sidebar-foreground truncate",children:r.panel_name||"Painel Admin"}),e.jsx(B,{variant:"ghost",size:"icon",onClick:()=>D(!I),className:"h-8 w-8 text-sidebar-foreground hover:bg-sidebar-accent shrink-0",children:I?e.jsx(jt,{className:"h-4 w-4"}):e.jsx(wt,{className:"h-4 w-4"})})]}),e.jsx("nav",{className:"flex-1 space-y-3 p-2 overflow-y-auto",children:Ae.map(v=>e.jsxs("div",{children:[!I&&e.jsx("p",{className:"px-2.5 text-[10px] font-semibold uppercase tracking-widest text-muted-foreground/50 mb-1",children:v.title}),e.jsx("div",{className:"space-y-px",children:v.items.map(j=>{const E=c.pathname===j.href||j.href!=="/admin"&&c.pathname.startsWith(j.href);return e.jsxs(Y,{to:j.href,title:I?j.label:void 0,className:T("group flex items-center gap-2.5 rounded-lg transition-all duration-150 text-[13px]",I?"justify-center p-2":"px-2.5 py-[7px]",E?"bg-sidebar-accent text-accent font-medium":"text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"),children:[e.jsx(j.icon,{className:T("w-[18px] h-[18px] shrink-0 transition-all duration-200",E?"text-accent scale-110":"text-muted-foreground group-hover:text-foreground group-hover:scale-110")}),!I&&e.jsx("span",{className:"truncate",children:j.label})]},j.href)})})]},v.title))}),e.jsx("div",{className:"p-2 space-y-1.5 border-t border-sidebar-border",children:e.jsx(Y,{to:"/admin/posts/new",className:"block",children:e.jsxs(B,{className:T("w-full gap-1.5 h-8 text-xs font-medium gold-gradient text-primary-foreground hover:opacity-90",I&&"px-0"),size:"sm",title:I?"Novo Post":void 0,children:[e.jsx(pt,{className:"w-3.5 h-3.5 shrink-0"}),!I&&e.jsx("span",{children:"Novo Post"})]})})})]}),e.jsxs("div",{className:"flex flex-1 flex-col min-w-0",children:[e.jsxs("header",{className:"sticky top-0 z-40 flex h-12 items-center justify-between border-b border-border/40 px-4 glass",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsxs(Y,{to:"/",className:"flex items-center gap-1.5 text-muted-foreground hover:text-foreground transition-colors text-xs",children:[e.jsx(kt,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Site"})]}),e.jsx("div",{className:"w-px h-4 bg-border/60 hidden sm:block"}),e.jsx(lr,{})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[!S&&e.jsx(B,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:Q,children:L?e.jsx(Nt,{className:"h-4 w-4"}):e.jsx(Ct,{className:"h-4 w-4"})}),e.jsxs(ke,{children:[e.jsx(Ne,{asChild:!0,children:e.jsx(B,{variant:"ghost",size:"sm",onClick:re,disabled:b,className:"text-muted-foreground h-7 w-7 p-0",children:e.jsx(Et,{className:T("w-3.5 h-3.5",b&&"animate-spin")})})}),e.jsx(Ce,{side:"bottom",className:"text-xs",children:p?`Sync: ${X(p)}`:"Sincronizar CRM"})]}),e.jsx(B,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>d("/admin/configuracoes"),children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-4 bg-border/60 mx-0.5 hidden sm:block"}),e.jsx("span",{className:"text-[11px] text-muted-foreground hidden md:block truncate max-w-[160px]",children:t==null?void 0:t.email}),e.jsxs(ke,{children:[e.jsx(Ne,{asChild:!0,children:e.jsx(B,{variant:"ghost",size:"sm",onClick:H,className:"text-muted-foreground hover:text-destructive h-7 w-7 p-0",children:e.jsx(Ie,{className:"w-3.5 h-3.5"})})}),e.jsx(Ce,{side:"bottom",className:"text-xs",children:"Sair"})]})]})]}),N&&e.jsxs("div",{className:"mx-4 md:mx-6 mt-3 flex items-center gap-3 rounded-lg border border-amber-500/30 bg-amber-500/10 px-4 py-2.5 text-sm text-amber-700 dark:text-amber-300",children:[e.jsx(It,{className:"h-4 w-4 shrink-0"}),e.jsx("span",{className:"flex-1",children:_||"Limite da API do Airtable atingido. Dados salvos apenas localmente."}),e.jsx("button",{onClick:R,className:"shrink-0 rounded p-0.5 hover:bg-amber-500/20 transition-colors",children:e.jsx(ot,{className:"h-3.5 w-3.5"})})]}),e.jsx("main",{className:"flex-1 overflow-auto p-4 md:p-6 pb-20 md:pb-6",children:e.jsx("div",{className:"mx-auto max-w-[1400px]",children:e.jsx(it,{})})})]}),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-xl border-t border-border/40 px-1 py-1 md:hidden z-40",children:e.jsxs("div",{className:"flex justify-around items-center max-w-md mx-auto",children:[or.map(v=>{const j=c.pathname===v.href;return e.jsxs(Y,{to:v.href,className:T("flex flex-col items-center gap-0.5 p-1.5 rounded-lg transition-colors min-w-[3.5rem]",j?"text-accent":"text-muted-foreground"),children:[e.jsx(v.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[10px] leading-tight font-medium",children:v.label})]},v.href)}),e.jsxs(xt,{open:k,onOpenChange:o,children:[e.jsx(gt,{asChild:!0,children:e.jsxs("button",{className:"flex flex-col items-center gap-0.5 p-1.5 rounded-lg text-muted-foreground min-w-[3.5rem]",children:[e.jsx(St,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[10px] leading-tight font-medium",children:"Mais"})]})}),e.jsxs(bt,{side:"bottom",className:"rounded-t-2xl pb-safe",children:[e.jsx(vt,{className:"mb-2",children:e.jsx(yt,{className:"text-left text-sm font-medium",children:"Menu"})}),e.jsx("div",{className:"space-y-0.5 max-h-[60vh] overflow-y-auto",children:Ae.map(v=>e.jsxs("div",{children:[e.jsx("p",{className:"px-2.5 pt-3 pb-1 text-[10px] font-semibold uppercase tracking-widest text-muted-foreground/50",children:v.title}),v.items.map(j=>{const E=c.pathname===j.href;return e.jsxs(Y,{to:j.href,onClick:()=>o(!1),className:T("flex items-center gap-3 px-2.5 py-2.5 rounded-md transition-colors text-[13px]",E?"bg-accent/10 text-accent font-medium":"text-muted-foreground hover:text-foreground hover:bg-muted/40"),children:[e.jsx(j.icon,{className:"w-4 h-4"}),e.jsx("span",{children:j.label})]},j.href)})]},v.title))}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-border/40 flex items-center justify-between",children:[e.jsx("span",{className:"text-[11px] text-muted-foreground truncate mr-4",children:t==null?void 0:t.email}),e.jsxs(B,{variant:"ghost",size:"sm",onClick:()=>{H(),o(!1)},className:"text-destructive h-7 shrink-0 text-xs",children:[e.jsx(Ie,{className:"w-3.5 h-3.5 mr-1"}),"Sair"]})]})]})]})]})})]})}export{Rr as AdminLayout,Rr as default};
