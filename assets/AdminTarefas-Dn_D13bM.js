import{c as Nt,r as i,_ as L,f as Je,W as Hn,al as qn,j as u,e as Pe}from"./index-CtsJZjVD.js";import{A as Gn,P as Jn}from"./AdminLayout-B1EAX9Ih.js";import{T as Zn}from"./TarefaSheet-Bbw0MsEh.js";import{C as vn,c as mn}from"./card-Bl6Lsyvc.js";import{B as Ze}from"./badge-BEU10yW7.js";import{B as ke}from"./button-iJbIC8yL.js";import{I as Qn}from"./input-1DORRgsD.js";import{S as Jt,C as er}from"./checkbox-ChTjJY1H.js";import{L as tr}from"./label-DL7jfP8Y.js";import{S as He,a as qe,b as gt,d as Ge,e as xe}from"./select-DeV3-_tz.js";import{P as nr,a as rr,b as sr}from"./popover-5WSTsAP_.js";import{d as xt,b as Bt,T as or,c as bn}from"./crmTypes-DP3iBdIv.js";import{S as ir,T as ar,K as lr}from"./CrmSkeletons-t1hYzYPa.js";import{S as cr}from"./search-DyRZdP3k.js";import{F as ur}from"./folder-kanban-BvChiypQ.js";import{L as dr}from"./list-B_NzJ4q6.js";import{U as fr}from"./users-CzHNTk2b.js";import{C as hr}from"./calendar-DIfnZnNz.js";import{P as gr}from"./pencil-DXBtrWFH.js";import{T as pr}from"./trash-2-C6vcGgbx.js";import{C as vr}from"./chevron-up-BAdjDZxD.js";import{C as mr}from"./chevron-right-B-YTG414.js";import"./dialog-C7w8Hxjs.js";import"./index-C-8BFZJY.js";import"./heart-BwxRwLUs.js";import"./sparkles-XNSsiAiX.js";import"./house-CqEmnknK.js";import"./menu-BjDrXSAf.js";import"./file-text-BKmNecAx.js";import"./form-DQWI7eI5.js";import"./textarea-cK4BphRx.js";import"./separator-CQbjndKp.js";import"./alert-dialog-CYETQbU4.js";import"./loader-circle-CsxACxy4.js";import"./circle-check-B3bU2P1L.js";import"./circle-IYVS7fC_.js";import"./clock-mCxINhRW.js";import"./types-C9wiu8_K.js";import"./index-Dpqfu98b.js";import"./check-Dtu3uIvr.js";import"./index-S2y_AUBt.js";import"./skeleton-CQRb4J3S.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=Nt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=Nt("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=Nt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=Nt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);function Sr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const Et=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Be(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Xt(e){return"nodeType"in e}function V(e){var t,n;return e?Be(e)?e:Xt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Ut(e){const{Document:t}=V(e);return e instanceof t}function st(e){return Be(e)?!1:e instanceof V(e).HTMLElement}function xn(e){return e instanceof V(e).SVGElement}function Fe(e){return e?Be(e)?e.document:Xt(e)?Ut(e)?e:st(e)||xn(e)?e.ownerDocument:document:document:document}const le=Et?i.useLayoutEffect:i.useEffect;function Tt(e){const t=i.useRef(e);return le(()=>{t.current=e}),i.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function Cr(){const e=i.useRef(null),t=i.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=i.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function nt(e,t){t===void 0&&(t=[e]);const n=i.useRef(e);return le(()=>{n.current!==e&&(n.current=e)},t),n}function ot(e,t){const n=i.useRef();return i.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function yt(e){const t=Tt(e),n=i.useRef(null),r=i.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function wt(e){const t=i.useRef();return i.useEffect(()=>{t.current=e},[e]),t.current}let Mt={};function it(e,t){return i.useMemo(()=>{if(t)return t;const n=Mt[e]==null?0:Mt[e]+1;return Mt[e]=n,e+"-"+n},[e,t])}function yn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,l)=>{const a=Object.entries(l);for(const[c,d]of a){const g=o[c];g!=null&&(o[c]=g+e*d)}return o},{...t})}}const ze=yn(1),St=yn(-1);function Dr(e){return"clientX"in e&&"clientY"in e}function jt(e){if(!e)return!1;const{KeyboardEvent:t}=V(e.target);return t&&e instanceof t}function Rr(e){if(!e)return!1;const{TouchEvent:t}=V(e.target);return t&&e instanceof t}function Ct(e){if(Rr(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Dr(e)?{x:e.clientX,y:e.clientY}:null}const Te=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Te.Translate.toString(e),Te.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Zt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Nr(e){return e.matches(Zt)?e:e.querySelector(Zt)}const Er={display:"none"};function Tr(e){let{id:t,value:n}=e;return L.createElement("div",{id:t,style:Er},n)}function jr(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return L.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Ar(){const[e,t]=i.useState("");return{announce:i.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const wn=i.createContext(null);function kr(e){const t=i.useContext(wn);i.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Or(){const[e]=i.useState(()=>new Set),t=i.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[i.useCallback(r=>{let{type:s,event:o}=r;e.forEach(l=>{var a;return(a=l[s])==null?void 0:a.call(l,o)})},[e]),t]}const Ir={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Mr={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Lr(e){let{announcements:t=Mr,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=Ir}=e;const{announce:o,announcement:l}=Ar(),a=it("DndLiveRegion"),[c,d]=i.useState(!1);if(i.useEffect(()=>{d(!0)},[]),kr(i.useMemo(()=>({onDragStart(h){let{active:v}=h;o(t.onDragStart({active:v}))},onDragMove(h){let{active:v,over:p}=h;t.onDragMove&&o(t.onDragMove({active:v,over:p}))},onDragOver(h){let{active:v,over:p}=h;o(t.onDragOver({active:v,over:p}))},onDragEnd(h){let{active:v,over:p}=h;o(t.onDragEnd({active:v,over:p}))},onDragCancel(h){let{active:v,over:p}=h;o(t.onDragCancel({active:v,over:p}))}}),[o,t])),!c)return null;const g=L.createElement(L.Fragment,null,L.createElement(Tr,{id:r,value:s.draggable}),L.createElement(jr,{id:a,announcement:l}));return n?Je.createPortal(g,n):g}var z;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(z||(z={}));function Dt(){}function Pr(e,t){return i.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function zr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ce=Object.freeze({x:0,y:0});function Br(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Fr(e,t){const n=Ct(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function $r(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Kr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Qt(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function Yr(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}const Xr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=Qt(t),o=[];for(const l of r){const{id:a}=l,c=n.get(a);if(c){const d=Qt(c),g=s.reduce((v,p,w)=>v+Br(d[w],p),0),h=Number((g/4).toFixed(4));o.push({id:a,data:{droppableContainer:l,value:h}})}}return o.sort($r)};function Ur(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=s-r,a=o-n;if(r<s&&n<o){const c=t.width*t.height,d=e.width*e.height,g=l*a,h=g/(c+d-g);return Number(h.toFixed(4))}return 0}const Vr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const o of r){const{id:l}=o,a=n.get(l);if(a){const c=Ur(a,t);c>0&&s.push({id:l,data:{droppableContainer:o,value:c}})}}return s.sort(Kr)};function Wr(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Sn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ce}function _r(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((l,a)=>({...l,top:l.top+e*a.y,bottom:l.bottom+e*a.y,left:l.left+e*a.x,right:l.right+e*a.x}),{...n})}}const Hr=_r(1);function Cn(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function qr(e,t,n){const r=Cn(t);if(!r)return e;const{scaleX:s,scaleY:o,x:l,y:a}=r,c=e.left-l-(1-s)*parseFloat(n),d=e.top-a-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),g=s?e.width/s:e.width,h=o?e.height/o:e.height;return{width:g,height:h,top:d,right:c+g,bottom:d+h,left:c}}const Gr={ignoreTransform:!1};function $e(e,t){t===void 0&&(t=Gr);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:g}=V(e).getComputedStyle(e);d&&(n=qr(n,d,g))}const{top:r,left:s,width:o,height:l,bottom:a,right:c}=n;return{top:r,left:s,width:o,height:l,bottom:a,right:c}}function en(e){return $e(e,{ignoreTransform:!0})}function Jr(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Zr(e,t){return t===void 0&&(t=V(e).getComputedStyle(e)),t.position==="fixed"}function Qr(e,t){t===void 0&&(t=V(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?n.test(o):!1})}function Vt(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Ut(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!st(s)||xn(s)||n.includes(s))return n;const o=V(e).getComputedStyle(s);return s!==e&&Qr(s,o)&&n.push(s),Zr(s,o)?n:r(s.parentNode)}return e?r(e):n}function Dn(e){const[t]=Vt(e,1);return t??null}function Lt(e){return!Et||!e?null:Be(e)?e:Xt(e)?Ut(e)||e===Fe(e).scrollingElement?window:st(e)?e:null:null}function Rn(e){return Be(e)?e.scrollX:e.scrollLeft}function Nn(e){return Be(e)?e.scrollY:e.scrollTop}function Ft(e){return{x:Rn(e),y:Nn(e)}}var F;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(F||(F={}));function En(e){return!Et||!e?!1:e===document.scrollingElement}function Tn(e){const t={x:0,y:0},n=En(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:l,isRight:a,maxScroll:r,minScroll:t}}const es={x:.2,y:.2};function ts(e,t,n,r,s){let{top:o,left:l,right:a,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=es);const{isTop:d,isBottom:g,isLeft:h,isRight:v}=Tn(e),p={x:0,y:0},w={x:0,y:0},b={height:t.height*s.y,width:t.width*s.x};return!d&&o<=t.top+b.height?(p.y=F.Backward,w.y=r*Math.abs((t.top+b.height-o)/b.height)):!g&&c>=t.bottom-b.height&&(p.y=F.Forward,w.y=r*Math.abs((t.bottom-b.height-c)/b.height)),!v&&a>=t.right-b.width?(p.x=F.Forward,w.x=r*Math.abs((t.right-b.width-a)/b.width)):!h&&l<=t.left+b.width&&(p.x=F.Backward,w.x=r*Math.abs((t.left+b.width-l)/b.width)),{direction:p,speed:w}}function ns(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function jn(e){return e.reduce((t,n)=>ze(t,Ft(n)),ce)}function rs(e){return e.reduce((t,n)=>t+Rn(n),0)}function ss(e){return e.reduce((t,n)=>t+Nn(n),0)}function An(e,t){if(t===void 0&&(t=$e),!e)return;const{top:n,left:r,bottom:s,right:o}=t(e);Dn(e)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const os=[["x",["left","right"],rs],["y",["top","bottom"],ss]];class Wt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Vt(n),s=jn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,a]of os)for(const c of l)Object.defineProperty(this,c,{get:()=>{const d=a(r),g=s[o]-d;return this.rect[c]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Qe{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function is(e){const{EventTarget:t}=V(e);return e instanceof t?e:Fe(e)}function Pt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var se;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(se||(se={}));function tn(e){e.preventDefault()}function as(e){e.stopPropagation()}var k;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(k||(k={}));const kn={start:[k.Space,k.Enter],cancel:[k.Esc],end:[k.Space,k.Enter,k.Tab]},ls=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case k.Right:return{...n,x:n.x+25};case k.Left:return{...n,x:n.x-25};case k.Down:return{...n,y:n.y+25};case k.Up:return{...n,y:n.y-25}}};class On{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Qe(Fe(n)),this.windowListeners=new Qe(V(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(se.Resize,this.handleCancel),this.windowListeners.add(se.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(se.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&An(r),n(ce)}handleKeyDown(t){if(jt(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=kn,coordinateGetter:l=ls,scrollBehavior:a="smooth"}=s,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=r.current,g=d?{x:d.left,y:d.top}:ce;this.referenceCoordinates||(this.referenceCoordinates=g);const h=l(t,{active:n,context:r.current,currentCoordinates:g});if(h){const v=St(h,g),p={x:0,y:0},{scrollableAncestors:w}=r.current;for(const b of w){const m=t.code,{isTop:S,isRight:C,isLeft:x,isBottom:E,maxScroll:N,minScroll:T}=Tn(b),y=ns(b),D={x:Math.min(m===k.Right?y.right-y.width/2:y.right,Math.max(m===k.Right?y.left:y.left+y.width/2,h.x)),y:Math.min(m===k.Down?y.bottom-y.height/2:y.bottom,Math.max(m===k.Down?y.top:y.top+y.height/2,h.y))},O=m===k.Right&&!C||m===k.Left&&!x,M=m===k.Down&&!E||m===k.Up&&!S;if(O&&D.x!==h.x){const A=b.scrollLeft+v.x,W=m===k.Right&&A<=N.x||m===k.Left&&A>=T.x;if(W&&!v.y){b.scrollTo({left:A,behavior:a});return}W?p.x=b.scrollLeft-A:p.x=m===k.Right?b.scrollLeft-N.x:b.scrollLeft-T.x,p.x&&b.scrollBy({left:-p.x,behavior:a});break}else if(M&&D.y!==h.y){const A=b.scrollTop+v.y,W=m===k.Down&&A<=N.y||m===k.Up&&A>=T.y;if(W&&!v.x){b.scrollTo({top:A,behavior:a});return}W?p.y=b.scrollTop-A:p.y=m===k.Down?b.scrollTop-N.y:b.scrollTop-T.y,p.y&&b.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(t,ze(St(h,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}On.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=kn,onActivation:s}=t,{active:o}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const a=o.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function nn(e){return!!(e&&"distance"in e)}function rn(e){return!!(e&&"delay"in e)}class _t{constructor(t,n,r){var s;r===void 0&&(r=is(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:l}=o;this.props=t,this.events=n,this.document=Fe(l),this.documentListeners=new Qe(this.document),this.listeners=new Qe(r),this.windowListeners=new Qe(V(l)),this.initialCoordinates=(s=Ct(o))!=null?s:ce,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(se.Resize,this.handleCancel),this.windowListeners.add(se.DragStart,tn),this.windowListeners.add(se.VisibilityChange,this.handleCancel),this.windowListeners.add(se.ContextMenu,tn),this.documentListeners.add(se.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(rn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(nn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(se.Click,as,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(se.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:l,options:{activationConstraint:a}}=o;if(!s)return;const c=(n=Ct(t))!=null?n:ce,d=St(s,c);if(!r&&a){if(nn(a)){if(a.tolerance!=null&&Pt(d,a.tolerance))return this.handleCancel();if(Pt(d,a.distance))return this.handleStart()}if(rn(a)&&Pt(d,a.tolerance))return this.handleCancel();this.handlePending(a,d);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===k.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const cs={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ht extends _t{constructor(t){const{event:n}=t,r=Fe(n.target);super(t,cs,r)}}Ht.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const us={move:{name:"mousemove"},end:{name:"mouseup"}};var $t;(function(e){e[e.RightClick=2]="RightClick"})($t||($t={}));class ds extends _t{constructor(t){super(t,us,Fe(t.event.target))}}ds.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===$t.RightClick?!1:(r==null||r({event:n}),!0)}}];const zt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class fs extends _t{constructor(t){super(t,zt)}static setup(){return window.addEventListener(zt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(zt.move.name,t)};function t(){}}}fs.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var et;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(et||(et={}));var Rt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Rt||(Rt={}));function hs(e){let{acceleration:t,activator:n=et.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:l=5,order:a=Rt.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:g,delta:h,threshold:v}=e;const p=ps({delta:h,disabled:!o}),[w,b]=Cr(),m=i.useRef({x:0,y:0}),S=i.useRef({x:0,y:0}),C=i.useMemo(()=>{switch(n){case et.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case et.DraggableRect:return s}},[n,s,c]),x=i.useRef(null),E=i.useCallback(()=>{const T=x.current;if(!T)return;const y=m.current.x*S.current.x,D=m.current.y*S.current.y;T.scrollBy(y,D)},[]),N=i.useMemo(()=>a===Rt.TreeOrder?[...d].reverse():d,[a,d]);i.useEffect(()=>{if(!o||!d.length||!C){b();return}for(const T of N){if((r==null?void 0:r(T))===!1)continue;const y=d.indexOf(T),D=g[y];if(!D)continue;const{direction:O,speed:M}=ts(T,D,C,t,v);for(const A of["x","y"])p[A][O[A]]||(M[A]=0,O[A]=0);if(M.x>0||M.y>0){b(),x.current=T,w(E,l),m.current=M,S.current=O;return}}m.current={x:0,y:0},S.current={x:0,y:0},b()},[t,E,r,b,o,l,JSON.stringify(C),JSON.stringify(p),w,d,N,g,JSON.stringify(v)])}const gs={x:{[F.Backward]:!1,[F.Forward]:!1},y:{[F.Backward]:!1,[F.Forward]:!1}};function ps(e){let{delta:t,disabled:n}=e;const r=wt(t);return ot(s=>{if(n||!r||!s)return gs;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[F.Backward]:s.x[F.Backward]||o.x===-1,[F.Forward]:s.x[F.Forward]||o.x===1},y:{[F.Backward]:s.y[F.Backward]||o.y===-1,[F.Forward]:s.y[F.Forward]||o.y===1}}},[n,t,r])}function vs(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return ot(s=>{var o;return t==null?null:(o=r??s)!=null?o:null},[r,t])}function ms(e,t){return i.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...o]},[]),[e,t])}var rt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(rt||(rt={}));var Kt;(function(e){e.Optimized="optimized"})(Kt||(Kt={}));const sn=new Map;function bs(e,t){let{dragging:n,dependencies:r,config:s}=t;const[o,l]=i.useState(null),{frequency:a,measure:c,strategy:d}=s,g=i.useRef(e),h=m(),v=nt(h),p=i.useCallback(function(S){S===void 0&&(S=[]),!v.current&&l(C=>C===null?S:C.concat(S.filter(x=>!C.includes(x))))},[v]),w=i.useRef(null),b=ot(S=>{if(h&&!n)return sn;if(!S||S===sn||g.current!==e||o!=null){const C=new Map;for(let x of e){if(!x)continue;if(o&&o.length>0&&!o.includes(x.id)&&x.rect.current){C.set(x.id,x.rect.current);continue}const E=x.node.current,N=E?new Wt(c(E),E):null;x.rect.current=N,N&&C.set(x.id,N)}return C}return S},[e,o,n,h,c]);return i.useEffect(()=>{g.current=e},[e]),i.useEffect(()=>{h||p()},[n,h]),i.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),i.useEffect(()=>{h||typeof a!="number"||w.current!==null||(w.current=setTimeout(()=>{p(),w.current=null},a))},[a,h,p,...r]),{droppableRects:b,measureDroppableContainers:p,measuringScheduled:o!=null};function m(){switch(d){case rt.Always:return!1;case rt.BeforeDragging:return n;default:return!n}}}function qt(e,t){return ot(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function xs(e,t){return qt(e,t)}function ys(e){let{callback:t,disabled:n}=e;const r=Tt(t),s=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return i.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function At(e){let{callback:t,disabled:n}=e;const r=Tt(t),s=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return i.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function ws(e){return new Wt($e(e),e)}function on(e,t,n){t===void 0&&(t=ws);const[r,s]=i.useState(null);function o(){s(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??n)!=null?d:null}const g=t(e);return JSON.stringify(c)===JSON.stringify(g)?c:g})}const l=ys({callback(c){if(e)for(const d of c){const{type:g,target:h}=d;if(g==="childList"&&h instanceof HTMLElement&&h.contains(e)){o();break}}}}),a=At({callback:o});return le(()=>{o(),e?(a==null||a.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),l==null||l.disconnect())},[e]),r}function Ss(e){const t=qt(e);return Sn(e,t)}const an=[];function Cs(e){const t=i.useRef(e),n=ot(r=>e?r&&r!==an&&e&&t.current&&e.parentNode===t.current.parentNode?r:Vt(e):an,[e]);return i.useEffect(()=>{t.current=e},[e]),n}function Ds(e){const[t,n]=i.useState(null),r=i.useRef(e),s=i.useCallback(o=>{const l=Lt(o.target);l&&n(a=>a?(a.set(l,Ft(l)),new Map(a)):null)},[]);return i.useEffect(()=>{const o=r.current;if(e!==o){l(o);const a=e.map(c=>{const d=Lt(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,Ft(d)]):null}).filter(c=>c!=null);n(a.length?new Map(a):null),r.current=e}return()=>{l(e),l(o)};function l(a){a.forEach(c=>{const d=Lt(c);d==null||d.removeEventListener("scroll",s)})}},[s,e]),i.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>ze(o,l),ce):jn(e):ce,[e,t])}function ln(e,t){t===void 0&&(t=[]);const n=i.useRef(null);return i.useEffect(()=>{n.current=null},t),i.useEffect(()=>{const r=e!==ce;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?St(e,n.current):ce}function Rs(e){i.useEffect(()=>{if(!Et)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Ns(e,t){return i.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=l=>{o(l,t)},n},{}),[e,t])}function In(e){return i.useMemo(()=>e?Jr(e):null,[e])}const cn=[];function Es(e,t){t===void 0&&(t=$e);const[n]=e,r=In(n?V(n):null),[s,o]=i.useState(cn);function l(){o(()=>e.length?e.map(c=>En(c)?r:new Wt(t(c),c)):cn)}const a=At({callback:l});return le(()=>{a==null||a.disconnect(),l(),e.forEach(c=>a==null?void 0:a.observe(c))},[e]),s}function Mn(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return st(t)?t:e}function Ts(e){let{measure:t}=e;const[n,r]=i.useState(null),s=i.useCallback(d=>{for(const{target:g}of d)if(st(g)){r(h=>{const v=t(g);return h?{...h,width:v.width,height:v.height}:v});break}},[t]),o=At({callback:s}),l=i.useCallback(d=>{const g=Mn(d);o==null||o.disconnect(),g&&(o==null||o.observe(g)),r(g?t(g):null)},[t,o]),[a,c]=yt(l);return i.useMemo(()=>({nodeRef:a,rect:n,setRef:c}),[n,a,c])}const js=[{sensor:Ht,options:{}},{sensor:On,options:{}}],As={current:{}},bt={draggable:{measure:en},droppable:{measure:en,strategy:rt.WhileDragging,frequency:Kt.Optimized},dragOverlay:{measure:$e}};class tt extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const ks={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new tt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Dt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:bt,measureDroppableContainers:Dt,windowRect:null,measuringScheduled:!1},Ln={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Dt,draggableNodes:new Map,over:null,measureDroppableContainers:Dt},at=i.createContext(Ln),Pn=i.createContext(ks);function Os(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new tt}}}function Is(e,t){switch(t.type){case z.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case z.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case z.DragEnd:case z.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case z.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new tt(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case z.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const l=new tt(e.droppable.containers);return l.set(n,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:l}}}case z.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new tt(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function Ms(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=i.useContext(at),o=wt(r),l=wt(n==null?void 0:n.id);return i.useEffect(()=>{if(!t&&!r&&o&&l!=null){if(!jt(o)||document.activeElement===o.target)return;const a=s.get(l);if(!a)return;const{activatorNode:c,node:d}=a;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const g of[c.current,d.current]){if(!g)continue;const h=Nr(g);if(h){h.focus();break}}})}},[r,t,s,l,o]),null}function zn(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...r}),n):n}function Ls(e){return i.useMemo(()=>({draggable:{...bt.draggable,...e==null?void 0:e.draggable},droppable:{...bt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...bt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Ps(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const o=i.useRef(!1),{x:l,y:a}=typeof s=="boolean"?{x:s,y:s}:s;le(()=>{if(!l&&!a||!t){o.current=!1;return}if(o.current||!r)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const g=n(d),h=Sn(g,r);if(l||(h.x=0),a||(h.y=0),o.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const v=Dn(d);v&&v.scrollBy({top:h.y,left:h.x})}},[t,l,a,r,n])}const kt=i.createContext({...ce,scaleX:1,scaleY:1});var Ee;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ee||(Ee={}));const zs=i.memo(function(t){var n,r,s,o;let{id:l,accessibility:a,autoScroll:c=!0,children:d,sensors:g=js,collisionDetection:h=Vr,measuring:v,modifiers:p,...w}=t;const b=i.useReducer(Is,void 0,Os),[m,S]=b,[C,x]=Or(),[E,N]=i.useState(Ee.Uninitialized),T=E===Ee.Initialized,{draggable:{active:y,nodes:D,translate:O},droppable:{containers:M}}=m,A=y!=null?D.get(y):null,W=i.useRef({initial:null,translated:null}),$=i.useMemo(()=>{var U;return y!=null?{id:y,data:(U=A==null?void 0:A.data)!=null?U:As,rect:W}:null},[y,A]),G=i.useRef(null),[oe,je]=i.useState(null),[X,Oe]=i.useState(null),_=nt(w,Object.values(w)),Ae=it("DndDescribedBy",l),ge=i.useMemo(()=>M.getEnabled(),[M]),B=Ls(v),{droppableRects:ie,measureDroppableContainers:ee,measuringScheduled:te}=bs(ge,{dragging:T,dependencies:[O.x,O.y],config:B.droppable}),H=vs(D,y),ye=i.useMemo(()=>X?Ct(X):null,[X]),ue=_n(),ae=xs(H,B.draggable.measure);Ps({activeNode:y!=null?D.get(y):null,config:ue.layoutShiftCompensation,initialRect:ae,measure:B.draggable.measure});const j=on(H,B.draggable.measure,ae),we=on(H?H.parentElement:null),q=i.useRef({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:ie,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),pe=M.getNodeFor((n=q.current.over)==null?void 0:n.id),ne=Ts({measure:B.dragOverlay.measure}),ve=(r=ne.nodeRef.current)!=null?r:H,Se=T?(s=ne.rect)!=null?s:j:null,lt=!!(ne.nodeRef.current&&ne.rect),Ke=Ss(lt?null:j),Ye=In(ve?V(ve):null),de=Cs(T?pe??H:null),Ie=Es(de),Me=zn(p,{transform:{x:O.x-Ke.x,y:O.y-Ke.y,scaleX:1,scaleY:1},activatorEvent:X,active:$,activeNodeRect:j,containerNodeRect:we,draggingNodeRect:Se,over:q.current.over,overlayNodeRect:ne.rect,scrollableAncestors:de,scrollableAncestorRects:Ie,windowRect:Ye}),ct=ye?ze(ye,O):null,ut=Ds(de),Ot=ln(ut),dt=ln(ut,[j]),f=ze(Me,Ot),R=Se?Hr(Se,Me):null,I=$&&R?h({active:$,collisionRect:R,droppableRects:ie,droppableContainers:ge,pointerCoordinates:ct}):null,K=Yr(I,"id"),[P,Ce]=i.useState(null),ft=lt?Me:ze(Me,dt),Xe=Wr(ft,(o=P==null?void 0:P.rect)!=null?o:null,j),me=i.useRef(null),ht=i.useCallback((U,J)=>{let{sensor:Z,options:De}=J;if(G.current==null)return;const re=D.get(G.current);if(!re)return;const Q=U.nativeEvent,fe=new Z({active:G.current,activeNode:re,event:Q,options:De,context:q,onAbort(Y){if(!D.get(Y))return;const{onDragAbort:he}=_.current,be={id:Y};he==null||he(be),C({type:"onDragAbort",event:be})},onPending(Y,Re,he,be){if(!D.get(Y))return;const{onDragPending:We}=_.current,Ne={id:Y,constraint:Re,initialCoordinates:he,offset:be};We==null||We(Ne),C({type:"onDragPending",event:Ne})},onStart(Y){const Re=G.current;if(Re==null)return;const he=D.get(Re);if(!he)return;const{onDragStart:be}=_.current,Ve={activatorEvent:Q,active:{id:Re,data:he.data,rect:W}};Je.unstable_batchedUpdates(()=>{be==null||be(Ve),N(Ee.Initializing),S({type:z.DragStart,initialCoordinates:Y,active:Re}),C({type:"onDragStart",event:Ve}),je(me.current),Oe(Q)})},onMove(Y){S({type:z.DragMove,coordinates:Y})},onEnd:Le(z.DragEnd),onCancel:Le(z.DragCancel)});me.current=fe;function Le(Y){return async function(){const{active:he,collisions:be,over:Ve,scrollAdjustedTranslate:We}=q.current;let Ne=null;if(he&&We){const{cancelDrop:_e}=_.current;Ne={activatorEvent:Q,active:he,collisions:be,delta:We,over:Ve},Y===z.DragEnd&&typeof _e=="function"&&await Promise.resolve(_e(Ne))&&(Y=z.DragCancel)}G.current=null,Je.unstable_batchedUpdates(()=>{S({type:Y}),N(Ee.Uninitialized),Ce(null),je(null),Oe(null),me.current=null;const _e=Y===z.DragEnd?"onDragEnd":"onDragCancel";if(Ne){const It=_.current[_e];It==null||It(Ne),C({type:_e,event:Ne})}})}}},[D]),Ue=i.useCallback((U,J)=>(Z,De)=>{const re=Z.nativeEvent,Q=D.get(De);if(G.current!==null||!Q||re.dndKit||re.defaultPrevented)return;const fe={active:Q};U(Z,J.options,fe)===!0&&(re.dndKit={capturedBy:J.sensor},G.current=De,ht(Z,J))},[D,ht]),Gt=ms(g,Ue);Rs(g),le(()=>{j&&E===Ee.Initializing&&N(Ee.Initialized)},[j,E]),i.useEffect(()=>{const{onDragMove:U}=_.current,{active:J,activatorEvent:Z,collisions:De,over:re}=q.current;if(!J||!Z)return;const Q={active:J,activatorEvent:Z,collisions:De,delta:{x:f.x,y:f.y},over:re};Je.unstable_batchedUpdates(()=>{U==null||U(Q),C({type:"onDragMove",event:Q})})},[f.x,f.y]),i.useEffect(()=>{const{active:U,activatorEvent:J,collisions:Z,droppableContainers:De,scrollAdjustedTranslate:re}=q.current;if(!U||G.current==null||!J||!re)return;const{onDragOver:Q}=_.current,fe=De.get(K),Le=fe&&fe.rect.current?{id:fe.id,rect:fe.rect.current,data:fe.data,disabled:fe.disabled}:null,Y={active:U,activatorEvent:J,collisions:Z,delta:{x:re.x,y:re.y},over:Le};Je.unstable_batchedUpdates(()=>{Ce(Le),Q==null||Q(Y),C({type:"onDragOver",event:Y})})},[K]),le(()=>{q.current={activatorEvent:X,active:$,activeNode:H,collisionRect:R,collisions:I,droppableRects:ie,draggableNodes:D,draggingNode:ve,draggingNodeRect:Se,droppableContainers:M,over:P,scrollableAncestors:de,scrollAdjustedTranslate:f},W.current={initial:Se,translated:R}},[$,H,I,R,D,ve,Se,ie,M,P,de,f]),hs({...ue,delta:O,draggingRect:R,pointerCoordinates:ct,scrollableAncestors:de,scrollableAncestorRects:Ie});const Vn=i.useMemo(()=>({active:$,activeNode:H,activeNodeRect:j,activatorEvent:X,collisions:I,containerNodeRect:we,dragOverlay:ne,draggableNodes:D,droppableContainers:M,droppableRects:ie,over:P,measureDroppableContainers:ee,scrollableAncestors:de,scrollableAncestorRects:Ie,measuringConfiguration:B,measuringScheduled:te,windowRect:Ye}),[$,H,j,X,I,we,ne,D,M,ie,P,ee,de,Ie,B,te,Ye]),Wn=i.useMemo(()=>({activatorEvent:X,activators:Gt,active:$,activeNodeRect:j,ariaDescribedById:{draggable:Ae},dispatch:S,draggableNodes:D,over:P,measureDroppableContainers:ee}),[X,Gt,$,j,S,Ae,D,P,ee]);return L.createElement(wn.Provider,{value:x},L.createElement(at.Provider,{value:Wn},L.createElement(Pn.Provider,{value:Vn},L.createElement(kt.Provider,{value:Xe},d)),L.createElement(Ms,{disabled:(a==null?void 0:a.restoreFocus)===!1})),L.createElement(Lr,{...a,hiddenTextDescribedById:Ae}));function _n(){const U=(oe==null?void 0:oe.autoScrollEnabled)===!1,J=typeof c=="object"?c.enabled===!1:c===!1,Z=T&&!U&&!J;return typeof c=="object"?{...c,enabled:Z}:{enabled:Z}}}),Bs=i.createContext(null),un="button",Fs="Draggable";function $s(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const o=it(Fs),{activators:l,activatorEvent:a,active:c,activeNodeRect:d,ariaDescribedById:g,draggableNodes:h,over:v}=i.useContext(at),{role:p=un,roleDescription:w="draggable",tabIndex:b=0}=s??{},m=(c==null?void 0:c.id)===t,S=i.useContext(m?kt:Bs),[C,x]=yt(),[E,N]=yt(),T=Ns(l,t),y=nt(n);le(()=>(h.set(t,{id:t,key:o,node:C,activatorNode:E,data:y}),()=>{const O=h.get(t);O&&O.key===o&&h.delete(t)}),[h,t]);const D=i.useMemo(()=>({role:p,tabIndex:b,"aria-disabled":r,"aria-pressed":m&&p===un?!0:void 0,"aria-roledescription":w,"aria-describedby":g.draggable}),[r,p,b,m,w,g.draggable]);return{active:c,activatorEvent:a,activeNodeRect:d,attributes:D,isDragging:m,listeners:r?void 0:T,node:C,over:v,setNodeRef:x,setActivatorNodeRef:N,transform:S}}function Bn(){return i.useContext(Pn)}const Ks="Droppable",Ys={timeout:25};function Fn(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const o=it(Ks),{active:l,dispatch:a,over:c,measureDroppableContainers:d}=i.useContext(at),g=i.useRef({disabled:n}),h=i.useRef(!1),v=i.useRef(null),p=i.useRef(null),{disabled:w,updateMeasurementsFor:b,timeout:m}={...Ys,...s},S=nt(b??r),C=i.useCallback(()=>{if(!h.current){h.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{d(Array.isArray(S.current)?S.current:[S.current]),p.current=null},m)},[m]),x=At({callback:C,disabled:w||!l}),E=i.useCallback((D,O)=>{x&&(O&&(x.unobserve(O),h.current=!1),D&&x.observe(D))},[x]),[N,T]=yt(E),y=nt(t);return i.useEffect(()=>{!x||!N.current||(x.disconnect(),h.current=!1,x.observe(N.current))},[N,x]),i.useEffect(()=>(a({type:z.RegisterDroppable,element:{id:r,key:o,disabled:n,node:N,rect:v,data:y}}),()=>a({type:z.UnregisterDroppable,key:o,id:r})),[r]),i.useEffect(()=>{n!==g.current.disabled&&(a({type:z.SetDroppableDisabled,id:r,key:o,disabled:n}),g.current.disabled=n)},[r,o,n,a]),{active:l,rect:v,isOver:(c==null?void 0:c.id)===r,node:N,over:c,setNodeRef:T}}function Xs(e){let{animation:t,children:n}=e;const[r,s]=i.useState(null),[o,l]=i.useState(null),a=wt(n);return!n&&!r&&a&&s(a),le(()=>{if(!o)return;const c=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(c==null||d==null){s(null);return}Promise.resolve(t(d,o)).then(()=>{s(null)})},[t,r,o]),L.createElement(L.Fragment,null,n,r?i.cloneElement(r,{ref:l}):null)}const Us={x:0,y:0,scaleX:1,scaleY:1};function Vs(e){let{children:t}=e;return L.createElement(at.Provider,{value:Ln},L.createElement(kt.Provider,{value:Us},t))}const Ws={position:"fixed",touchAction:"none"},_s=e=>jt(e)?"transform 250ms ease":void 0,Hs=i.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:o,className:l,rect:a,style:c,transform:d,transition:g=_s}=e;if(!a)return null;const h=s?d:{...d,scaleX:1,scaleY:1},v={...Ws,width:a.width,height:a.height,top:a.top,left:a.left,transform:Te.Transform.toString(h),transformOrigin:s&&r?Fr(r,a):void 0,transition:typeof g=="function"?g(r):g,...c};return L.createElement(n,{className:l,style:v,ref:t},o)}),qs=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:o,className:l}=e;if(o!=null&&o.active)for(const[a,c]of Object.entries(o.active))c!==void 0&&(s[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,c));if(o!=null&&o.dragOverlay)for(const[a,c]of Object.entries(o.dragOverlay))c!==void 0&&r.node.style.setProperty(a,c);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(const[c,d]of Object.entries(s))n.node.style.setProperty(c,d);l!=null&&l.active&&n.node.classList.remove(l.active)}},Gs=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Te.Transform.toString(t)},{transform:Te.Transform.toString(n)}]},Js={duration:250,easing:"ease",keyframes:Gs,sideEffects:qs({styles:{active:{opacity:"0"}}})};function Zs(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return Tt((o,l)=>{if(t===null)return;const a=n.get(o);if(!a)return;const c=a.node.current;if(!c)return;const d=Mn(l);if(!d)return;const{transform:g}=V(l).getComputedStyle(l),h=Cn(g);if(!h)return;const v=typeof t=="function"?t:Qs(t);return An(c,s.draggable.measure),v({active:{id:o,data:a.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:l,rect:s.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:s,transform:h})})}function Qs(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...Js,...e};return o=>{let{active:l,dragOverlay:a,transform:c,...d}=o;if(!t)return;const g={x:a.rect.left-l.rect.left,y:a.rect.top-l.rect.top},h={scaleX:c.scaleX!==1?l.rect.width*c.scaleX/a.rect.width:1,scaleY:c.scaleY!==1?l.rect.height*c.scaleY/a.rect.height:1},v={x:c.x-g.x,y:c.y-g.y,...h},p=s({...d,active:l,dragOverlay:a,transform:{initial:c,final:v}}),[w]=p,b=p[p.length-1];if(JSON.stringify(w)===JSON.stringify(b))return;const m=r==null?void 0:r({active:l,dragOverlay:a,...d}),S=a.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise(C=>{S.onfinish=()=>{m==null||m(),C()}})}}let dn=0;function eo(e){return i.useMemo(()=>{if(e!=null)return dn++,dn},[e])}const to=L.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:o,modifiers:l,wrapperElement:a="div",className:c,zIndex:d=999}=e;const{activatorEvent:g,active:h,activeNodeRect:v,containerNodeRect:p,draggableNodes:w,droppableContainers:b,dragOverlay:m,over:S,measuringConfiguration:C,scrollableAncestors:x,scrollableAncestorRects:E,windowRect:N}=Bn(),T=i.useContext(kt),y=eo(h==null?void 0:h.id),D=zn(l,{activatorEvent:g,active:h,activeNodeRect:v,containerNodeRect:p,draggingNodeRect:m.rect,over:S,overlayNodeRect:m.rect,scrollableAncestors:x,scrollableAncestorRects:E,transform:T,windowRect:N}),O=qt(v),M=Zs({config:r,draggableNodes:w,droppableContainers:b,measuringConfiguration:C}),A=O?m.setRef:void 0;return L.createElement(Vs,null,L.createElement(Xs,{animation:M},h&&y?L.createElement(Hs,{key:y,id:h.id,ref:A,as:a,activatorEvent:g,adjustScale:t,className:c,transition:o,rect:O,style:{zIndex:d,...s},transform:D},n):null))});function $n(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function no(e,t){return e.reduce((n,r,s)=>{const o=t.get(r);return o&&(n[s]=o),n},Array(e.length))}function pt(e){return e!==null&&e>=0}function ro(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function so(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Kn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const o=$n(t,r,n),l=t[s],a=o[s];return!a||!l?null:{x:a.left-l.left,y:a.top-l.top,scaleX:a.width/l.width,scaleY:a.height/l.height}},vt={scaleX:1,scaleY:1},oo=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:l}=e;const a=(t=o[n])!=null?t:r;if(!a)return null;if(s===n){const d=o[l];return d?{x:0,y:n<l?d.top+d.height-(a.top+a.height):d.top-a.top,...vt}:null}const c=io(o,s,n);return s>n&&s<=l?{x:0,y:-a.height-c,...vt}:s<n&&s>=l?{x:0,y:a.height+c,...vt}:{x:0,y:0,...vt}};function io(e,t,n){const r=e[t],s=e[t-1],o=e[t+1];return r?n<t?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Yn="Sortable",Xn=L.createContext({activeIndex:-1,containerId:Yn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Kn,disabled:{draggable:!1,droppable:!1}});function ao(e){let{children:t,id:n,items:r,strategy:s=Kn,disabled:o=!1}=e;const{active:l,dragOverlay:a,droppableRects:c,over:d,measureDroppableContainers:g}=Bn(),h=it(Yn,n),v=a.rect!==null,p=i.useMemo(()=>r.map(T=>typeof T=="object"&&"id"in T?T.id:T),[r]),w=l!=null,b=l?p.indexOf(l.id):-1,m=d?p.indexOf(d.id):-1,S=i.useRef(p),C=!ro(p,S.current),x=m!==-1&&b===-1||C,E=so(o);le(()=>{C&&w&&g(p)},[C,p,w,g]),i.useEffect(()=>{S.current=p},[p]);const N=i.useMemo(()=>({activeIndex:b,containerId:h,disabled:E,disableTransforms:x,items:p,overIndex:m,useDragOverlay:v,sortedRects:no(p,c),strategy:s}),[b,h,E.draggable,E.droppable,x,p,m,c,v,s]);return L.createElement(Xn.Provider,{value:N},t)}const lo=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return $n(n,r,s).indexOf(t)},co=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:o,newIndex:l,previousItems:a,previousContainerId:c,transition:d}=e;return!d||!r||a!==o&&s===l?!1:n?!0:l!==s&&t===c},uo={duration:200,easing:"ease"},Un="transform",fo=Te.Transition.toString({property:Un,duration:0,easing:"linear"}),ho={roleDescription:"sortable"};function go(e){let{disabled:t,index:n,node:r,rect:s}=e;const[o,l]=i.useState(null),a=i.useRef(n);return le(()=>{if(!t&&n!==a.current&&r.current){const c=s.current;if(c){const d=$e(r.current,{ignoreTransform:!0}),g={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(g.x||g.y)&&l(g)}}n!==a.current&&(a.current=n)},[t,n,r,s]),i.useEffect(()=>{o&&l(null)},[o]),o}function po(e){let{animateLayoutChanges:t=co,attributes:n,disabled:r,data:s,getNewIndex:o=lo,id:l,strategy:a,resizeObserverConfig:c,transition:d=uo}=e;const{items:g,containerId:h,activeIndex:v,disabled:p,disableTransforms:w,sortedRects:b,overIndex:m,useDragOverlay:S,strategy:C}=i.useContext(Xn),x=vo(r,p),E=g.indexOf(l),N=i.useMemo(()=>({sortable:{containerId:h,index:E,items:g},...s}),[h,s,E,g]),T=i.useMemo(()=>g.slice(g.indexOf(l)),[g,l]),{rect:y,node:D,isOver:O,setNodeRef:M}=Fn({id:l,data:N,disabled:x.droppable,resizeObserverConfig:{updateMeasurementsFor:T,...c}}),{active:A,activatorEvent:W,activeNodeRect:$,attributes:G,setNodeRef:oe,listeners:je,isDragging:X,over:Oe,setActivatorNodeRef:_,transform:Ae}=$s({id:l,data:N,attributes:{...ho,...n},disabled:x.draggable}),ge=Sr(M,oe),B=!!A,ie=B&&!w&&pt(v)&&pt(m),ee=!S&&X,te=ee&&ie?Ae:null,ye=ie?te??(a??C)({rects:b,activeNodeRect:$,activeIndex:v,overIndex:m,index:E}):null,ue=pt(v)&&pt(m)?o({id:l,items:g,activeIndex:v,overIndex:m}):E,ae=A==null?void 0:A.id,j=i.useRef({activeId:ae,items:g,newIndex:ue,containerId:h}),we=g!==j.current.items,q=t({active:A,containerId:h,isDragging:X,isSorting:B,id:l,index:E,items:g,newIndex:j.current.newIndex,previousItems:j.current.items,previousContainerId:j.current.containerId,transition:d,wasDragging:j.current.activeId!=null}),pe=go({disabled:!q,index:E,node:D,rect:y});return i.useEffect(()=>{B&&j.current.newIndex!==ue&&(j.current.newIndex=ue),h!==j.current.containerId&&(j.current.containerId=h),g!==j.current.items&&(j.current.items=g)},[B,ue,h,g]),i.useEffect(()=>{if(ae===j.current.activeId)return;if(ae!=null&&j.current.activeId==null){j.current.activeId=ae;return}const ve=setTimeout(()=>{j.current.activeId=ae},50);return()=>clearTimeout(ve)},[ae]),{active:A,activeIndex:v,attributes:G,data:N,rect:y,index:E,newIndex:ue,items:g,isOver:O,isSorting:B,isDragging:X,listeners:je,node:D,overIndex:m,over:Oe,setNodeRef:ge,setActivatorNodeRef:_,setDroppableNodeRef:M,setDraggableNodeRef:oe,transform:pe??ye,transition:ne()};function ne(){if(pe||we&&j.current.newIndex===E)return fo;if(!(ee&&!jt(W)||!d)&&(B||q))return Te.Transition.toString({...d,property:Un})}}function vo(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}k.Down,k.Right,k.Up,k.Left;const fn=[{value:"deadline",label:"Prazo (mais prximo)"},{value:"priority",label:"Prioridade (Alta  Baixa)"},{value:"title",label:"Ttulo (A  Z)"},{value:"client",label:"Cliente (A  Z)"}],hn={alta:0,media:1,baixa:2};function gn(e,t){return[...e].sort((n,r)=>{switch(t){case"deadline":return!n.dueDate&&!r.dueDate?0:n.dueDate?r.dueDate?n.dueDate.localeCompare(r.dueDate):-1:1;case"priority":return(hn[n.priority]??1)-(hn[r.priority]??1);case"title":return n.title.localeCompare(r.title,"pt-BR");case"client":return(n.client??"").localeCompare(r.client??"","pt-BR");default:return 0}})}const mo={client:!0,dueDate:!0,priority:!0,subtasks:!0,tags:!0,description:!1},pn={client:"Cliente",dueDate:"Data de entrega",priority:"Prioridade",subtasks:"Subtarefas",tags:"Tags",description:"Descrio"},mt=["pendente","agendado","em_andamento","em_tramite","concluida","cancelada"],Yt=i.memo(function({task:t,cardFields:n,today:r,isExpanded:s,onToggleExpand:o,onToggleSubtask:l,onEdit:a,onDelete:c,showStatus:d,isDragging:g,isOverlay:h}){const v=t.subtasks.filter(m=>m.completed).length,p=t.subtasks.length,w=p>0?Math.round(v/p*100):0,b=t.dueDate&&t.dueDate<r&&t.status!=="concluida"&&t.status!=="cancelada";return u.jsx(vn,{className:Pe("transition-shadow duration-150",g&&"opacity-40",h&&"shadow-xl ring-2 ring-primary/30 rotate-[2deg]",b&&"border-destructive/50"),children:u.jsxs(mn,{className:"p-3",children:[u.jsxs("div",{className:"flex items-start gap-2",children:[!h&&u.jsx(yr,{className:"w-4 h-4 text-muted-foreground mt-0.5 shrink-0 cursor-grab active:cursor-grabbing"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 mb-1 flex-wrap",children:[n.priority&&u.jsx(Ze,{variant:"secondary",className:`text-[10px] ${or[t.priority]}`,children:Bt[t.priority]}),d&&u.jsx(Ze,{variant:"secondary",className:`text-[10px] ${bn[t.status]}`,children:xt[t.status]}),b&&u.jsx(Ze,{variant:"destructive",className:"text-[10px]",children:"Atrasada"})]}),u.jsx("p",{className:"font-medium text-sm",children:t.title}),n.description&&t.description&&u.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:t.description}),u.jsxs("div",{className:"flex flex-wrap gap-3 mt-1 text-xs text-muted-foreground",children:[n.client&&t.client&&u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(fr,{className:"w-3 h-3"}),t.client]}),n.dueDate&&t.dueDate&&u.jsxs("span",{className:Pe("flex items-center gap-1",b&&"text-destructive font-medium"),children:[u.jsx(hr,{className:"w-3 h-3"}),new Date(t.dueDate+"T12:00:00").toLocaleDateString("pt-BR")]})]})]}),!h&&u.jsxs("div",{className:"flex gap-1 shrink-0",children:[u.jsx(ke,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>a==null?void 0:a(t),children:u.jsx(gr,{className:"w-3.5 h-3.5"})}),u.jsx(ke,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive",onClick:()=>c(t.id),children:u.jsx(pr,{className:"w-3.5 h-3.5"})})]})]}),n.subtasks&&p>0&&!h&&u.jsxs("div",{className:"mt-2",children:[u.jsxs("button",{className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors w-full",onClick:()=>o(t.id),children:[s?u.jsx(vr,{className:"w-3 h-3"}):u.jsx(mr,{className:"w-3 h-3"}),u.jsxs("span",{children:[v,"/",p," subtarefas"]}),u.jsx("div",{className:"flex-1 mx-2 bg-muted rounded-full h-1.5",children:u.jsx("div",{className:"bg-primary rounded-full h-1.5 transition-all",style:{width:`${w}%`}})}),u.jsxs("span",{className:"text-[10px]",children:[w,"%"]})]}),s&&u.jsx("div",{className:"mt-2 space-y-1 pl-4",children:t.subtasks.map(m=>u.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer hover:bg-muted/50 rounded p-1 -ml-1",children:[u.jsx(er,{checked:m.completed,onCheckedChange:()=>l(t.id,m.id)}),u.jsx("span",{className:Pe(m.completed&&"line-through text-muted-foreground"),children:m.title})]},m.id))})]}),n.tags&&t.tags&&t.tags.length>0&&!h&&u.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:t.tags.map(m=>u.jsx(Ze,{variant:"outline",className:"text-[10px]",children:m},m))})]})})});function bo(e){const{attributes:t,listeners:n,setNodeRef:r,transform:s,transition:o,isDragging:l}=po({id:e.task.id}),a={transform:Te.Transform.toString(s),transition:o};return u.jsx("div",{ref:r,style:a,...t,...n,children:u.jsx(Yt,{...e,isDragging:l})})}function xo({status:e,tasks:t,isOver:n,cardFields:r,today:s,expandedTasks:o,onToggleExpand:l,onToggleSubtask:a,onEdit:c,onDelete:d}){const g=i.useMemo(()=>t.map(v=>v.id),[t]),{setNodeRef:h}=Fn({id:e});return u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(Ze,{variant:"secondary",className:bn[e],children:xt[e]}),u.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.length,")"]})]}),u.jsx("div",{ref:h,"data-column-status":e,className:Pe("space-y-3 min-h-[400px] p-2 rounded-lg transition-colors duration-150",n?"bg-primary/10 border-2 border-dashed border-primary/40":"bg-muted/30 border-2 border-transparent"),children:u.jsx(ao,{items:g,strategy:oo,children:t.length===0?u.jsx("p",{className:Pe("text-xs text-center py-8 transition-colors",n?"text-primary font-medium":"text-muted-foreground"),children:n?" Soltar aqui":"Vazio"}):t.map(v=>u.jsx(bo,{task:v,cardFields:r,today:s,isExpanded:o.has(v.id),onToggleExpand:l,onToggleSubtask:a,onEdit:c,onDelete:d},v.id))})})]})}function li(){var dt;const{tasks:e,setTasks:t,loading:n,syncing:r,error:s,lastSync:o,sync:l,updateTaskStatus:a,deleteTask:c,createTask:d,updateTask:g,createSubtask:h,updateSubtask:v,deleteSubtask:p}=Hn(),{projects:w}=qn(),[b,m]=i.useState(!1),[S,C]=i.useState(null),[x,E]=i.useState([]),[N,T]=i.useState("kanban"),[y,D]=i.useState(""),[O,M]=i.useState("all"),[A,W]=i.useState("all"),[$,G]=i.useState("all"),[oe,je]=i.useState("all"),[X,Oe]=i.useState(new Set),[_,Ae]=i.useState(mo),[ge,B]=i.useState(null),[ie,ee]=i.useState(null),[te,H]=i.useState("deadline"),[ye,ue]=i.useState(!1);i.useEffect(()=>{e.length>0&&E(e)},[e]);const ae=i.useMemo(()=>[...new Set(x.map(f=>f.client).filter(Boolean))],[x]),j=i.useMemo(()=>{const f=x.filter(R=>{if(y&&!R.title.toLowerCase().includes(y.toLowerCase())||O!=="all"&&R.status!==O||A!=="all"&&R.priority!==A||$!=="all"&&R.client!==$)return!1;if(oe!=="all"){const I=w.find(K=>K.id===oe);if(I&&R.client!==I.name)return!1}return!0});return gn(f,te)},[x,y,O,A,$,oe,w,te]),we=i.useMemo(()=>ge?x.find(f=>f.id===ge):null,[ge,x]),q=i.useMemo(()=>{const f=new Date;return`${f.getFullYear()}-${String(f.getMonth()+1).padStart(2,"0")}-${String(f.getDate()).padStart(2,"0")}`},[]),pe=i.useCallback(f=>{Oe(R=>{const I=new Set(R);return I.has(f)?I.delete(f):I.add(f),I})},[]),ne=i.useCallback((f,R)=>{E(I=>I.map(K=>K.id===f?{...K,subtasks:K.subtasks.map(P=>P.id===R?{...P,completed:!P.completed}:P)}:K))},[]),ve=i.useCallback(f=>{c(f),E(R=>R.filter(I=>I.id!==f))},[c]),Se=i.useCallback(f=>{Ae(R=>({...R,[f]:!R[f]}))},[]),lt=i.useCallback(()=>{C(null),m(!0)},[]),Ke=i.useCallback(f=>{C(f),m(!0)},[]),Ye=i.useCallback(async(f,R,I)=>{R?await d({title:f.title,deadline:f.deadline,priority:f.priority,status:f.status,clientName:f.clientName,assignee:f.assignee,description:f.description}):I&&await g(I,{title:f.title,deadline:f.deadline,priority:f.priority,status:f.status,clientName:f.clientName,assignee:f.assignee,description:f.description})},[d,g]),de=zr(Pr(Ht,{activationConstraint:{distance:8}}));i.useCallback(f=>{const R=x.find(I=>I.id===f);return R==null?void 0:R.status},[x]);const Ie=i.useCallback(f=>{B(f.active.id)},[]),Me=i.useCallback(f=>{const{over:R}=f;if(!R){ee(null);return}const I=R.id,K=x.find(Ce=>Ce.id===I),P=K?K.status:mt.includes(I)?I:null;ee(P)},[x]),ct=i.useCallback(f=>{const{active:R,over:I}=f;if(B(null),ee(null),!I)return;const K=R.id,P=I.id;if(K===P)return;const Ce=x.find(me=>me.id===K);if(!Ce)return;const ft=x.find(me=>me.id===P),Xe=ft?ft.status:mt.includes(P)?P:Ce.status;Ce.status!==Xe&&(E(me=>{const ht=me.map(Ue=>Ue.id===K?{...Ue,status:Xe}:Ue);return gn(ht,te)}),a(K,Xe))},[x,a,te]),ut=i.useCallback(()=>{B(null),ee(null)},[]),Ot=i.useMemo(()=>{const f={};return mt.forEach(R=>{f[R]=[]}),j.forEach(R=>{f[R.status]&&f[R.status].push(R)}),f},[j]);return u.jsxs(Gn,{title:"Tarefas",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(cr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),u.jsx(Qn,{placeholder:"Buscar tarefa...",value:y,onChange:f=>D(f.target.value),className:"pl-9"})]}),u.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[u.jsxs(He,{value:O,onValueChange:M,children:[u.jsx(qe,{className:"w-[130px]",children:u.jsx(gt,{placeholder:"Status"})}),u.jsxs(Ge,{children:[u.jsx(xe,{value:"all",children:"Todos"}),Object.keys(xt).map(f=>u.jsx(xe,{value:f,children:xt[f]},f))]})]}),u.jsxs(He,{value:A,onValueChange:W,children:[u.jsx(qe,{className:"w-[110px]",children:u.jsx(gt,{placeholder:"Prioridade"})}),u.jsxs(Ge,{children:[u.jsx(xe,{value:"all",children:"Todas"}),Object.keys(Bt).map(f=>u.jsx(xe,{value:f,children:Bt[f]},f))]})]}),u.jsxs(He,{value:$,onValueChange:G,children:[u.jsx(qe,{className:"w-[140px]",children:u.jsx(gt,{placeholder:"Cliente"})}),u.jsxs(Ge,{children:[u.jsx(xe,{value:"all",children:"Todos"}),ae.map(f=>u.jsx(xe,{value:f,children:f},f))]})]}),u.jsxs(He,{value:oe,onValueChange:je,children:[u.jsxs(qe,{className:"w-[150px]",children:[u.jsx(ur,{className:"w-3.5 h-3.5 mr-1 text-muted-foreground"}),u.jsx(gt,{placeholder:"Projeto"})]}),u.jsxs(Ge,{children:[u.jsx(xe,{value:"all",children:"Todos"}),w.map(f=>u.jsx(xe,{value:f.id,children:f.name},f.id))]})]}),u.jsxs(He,{value:te,onValueChange:f=>H(f),children:[u.jsxs(qe,{className:"w-[44px] sm:w-[170px] gap-1.5",children:[u.jsx(br,{className:"w-3.5 h-3.5 shrink-0 text-muted-foreground"}),u.jsx("span",{className:"hidden sm:inline truncate",children:(dt=fn.find(f=>f.value===te))==null?void 0:dt.label})]}),u.jsx(Ge,{children:fn.map(f=>u.jsx(xe,{value:f.value,children:f.label},f.value))})]}),u.jsxs(nr,{children:[u.jsx(rr,{asChild:!0,children:u.jsxs(ke,{variant:"outline",size:"sm",className:"gap-1.5",children:[u.jsx(wr,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Campos"})]})}),u.jsx(sr,{className:"w-56",align:"end",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-sm font-medium mb-2",children:"Mostrar nos cards"}),Object.keys(pn).map(f=>u.jsxs("div",{className:"flex items-center justify-between py-1",children:[u.jsx(tr,{htmlFor:`field-${f}`,className:"text-sm cursor-pointer",children:pn[f]}),u.jsx(Jt,{id:`field-${f}`,checked:_[f],onCheckedChange:()=>Se(f)})]},f))]})})]}),(O!=="all"||A!=="all"||$!=="all"||oe!=="all"||y)&&u.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>{M("all"),W("all"),G("all"),je("all"),D("")},className:"text-xs gap-1",children:" Limpar filtros"}),u.jsxs("div",{className:"flex border border-border rounded-md overflow-hidden",children:[u.jsx(ke,{variant:N==="list"?"default":"ghost",size:"sm",onClick:()=>T("list"),className:"rounded-none",children:u.jsx(dr,{className:"w-4 h-4"})}),u.jsx(ke,{variant:N==="kanban"?"default":"ghost",size:"sm",onClick:()=>T("kanban"),className:"rounded-none",children:u.jsx(xr,{className:"w-4 h-4"})})]}),N==="kanban"&&u.jsxs("label",{className:"flex items-center gap-1.5 text-xs text-muted-foreground cursor-pointer select-none",children:[u.jsx(Jt,{checked:ye,onCheckedChange:ue,className:"scale-75"}),"Ocultar concludas"]}),u.jsx(ir,{syncing:r,lastSync:o,onSync:l,error:s}),u.jsxs(ke,{size:"sm",onClick:lt,className:"gap-1.5",children:[u.jsx(Jn,{className:"w-4 h-4"})," Nova Tarefa"]})]})]}),u.jsx(Zn,{open:b,onOpenChange:m,task:S,onSave:Ye,onCreateSubtask:h,onUpdateSubtask:v,onDeleteSubtask:p}),n?N==="list"?u.jsx(ar,{}):u.jsx(lr,{}):N==="list"?u.jsx("div",{className:"space-y-3",children:j.length===0?u.jsx(vn,{children:u.jsx(mn,{className:"p-8 text-center text-muted-foreground",children:"Nenhuma tarefa encontrada."})}):j.map(f=>u.jsx(Yt,{task:f,cardFields:_,today:q,isExpanded:X.has(f.id),onToggleExpand:pe,onToggleSubtask:ne,onEdit:Ke,onDelete:ve,showStatus:!0},f.id))}):u.jsxs(zs,{sensors:de,collisionDetection:Xr,onDragStart:Ie,onDragOver:Me,onDragEnd:ct,onDragCancel:ut,children:[u.jsx("div",{className:Pe("grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",ye?"xl:grid-cols-4":"xl:grid-cols-6"),children:mt.filter(f=>!ye||f!=="concluida"&&f!=="cancelada").map(f=>u.jsx(xo,{status:f,tasks:Ot[f],isOver:ie===f&&ge!==null,cardFields:_,today:q,expandedTasks:X,onToggleExpand:pe,onToggleSubtask:ne,onEdit:Ke,onDelete:ve},f))}),u.jsx(to,{dropAnimation:{duration:200,easing:"cubic-bezier(0.18, 0.67, 0.6, 1.22)"},children:we?u.jsx("div",{className:"w-[260px]",children:u.jsx(Yt,{task:we,cardFields:_,today:q,isExpanded:!1,onToggleExpand:()=>{},onToggleSubtask:()=>{},onDelete:()=>{},isOverlay:!0})}):null})]})]})}export{li as default};
