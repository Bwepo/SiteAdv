import{V as se,W as te,r as a,j as e,L as r,e as h}from"./index-C77yhLJt.js";import{A as ae,P as A,L as O,M as re}from"./AdminLayout-C36LDLeJ.js";import{b as ne}from"./usePosts-Cq9At_NM.js";import{e as ie}from"./usePostInteractions-C3cSZDQC.js";import{a as le}from"./usePostViews-CJyRW3As.js";import{a as oe}from"./useNewsletter-DMGEMoTC.js";import{A as R}from"./AgendaEventSheet-BYonDQbU.js";import{T as V}from"./TarefaSheet-CoRqMxUd.js";import{B as u}from"./button-DqZUIAbJ.js";import{C as E,a as B,b as D,c as L}from"./card-DATr3Qr9.js";import{S as $}from"./skeleton-CIuzlHBH.js";import{B as l}from"./badge-BXcUgfhf.js";import{D as ce,a as de,b as me,c as z}from"./dropdown-menu-D50w8x7f.js";import{E as xe,a as pe,T as Y,b as K,c as he,d as ue}from"./crmTypes-DP3iBdIv.js";import{B as k}from"./building-2-C2Ro8cb_.js";import{C as ge}from"./chevron-up-CRxqKINg.js";import{C as g}from"./calendar-CyItuC8S.js";import{C as fe}from"./chart-column-nn-bd1oD.js";import{A as M}from"./arrow-right-BoD8k31M.js";import{C as je}from"./circle-check-CDnDZ4OP.js";import{F as Ne}from"./file-text-Dt2-pumt.js";import{M as be}from"./menu-BMCLmfsV.js";import"./dialog-CxTRq9Gb.js";import"./index-Cv7RYB-f.js";import"./heart-BtKJIzi0.js";import"./sparkles-CgZQl4le.js";import"./house-DEvfAAx3.js";import"./users-D0jUZ7WP.js";import"./useMutation-6bF1A1w3.js";import"./form-DbzLySSk.js";import"./label-CAyaMOoj.js";import"./input-G3ekPTgf.js";import"./textarea-BZLLxhmz.js";import"./select-oVqpOxce.js";import"./index-CsCv3pTW.js";import"./index-B3djyi_4.js";import"./check-BN5nFh43.js";import"./loader-circle-BrGr3Jf-.js";import"./types-C9wiu8_K.js";import"./separator-BXDvmwO4.js";import"./alert-dialog-Cix--tsv.js";import"./chevron-right-Ds_GAJAR.js";import"./circle-BEcuh1Oc.js";import"./clock-BKCOF9MU.js";import"./pencil-llDPjeYO.js";import"./trash-2-CprywDjN.js";import"./index-BKa80CN6.js";function _(o){return new Date(o+"T12:00:00").toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})}const hs=()=>{const o=new Date,n=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`,{events:d,loading:F,createEvent:m}=se(),{tasks:i,loading:U,createTask:x}=te(),[q,f]=a.useState(!1),[H,j]=a.useState(!1),[W,N]=a.useState(!1),[G,b]=a.useState(!1),J=a.useCallback(async(s,t)=>{t&&await m(s),f(!1)},[m]),Q=a.useCallback(async(s,t)=>{t&&await m(s),b(!1)},[m]),X=a.useCallback(async(s,t)=>{t&&await x({title:s.title,deadline:s.deadline,priority:s.priority,status:s.status,clientName:s.clientName,assignee:s.assignee,description:s.description}),j(!1)},[x]),Z=a.useCallback(async(s,t)=>{t&&await x({title:s.title,deadline:s.deadline,priority:s.priority,status:s.status,clientName:s.clientName,assignee:s.assignee,description:s.description}),N(!1)},[x]),{data:v}=ne(),{data:w}=ie(),{data:ee}=le(),{data:y}=oe(),S=a.useMemo(()=>d.filter(s=>s.date>=n&&s.status!=="cancelado").sort((s,t)=>s.date.localeCompare(t.date)).slice(0,6),[d,n]),C=a.useMemo(()=>i.filter(s=>s.status!=="concluida"&&s.status!=="cancelada"),[i]),c=a.useMemo(()=>i.filter(s=>s.dueDate&&s.dueDate<n&&s.status!=="concluida"&&s.status!=="cancelada"),[i,n]),T=a.useMemo(()=>d.filter(s=>{var t;return((t=s.client)==null?void 0:t.toLowerCase().includes("bosi"))&&s.date>=n&&s.status!=="cancelado"}).sort((s,t)=>s.date.localeCompare(t.date)).slice(0,4),[d,n]),p=a.useMemo(()=>i.filter(s=>{var t;return((t=s.client)==null?void 0:t.toLowerCase().includes("bosi"))&&s.status!=="concluida"&&s.status!=="cancelada"}),[i]),P=(w==null?void 0:w.filter(s=>!s.reviewed_at).length)||0,I=F||U;return e.jsxs(ae,{title:"Dashboard",children:[e.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-1 -mx-1 px-1 scrollbar-none",children:[e.jsxs(u,{size:"sm",className:"shrink-0 h-8 text-xs",onClick:()=>f(!0),children:[e.jsx(A,{className:"w-3.5 h-3.5 mr-1"}),"Compromisso"]}),e.jsxs(u,{size:"sm",variant:"outline",className:"shrink-0 h-8 text-xs",onClick:()=>j(!0),children:[e.jsx(A,{className:"w-3.5 h-3.5 mr-1"}),"Tarefa"]}),e.jsxs(ce,{children:[e.jsx(de,{asChild:!0,children:e.jsxs(u,{size:"sm",variant:"outline",className:"shrink-0 h-8 text-xs border-emerald-500/40 text-emerald-700 dark:text-emerald-400",children:[e.jsx(k,{className:"w-3.5 h-3.5 mr-1"}),"BOSI",e.jsx(ge,{className:"w-3 h-3 ml-0.5"})]})}),e.jsxs(me,{align:"start",className:"bg-popover z-50",children:[e.jsxs(z,{onClick:()=>b(!0),children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Novo Compromisso"]}),e.jsxs(z,{onClick:()=>N(!0),children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Nova Tarefa"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2 mb-4",children:[e.jsx(r,{to:"/admin/agenda",className:"contents",children:e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-border bg-card p-2 sm:p-3 hover:bg-muted/50 transition-colors cursor-pointer min-h-[4.5rem]",children:[e.jsx(g,{className:"w-4 h-4 text-blue-500 mb-0.5"}),e.jsx("p",{className:"text-lg font-bold leading-none",children:S.length}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-0.5 text-center leading-tight",children:"Agenda"})]})}),e.jsx(r,{to:"/admin/tarefas",className:"contents",children:e.jsxs("div",{className:h("flex flex-col items-center justify-center rounded-lg border border-border bg-card p-2 sm:p-3 hover:bg-muted/50 transition-colors cursor-pointer min-h-[4.5rem]",c.length>0&&"ring-1 ring-destructive/50"),children:[e.jsx(O,{className:"w-4 h-4 text-amber-500 mb-0.5"}),e.jsx("p",{className:"text-lg font-bold leading-none",children:C.length}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-0.5 text-center leading-tight",children:"Tarefas"}),c.length>0&&e.jsxs("p",{className:"text-[9px] text-destructive font-semibold",children:[c.length," atr."]})]})}),e.jsx(r,{to:"/admin/bosi",className:"contents",children:e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-border bg-card p-2 sm:p-3 hover:bg-muted/50 transition-colors cursor-pointer min-h-[4.5rem]",children:[e.jsx(k,{className:"w-4 h-4 text-emerald-500 mb-0.5"}),e.jsx("p",{className:"text-lg font-bold leading-none",children:p.length}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-0.5 text-center leading-tight",children:"BOSI"})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-border bg-card p-2 sm:p-3 min-h-[4.5rem]",children:[e.jsx(fe,{className:"w-4 h-4 text-purple-500 mb-0.5"}),e.jsx("p",{className:"text-lg font-bold leading-none",children:ee??0}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-0.5 text-center leading-tight",children:"Views"})]})]}),e.jsxs("div",{className:"grid gap-3 lg:grid-cols-2 mb-4",children:[e.jsxs(E,{className:"shadow-none border-border/60",children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 px-3 py-2 sm:px-4 sm:py-2.5",children:[e.jsxs(D,{className:"text-sm font-semibold flex items-center gap-1.5",children:[e.jsx(g,{className:"w-3.5 h-3.5"})," PrÃ³ximos"]}),e.jsxs(r,{to:"/admin/agenda",className:"text-[11px] text-primary hover:underline flex items-center gap-0.5",children:["Ver tudo ",e.jsx(M,{className:"w-3 h-3"})]})]}),e.jsx(L,{className:"px-3 pb-3 sm:px-4 sm:pb-3 pt-0",children:I?e.jsx("div",{className:"space-y-1.5",children:[1,2,3].map(s=>e.jsx($,{className:"h-10 w-full"},s))}):S.length===0?e.jsxs("div",{className:"text-center py-5",children:[e.jsx(g,{className:"w-7 h-7 text-muted-foreground/30 mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Nenhum compromisso prÃ³ximo."})]}):e.jsx("div",{className:"space-y-1",children:S.map(s=>e.jsxs("div",{className:"flex items-center gap-2 py-1.5 px-2 rounded-md hover:bg-muted/40 transition-colors",children:[e.jsxs("div",{className:"text-center min-w-[2.2rem]",children:[e.jsx("p",{className:"text-[10px] font-medium text-muted-foreground leading-none",children:_(s.date)}),s.time&&e.jsx("p",{className:"text-[11px] font-bold mt-0.5",children:s.time})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium truncate",children:s.title}),s.client&&e.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:s.client})]}),e.jsx(l,{variant:"secondary",className:`text-[8px] px-1 py-0 shrink-0 ${xe[s.type]}`,children:pe[s.type]})]},s.id))})})]}),e.jsxs(E,{className:"shadow-none border-border/60",children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 px-3 py-2 sm:px-4 sm:py-2.5",children:[e.jsxs(D,{className:"text-sm font-semibold flex items-center gap-1.5",children:[e.jsx(O,{className:"w-3.5 h-3.5"})," Pendentes",c.length>0&&e.jsx(l,{variant:"destructive",className:"text-[9px] px-1 py-0",children:c.length})]}),e.jsxs(r,{to:"/admin/tarefas",className:"text-[11px] text-primary hover:underline flex items-center gap-0.5",children:["Ver tudo ",e.jsx(M,{className:"w-3 h-3"})]})]}),e.jsx(L,{className:"px-3 pb-3 sm:px-4 sm:pb-3 pt-0",children:I?e.jsx("div",{className:"space-y-1.5",children:[1,2,3].map(s=>e.jsx($,{className:"h-10 w-full"},s))}):C.length===0?e.jsxs("div",{className:"text-center py-5",children:[e.jsx(je,{className:"w-7 h-7 text-muted-foreground/30 mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tudo em dia ðŸŽ‰"})]}):e.jsx("div",{className:"space-y-1",children:C.slice(0,5).map(s=>{const t=s.dueDate&&s.dueDate<n&&s.status!=="concluida"&&s.status!=="cancelada";return e.jsx("div",{className:h("py-1.5 px-2 rounded-md hover:bg-muted/40 transition-colors",t&&"bg-destructive/5"),children:e.jsxs("div",{className:"flex items-center justify-between gap-1.5",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[e.jsx(l,{variant:"secondary",className:`text-[8px] px-1 py-0 ${Y[s.priority]}`,children:K[s.priority]}),t&&e.jsx(l,{variant:"destructive",className:"text-[8px] px-1 py-0",children:"Atr."})]}),e.jsx("p",{className:"text-xs font-medium truncate",children:s.title}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[s.client&&e.jsx("span",{className:"text-[10px] text-muted-foreground truncate",children:s.client}),s.dueDate&&e.jsx("span",{className:h("text-[10px]",t?"text-destructive":"text-muted-foreground"),children:_(s.dueDate)})]})]}),e.jsx(l,{variant:"secondary",className:`text-[8px] px-1 py-0 shrink-0 ${he[s.status]}`,children:ue[s.status]})]})},s.id)})})})]})]}),(T.length>0||p.length>0)&&e.jsxs(E,{className:"mb-4 shadow-none border-border/60",children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 px-3 py-2 sm:px-4 sm:py-2.5",children:[e.jsxs(D,{className:"text-sm font-semibold flex items-center gap-1.5",children:[e.jsx(k,{className:"w-3.5 h-3.5"})," BOSI"]}),e.jsxs(r,{to:"/admin/bosi",className:"text-[11px] text-primary hover:underline flex items-center gap-0.5",children:["Painel ",e.jsx(M,{className:"w-3 h-3"})]})]}),e.jsx(L,{className:"px-3 pb-3 sm:px-4 sm:pb-3 pt-0",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[T.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-medium text-muted-foreground mb-1 uppercase tracking-wide",children:"Compromissos"}),e.jsx("div",{className:"space-y-0.5",children:T.map(s=>e.jsxs("div",{className:"flex items-center gap-1.5 text-xs",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground shrink-0",children:_(s.date)}),e.jsx("span",{className:"truncate",children:s.title})]},s.id))})]}),p.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-medium text-muted-foreground mb-1 uppercase tracking-wide",children:"Tarefas"}),e.jsx("div",{className:"space-y-0.5",children:p.slice(0,4).map(s=>e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(l,{variant:"secondary",className:`text-[8px] px-0.5 py-0 ${Y[s.priority]}`,children:K[s.priority]}),e.jsx("span",{className:"truncate",children:s.title})]},s.id))})]})]})})]}),e.jsx("div",{className:"border-t border-border pt-3 pb-2",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ne,{className:"w-3.5 h-3.5 text-muted-foreground"}),e.jsx("span",{className:"font-semibold",children:(v==null?void 0:v.length)||0}),e.jsx("span",{className:"text-muted-foreground",children:"posts"})]}),e.jsxs(r,{to:"/admin/comments",className:"flex items-center gap-1 hover:text-primary transition-colors",children:[e.jsx(re,{className:"w-3.5 h-3.5 text-muted-foreground"}),e.jsx("span",{className:h("font-semibold",P>0&&"text-orange-500"),children:P}),e.jsx("span",{className:"text-muted-foreground",children:"pend."})]}),e.jsxs(r,{to:"/admin/newsletter",className:"flex items-center gap-1 hover:text-primary transition-colors",children:[e.jsx(be,{className:"w-3.5 h-3.5 text-muted-foreground"}),e.jsx("span",{className:"font-semibold",children:(y==null?void 0:y.active)??0}),e.jsx("span",{className:"text-muted-foreground",children:"inscritos"})]}),e.jsx(r,{to:"/admin/posts/new",children:e.jsxs(u,{size:"sm",variant:"ghost",className:"h-6 text-[11px] px-2",children:[e.jsx(A,{className:"w-3 h-3 mr-0.5"})," Post"]})})]})}),e.jsx(R,{open:q,onOpenChange:f,event:null,onSave:J}),e.jsx(V,{open:H,onOpenChange:j,task:null,onSave:X}),e.jsx(V,{open:W,onOpenChange:N,task:null,defaultClientName:"BOSI Empreendimentos",onSave:Z}),e.jsx(R,{open:G,onOpenChange:b,event:null,defaultClientName:"BOSI Empreendimentos",onSave:Q})]})};export{hs as default};
