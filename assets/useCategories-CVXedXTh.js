import{u as i}from"./useQuery-BoVNrBts.js";import{s as a,$ as n}from"./index-C0jHX-Go.js";import{u}from"./useMutation-CYTm8Y7o.js";function l(){return i({queryKey:["categories"],queryFn:async()=>{const{data:r,error:e}=await a.from("mladv_categories").select("*").order("name",{ascending:!0});if(e)throw e;return r||[]}})}function y(r){return i({queryKey:["post-categories",r],queryFn:async()=>{const{data:e,error:t}=await a.from("mladv_post_categories").select("category_id, mladv_categories(*)").eq("post_id",r);if(t)throw t;return(e==null?void 0:e.map(s=>s.mladv_categories).filter(Boolean))||[]},enabled:!!r})}function f(){const r=n();return u({mutationFn:async({postId:e,categoryIds:t})=>{if(await a.from("mladv_post_categories").delete().eq("post_id",e),t.length>0){const{error:o}=await a.from("mladv_post_categories").insert(t.map(s=>({post_id:e,category_id:s})));if(o)throw o}},onSuccess:(e,{postId:t})=>{r.invalidateQueries({queryKey:["post-categories",t]}),r.invalidateQueries({queryKey:["posts"]})}})}export{f as a,y as b,l as u};
