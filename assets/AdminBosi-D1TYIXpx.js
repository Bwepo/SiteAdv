import{c as re,r as N,a5 as ge,j as e,e as F,s as fe,a3 as je,a4 as ve,m as q}from"./index-BYSmSza6.js";import{B as ye,a as D,S as Ne}from"./CrmSkeletons-DrD_FMqC.js";import{P as Se}from"./ProjectOverview-YBjz1QCn.js";import{B}from"./button-CjGghZSy.js";import{C as V,c as G}from"./card-D4tD-R2t.js";import{S as K}from"./skeleton-DWtmTbOc.js";import{S as Q,f as U,g as W,h as Z,i as J}from"./form-D9jdFSYz.js";import{C as ke}from"./chevron-left-BKXEPKIP.js";import{C as we}from"./chevron-right-lLrSiwd0.js";import{E as Ce}from"./eye-DcAz_uBr.js";import Me from"./AdminAgenda-B7Jbl86-.js";import{A as X,C as Ae,L as Te}from"./AdminTarefas-DzgT9vF2.js";import{B as ee}from"./building-2-CT1ik_DJ.js";import{C as $e}from"./chart-column-bGLVqIjm.js";import{C as Ee}from"./calendar-Crva6Vwm.js";import{F as Be}from"./file-text-Bu3_7kdH.js";import"./refresh-cw-DdzeX2Tc.js";import"./badge-DbLWEFBC.js";import"./TipTapEditor-CbGBz5R8.js";import"./index-Ckz7FvJh.js";import"./dropdown-menu-9LZHELEO.js";import"./index-Dbwy4P5e.js";import"./index-CD86LXez.js";import"./index-DT3SUfp9.js";import"./check-rG5NZU01.js";import"./input-DFBdIpp0.js";import"./tabs-BG0XmY3w.js";import"./link-BIbGXKYx.js";import"./loader-circle-Bfk0Z7Hm.js";import"./list-qE12NwZE.js";import"./quote-Sv3N9UmH.js";import"./trash-2-CQJGaSDa.js";import"./crmTypes-DIKVQqcx.js";import"./trending-up-c0SblFgU.js";import"./clock-DK-ztRz0.js";import"./triangle-alert-B3wsmQ_V.js";import"./list-todo-Da2zWk8K.js";import"./index-enTAeBeF.js";import"./chevron-up-B1BJ0Lzn.js";import"./label-BUYT6qFF.js";import"./scroll-area-CADwGUxm.js";import"./alert-dialog-D3tsgGOz.js";import"./index-DtB--MGt.js";import"./AgendaEventSheet-Dh9XCN6w.js";import"./sheet-DY2_uc24.js";import"./textarea-DJhZC-fp.js";import"./types-C9wiu8_K.js";import"./users-B2Ld1ESD.js";import"./map-pin-CpK6YOpa.js";import"./search-CPaZT4n6.js";import"./TarefaSheet-9GdK55tS.js";import"./dialog-B5s9TH1T.js";import"./separator-C9SMImkq.js";import"./circle-check-D3i57V9t.js";import"./popover-BQrRKhaC.js";import"./switch-ZYYYOR-L.js";import"./folder-kanban-DmIi88ms.js";import"./circle-x-D990VDdo.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=re("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=re("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),_e=a=>fe.from(a),L=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"];function ne(a){if(!a)return"";const s=String(a).slice(0,10);return/^\d{4}-\d{2}-\d{2}$/.test(s)?s:""}function te(a){const s=ne(a);return s?`${s.slice(8,10)}/${s.slice(5,7)}/${s.slice(0,4)}`:String(a||"")}function se(a){if(typeof a=="boolean")return a;if(typeof a=="number")return a!==0;const s=String(a??"").trim().toLowerCase();return["true","yes","sim","1","checked","on","x"].includes(s)}function ae(a){return ne(a.Date)}function Ie(a){const s=String(a||"").trim().toLowerCase();return s.includes("conclu")||s.includes("finaliz")||s.includes("encerrad")?{label:"Concluído",kind:"done",order:0}:s.includes("andamento")||s.includes("trâmite")||s.includes("tramite")||s.includes("process")?{label:s.includes("trâmite")||s.includes("tramite")?"Em trâmite":"Em andamento",kind:"wip",order:1}:s.includes("agend")?{label:"Agendado",kind:"sched",order:2}:{label:a||"—",kind:"other",order:3}}function ze(a){const s=a.match(/\s*\(([^)]+)\)\s*$/);return s?{titulo:a.replace(/\s*\(([^)]+)\)\s*$/,"").trim(),projeto:s[1].trim()}:{titulo:a,projeto:""}}function Oe(a){if(!a)return"";const s=String(a).split(/\r?\n/).map(o=>o.trim()).filter(Boolean);for(let o of s){o=o.replace(/^#{1,6}\s+/,"").replace(/^\d+\)\s+/,"").replace(/^(-|•|o)\s+/i,"");const i=o.replace(/\*\*(.+?)\*\*/g,"$1").replace(/[_`]+/g,"").replace(/\s+/g," ").trim();if(i)return i.length>140?i.slice(0,137).trim()+"...":i}return""}function Ye(a){if(!a)return e.jsx("span",{className:"text-muted-foreground text-xs italic",children:"Sem observações registradas."});const s=String(a).split(/\r?\n/).map(m=>m.trim()).filter(Boolean),o=[];let i=[],c=0;const d=m=>m.split(/\*\*(.+?)\*\*/g).map((b,j)=>j%2===1?e.jsx("strong",{children:b},j):b),x=()=>{i.length&&(o.push(e.jsx("ul",{className:"list-disc list-inside space-y-0.5 text-xs leading-relaxed ml-2",children:i.map((m,p)=>e.jsx("li",{children:d(m)},p))},c++)),i=[])};for(const m of s){const p=m.match(/^#{1,6}\s+(.+)$/);if(p){x(),o.push(e.jsx("p",{className:"text-xs font-bold mt-2 mb-1",children:d(p[1])},c++));continue}const b=m.match(/^(\d+)\)\s+(.+)$/);if(b){x(),o.push(e.jsxs("p",{className:"text-xs font-bold mt-2 mb-1",children:[b[1],") ",d(b[2])]},c++));continue}const j=m.match(/^\*\*(.+?)\*\*:?$/);if(j){x(),o.push(e.jsx("p",{className:"text-xs font-bold mt-2 mb-1",children:d(j[1])},c++));continue}if(/^(-|•|o)\s+/i.test(m)){i.push(m.replace(/^(-|•|o)\s+/i,""));continue}x(),o.push(e.jsx("p",{className:"text-xs leading-relaxed",children:d(m)},c++))}return x(),e.jsx(e.Fragment,{children:o})}const ie={done:"bg-green-100 text-green-800 border-green-200",wip:"bg-amber-100 text-amber-800 border-amber-200",sched:"bg-orange-100 text-orange-700 border-orange-200",other:"bg-muted text-muted-foreground border-border"};async function qe(){const{data:a,error:s}=await _e("mladv_crm_tarefas").select("titulo, status, deadline, descricao, raw_fields").ilike("cliente","%bosi%");if(s)throw s;return a||[]}function Ke(){const a=N.useRef(null),s=new Date,[o,i]=N.useState(s.getFullYear()),[c,d]=N.useState(s.getMonth()),{data:x,isLoading:m}=ge({queryKey:["crm","bosi-report"],queryFn:qe}),p=N.useMemo(()=>{if(!x)return[];const t=new Set;return x.forEach(l=>{const C=l.raw_fields||{};if(!se(C.Bosi))return;const g=ae(C);if(!g)return;const A=Number(g.slice(0,4)),y=Number(g.slice(5,7))-1;t.add(`${A}-${String(y).padStart(2,"0")}`)}),Array.from(t).sort().reverse()},[x]),b=()=>{c===0?(d(11),i(t=>t-1)):d(t=>t-1)},j=()=>{c===11?(d(0),i(t=>t+1)):d(t=>t+1)},M=o===s.getFullYear()&&c===s.getMonth(),r=N.useMemo(()=>{if(!x)return null;const t=o,l=c,C=`${t}-${String(l+1).padStart(2,"0")}-01`;let g;if(M){const n=new Date;g=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`}else{const n=new Date(t,l+1,0).getDate();g=`${t}-${String(l+1).padStart(2,"0")}-${String(n).padStart(2,"0")}`}const A=x.filter(n=>{const f=n.raw_fields||{};if(!se(f.Bosi))return!1;const E=ae(f);return E?E>=C&&E<=g:!1});if(A.length===0)return null;const y=A.filter(n=>n.titulo&&n.titulo.toLowerCase()!=="tarefa sem nome").map(n=>{var P;const f=Ie(n.status),E=((P=n.raw_fields)==null?void 0:P.Observações)||n.descricao||null,{titulo:he,projeto:be}=ze(n.titulo);return{titulo:n.titulo,observacoes:E,deadline:n.deadline,statusLabel:f.label,statusKind:f.kind,statusOrder:f.order,projeto:be,tituloClean:he}}).sort((n,f)=>n.statusOrder!==f.statusOrder?n.statusOrder-f.statusOrder:n.tituloClean.localeCompare(f.tituloClean,"pt-BR")),ce=`01 a ${g.slice(8,10)} de ${L[l]} de ${t}`,de=y.length,me=y.filter(n=>n.statusKind==="done").length,xe=y.filter(n=>n.statusKind==="wip").length,pe=y.filter(n=>n.statusKind==="sched").length,ue=y.filter(n=>n.observacoes).slice(0,3).map(n=>({titulo:n.tituloClean,projeto:n.projeto,impacto:Oe(n.observacoes),statusLabel:n.statusLabel,statusKind:n.statusKind})),Y=new Date;return{tasks:y,periodoTxt:ce,mesAno:`${L[l]} de ${t}`,geradoEm:te(`${Y.getFullYear()}-${String(Y.getMonth()+1).padStart(2,"0")}-${String(Y.getDate()).padStart(2,"0")}`),reportId:`${t}-${String(l+1).padStart(2,"0")}`,total:de,concluidas:me,emAndamento:xe,agendado:pe,destaques:ue}},[x,o,c,M]),_=N.useCallback(()=>{if(!a.current)return;const t=window.open("","_blank");if(!t)return;const l=a.current.innerHTML,g=Array.from(document.querySelectorAll('style, link[rel="stylesheet"]')).map(A=>A.outerHTML).join(`
`);t.document.write(`
      <!DOCTYPE html>
      <html lang="pt-br">
      <head>
        <meta charset="UTF-8">
        <title>Relatório Executivo – ${(r==null?void 0:r.mesAno)||""}</title>
        ${g}
        <style>
          @page { size: A4; margin: 12mm; }
          * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
          body { margin: 0; padding: 0; background: white; }
          .page-break { page-break-before: always; break-before: page; }
          @media print { body { padding: 0; } }
        </style>
      </head>
      <body>
        <div class="bg-white text-slate-900 p-6 sm:p-8 max-w-[680px] mx-auto">${l}</div>
      </body>
      </html>
    `),t.document.close(),setTimeout(()=>{t.print()},500)},[r]);if(m)return e.jsxs("div",{className:"space-y-4",children:[e.jsx(K,{className:"h-8 w-48"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:[1,2,3,4].map(t=>e.jsx(K,{className:"h-20"},t))}),e.jsx(K,{className:"h-64"})]});const h=!r||r.total===0,S=(r==null?void 0:r.tasks)??[],I=(r==null?void 0:r.periodoTxt)??"",u=(r==null?void 0:r.mesAno)??"",v=(r==null?void 0:r.geradoEm)??"",$=(r==null?void 0:r.reportId)??"",k=(r==null?void 0:r.total)??0,w=(r==null?void 0:r.concluidas)??0,oe=(r==null?void 0:r.emAndamento)??0,le=(r==null?void 0:r.agendado)??0,R=(r==null?void 0:r.destaques)??[];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:b,children:e.jsx(ke,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{value:String(c),onValueChange:t=>d(Number(t)),children:[e.jsx(U,{className:"w-[130px] h-8 text-xs capitalize",children:e.jsx(W,{})}),e.jsx(Z,{children:L.map((t,l)=>e.jsx(J,{value:String(l),className:"capitalize",children:t},l))})]}),e.jsxs(Q,{value:String(o),onValueChange:t=>i(Number(t)),children:[e.jsx(U,{className:"w-[80px] h-8 text-xs",children:e.jsx(W,{})}),e.jsx(Z,{children:Array.from({length:5},(t,l)=>s.getFullYear()-l).map(t=>e.jsx(J,{value:String(t),children:t},t))})]})]}),e.jsx(B,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:j,disabled:M,children:e.jsx(we,{className:"w-4 h-4"})}),!M&&e.jsx(B,{variant:"outline",size:"sm",className:"text-xs h-8",onClick:()=>{i(s.getFullYear()),d(s.getMonth())},children:"Mês atual"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(B,{variant:"outline",size:"sm",onClick:_,className:"gap-1.5",disabled:h,children:[e.jsx(Le,{className:"w-3.5 h-3.5"}),"Exportar PDF"]}),e.jsxs(B,{variant:"outline",size:"sm",disabled:h,onClick:_,className:"gap-1.5",children:[e.jsx(Fe,{className:"w-3.5 h-3.5"}),"Imprimir"]})]})]}),h?e.jsx(V,{children:e.jsxs(G,{className:"p-8 text-center text-muted-foreground",children:[e.jsx(Ce,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsxs("p",{className:"text-sm font-medium",children:["Nenhuma tarefa BOSI encontrada para ",L[c]," de ",o,"."]}),e.jsx("p",{className:"text-xs mt-1",children:'Verifique se as tarefas possuem o campo "Bosi" marcado e "Date" preenchido no Airtable.'}),p.length>0&&e.jsxs("p",{className:"text-xs mt-2 text-muted-foreground",children:["Meses com dados: ",p.slice(0,6).map(t=>{const[l,C]=t.split("-");return`${L[Number(C)]}/${l}`}).join(", ")]})]})}):e.jsx(e.Fragment,{children:e.jsx(V,{className:"overflow-hidden",children:e.jsx(G,{className:"p-0",children:e.jsxs("div",{ref:a,className:"bg-white text-slate-900 p-6 sm:p-8 max-w-[680px] mx-auto",children:[e.jsxs("div",{className:"report-header pb-3 mb-4 border-b-2 border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/logo-horizontal_transparent.png",alt:"Mariana Lima Advocacia",style:{maxHeight:70}}),e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/bosi_logo.png",alt:"BOSI",style:{maxHeight:34}})]}),e.jsxs("h1",{className:"text-lg font-extrabold text-slate-900",children:["Atuação jurídica do período – ",u]}),e.jsxs("p",{className:"subtitle text-xs text-slate-500 mt-1",children:["Período: ",I]})]}),e.jsxs("div",{className:"kpi-grid grid grid-cols-2 sm:grid-cols-4 gap-2.5 mb-5",children:[e.jsx(z,{label:"Total",value:k,kind:"other"}),e.jsx(z,{label:"Concluídas",value:w,kind:"done"}),e.jsx(z,{label:"Em andamento",value:oe,kind:"wip"}),e.jsx(z,{label:"Agendadas",value:le,kind:"sched"})]}),R.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsx("h2",{className:"section-title text-sm font-extrabold text-slate-900 mb-2 pb-1 border-b border-slate-200",children:"Destaques estratégicos"}),e.jsx("div",{className:"space-y-2",children:R.map((t,l)=>e.jsxs("div",{className:"flex items-start justify-between gap-3 py-2 border-b border-slate-100 last:border-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs font-extrabold text-slate-900",children:[t.titulo,t.projeto&&e.jsxs("span",{className:"text-slate-500 font-bold",children:[" · ",t.projeto]})]}),e.jsx("p",{className:"text-xs text-slate-600 font-semibold mt-0.5 leading-snug",children:t.impacto||"Atualização registrada no período."})]}),e.jsx(H,{label:t.statusLabel,kind:t.statusKind})]},l))})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("h2",{className:"section-title text-sm font-extrabold text-slate-900 mb-2 pb-1 border-b border-slate-200",children:"Frentes acompanhadas"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4",children:[e.jsx(O,{title:"Concluídas",kind:"done",tasks:S.filter(t=>t.statusKind==="done")}),e.jsx(O,{title:"Em andamento / Em trâmite",kind:"wip",tasks:S.filter(t=>t.statusKind==="wip")}),e.jsx(O,{title:"Agendadas",kind:"sched",tasks:S.filter(t=>t.statusKind==="sched")}),e.jsx(O,{title:"Outras",kind:"other",tasks:S.filter(t=>t.statusKind==="other")})]})]}),e.jsx("div",{className:"page-break"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-center py-4 mb-4 bg-slate-50 rounded-lg",children:[e.jsx("h2",{className:"text-base font-extrabold text-slate-900",children:"Detalhamento das Tarefas"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Resumo técnico e jurídico de cada frente acompanhada em ",e.jsx("strong",{children:u}),"."]})]}),e.jsx("div",{className:"space-y-0",children:S.map((t,l)=>e.jsxs("div",{className:"task-detail py-3 border-b border-slate-100 last:border-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("p",{className:"task-title text-xs font-extrabold text-slate-900",children:[l+1,". ",t.tituloClean,t.projeto&&e.jsxs("span",{className:"task-projeto text-slate-500 font-bold",children:[" · ",t.projeto]})]}),e.jsx(H,{label:t.statusLabel,kind:t.statusKind})]}),t.deadline&&e.jsxs("p",{className:"text-[11px] text-slate-600 font-semibold mt-1",children:["Prazo: ",te(t.deadline)]}),e.jsx("div",{className:"task-obs mt-2",children:Ye(t.observacoes)})]},l))})]}),e.jsxs("div",{className:"footer mt-6 pt-3 border-t-2 border-slate-200",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-extrabold text-slate-700",children:"Mariana Lima Advocacia"}),e.jsxs("p",{className:"text-[11px] text-slate-500 mt-1",children:["Telefone: (31) 99404-8797",e.jsx("br",{}),"E-mail: contato@marianalima.adv.br",e.jsx("br",{}),"Rua Hugo Santos Silva, nº 100 – Centro, Sete Lagoas – MG"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/logo-horizontal_transparent.png",alt:"Mariana Lima Advocacia",style:{maxHeight:70,marginLeft:"auto"},className:"mb-2"}),e.jsxs("p",{className:"text-[10px] text-slate-400",children:["Gerado em: ",v]}),e.jsxs("p",{className:"text-[10px] text-slate-400",children:["Relatório #",$]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-slate-100",children:[e.jsx("p",{className:"text-[10px] text-slate-400 italic",children:"Este relatório é confidencial e destinado exclusivamente ao destinatário."}),e.jsx("img",{src:"https://vps2-public-videos.m7brnq.easypanel.host/bosi_logo.png",alt:"BOSI",style:{maxHeight:28}})]})]})]})})})})]})}function z({label:a,value:s,kind:o}){const i={done:"bg-green-50 border-green-200 text-green-900",wip:"bg-amber-50 border-amber-200 text-amber-900",sched:"bg-orange-50 border-orange-200 text-orange-900",other:"bg-slate-50 border-slate-200 text-slate-900"};return e.jsxs("div",{className:F("kpi-card rounded-lg border p-3",i[o]),children:[e.jsx("p",{className:"value text-2xl font-black leading-none",children:s}),e.jsx("p",{className:"label text-[10px] font-bold uppercase tracking-wide mt-1.5",children:a})]})}function H({label:a,kind:s}){return e.jsx("span",{className:F("badge inline-block px-2 py-0.5 rounded-full text-[10px] font-bold border shrink-0 whitespace-nowrap",ie[s]),children:a})}function O({title:a,kind:s,tasks:o}){return o.length===0?null:e.jsxs("div",{className:"mb-3 break-inside-avoid",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 pb-1",children:[e.jsx("p",{className:"text-xs font-extrabold text-slate-900",children:a}),e.jsx("span",{className:F("badge inline-block px-1.5 py-0 rounded-full text-[10px] font-black border",ie[s]),children:o.length})]}),e.jsx("div",{className:"border-t border-slate-100",children:o.map((i,c)=>e.jsxs("div",{className:"flex items-center justify-between gap-2 py-1 border-b border-slate-50 last:border-0",children:[e.jsxs("p",{className:"text-[11px] font-bold text-slate-900 leading-tight flex-1 min-w-0",children:[i.tituloClean,i.projeto&&e.jsxs("span",{className:"text-slate-500 font-bold",children:[" · ",i.projeto]})]}),e.jsx(H,{label:i.statusLabel,kind:i.statusKind})]},c))})]})}const T="bosi",He=[{id:"visao_geral",label:"Visão Geral",icon:$e},{id:"agenda",label:"Agenda",icon:Ee},{id:"tarefas",label:"Tarefas",icon:Ae},{id:"subtarefas",label:"Subtarefas",icon:Te},{id:"relatorio",label:"Relatório",icon:Be}];function Qt(){const{events:a,loading:s,syncing:o,lastSync:i,sync:c}=je(),{tasks:d,loading:x,syncing:m,lastSync:p,sync:b}=ve(),j=()=>{c(),b()},M=o||m,r=i&&p?i>p?p:i:i||p,_=s||x,[h,S]=N.useState("visao_geral"),I=N.useMemo(()=>{const u=a.filter(k=>{var w;return(w=k.client)==null?void 0:w.toLowerCase().includes(T)}),v=d.filter(k=>{var w;return(w=k.client)==null?void 0:w.toLowerCase().includes(T)}),$=v.flatMap(k=>k.subtasks);return{visao_geral:0,agenda:u.length,tarefas:v.length,subtarefas:$.length,relatorio:0}},[a,d]);return _?e.jsxs("div",{className:"space-y-6 pb-20 md:pb-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-primary/10 border border-primary/20",children:e.jsx(ee,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"BOSI Empreendimentos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Painel exclusivo do cliente"})]})]}),e.jsx(ye,{}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(D,{}),e.jsx(D,{})]})]}):e.jsxs(q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6 pb-20 md:pb-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-primary/10 border border-primary/20",children:e.jsx(ee,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"BOSI Empreendimentos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Painel exclusivo do cliente"})]})]}),e.jsx(Ne,{syncing:M,lastSync:r,onSync:j})]}),e.jsx("div",{className:"flex items-center gap-1 rounded-2xl border border-border bg-muted/40 p-1 w-fit backdrop-blur-sm overflow-x-auto",children:He.map(u=>{const v=h===u.id,$=u.icon;return e.jsxs("button",{onClick:()=>S(u.id),className:F("relative flex items-center gap-2 rounded-xl px-5 py-2.5 text-sm font-medium transition-all duration-200 whitespace-nowrap",v?"text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-background/50"),children:[v&&e.jsx(q.div,{layoutId:"bosi-tab-bg",className:"absolute inset-0 rounded-xl gold-gradient shadow-sm",transition:{type:"spring",bounce:.15,duration:.5}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),u.label,I[u.id]>0&&e.jsx("span",{className:F("inline-flex items-center justify-center rounded-full px-2 py-0.5 text-[10px] font-semibold tabular-nums min-w-[22px] transition-colors",v?"bg-primary-foreground/20 text-primary-foreground":"bg-secondary text-muted-foreground"),children:I[u.id]})]})]},u.id)})}),e.jsxs(q.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.2},children:[h==="visao_geral"&&e.jsx(Se,{clientFilter:T,tasks:d,events:a}),h==="agenda"&&e.jsx(Me,{clientFilter:T,hideHeader:!0}),h==="tarefas"&&e.jsx(X,{clientNameFilter:T,hideHeader:!0,forceTab:"tarefas"}),h==="subtarefas"&&e.jsx(X,{clientNameFilter:T,hideHeader:!0,forceTab:"subtarefas"}),h==="relatorio"&&e.jsx(Ke,{})]},h)]})}export{Qt as default};
