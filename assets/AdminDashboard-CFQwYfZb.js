import{a as v,r as _,E as F,j as e,L as h,c as y}from"./index-MkTBmNc_.js";import{A as L,M as O,P as B}from"./AdminLayout-Be_12N6g.js";import{d as R,e as I,f as H}from"./usePosts-DEN9i-3E.js";import{a as $,b as q}from"./usePostViews-Baxh5Oax.js";import{B as o}from"./button-_p2UG169.js";import{B as C}from"./badge-B2681vsg.js";import{T as U,a as G,b as D,c as n,d as J,e as d}from"./table-ChI9toFF.js";import{D as P,a as k,b as A,c,d as K}from"./dropdown-menu-5qXGfaf4.js";import{A as Q,a as W,b as X,c as Y,d as Z,e as ee,f as se,g as re}from"./alert-dialog-BNkqeP8z.js";import{E}from"./external-link-eOEQAS68.js";import{E as f,a as N}from"./eye-DYUCWeKa.js";import{T}from"./trash-2-SH5l293N.js";import{e as ae}from"./usePostInteractions-B5-Q6B_x.js";import{C as x,c as m}from"./card-fj4PCvWe.js";import{S as le}from"./skeleton-DCAfy-5g.js";import{F as te}from"./file-text-VJEi4g6K.js";import{C as ie}from"./circle-alert-Cmm7O0Ul.js";import"./ThemeToggle-B5uvQ8Mm.js";import"./chevron-left-DW1P4qUw.js";import"./index-DAxjeeGc.js";import"./Combination-BMEcxnpC.js";import"./index-DGgEejs-.js";import"./check-DuG6xzk6.js";import"./index-Bg51wVj5.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=v("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=v("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=v("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);function p(r){return r?new Date(r).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"}function ne({posts:r,isLoading:u}){const[t,i]=_.useState(null),g=R(),b=I(),{toast:l}=F(),{data:a}=$(),w=async s=>{const j=!s.published;try{await g.mutateAsync({id:s.id,published:j,published_at:j?new Date().toISOString():s.published_at}),l({title:j?"Post publicado!":"Post despublicado",description:j?"O artigo agora está visível no blog.":"O artigo foi movido para rascunhos."})}catch{l({title:"Erro",description:"Não foi possível atualizar o post.",variant:"destructive"})}},V=async()=>{if(t)try{await b.mutateAsync(t),l({title:"Post excluído",description:"O artigo foi removido permanentemente."})}catch{l({title:"Erro",description:"Não foi possível excluir o post.",variant:"destructive"})}finally{i(null)}};return r.length===0&&!u?e.jsxs("div",{className:"text-center py-12 border border-dashed border-border rounded-lg",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Nenhum post encontrado."}),e.jsx(h,{to:"/admin/posts/new",children:e.jsx(o,{children:"Criar primeiro post"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block border border-border rounded-lg overflow-hidden",children:e.jsxs(U,{children:[e.jsx(G,{children:e.jsxs(D,{children:[e.jsx(n,{className:"w-[35%]",children:"Título"}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"Views"}),e.jsx(n,{children:"Publicado em"}),e.jsx(n,{children:"Criado em"}),e.jsx(n,{className:"w-[100px]",children:"Ações"})]})}),e.jsx(J,{children:r.map(s=>e.jsxs(D,{children:[e.jsx(d,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground line-clamp-1",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground line-clamp-1",children:["/",s.slug]})]})}),e.jsx(d,{children:e.jsx(C,{variant:s.published?"default":"secondary",className:y(s.published?"bg-green-500/10 text-green-600 border-green-500/30":""),children:s.published?"Publicado":"Rascunho"})}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{children:(a==null?void 0:a[s.id])||0})]})}),e.jsx(d,{className:"text-muted-foreground",children:p(s.published_at)}),e.jsx(d,{className:"text-muted-foreground",children:p(s.created_at)}),e.jsx(d,{children:e.jsxs(P,{children:[e.jsx(k,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",children:e.jsx(M,{className:"w-4 h-4"})})}),e.jsxs(A,{align:"end",className:"bg-popover",children:[e.jsx(c,{asChild:!0,children:e.jsxs(h,{to:`/admin/posts/${s.id}/edit`,children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Editar"]})}),s.published&&e.jsx(c,{asChild:!0,children:e.jsxs("a",{href:`/blog/${s.slug}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Ver no blog"]})}),e.jsx(c,{onClick:()=>w(s),children:s.published?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Despublicar"]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Publicar"]})}),e.jsx(K,{}),e.jsxs(c,{onClick:()=>i(s.id),className:"text-destructive focus:text-destructive",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Excluir"]})]})]})})]},s.id))})]})}),e.jsx("div",{className:"lg:hidden space-y-3",children:r.map(s=>e.jsxs("div",{className:"bg-card rounded-lg border border-border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-foreground line-clamp-2 text-sm sm:text-base",children:s.title}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:["/",s.slug]})]}),e.jsx(C,{variant:s.published?"default":"secondary",className:y("shrink-0 text-xs",s.published?"bg-green-500/10 text-green-600 border-green-500/30":""),children:s.published?"Publicado":"Rascunho"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Publicado: ",p(s.published_at)]}),e.jsxs("span",{children:["Criado: ",p(s.created_at)]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2 border-t border-border",children:[e.jsx(h,{to:`/admin/posts/${s.id}/edit`,children:e.jsxs(o,{variant:"outline",size:"sm",className:"h-8 text-xs",children:[e.jsx(S,{className:"w-3.5 h-3.5 mr-1.5"}),"Editar"]})}),e.jsx(o,{variant:"outline",size:"sm",className:"h-8 text-xs",onClick:()=>w(s),children:s.published?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"w-3.5 h-3.5 mr-1.5"}),"Despublicar"]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-3.5 h-3.5 mr-1.5"}),"Publicar"]})}),e.jsxs(P,{children:[e.jsx(k,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(M,{className:"w-4 h-4"})})}),e.jsxs(A,{align:"end",className:"bg-popover",children:[s.published&&e.jsx(c,{asChild:!0,children:e.jsxs("a",{href:`/blog/${s.slug}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Ver no blog"]})}),e.jsxs(c,{onClick:()=>i(s.id),className:"text-destructive focus:text-destructive",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Excluir"]})]})]})]})]},s.id))}),e.jsx(Q,{open:!!t,onOpenChange:()=>i(null),children:e.jsxs(W,{children:[e.jsxs(X,{children:[e.jsx(Y,{children:"Excluir post?"}),e.jsx(Z,{children:"Esta ação não pode ser desfeita. O post será removido permanentemente."})]}),e.jsxs(ee,{children:[e.jsx(se,{children:"Cancelar"}),e.jsx(re,{onClick:V,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Excluir"})]})]})})]})}const ze=()=>{const{data:r,isLoading:u}=H(),{data:t}=ae(),{data:i}=q(),g=(r==null?void 0:r.filter(a=>a.published).length)||0,b=(r==null?void 0:r.filter(a=>!a.published).length)||0,l=(t==null?void 0:t.filter(a=>!a.reviewed_at).length)||0;return e.jsxs(L,{title:"Dashboard",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5 mb-8",children:[e.jsx(x,{children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:e.jsx(te,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:(r==null?void 0:r.length)||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de posts"})]})]})})}),e.jsx(x,{children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-green-500/10",children:e.jsx(N,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:g}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Publicados"})]})]})})}),e.jsx(x,{children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-yellow-500/10",children:e.jsx(f,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:b}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Rascunhos"})]})]})})}),e.jsx(x,{children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-500/10",children:e.jsx(z,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:i??0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Visualizações"})]})]})})}),e.jsx(h,{to:"/admin/comments",children:e.jsx(x,{className:l>0?"ring-2 ring-orange-500/50 hover:ring-orange-500/70 transition-all cursor-pointer":"hover:bg-muted/50 transition-colors cursor-pointer",children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-orange-500/10",children:e.jsx(O,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:l}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Novos comentários"})]}),l>0&&e.jsx(ie,{className:"w-5 h-5 text-orange-500 ml-auto animate-pulse"})]})})})})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Posts"}),e.jsx(h,{to:"/admin/posts/new",children:e.jsxs(o,{children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Novo Post"]})})]}),u?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(a=>e.jsx(le,{className:"h-16 w-full"},a))}):e.jsx(ne,{posts:r||[]})]})};export{ze as default};
