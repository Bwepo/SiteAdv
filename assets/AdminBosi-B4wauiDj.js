import{r as f,j as s,e as p}from"./index-RmZ73Lgq.js";import{A as K,L as Y}from"./AdminLayout-C-HBNBFh.js";import{C as l,c as r,a as N,b}from"./card-DpbtTpxz.js";import{B as o}from"./badge-4-2Ehll8.js";import{u as $,a as M,E as F,c as U,g as V,f as z,T as H,d as q}from"./crmTypes-d7spMBDn.js";import{S as G,B as J,a as y}from"./CrmSkeletons-ByTW6-fm.js";import{C as S}from"./calendar-zD5AgT5f.js";import{C as Q}from"./clock-CpqmR45M.js";import{T as W,C as X}from"./triangle-alert-DE0emguS.js";import"./button-BRXBmgFe.js";import"./index-CQ2FbGk6.js";import"./index-CEZSRBSU.js";import"./house-y5kz8rPK.js";import"./menu-BxsFgETN.js";import"./users-Ct0pe-DP.js";import"./file-text-BKsISaE4.js";import"./skeleton-r44SCx5J.js";function gs(){const m=new Date().toISOString().split("T")[0],{events:h,loading:T,syncing:v,lastSync:d,sync:C}=$(),{tasks:u,loading:A,syncing:E,lastSync:c,sync:w}=M(),L=()=>{C(),w()},B=v||E,O=d&&c?d>c?c:d:d||c,D=T||A,_=f.useMemo(()=>h.filter(e=>{var t;return(t=e.client)==null?void 0:t.toLowerCase().includes("bosi")}).sort((e,t)=>e.date.localeCompare(t.date)),[h]),n=f.useMemo(()=>u.filter(e=>{var t;return(t=e.client)==null?void 0:t.toLowerCase().includes("bosi")}),[u]),x=_.filter(e=>e.date>=m&&e.status!=="cancelado"),R=n.filter(e=>e.status!=="concluida"&&e.status!=="cancelada"),I=n.filter(e=>e.dueDate&&e.dueDate<m&&e.status!=="concluida"&&e.status!=="cancelada"),k=n.filter(e=>e.status==="concluida"),P=e=>new Date(e+"T12:00:00").toLocaleDateString("pt-BR",{day:"2-digit",month:"short"});return s.jsxs(K,{title:"BOSI Empreendimentos",children:[s.jsx("div",{className:"flex justify-end mb-6",children:s.jsx(G,{syncing:B,lastSync:O,onSync:L})}),D?s.jsxs(s.Fragment,{children:[s.jsx(J,{}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[s.jsx(y,{}),s.jsx(y,{})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[s.jsx(l,{children:s.jsxs(r,{className:"p-4 flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-blue-100 text-blue-700",children:s.jsx(S,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:x.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Compromissos"})]})]})}),s.jsx(l,{children:s.jsxs(r,{className:"p-4 flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-amber-100 text-amber-700",children:s.jsx(Q,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:R.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Tarefas pendentes"})]})]})}),s.jsx(l,{children:s.jsxs(r,{className:"p-4 flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-red-100 text-red-700",children:s.jsx(W,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:I.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Atrasadas"})]})]})}),s.jsx(l,{children:s.jsxs(r,{className:"p-4 flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-green-100 text-green-700",children:s.jsx(X,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:k.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"ConcluÃ­das"})]})]})})]}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[s.jsxs(l,{children:[s.jsx(N,{className:"pb-3",children:s.jsxs(b,{className:"text-base flex items-center gap-2",children:[s.jsx(S,{className:"w-4 h-4"}),"Agenda BOSI"]})}),s.jsx(r,{className:"space-y-3",children:x.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-6",children:"Nenhum compromisso agendado."}):x.map(e=>s.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-border",children:[s.jsxs("div",{className:"text-center min-w-[3rem]",children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:P(e.date)}),e.time&&s.jsx("p",{className:"text-sm font-bold",children:e.time})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium",children:e.title}),e.location&&s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:e.location})]}),s.jsx(o,{variant:"secondary",className:`text-[10px] shrink-0 ${F[e.type]}`,children:U[e.type]})]},e.id))})]}),s.jsxs(l,{children:[s.jsx(N,{className:"pb-3",children:s.jsxs(b,{className:"text-base flex items-center gap-2",children:[s.jsx(Y,{className:"w-4 h-4"}),"Tarefas BOSI"]})}),s.jsx(r,{className:"space-y-3",children:n.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-6",children:"Nenhuma tarefa."}):n.map(e=>{const t=e.subtasks.filter(a=>a.completed).length,i=e.subtasks.length,g=i>0?Math.round(t/i*100):0,j=e.dueDate&&e.dueDate<m&&e.status!=="concluida"&&e.status!=="cancelada";return s.jsxs("div",{className:p("p-3 rounded-lg border border-border",j&&"border-destructive/50"),children:[s.jsx("div",{className:"flex items-start justify-between gap-2",children:s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(o,{variant:"secondary",className:`text-[10px] ${V[e.status]}`,children:z[e.status]}),s.jsx(o,{variant:"secondary",className:`text-[10px] ${H[e.priority]}`,children:q[e.priority]}),j&&s.jsx(o,{variant:"destructive",className:"text-[10px]",children:"Atrasada"})]}),s.jsx("p",{className:"text-sm font-medium",children:e.title}),e.dueDate&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Prazo: ",new Date(e.dueDate+"T12:00:00").toLocaleDateString("pt-BR")]})]})}),i>0&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-[10px] text-muted-foreground mb-1",children:[s.jsxs("span",{children:[t,"/",i," subtarefas"]}),s.jsxs("span",{children:[g,"%"]})]}),s.jsx("div",{className:"w-full bg-muted rounded-full h-1.5",children:s.jsx("div",{className:"bg-primary rounded-full h-1.5 transition-all",style:{width:`${g}%`}})}),s.jsx("div",{className:"mt-1.5 space-y-1",children:e.subtasks.map(a=>s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:p("w-2 h-2 rounded-full shrink-0",a.completed?"bg-green-500":"bg-muted-foreground/30")}),s.jsx("span",{className:p(a.completed&&"line-through text-muted-foreground"),children:a.title})]},a.id))})]})]},e.id)})})]})]})]})]})}export{gs as default};
