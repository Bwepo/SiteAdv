import{ah as Y,ai as K,r as N,j as e,e as h}from"./index-BTPYu9Yo.js";import{A as M,L as F}from"./AdminLayout-CVZ3aQcY.js";import{C as r,c as l,a as b,b as y}from"./card-DNe0sRVJ.js";import{B as o}from"./badge-DW72TID6.js";import{E as U,a as V,g as z,e as H,T as q,b as G}from"./crmTypes-CSTEvmy3.js";import{S as J,B as Q,a as S}from"./CrmSkeletons-UHSYdfdj.js";import{C as T}from"./calendar-CItZDCDV.js";import{C as W}from"./clock-DDVxU7vS.js";import{T as X}from"./triangle-alert-DLgo7gsy.js";import{C as Z}from"./circle-check-Ne853MXm.js";import"./dialog-BUN5YjuJ.js";import"./index-27RjLLL3.js";import"./button-ityc9YDm.js";import"./heart-Cc17w6w0.js";import"./sparkles-BBbVRxFI.js";import"./house-DzCPO-14.js";import"./menu-1KtLnSzP.js";import"./users-D6c7JY70.js";import"./file-text-DGOW7wuu.js";import"./skeleton-mG-FlQEv.js";function be(){const m=new Date,x=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")}`,{events:u,loading:v,syncing:C,lastSync:d,sync:A}=Y(),{tasks:g,loading:E,syncing:w,lastSync:c,sync:L}=K(),B=()=>{A(),L()},D=C||w,O=d&&c?d>c?c:d:d||c,_=v||E,R=N.useMemo(()=>u.filter(s=>{var t;return(t=s.client)==null?void 0:t.toLowerCase().includes("bosi")}).sort((s,t)=>s.date.localeCompare(t.date)),[u]),n=N.useMemo(()=>g.filter(s=>{var t;return(t=s.client)==null?void 0:t.toLowerCase().includes("bosi")}),[g]),p=R.filter(s=>s.date>=x&&s.status!=="cancelado"),I=n.filter(s=>s.status!=="concluida"&&s.status!=="cancelada"),$=n.filter(s=>s.dueDate&&s.dueDate<x&&s.status!=="concluida"&&s.status!=="cancelada"),k=n.filter(s=>s.status==="concluida"),P=s=>new Date(s+"T12:00:00").toLocaleDateString("pt-BR",{day:"2-digit",month:"short"});return e.jsxs(M,{title:"BOSI Empreendimentos",children:[e.jsx("div",{className:"flex justify-end mb-6",children:e.jsx(J,{syncing:D,lastSync:O,onSync:B})}),_?e.jsxs(e.Fragment,{children:[e.jsx(Q,{}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(S,{}),e.jsx(S,{})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(r,{children:e.jsxs(l,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 text-blue-700",children:e.jsx(T,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:p.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Compromissos"})]})]})}),e.jsx(r,{children:e.jsxs(l,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-100 text-amber-700",children:e.jsx(W,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:I.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tarefas pendentes"})]})]})}),e.jsx(r,{children:e.jsxs(l,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-100 text-red-700",children:e.jsx(X,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:$.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Atrasadas"})]})]})}),e.jsx(r,{children:e.jsxs(l,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-100 text-green-700",children:e.jsx(Z,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:k.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"ConcluÃ­das"})]})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(b,{className:"pb-3",children:e.jsxs(y,{className:"text-base flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),"Agenda BOSI"]})}),e.jsx(l,{className:"space-y-3",children:p.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-6",children:"Nenhum compromisso agendado."}):p.map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-border",children:[e.jsxs("div",{className:"text-center min-w-[3rem]",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:P(s.date)}),s.time&&e.jsx("p",{className:"text-sm font-bold",children:s.time})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:s.title}),s.location&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:s.location})]}),e.jsx(o,{variant:"secondary",className:`text-[10px] shrink-0 ${U[s.type]}`,children:V[s.type]})]},s.id))})]}),e.jsxs(r,{children:[e.jsx(b,{className:"pb-3",children:e.jsxs(y,{className:"text-base flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),"Tarefas BOSI"]})}),e.jsx(l,{className:"space-y-3",children:n.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-6",children:"Nenhuma tarefa."}):n.map(s=>{const t=s.subtasks.filter(a=>a.completed).length,i=s.subtasks.length,j=i>0?Math.round(t/i*100):0,f=s.dueDate&&s.dueDate<x&&s.status!=="concluida"&&s.status!=="cancelada";return e.jsxs("div",{className:h("p-3 rounded-lg border border-border",f&&"border-destructive/50"),children:[e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(o,{variant:"secondary",className:`text-[10px] ${z[s.status]}`,children:H[s.status]}),e.jsx(o,{variant:"secondary",className:`text-[10px] ${q[s.priority]}`,children:G[s.priority]}),f&&e.jsx(o,{variant:"destructive",className:"text-[10px]",children:"Atrasada"})]}),e.jsx("p",{className:"text-sm font-medium",children:s.title}),s.dueDate&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Prazo: ",new Date(s.dueDate+"T12:00:00").toLocaleDateString("pt-BR")]})]})}),i>0&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] text-muted-foreground mb-1",children:[e.jsxs("span",{children:[t,"/",i," subtarefas"]}),e.jsxs("span",{children:[j,"%"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-1.5",children:e.jsx("div",{className:"bg-primary rounded-full h-1.5 transition-all",style:{width:`${j}%`}})}),e.jsx("div",{className:"mt-1.5 space-y-1",children:s.subtasks.map(a=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:h("w-2 h-2 rounded-full shrink-0",a.completed?"bg-green-500":"bg-muted-foreground/30")}),e.jsx("span",{className:h(a.completed&&"line-through text-muted-foreground"),children:a.title})]},a.id))})]})]},s.id)})})]})]})]})]})}export{be as default};
