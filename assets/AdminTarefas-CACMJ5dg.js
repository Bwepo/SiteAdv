const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminCrmDashboard-aX3c0Ons.js","assets/index-gcTtdPRW.js","assets/index-BC8JTJEe.css","assets/card-Ct6wHZaG.js","assets/badge-B-QICjl0.js","assets/button-n4j96kVx.js","assets/skeleton-BCprQGdp.js","assets/select-9LhAoxps.js","assets/index-g984DNOW.js","assets/index-DaLuVLIH.js","assets/index-BjlZNiSm.js","assets/chevron-up-BRh-yOCg.js","assets/check-B7F5MirJ.js","assets/crmTypes-C50mLt4o.js","assets/useQuery-D2Rngpnt.js","assets/filter-D4rSzGCC.js","assets/folder-kanban-kdlZQ9EN.js","assets/calendar-BZGRAklW.js","assets/list-todo-D3PSp-I9.js","assets/clock-BvTPjpz5.js","assets/triangle-alert-BcOzMkUn.js","assets/circle-check-DeHlyck7.js","assets/arrow-right-Cmq0Cw7-.js","assets/users-DCN29TWW.js"])))=>i.map(i=>d[i]);
import{c as tt,r as u,j as e,e as P,h as jn,m as na,a4 as bn}from"./index-gcTtdPRW.js";import{E as yn,A as Nn,m as ha}from"./formatters-BEmjKTa5.js";import{P as wn,T as Cn}from"./TarefaSheet-DMkTAHRQ.js";import{u as Wt}from"./useCrmFieldOptions-DgGfg-7I.js";import{u as Dn,F as _n,a as Te,b as Oe,c as Pe,d as We,e as Le,t as Sn}from"./form-CnuO81zj.js";import{S as kn,b as Mn,c as Tn,d as On,e as Pn,f as Ln}from"./sheet-TKKcr_AH.js";import{I as ut}from"./input-BPDweLoc.js";import{B as ne,b as sa}from"./button-n4j96kVx.js";import{S as W,a as Y,b as V,c as H,d as T}from"./select-9LhAoxps.js";import{P as mt,a as ft,b as ht}from"./popover-DYxcd2PB.js";import{S as Yt,g as Ft,h as xa,a as Fn,b as In,i as va,j as pa,T as ga,c as qe}from"./crmTypes-C50mLt4o.js";import{S as Vt}from"./search-2ghFZnNd.js";import{C as An}from"./check-B7F5MirJ.js";import{U as En}from"./user-BV2IK4Ww.js";import{T as Ht}from"./trash-2-CuaIDpg1.js";import{L as Rn}from"./loader-circle-DI7UxTsT.js";import{o as Bn,s as Fe}from"./types-3c7sL9OC.js";import{T as ja,b as ba,c as Wn,K as Yn}from"./CrmSkeletons-Cj0-l_2N.js";import{C as Xe,c as Je}from"./card-Ct6wHZaG.js";import{t as R,e as Ye,s as xt,g as Qe,h as ra,m as Vn,i as Hn,j as pe,k as Kn,l as zn,n as Kt,o as $n,p as Un,f as Ie,q as ya}from"./format-Bo8wDDlG.js";import{C as Zn}from"./chevron-left-BIk8zc5Q.js";import{C as qn}from"./chevron-right-BLNRd_tm.js";import{A as Na,a as wa,b as Ca,c as Da,d as _a,e as Sa,f as ka,g as Ma}from"./alert-dialog-Bc4LhbEQ.js";import{B as U,P as Ta}from"./badge-B-QICjl0.js";import{S as Ge}from"./switch-B8f8pxlA.js";import{u as Oa,a as Pa,D as La,c as Fa,b as Ia,d as Aa,S as Ea,v as Ra,P as Ba,e as Wa,C as Ya}from"./sortable.esm-B4i8oJ8S.js";import{C as Ve}from"./calendar-BZGRAklW.js";import{U as gt}from"./users-DCN29TWW.js";import{F as jt}from"./folder-kanban-kdlZQ9EN.js";import{L as Va}from"./list-B7a8vjqw.js";import{P as Ha}from"./pencil-D0XZ6ehx.js";import{L as Gn}from"./label-Dxh8HIlz.js";import{S as St}from"./skeleton-BCprQGdp.js";import{C as Xn,a as Jn}from"./circle-check-DeHlyck7.js";import{C as Qn}from"./clipboard-list-CibKr2vf.js";import{F as es}from"./filter-D4rSzGCC.js";import{C as Ka,a as ts}from"./circle-x-DTPSeCAR.js";import{C as as}from"./clock-BvTPjpz5.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=tt("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=tt("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=tt("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=tt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=tt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);function q(t,a){const n=R(t);return isNaN(a)?Ye(t,NaN):(a&&n.setDate(n.getDate()+a),n)}function oe(t,a){const n=R(t);if(isNaN(a))return Ye(t,NaN);if(!a)return n;const s=n.getDate(),r=Ye(t,n.getTime());r.setMonth(n.getMonth()+a+1,0);const l=r.getDate();return s>=l?r:(n.setFullYear(r.getFullYear(),r.getMonth(),s),n)}function At(t,a){const n=a*7;return q(t,n)}function rs(t,a){return oe(t,a*12)}function os(t){let a;return t.forEach(function(n){const s=R(n);(a===void 0||a<s||isNaN(Number(s)))&&(a=s)}),a||new Date(NaN)}function ls(t){let a;return t.forEach(n=>{const s=R(n);(!a||a>s||isNaN(+s))&&(a=s)}),a||new Date(NaN)}function ee(t,a){const n=xt(t),s=xt(a);return+n==+s}function et(t,a){const n=R(t),s=R(a),r=n.getFullYear()-s.getFullYear(),l=n.getMonth()-s.getMonth();return r*12+l}function is(t,a,n){const s=Qe(t,n),r=Qe(a,n),l=+s-ra(s),i=+r-ra(r);return Math.round((l-i)/Vn)}function zt(t){const a=R(t),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(23,59,59,999),a}function te(t){const a=R(t);return a.setDate(1),a.setHours(0,0,0,0),a}function $t(t,a){var d,m,h,f;const n=Hn(),s=(a==null?void 0:a.weekStartsOn)??((m=(d=a==null?void 0:a.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??n.weekStartsOn??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,r=R(t),l=r.getDay(),i=(l<s?-7:0)+6-(l-s);return r.setDate(r.getDate()+i),r.setHours(23,59,59,999),r}function Ua(t){return $t(t,{weekStartsOn:1})}function cs(t){const a=R(t),n=a.getFullYear(),s=a.getMonth(),r=Ye(t,0);return r.setFullYear(n,s+1,0),r.setHours(0,0,0,0),r.getDate()}function ds(t){return Math.trunc(+R(t)/1e3)}function us(t){const a=R(t),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(0,0,0,0),a}function ms(t,a){return is(us(t),te(t),a)+1}function Et(t,a){const n=R(t),s=R(a);return n.getTime()>s.getTime()}function Za(t,a){const n=R(t),s=R(a);return+n<+s}function Ut(t,a){const n=R(t),s=R(a);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function fs(t,a){const n=R(t),s=R(a);return n.getFullYear()===s.getFullYear()}function kt(t,a){return q(t,-a)}function Mt(t,a){const n=R(t),s=n.getFullYear(),r=n.getDate(),l=Ye(t,0);l.setFullYear(s,a,15),l.setHours(0,0,0,0);const i=cs(l);return n.setMonth(a,Math.min(r,i)),n}function oa(t,a){const n=R(t);return isNaN(+n)?Ye(t,NaN):(n.setFullYear(a),n)}const hs=Bn({title:Fe().trim().min(1,"Título obrigatório").max(200),parentTaskId:Fe().min(1,"Tarefa-mãe obrigatória"),deadline:Fe().optional(),status:Fe().min(1),assignee:Fe().optional(),notes:Fe().max(2e3).optional(),numeroProcesso:Fe().max(25).optional()});function xs({open:t,onOpenChange:a,subtask:n,tasks:s,onSave:r,onDelete:l}){const i=!n,[d,m]=u.useState(!1),[h,f]=u.useState(""),{getOptions:x}=Wt(),p=x("subtarefa_status").map(k=>[k.value,k.label]),b=Object.entries(Yt),w=p.length>0?p:b,[_,j]=u.useState(!1),O=u.useMemo(()=>{if(!h.trim())return s;const k=h.toLowerCase();return s.filter(L=>L.title.toLowerCase().includes(k))},[s,h]),M=Dn({resolver:Sn(hs),defaultValues:{title:"",parentTaskId:"",deadline:"",status:"A fazer",assignee:"",notes:""}});u.useEffect(()=>{t&&(n?M.reset({title:n.title,parentTaskId:n.parentTaskId,deadline:n.dueDate??"",status:n.status,assignee:n.assignee??"",notes:n.notes??"",numeroProcesso:n.numeroProcesso??""}):M.reset({title:"",parentTaskId:"",deadline:"",status:"A fazer",assignee:"",notes:"",numeroProcesso:""}))},[t,n]);const G=async k=>{m(!0);try{await r(k,i,n==null?void 0:n.id),a(!1)}catch(L){jn.error("Erro ao salvar subtarefa: "+L.message),console.error("Erro ao salvar subtarefa:",L)}finally{m(!1)}};return e.jsx(kn,{open:t,onOpenChange:a,children:e.jsxs(Mn,{side:"right",className:"w-full sm:max-w-lg overflow-y-auto",children:[e.jsxs(Tn,{className:"mb-6",children:[e.jsx(On,{children:i?"Nova Subtarefa":"Editar Subtarefa"}),e.jsx(Pn,{children:i?"Preencha os dados e selecione a tarefa-mãe relacionada.":"Altere os campos e salve."})]}),e.jsx(_n,{...M,children:e.jsxs("form",{onSubmit:M.handleSubmit(G),className:"space-y-5",children:[e.jsx(Te,{control:M.control,name:"title",render:({field:k})=>e.jsxs(Oe,{children:[e.jsx(Pe,{children:"Título *"}),e.jsx(We,{children:e.jsx(ut,{placeholder:"Ex: Enviar documento",...k})}),e.jsx(Le,{})]})}),e.jsx(Te,{control:M.control,name:"parentTaskId",render:({field:k})=>{var L;return e.jsxs(Oe,{className:"flex flex-col",children:[e.jsx(Pe,{children:"Tarefa-mãe *"}),e.jsxs(mt,{open:_,onOpenChange:j,children:[e.jsx(ft,{asChild:!0,children:e.jsx(We,{children:e.jsxs(ne,{variant:"outline",role:"combobox",className:P("w-full justify-between font-normal",!k.value&&"text-muted-foreground"),children:[e.jsx("span",{className:"truncate",children:k.value?((L=s.find(A=>A.id===k.value))==null?void 0:L.title)??"Tarefa não encontrada":"Selecione a tarefa-mãe..."}),e.jsx(ns,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),e.jsxs(ht,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:[e.jsxs("div",{className:"flex items-center border-b px-3",children:[e.jsx(Vt,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx("input",{className:"flex h-10 w-full bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground",placeholder:"Buscar tarefa...",value:h,onChange:A=>f(A.target.value)})]}),e.jsx("div",{className:"max-h-[200px] overflow-y-auto p-1",children:O.length===0?e.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"Nenhuma tarefa encontrada."}):O.map(A=>e.jsxs("button",{type:"button",className:P("relative flex w-full cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground",k.value===A.id&&"bg-accent"),onClick:()=>{k.onChange(A.id),j(!1),f("")},children:[e.jsx(An,{className:P("mr-2 h-4 w-4",k.value===A.id?"opacity-100":"opacity-0")}),e.jsx("span",{className:"truncate",children:A.title})]},A.id))})]})]}),e.jsx(Le,{})]})}}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(Te,{control:M.control,name:"deadline",render:({field:k})=>e.jsxs(Oe,{children:[e.jsx(Pe,{children:"Prazo"}),e.jsx(We,{children:e.jsx(ut,{type:"date",...k})}),e.jsx(Le,{})]})}),e.jsx(Te,{control:M.control,name:"status",render:({field:k})=>e.jsxs(Oe,{children:[e.jsx(Pe,{children:"Status"}),e.jsxs(W,{onValueChange:k.onChange,value:k.value,children:[e.jsx(We,{children:e.jsx(Y,{children:e.jsx(V,{})})}),e.jsx(H,{children:w.map(([L,A])=>e.jsx(T,{value:L,children:A},L))})]}),e.jsx(Le,{})]})})]}),e.jsx(Te,{control:M.control,name:"assignee",render:({field:k})=>e.jsxs(Oe,{children:[e.jsx(Pe,{children:"Responsável"}),e.jsxs(W,{onValueChange:L=>k.onChange(L==="_none_"?"":L),value:k.value||"_none_",children:[e.jsx(We,{children:e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(En,{className:"w-3.5 h-3.5 text-muted-foreground"}),e.jsx(V,{placeholder:"Responsável..."})]})})}),e.jsxs(H,{children:[e.jsx(T,{value:"_none_",children:"— Sem responsável —"}),Ft.map(L=>e.jsx(T,{value:L,children:L},L))]})]}),e.jsx(Le,{})]})}),e.jsx(Te,{control:M.control,name:"numeroProcesso",render:({field:k})=>e.jsxs(Oe,{children:[e.jsx(Pe,{children:"Processo Judicial"}),e.jsx(wn,{value:k.value??"",onValueChange:k.onChange}),e.jsx(Le,{})]})}),e.jsx(Te,{control:M.control,name:"notes",render:({field:k})=>e.jsxs(Oe,{children:[e.jsx(Pe,{children:"Observações"}),e.jsx(We,{children:e.jsx(yn,{value:k.value??"",onChange:k.onChange,placeholder:"Observações...",modalTitle:"Editar Observações da Subtarefa"})}),e.jsx(Le,{})]})}),!i&&(n==null?void 0:n.id)&&e.jsx(Nn,{folder:`subtarefas/${n.id}`}),e.jsxs(Ln,{className:"gap-2 flex-col sm:flex-row",children:[!i&&n&&l&&e.jsxs(ne,{type:"button",variant:"destructive",className:"sm:mr-auto",onClick:()=>{l(n.id),a(!1)},disabled:d,children:[e.jsx(Ht,{className:"w-4 h-4 mr-2"})," Excluir"]}),e.jsxs(ne,{type:"submit",disabled:d,className:"flex-1",children:[d&&e.jsx(Rn,{className:"w-4 h-4 mr-2 animate-spin"}),i?"Criar Subtarefa":"Salvar Alterações"]})]})]})})]})})}var S=function(){return S=Object.assign||function(a){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(a[l]=n[l])}return a},S.apply(this,arguments)};function vs(t,a){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)a.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function qa(t,a,n){for(var s=0,r=a.length,l;s<r;s++)(l||!(s in a))&&(l||(l=Array.prototype.slice.call(a,0,s)),l[s]=a[s]);return t.concat(l||Array.prototype.slice.call(a))}function at(t){return t.mode==="multiple"}function nt(t){return t.mode==="range"}function bt(t){return t.mode==="single"}var ps={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function gs(t,a){return Ie(t,"LLLL y",a)}function js(t,a){return Ie(t,"d",a)}function bs(t,a){return Ie(t,"LLLL",a)}function ys(t){return"".concat(t)}function Ns(t,a){return Ie(t,"cccccc",a)}function ws(t,a){return Ie(t,"yyyy",a)}var Cs=Object.freeze({__proto__:null,formatCaption:gs,formatDay:js,formatMonthCaption:bs,formatWeekNumber:ys,formatWeekdayName:Ns,formatYearCaption:ws}),Ds=function(t,a,n){return Ie(t,"do MMMM (EEEE)",n)},_s=function(){return"Month: "},Ss=function(){return"Go to next month"},ks=function(){return"Go to previous month"},Ms=function(t,a){return Ie(t,"cccc",a)},Ts=function(t){return"Week n. ".concat(t)},Os=function(){return"Year: "},Ps=Object.freeze({__proto__:null,labelDay:Ds,labelMonthDropdown:_s,labelNext:Ss,labelPrevious:ks,labelWeekNumber:Ts,labelWeekday:Ms,labelYearDropdown:Os});function Ls(){var t="buttons",a=ps,n=Kn,s={},r={},l=1,i={},d=new Date;return{captionLayout:t,classNames:a,formatters:Cs,labels:Ps,locale:n,modifiersClassNames:s,modifiers:r,numberOfMonths:l,styles:i,today:d,mode:"default"}}function Fs(t){var a=t.fromYear,n=t.toYear,s=t.fromMonth,r=t.toMonth,l=t.fromDate,i=t.toDate;return s?l=te(s):a&&(l=new Date(a,0,1)),r?i=zt(r):n&&(i=new Date(n,11,31)),{fromDate:l?xt(l):void 0,toDate:i?xt(i):void 0}}var Ga=u.createContext(void 0);function Is(t){var a,n=t.initialProps,s=Ls(),r=Fs(n),l=r.fromDate,i=r.toDate,d=(a=n.captionLayout)!==null&&a!==void 0?a:s.captionLayout;d!=="buttons"&&(!l||!i)&&(d="buttons");var m;(bt(n)||at(n)||nt(n))&&(m=n.onSelect);var h=S(S(S({},s),n),{captionLayout:d,classNames:S(S({},s.classNames),n.classNames),components:S({},n.components),formatters:S(S({},s.formatters),n.formatters),fromDate:l,labels:S(S({},s.labels),n.labels),mode:n.mode||s.mode,modifiers:S(S({},s.modifiers),n.modifiers),modifiersClassNames:S(S({},s.modifiersClassNames),n.modifiersClassNames),onSelect:m,styles:S(S({},s.styles),n.styles),toDate:i});return e.jsx(Ga.Provider,{value:h,children:t.children})}function I(){var t=u.useContext(Ga);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function Xa(t){var a=I(),n=a.locale,s=a.classNames,r=a.styles,l=a.formatters.formatCaption;return e.jsx("div",{className:s.caption_label,style:r.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:l(t.displayMonth,{locale:n})})}function As(t){return e.jsx("svg",S({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Ja(t){var a,n,s=t.onChange,r=t.value,l=t.children,i=t.caption,d=t.className,m=t.style,h=I(),f=(n=(a=h.components)===null||a===void 0?void 0:a.IconDropdown)!==null&&n!==void 0?n:As;return e.jsxs("div",{className:d,style:m,children:[e.jsx("span",{className:h.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:h.classNames.dropdown,style:h.styles.dropdown,value:r,onChange:s,children:l}),e.jsxs("div",{className:h.classNames.caption_label,style:h.styles.caption_label,"aria-hidden":"true",children:[i,e.jsx(f,{className:h.classNames.dropdown_icon,style:h.styles.dropdown_icon})]})]})}function Es(t){var a,n=I(),s=n.fromDate,r=n.toDate,l=n.styles,i=n.locale,d=n.formatters.formatMonthCaption,m=n.classNames,h=n.components,f=n.labels.labelMonthDropdown;if(!s)return e.jsx(e.Fragment,{});if(!r)return e.jsx(e.Fragment,{});var x=[];if(fs(s,r))for(var p=te(s),b=s.getMonth();b<=r.getMonth();b++)x.push(Mt(p,b));else for(var p=te(new Date),b=0;b<=11;b++)x.push(Mt(p,b));var w=function(j){var O=Number(j.target.value),M=Mt(te(t.displayMonth),O);t.onChange(M)},_=(a=h==null?void 0:h.Dropdown)!==null&&a!==void 0?a:Ja;return e.jsx(_,{name:"months","aria-label":f(),className:m.dropdown_month,style:l.dropdown_month,onChange:w,value:t.displayMonth.getMonth(),caption:d(t.displayMonth,{locale:i}),children:x.map(function(j){return e.jsx("option",{value:j.getMonth(),children:d(j,{locale:i})},j.getMonth())})})}function Rs(t){var a,n=t.displayMonth,s=I(),r=s.fromDate,l=s.toDate,i=s.locale,d=s.styles,m=s.classNames,h=s.components,f=s.formatters.formatYearCaption,x=s.labels.labelYearDropdown,p=[];if(!r)return e.jsx(e.Fragment,{});if(!l)return e.jsx(e.Fragment,{});for(var b=r.getFullYear(),w=l.getFullYear(),_=b;_<=w;_++)p.push(oa(zn(new Date),_));var j=function(M){var G=oa(te(n),Number(M.target.value));t.onChange(G)},O=(a=h==null?void 0:h.Dropdown)!==null&&a!==void 0?a:Ja;return e.jsx(O,{name:"years","aria-label":x(),className:m.dropdown_year,style:d.dropdown_year,onChange:j,value:n.getFullYear(),caption:f(n,{locale:i}),children:p.map(function(M){return e.jsx("option",{value:M.getFullYear(),children:f(M,{locale:i})},M.getFullYear())})})}function Bs(t,a){var n=u.useState(t),s=n[0],r=n[1],l=a===void 0?s:a;return[l,r]}function Ws(t){var a=t.month,n=t.defaultMonth,s=t.today,r=a||n||s||new Date,l=t.toDate,i=t.fromDate,d=t.numberOfMonths,m=d===void 0?1:d;if(l&&et(l,r)<0){var h=-1*(m-1);r=oe(l,h)}return i&&et(r,i)<0&&(r=i),te(r)}function Ys(){var t=I(),a=Ws(t),n=Bs(a,t.month),s=n[0],r=n[1],l=function(i){var d;if(!t.disableNavigation){var m=te(i);r(m),(d=t.onMonthChange)===null||d===void 0||d.call(t,m)}};return[s,l]}function Vs(t,a){for(var n=a.reverseMonths,s=a.numberOfMonths,r=te(t),l=te(oe(r,s)),i=et(l,r),d=[],m=0;m<i;m++){var h=oe(r,m);d.push(h)}return n&&(d=d.reverse()),d}function Hs(t,a){if(!a.disableNavigation){var n=a.toDate,s=a.pagedNavigation,r=a.numberOfMonths,l=r===void 0?1:r,i=s?l:1,d=te(t);if(!n)return oe(d,i);var m=et(n,t);if(!(m<l))return oe(d,i)}}function Ks(t,a){if(!a.disableNavigation){var n=a.fromDate,s=a.pagedNavigation,r=a.numberOfMonths,l=r===void 0?1:r,i=s?l:1,d=te(t);if(!n)return oe(d,-i);var m=et(d,n);if(!(m<=0))return oe(d,-i)}}var Qa=u.createContext(void 0);function zs(t){var a=I(),n=Ys(),s=n[0],r=n[1],l=Vs(s,a),i=Hs(s,a),d=Ks(s,a),m=function(x){return l.some(function(p){return Ut(x,p)})},h=function(x,p){m(x)||(p&&Za(x,p)?r(oe(x,1+a.numberOfMonths*-1)):r(x))},f={currentMonth:s,displayMonths:l,goToMonth:r,goToDate:h,previousMonth:d,nextMonth:i,isDateDisplayed:m};return e.jsx(Qa.Provider,{value:f,children:t.children})}function st(){var t=u.useContext(Qa);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function la(t){var a,n=I(),s=n.classNames,r=n.styles,l=n.components,i=st().goToMonth,d=function(f){i(oe(f,t.displayIndex?-t.displayIndex:0))},m=(a=l==null?void 0:l.CaptionLabel)!==null&&a!==void 0?a:Xa,h=e.jsx(m,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:s.caption_dropdowns,style:r.caption_dropdowns,children:[e.jsx("div",{className:s.vhidden,children:h}),e.jsx(Es,{onChange:d,displayMonth:t.displayMonth}),e.jsx(Rs,{onChange:d,displayMonth:t.displayMonth})]})}function $s(t){return e.jsx("svg",S({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Us(t){return e.jsx("svg",S({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var vt=u.forwardRef(function(t,a){var n=I(),s=n.classNames,r=n.styles,l=[s.button_reset,s.button];t.className&&l.push(t.className);var i=l.join(" "),d=S(S({},r.button_reset),r.button);return t.style&&Object.assign(d,t.style),e.jsx("button",S({},t,{ref:a,type:"button",className:i,style:d}))});function Zs(t){var a,n,s=I(),r=s.dir,l=s.locale,i=s.classNames,d=s.styles,m=s.labels,h=m.labelPrevious,f=m.labelNext,x=s.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var p=h(t.previousMonth,{locale:l}),b=[i.nav_button,i.nav_button_previous].join(" "),w=f(t.nextMonth,{locale:l}),_=[i.nav_button,i.nav_button_next].join(" "),j=(a=x==null?void 0:x.IconRight)!==null&&a!==void 0?a:Us,O=(n=x==null?void 0:x.IconLeft)!==null&&n!==void 0?n:$s;return e.jsxs("div",{className:i.nav,style:d.nav,children:[!t.hidePrevious&&e.jsx(vt,{name:"previous-month","aria-label":p,className:b,style:d.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:r==="rtl"?e.jsx(j,{className:i.nav_icon,style:d.nav_icon}):e.jsx(O,{className:i.nav_icon,style:d.nav_icon})}),!t.hideNext&&e.jsx(vt,{name:"next-month","aria-label":w,className:_,style:d.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:r==="rtl"?e.jsx(O,{className:i.nav_icon,style:d.nav_icon}):e.jsx(j,{className:i.nav_icon,style:d.nav_icon})})]})}function ia(t){var a=I().numberOfMonths,n=st(),s=n.previousMonth,r=n.nextMonth,l=n.goToMonth,i=n.displayMonths,d=i.findIndex(function(w){return Ut(t.displayMonth,w)}),m=d===0,h=d===i.length-1,f=a>1&&(m||!h),x=a>1&&(h||!m),p=function(){s&&l(s)},b=function(){r&&l(r)};return e.jsx(Zs,{displayMonth:t.displayMonth,hideNext:f,hidePrevious:x,nextMonth:r,previousMonth:s,onPreviousClick:p,onNextClick:b})}function qs(t){var a,n=I(),s=n.classNames,r=n.disableNavigation,l=n.styles,i=n.captionLayout,d=n.components,m=(a=d==null?void 0:d.CaptionLabel)!==null&&a!==void 0?a:Xa,h;return r?h=e.jsx(m,{id:t.id,displayMonth:t.displayMonth}):i==="dropdown"?h=e.jsx(la,{displayMonth:t.displayMonth,id:t.id}):i==="dropdown-buttons"?h=e.jsxs(e.Fragment,{children:[e.jsx(la,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx(ia,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):h=e.jsxs(e.Fragment,{children:[e.jsx(m,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(ia,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:s.caption,style:l.caption,children:h})}function Gs(t){var a=I(),n=a.footer,s=a.styles,r=a.classNames.tfoot;return n?e.jsx("tfoot",{className:r,style:s.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:n})})}):e.jsx(e.Fragment,{})}function Xs(t,a,n){for(var s=n?Kt(new Date):Qe(new Date,{locale:t,weekStartsOn:a}),r=[],l=0;l<7;l++){var i=q(s,l);r.push(i)}return r}function Js(){var t=I(),a=t.classNames,n=t.styles,s=t.showWeekNumber,r=t.locale,l=t.weekStartsOn,i=t.ISOWeek,d=t.formatters.formatWeekdayName,m=t.labels.labelWeekday,h=Xs(r,l,i);return e.jsxs("tr",{style:n.head_row,className:a.head_row,children:[s&&e.jsx("td",{style:n.head_cell,className:a.head_cell}),h.map(function(f,x){return e.jsx("th",{scope:"col",className:a.head_cell,style:n.head_cell,"aria-label":m(f,{locale:r}),children:d(f,{locale:r})},x)})]})}function Qs(){var t,a=I(),n=a.classNames,s=a.styles,r=a.components,l=(t=r==null?void 0:r.HeadRow)!==null&&t!==void 0?t:Js;return e.jsx("thead",{style:s.head,className:n.head,children:e.jsx(l,{})})}function er(t){var a=I(),n=a.locale,s=a.formatters.formatDay;return e.jsx(e.Fragment,{children:s(t.date,{locale:n})})}var Zt=u.createContext(void 0);function tr(t){if(!at(t.initialProps)){var a={selected:void 0,modifiers:{disabled:[]}};return e.jsx(Zt.Provider,{value:a,children:t.children})}return e.jsx(ar,{initialProps:t.initialProps,children:t.children})}function ar(t){var a=t.initialProps,n=t.children,s=a.selected,r=a.min,l=a.max,i=function(h,f,x){var p,b;(p=a.onDayClick)===null||p===void 0||p.call(a,h,f,x);var w=!!(f.selected&&r&&(s==null?void 0:s.length)===r);if(!w){var _=!!(!f.selected&&l&&(s==null?void 0:s.length)===l);if(!_){var j=s?qa([],s):[];if(f.selected){var O=j.findIndex(function(M){return ee(h,M)});j.splice(O,1)}else j.push(h);(b=a.onSelect)===null||b===void 0||b.call(a,j,h,f,x)}}},d={disabled:[]};s&&d.disabled.push(function(h){var f=l&&s.length>l-1,x=s.some(function(p){return ee(p,h)});return!!(f&&!x)});var m={selected:s,onDayClick:i,modifiers:d};return e.jsx(Zt.Provider,{value:m,children:n})}function qt(){var t=u.useContext(Zt);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function nr(t,a){var n=a||{},s=n.from,r=n.to;return s&&r?ee(r,t)&&ee(s,t)?void 0:ee(r,t)?{from:r,to:void 0}:ee(s,t)?void 0:Et(s,t)?{from:t,to:r}:{from:s,to:t}:r?Et(t,r)?{from:r,to:t}:{from:t,to:r}:s?Za(t,s)?{from:t,to:s}:{from:s,to:t}:{from:t,to:void 0}}var Gt=u.createContext(void 0);function sr(t){if(!nt(t.initialProps)){var a={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(Gt.Provider,{value:a,children:t.children})}return e.jsx(rr,{initialProps:t.initialProps,children:t.children})}function rr(t){var a=t.initialProps,n=t.children,s=a.selected,r=s||{},l=r.from,i=r.to,d=a.min,m=a.max,h=function(b,w,_){var j,O;(j=a.onDayClick)===null||j===void 0||j.call(a,b,w,_);var M=nr(b,s);(O=a.onSelect)===null||O===void 0||O.call(a,M,b,w,_)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(l?(f.range_start=[l],i?(f.range_end=[i],ee(l,i)||(f.range_middle=[{after:l,before:i}])):f.range_end=[l]):i&&(f.range_start=[i],f.range_end=[i]),d&&(l&&!i&&f.disabled.push({after:kt(l,d-1),before:q(l,d-1)}),l&&i&&f.disabled.push({after:l,before:q(l,d-1)}),!l&&i&&f.disabled.push({after:kt(i,d-1),before:q(i,d-1)})),m){if(l&&!i&&(f.disabled.push({before:q(l,-m+1)}),f.disabled.push({after:q(l,m-1)})),l&&i){var x=pe(i,l)+1,p=m-x;f.disabled.push({before:kt(l,p)}),f.disabled.push({after:q(i,p)})}!l&&i&&(f.disabled.push({before:q(i,-m+1)}),f.disabled.push({after:q(i,m-1)}))}return e.jsx(Gt.Provider,{value:{selected:s,onDayClick:h,modifiers:f},children:n})}function Xt(){var t=u.useContext(Gt);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function dt(t){return Array.isArray(t)?qa([],t):t!==void 0?[t]:[]}function or(t){var a={};return Object.entries(t).forEach(function(n){var s=n[0],r=n[1];a[s]=dt(r)}),a}var le;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(le||(le={}));var lr=le.Selected,ve=le.Disabled,ir=le.Hidden,cr=le.Today,Tt=le.RangeEnd,Ot=le.RangeMiddle,Pt=le.RangeStart,dr=le.Outside;function ur(t,a,n){var s,r=(s={},s[lr]=dt(t.selected),s[ve]=dt(t.disabled),s[ir]=dt(t.hidden),s[cr]=[t.today],s[Tt]=[],s[Ot]=[],s[Pt]=[],s[dr]=[],s);return t.fromDate&&r[ve].push({before:t.fromDate}),t.toDate&&r[ve].push({after:t.toDate}),at(t)?r[ve]=r[ve].concat(a.modifiers[ve]):nt(t)&&(r[ve]=r[ve].concat(n.modifiers[ve]),r[Pt]=n.modifiers[Pt],r[Ot]=n.modifiers[Ot],r[Tt]=n.modifiers[Tt]),r}var en=u.createContext(void 0);function mr(t){var a=I(),n=qt(),s=Xt(),r=ur(a,n,s),l=or(a.modifiers),i=S(S({},r),l);return e.jsx(en.Provider,{value:i,children:t.children})}function tn(){var t=u.useContext(en);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function fr(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function hr(t){return!!(t&&typeof t=="object"&&"from"in t)}function xr(t){return!!(t&&typeof t=="object"&&"after"in t)}function vr(t){return!!(t&&typeof t=="object"&&"before"in t)}function pr(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function gr(t,a){var n,s=a.from,r=a.to;if(s&&r){var l=pe(r,s)<0;l&&(n=[r,s],s=n[0],r=n[1]);var i=pe(t,s)>=0&&pe(r,t)>=0;return i}return r?ee(r,t):s?ee(s,t):!1}function jr(t){return ya(t)}function br(t){return Array.isArray(t)&&t.every(ya)}function yr(t,a){return a.some(function(n){if(typeof n=="boolean")return n;if(jr(n))return ee(t,n);if(br(n))return n.includes(t);if(hr(n))return gr(t,n);if(pr(n))return n.dayOfWeek.includes(t.getDay());if(fr(n)){var s=pe(n.before,t),r=pe(n.after,t),l=s>0,i=r<0,d=Et(n.before,n.after);return d?i&&l:l||i}return xr(n)?pe(t,n.after)>0:vr(n)?pe(n.before,t)>0:typeof n=="function"?n(t):!1})}function Jt(t,a,n){var s=Object.keys(a).reduce(function(l,i){var d=a[i];return yr(t,d)&&l.push(i),l},[]),r={};return s.forEach(function(l){return r[l]=!0}),n&&!Ut(t,n)&&(r.outside=!0),r}function Nr(t,a){for(var n=te(t[0]),s=zt(t[t.length-1]),r,l,i=n;i<=s;){var d=Jt(i,a),m=!d.disabled&&!d.hidden;if(!m){i=q(i,1);continue}if(d.selected)return i;d.today&&!l&&(l=i),r||(r=i),i=q(i,1)}return l||r}var wr=365;function an(t,a){var n=a.moveBy,s=a.direction,r=a.context,l=a.modifiers,i=a.retry,d=i===void 0?{count:0,lastFocused:t}:i,m=r.weekStartsOn,h=r.fromDate,f=r.toDate,x=r.locale,p={day:q,week:At,month:oe,year:rs,startOfWeek:function(j){return r.ISOWeek?Kt(j):Qe(j,{locale:x,weekStartsOn:m})},endOfWeek:function(j){return r.ISOWeek?Ua(j):$t(j,{locale:x,weekStartsOn:m})}},b=p[n](t,s==="after"?1:-1);s==="before"&&h?b=os([h,b]):s==="after"&&f&&(b=ls([f,b]));var w=!0;if(l){var _=Jt(b,l);w=!_.disabled&&!_.hidden}return w?b:d.count>wr?d.lastFocused:an(b,{moveBy:n,direction:s,context:r,modifiers:l,retry:S(S({},d),{count:d.count+1})})}var nn=u.createContext(void 0);function Cr(t){var a=st(),n=tn(),s=u.useState(),r=s[0],l=s[1],i=u.useState(),d=i[0],m=i[1],h=Nr(a.displayMonths,n),f=r??(d&&a.isDateDisplayed(d))?d:h,x=function(){m(r),l(void 0)},p=function(j){l(j)},b=I(),w=function(j,O){if(r){var M=an(r,{moveBy:j,direction:O,context:b,modifiers:n});ee(r,M)||(a.goToDate(M,r),p(M))}},_={focusedDay:r,focusTarget:f,blur:x,focus:p,focusDayAfter:function(){return w("day","after")},focusDayBefore:function(){return w("day","before")},focusWeekAfter:function(){return w("week","after")},focusWeekBefore:function(){return w("week","before")},focusMonthBefore:function(){return w("month","before")},focusMonthAfter:function(){return w("month","after")},focusYearBefore:function(){return w("year","before")},focusYearAfter:function(){return w("year","after")},focusStartOfWeek:function(){return w("startOfWeek","before")},focusEndOfWeek:function(){return w("endOfWeek","after")}};return e.jsx(nn.Provider,{value:_,children:t.children})}function Qt(){var t=u.useContext(nn);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Dr(t,a){var n=tn(),s=Jt(t,n,a);return s}var ea=u.createContext(void 0);function _r(t){if(!bt(t.initialProps)){var a={selected:void 0};return e.jsx(ea.Provider,{value:a,children:t.children})}return e.jsx(Sr,{initialProps:t.initialProps,children:t.children})}function Sr(t){var a=t.initialProps,n=t.children,s=function(l,i,d){var m,h,f;if((m=a.onDayClick)===null||m===void 0||m.call(a,l,i,d),i.selected&&!a.required){(h=a.onSelect)===null||h===void 0||h.call(a,void 0,l,i,d);return}(f=a.onSelect)===null||f===void 0||f.call(a,l,l,i,d)},r={selected:a.selected,onDayClick:s};return e.jsx(ea.Provider,{value:r,children:n})}function sn(){var t=u.useContext(ea);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function kr(t,a){var n=I(),s=sn(),r=qt(),l=Xt(),i=Qt(),d=i.focusDayAfter,m=i.focusDayBefore,h=i.focusWeekAfter,f=i.focusWeekBefore,x=i.blur,p=i.focus,b=i.focusMonthBefore,w=i.focusMonthAfter,_=i.focusYearBefore,j=i.focusYearAfter,O=i.focusStartOfWeek,M=i.focusEndOfWeek,G=function(C){var y,ie,ce,de;bt(n)?(y=s.onDayClick)===null||y===void 0||y.call(s,t,a,C):at(n)?(ie=r.onDayClick)===null||ie===void 0||ie.call(r,t,a,C):nt(n)?(ce=l.onDayClick)===null||ce===void 0||ce.call(l,t,a,C):(de=n.onDayClick)===null||de===void 0||de.call(n,t,a,C)},k=function(C){var y;p(t),(y=n.onDayFocus)===null||y===void 0||y.call(n,t,a,C)},L=function(C){var y;x(),(y=n.onDayBlur)===null||y===void 0||y.call(n,t,a,C)},A=function(C){var y;(y=n.onDayMouseEnter)===null||y===void 0||y.call(n,t,a,C)},He=function(C){var y;(y=n.onDayMouseLeave)===null||y===void 0||y.call(n,t,a,C)},ge=function(C){var y;(y=n.onDayPointerEnter)===null||y===void 0||y.call(n,t,a,C)},ye=function(C){var y;(y=n.onDayPointerLeave)===null||y===void 0||y.call(n,t,a,C)},Ne=function(C){var y;(y=n.onDayTouchCancel)===null||y===void 0||y.call(n,t,a,C)},Ke=function(C){var y;(y=n.onDayTouchEnd)===null||y===void 0||y.call(n,t,a,C)},F=function(C){var y;(y=n.onDayTouchMove)===null||y===void 0||y.call(n,t,a,C)},se=function(C){var y;(y=n.onDayTouchStart)===null||y===void 0||y.call(n,t,a,C)},re=function(C){var y;(y=n.onDayKeyUp)===null||y===void 0||y.call(n,t,a,C)},je=function(C){var y;switch(C.key){case"ArrowLeft":C.preventDefault(),C.stopPropagation(),n.dir==="rtl"?d():m();break;case"ArrowRight":C.preventDefault(),C.stopPropagation(),n.dir==="rtl"?m():d();break;case"ArrowDown":C.preventDefault(),C.stopPropagation(),h();break;case"ArrowUp":C.preventDefault(),C.stopPropagation(),f();break;case"PageUp":C.preventDefault(),C.stopPropagation(),C.shiftKey?_():b();break;case"PageDown":C.preventDefault(),C.stopPropagation(),C.shiftKey?j():w();break;case"Home":C.preventDefault(),C.stopPropagation(),O();break;case"End":C.preventDefault(),C.stopPropagation(),M();break}(y=n.onDayKeyDown)===null||y===void 0||y.call(n,t,a,C)},we={onClick:G,onFocus:k,onBlur:L,onKeyDown:je,onKeyUp:re,onMouseEnter:A,onMouseLeave:He,onPointerEnter:ge,onPointerLeave:ye,onTouchCancel:Ne,onTouchEnd:Ke,onTouchMove:F,onTouchStart:se};return we}function Mr(){var t=I(),a=sn(),n=qt(),s=Xt(),r=bt(t)?a.selected:at(t)?n.selected:nt(t)?s.selected:void 0;return r}function Tr(t){return Object.values(le).includes(t)}function Or(t,a){var n=[t.classNames.day];return Object.keys(a).forEach(function(s){var r=t.modifiersClassNames[s];if(r)n.push(r);else if(Tr(s)){var l=t.classNames["day_".concat(s)];l&&n.push(l)}}),n}function Pr(t,a){var n=S({},t.styles.day);return Object.keys(a).forEach(function(s){var r;n=S(S({},n),(r=t.modifiersStyles)===null||r===void 0?void 0:r[s])}),n}function Lr(t,a,n){var s,r,l,i=I(),d=Qt(),m=Dr(t,a),h=kr(t,m),f=Mr(),x=!!(i.onDayClick||i.mode!=="default");u.useEffect(function(){var A;m.outside||d.focusedDay&&x&&ee(d.focusedDay,t)&&((A=n.current)===null||A===void 0||A.focus())},[d.focusedDay,t,n,x,m.outside]);var p=Or(i,m).join(" "),b=Pr(i,m),w=!!(m.outside&&!i.showOutsideDays||m.hidden),_=(l=(r=i.components)===null||r===void 0?void 0:r.DayContent)!==null&&l!==void 0?l:er,j=e.jsx(_,{date:t,displayMonth:a,activeModifiers:m}),O={style:b,className:p,children:j,role:"gridcell"},M=d.focusTarget&&ee(d.focusTarget,t)&&!m.outside,G=d.focusedDay&&ee(d.focusedDay,t),k=S(S(S({},O),(s={disabled:m.disabled,role:"gridcell"},s["aria-selected"]=m.selected,s.tabIndex=G||M?0:-1,s)),h),L={isButton:x,isHidden:w,activeModifiers:m,selectedDays:f,buttonProps:k,divProps:O};return L}function Fr(t){var a=u.useRef(null),n=Lr(t.date,t.displayMonth,a);return n.isHidden?e.jsx("div",{role:"gridcell"}):n.isButton?e.jsx(vt,S({name:"day",ref:a},n.buttonProps)):e.jsx("div",S({},n.divProps))}function Ir(t){var a=t.number,n=t.dates,s=I(),r=s.onWeekNumberClick,l=s.styles,i=s.classNames,d=s.locale,m=s.labels.labelWeekNumber,h=s.formatters.formatWeekNumber,f=h(Number(a),{locale:d});if(!r)return e.jsx("span",{className:i.weeknumber,style:l.weeknumber,children:f});var x=m(Number(a),{locale:d}),p=function(b){r(a,n,b)};return e.jsx(vt,{name:"week-number","aria-label":x,className:i.weeknumber,style:l.weeknumber,onClick:p,children:f})}function Ar(t){var a,n,s=I(),r=s.styles,l=s.classNames,i=s.showWeekNumber,d=s.components,m=(a=d==null?void 0:d.Day)!==null&&a!==void 0?a:Fr,h=(n=d==null?void 0:d.WeekNumber)!==null&&n!==void 0?n:Ir,f;return i&&(f=e.jsx("td",{className:l.cell,style:r.cell,children:e.jsx(h,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:l.row,style:r.row,children:[f,t.dates.map(function(x){return e.jsx("td",{className:l.cell,style:r.cell,role:"presentation",children:e.jsx(m,{displayMonth:t.displayMonth,date:x})},ds(x))})]})}function ca(t,a,n){for(var s=n!=null&&n.ISOWeek?Ua(a):$t(a,n),r=n!=null&&n.ISOWeek?Kt(t):Qe(t,n),l=pe(s,r),i=[],d=0;d<=l;d++)i.push(q(r,d));var m=i.reduce(function(h,f){var x=n!=null&&n.ISOWeek?$n(f):Un(f,n),p=h.find(function(b){return b.weekNumber===x});return p?(p.dates.push(f),h):(h.push({weekNumber:x,dates:[f]}),h)},[]);return m}function Er(t,a){var n=ca(te(t),zt(t),a);if(a!=null&&a.useFixedWeeks){var s=ms(t,a);if(s<6){var r=n[n.length-1],l=r.dates[r.dates.length-1],i=At(l,6-s),d=ca(At(l,1),i,a);n.push.apply(n,d)}}return n}function Rr(t){var a,n,s,r=I(),l=r.locale,i=r.classNames,d=r.styles,m=r.hideHead,h=r.fixedWeeks,f=r.components,x=r.weekStartsOn,p=r.firstWeekContainsDate,b=r.ISOWeek,w=Er(t.displayMonth,{useFixedWeeks:!!h,ISOWeek:b,locale:l,weekStartsOn:x,firstWeekContainsDate:p}),_=(a=f==null?void 0:f.Head)!==null&&a!==void 0?a:Qs,j=(n=f==null?void 0:f.Row)!==null&&n!==void 0?n:Ar,O=(s=f==null?void 0:f.Footer)!==null&&s!==void 0?s:Gs;return e.jsxs("table",{id:t.id,className:i.table,style:d.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!m&&e.jsx(_,{}),e.jsx("tbody",{className:i.tbody,style:d.tbody,children:w.map(function(M){return e.jsx(j,{displayMonth:t.displayMonth,dates:M.dates,weekNumber:M.weekNumber},M.weekNumber)})}),e.jsx(O,{displayMonth:t.displayMonth})]})}function Br(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Wr=Br()?u.useLayoutEffect:u.useEffect,Lt=!1,Yr=0;function da(){return"react-day-picker-".concat(++Yr)}function Vr(t){var a,n=t??(Lt?da():null),s=u.useState(n),r=s[0],l=s[1];return Wr(function(){r===null&&l(da())},[]),u.useEffect(function(){Lt===!1&&(Lt=!0)},[]),(a=t??r)!==null&&a!==void 0?a:void 0}function Hr(t){var a,n,s=I(),r=s.dir,l=s.classNames,i=s.styles,d=s.components,m=st().displayMonths,h=Vr(s.id?"".concat(s.id,"-").concat(t.displayIndex):void 0),f=s.id?"".concat(s.id,"-grid-").concat(t.displayIndex):void 0,x=[l.month],p=i.month,b=t.displayIndex===0,w=t.displayIndex===m.length-1,_=!b&&!w;r==="rtl"&&(a=[b,w],w=a[0],b=a[1]),b&&(x.push(l.caption_start),p=S(S({},p),i.caption_start)),w&&(x.push(l.caption_end),p=S(S({},p),i.caption_end)),_&&(x.push(l.caption_between),p=S(S({},p),i.caption_between));var j=(n=d==null?void 0:d.Caption)!==null&&n!==void 0?n:qs;return e.jsxs("div",{className:x.join(" "),style:p,children:[e.jsx(j,{id:h,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(Rr,{id:f,"aria-labelledby":h,displayMonth:t.displayMonth})]},t.displayIndex)}function Kr(t){var a=I(),n=a.classNames,s=a.styles;return e.jsx("div",{className:n.months,style:s.months,children:t.children})}function zr(t){var a,n,s=t.initialProps,r=I(),l=Qt(),i=st(),d=u.useState(!1),m=d[0],h=d[1];u.useEffect(function(){r.initialFocus&&l.focusTarget&&(m||(l.focus(l.focusTarget),h(!0)))},[r.initialFocus,m,l.focus,l.focusTarget,l]);var f=[r.classNames.root,r.className];r.numberOfMonths>1&&f.push(r.classNames.multiple_months),r.showWeekNumber&&f.push(r.classNames.with_weeknumber);var x=S(S({},r.styles.root),r.style),p=Object.keys(s).filter(function(w){return w.startsWith("data-")}).reduce(function(w,_){var j;return S(S({},w),(j={},j[_]=s[_],j))},{}),b=(n=(a=s.components)===null||a===void 0?void 0:a.Months)!==null&&n!==void 0?n:Kr;return e.jsx("div",S({className:f.join(" "),style:x,dir:r.dir,id:r.id,nonce:s.nonce,title:s.title,lang:s.lang},p,{children:e.jsx(b,{children:i.displayMonths.map(function(w,_){return e.jsx(Hr,{displayIndex:_,displayMonth:w},_)})})}))}function $r(t){var a=t.children,n=vs(t,["children"]);return e.jsx(Is,{initialProps:n,children:e.jsx(zs,{children:e.jsx(_r,{initialProps:n,children:e.jsx(tr,{initialProps:n,children:e.jsx(sr,{initialProps:n,children:e.jsx(mr,{children:e.jsx(Cr,{children:a})})})})})})})}function Ur(t){return e.jsx($r,S({},t,{children:e.jsx(zr,{initialProps:t})}))}function ta({className:t,classNames:a,showOutsideDays:n=!0,...s}){return e.jsx(Ur,{showOutsideDays:n,className:P("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:P(sa({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:P(sa({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:({...r})=>e.jsx(Zn,{className:"h-4 w-4"}),IconRight:({...r})=>e.jsx(qn,{className:"h-4 w-4"})},...s})}ta.displayName="Calendar";const Zr=[{value:"deadline",label:"Prazo (mais distante)"},{value:"title",label:"Título (A → Z)"},{value:"status",label:"Status"}],ua={Pendente:0,Agendado:1,"A fazer":2,"Em andamento":3,Concluído:4},qr=["Pendente","Agendado","A fazer","Em andamento","Concluído"],Gr={Pendente:"border-t-red-500/60",Agendado:"border-t-blue-500/60","A fazer":"border-t-orange-500/60","Em andamento":"border-t-yellow-500/60",Concluído:"border-t-green-500/60"};function Xr(t,a){return[...t].sort((n,s)=>{switch(a){case"deadline":return!n.dueDate&&!s.dueDate?0:n.dueDate?s.dueDate?s.dueDate.localeCompare(n.dueDate):-1:1;case"title":return n.title.localeCompare(s.title,"pt-BR");case"status":return(ua[n.status]??0)-(ua[s.status]??0);default:return 0}})}function Jr({id:t,children:a}){const{attributes:n,listeners:s,setNodeRef:r,transform:l,transition:i,isDragging:d}=Wa({id:t}),m={transform:Ya.Transform.toString(l),transition:i};return e.jsx("div",{ref:r,style:m,...n,...s,className:P("touch-none",d&&"opacity-30"),children:a})}function Qr({status:t,isOver:a,items:n,itemIds:s,today:r,onEdit:l,onDelete:i,showRichNotes:d,borderColor:m,badgeColor:h,statusLabel:f}){const{setNodeRef:x}=Aa({id:t});return e.jsxs("div",{className:P("flex flex-col rounded-xl border border-border border-t-4 bg-card/40 min-h-[400px] transition-colors",m||"border-t-muted/60",a&&"bg-card/80 ring-2 ring-primary/20"),children:[e.jsxs("div",{className:"flex items-center gap-2 p-4 border-b border-border shadow-sm bg-background/50 backdrop-blur-md rounded-t-xl",children:[e.jsx(U,{variant:"secondary",className:h,children:f}),e.jsx(U,{variant:"secondary",className:"ml-auto text-xs bg-secondary/50",children:n.length})]}),e.jsxs("div",{ref:x,"data-column-status":t,className:"flex-1 p-3 space-y-3",children:[e.jsx(Ea,{items:s,strategy:Ra,children:n.map(p=>e.jsx(Jr,{id:p.id,children:e.jsx(Rt,{sub:p,today:r,onEdit:()=>l(p),onDelete:()=>i(p.id),showRichNotes:d})},p.id))}),n.length===0&&e.jsxs("div",{className:"sticky top-[40vh] flex flex-col items-center justify-center text-xs text-muted-foreground/50 border-2 border-dashed border-border/50 rounded-xl p-4 text-center gap-1",children:[e.jsx(U,{variant:"secondary",className:P("font-medium mb-1",h),children:f}),e.jsx("span",{children:"Arraste subtarefas para cá"})]})]})]})}const Rt=u.memo(function({sub:a,today:n,showStatus:s,onEdit:r,onDelete:l,showRichNotes:i}){const d=a.dueDate&&a.dueDate<n&&a.status!=="Concluído";return e.jsx(Xe,{className:P("group transition-shadow duration-150 hover:shadow-md cursor-pointer",d&&"border-destructive/50"),onClick:r,children:e.jsx(Je,{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1 flex-wrap",children:[s&&e.jsx(U,{variant:"secondary",className:P("text-[10px]",xa[a.status]),children:Yt[a.status]}),d&&e.jsx(U,{variant:"destructive",className:"text-[10px]",children:"Atrasada"})]}),e.jsx("p",{className:P("font-medium text-sm",a.completed&&"line-through text-muted-foreground"),children:a.title}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[e.jsx("span",{className:"font-medium",children:"Tarefa:"})," ",a.parentTaskTitle]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-1 text-xs text-muted-foreground",children:[a.projectName&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(jt,{className:"w-3 h-3"}),a.projectName]}),a.assignee&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"w-3 h-3"}),a.assignee]}),a.dueDate&&e.jsxs("span",{className:P("flex items-center gap-1",d&&"text-destructive font-medium"),children:[e.jsx(Ve,{className:"w-3 h-3"}),new Date(a.dueDate+"T12:00:00").toLocaleDateString("pt-BR")]})]}),a.notes&&i&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 prose prose-xs max-w-none [&>*]:m-0 [&>*]:text-xs line-clamp-4",dangerouslySetInnerHTML:{__html:ha(a.notes)||a.notes}}),a.notes&&!i&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:a.notes.replace(/<[^>]*>/g,"")})]}),e.jsxs("div",{className:"flex gap-0.5 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(ne,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:m=>{m.stopPropagation(),r()},children:e.jsx(Ha,{className:"w-3.5 h-3.5"})}),e.jsx(ne,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive",onClick:m=>{m.stopPropagation(),l()},children:e.jsx(Ht,{className:"w-3.5 h-3.5"})})]})]})})})});function eo({tasks:t,projects:a,loading:n,onCreateSubtask:s,onUpdateSubtask:r,onDeleteSubtask:l}){const{getOrderedValues:i,getLabelsMap:d,getColorsMap:m,getBorderColorsMap:h}=Wt(),f=u.useMemo(()=>{const c=i("subtarefa_status");return c.length>0?c:qr},[i]),x=u.useMemo(()=>{const c=d("subtarefa_status");return Object.keys(c).length>0?c:Yt},[d]),p=u.useMemo(()=>{const c=m("subtarefa_status");return Object.keys(c).length>0?c:xa},[m]),b=u.useMemo(()=>{const c=h("subtarefa_status");return Object.keys(c).length>0?c:Gr},[h]),[w,_]=u.useState(!1),[j,O]=u.useState(null),[M,G]=u.useState("kanban"),[k,L]=u.useState(""),[A,He]=u.useState("all"),[ge,ye]=u.useState("all"),[Ne,Ke]=u.useState("all"),[F,se]=u.useState("all"),[re,je]=u.useState("all"),[we,C]=u.useState("deadline"),[y,ie]=u.useState(!1),[ce,de]=u.useState(!1),[Ae,ue]=u.useState(null),[rt,Ee]=u.useState(null),[yt,me]=u.useState(null),Nt=Oa(Pa(Ba,{activationConstraint:{distance:8}})),Ce=u.useMemo(()=>{const c={};return a.forEach(N=>{c[N.id]=N.name}),c},[a]),$=u.useMemo(()=>t.flatMap(c=>c.subtasks.map(N=>({...N,parentTaskTitle:c.title,projectId:c.projectId,projectName:c.projectId?Ce[c.projectId]:void 0}))),[t,Ce]),De=u.useMemo(()=>{const c=new Date,N=new Date(c.getFullYear(),c.getMonth(),c.getDate()),D=new Date(N);D.setDate(N.getDate()+(7-N.getDay()));const X=new Date(c.getFullYear(),c.getMonth()+1,0),Z=$.filter(B=>{if(k&&!B.title.toLowerCase().includes(k.toLowerCase())||A!=="all"&&B.status!==A||ge!=="all"&&B.assignee!==ge||Ne!=="all"&&B.projectId!==Ne||F!=="all"&&B.parentTaskId!==F||y&&B.status==="Concluído")return!1;if(re!=="all"){if(!B.dueDate)return re==="sem_prazo";const J=new Date(B.dueDate+"T23:59:59");switch(re){case"atrasadas":return J<N&&B.status!=="Concluído";case"hoje":return B.dueDate===ae;case"esta_semana":return J>=N&&J<=D;case"este_mes":return J>=N&&J<=X;case"sem_prazo":return!1}}return!0});return Xr(Z,we)},[$,k,A,ge,Ne,F,we,y,re]),ae=u.useMemo(()=>{const c=new Date;return`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")}`},[]);u.useMemo(()=>{const c={};f.forEach(D=>{c[D]=0});const N=$.filter(D=>D.dueDate&&D.dueDate<ae&&D.status!=="Concluído").length;return $.forEach(D=>{c[D.status]!==void 0&&c[D.status]++}),{...c,overdue:N,total:$.length}},[$,ae]);const _e=u.useCallback(()=>{O(null),_(!0)},[]),ze=u.useCallback(c=>{O(c),_(!0)},[]),Se=u.useCallback(async(c,N,D)=>{N?await s(c.parentTaskId,{title:c.title,deadline:c.deadline||void 0,status:c.status,assignee:c.assignee||void 0,notes:c.notes||void 0}):D&&await r(D,{title:c.title,deadline:c.deadline||void 0,status:c.status,assignee:c.assignee||void 0,notes:c.notes||void 0})},[s,r]),wt=u.useCallback(async()=>{Ae&&(await l(Ae),ue(null))},[Ae,l]),ke=u.useMemo(()=>{const c={};return f.forEach(N=>{c[N]=[]}),De.forEach(N=>{c[N.status]&&c[N.status].push(N)}),c},[De,f]),Ct=u.useCallback(c=>{Ee(String(c.active.id))},[]),Re=u.useCallback(c=>{const{over:N}=c;if(!N){me(null);return}const D=String(N.id),X=$.find(B=>B.id===D),Z=X?X.status:f.includes(D)?D:null;me(Z)},[$,f]),Dt=u.useCallback(async c=>{const{active:N,over:D}=c;if(Ee(null),me(null),!D)return;const X=String(N.id),Z=String(D.id);if(X===Z)return;const B=$.find(Ue=>Ue.id===X);if(!B)return;const J=$.find(Ue=>Ue.id===Z),he=J?J.status:f.includes(Z)?Z:B.status;B.status!==he&&await r(X,{status:he})},[$,r,f]),Be=u.useCallback(()=>{Ee(null),me(null)},[]),ot=rt?$.find(c=>c.id===rt):null,fe=u.useMemo(()=>f.filter(c=>!y||c!=="Concluído"),[y,f]),$e=u.useMemo(()=>[{key:"title",label:"Título",width:250,minWidth:150,sticky:!0,sortable:!0,sortFn:(c,N)=>c.title.localeCompare(N.title,"pt-BR"),render:c=>e.jsx("span",{className:"font-medium",children:c.title})},{key:"status",label:"Status",width:130,sortable:!0,sortFn:(c,N)=>c.status.localeCompare(N.status),render:c=>e.jsx(U,{variant:"secondary",className:P("text-[10px]",p[c.status]),children:x[c.status]||c.status}),inlineEdit:(c,N)=>e.jsxs(W,{value:c.status,onValueChange:N,children:[e.jsx(Y,{className:"h-7 text-xs w-full",children:e.jsx(V,{})}),e.jsx(H,{children:f.map(D=>e.jsx(T,{value:D,children:x[D]||D},D))})]})},{key:"parentTaskTitle",label:"Tarefa-mãe",width:200,sortable:!0,sortFn:(c,N)=>c.parentTaskTitle.localeCompare(N.parentTaskTitle,"pt-BR"),render:c=>e.jsx("span",{className:"text-xs",children:c.parentTaskTitle})},{key:"dueDate",label:"Prazo",width:110,sortable:!0,sortFn:(c,N)=>!c.dueDate&&!N.dueDate?0:c.dueDate?N.dueDate?N.dueDate.localeCompare(c.dueDate):-1:1,render:c=>c.dueDate?e.jsxs("span",{className:P("text-xs flex items-center gap-1",c.dueDate<ae&&c.status!=="Concluído"&&"text-destructive font-medium"),children:[e.jsx(Ve,{className:"w-3 h-3"}),new Date(c.dueDate+"T12:00:00").toLocaleDateString("pt-BR")]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"}),inlineEdit:(c,N)=>e.jsxs(mt,{children:[e.jsx(ft,{asChild:!0,children:e.jsxs(ne,{variant:"outline",className:P("h-7 text-xs w-full justify-start font-normal",!c.dueDate&&"text-muted-foreground"),children:[e.jsx(Ve,{className:"w-3 h-3 mr-1"}),c.dueDate?new Date(c.dueDate+"T12:00:00").toLocaleDateString("pt-BR"):"Selecionar"]})}),e.jsx(ht,{className:"w-auto p-0",align:"start",children:e.jsx(ta,{mode:"single",selected:c.dueDate?new Date(c.dueDate+"T12:00:00"):void 0,onSelect:D=>{if(D){const X=D.getFullYear(),Z=String(D.getMonth()+1).padStart(2,"0"),B=String(D.getDate()).padStart(2,"0");N(`${X}-${Z}-${B}`)}else N("")},initialFocus:!0,className:"p-3 pointer-events-auto"})})]})},{key:"assignee",label:"Responsável",width:130,sortable:!0,sortFn:(c,N)=>(c.assignee??"").localeCompare(N.assignee??"","pt-BR"),render:c=>c.assignee?e.jsxs("span",{className:"text-xs flex items-center gap-1",children:[e.jsx(gt,{className:"w-3 h-3"}),c.assignee]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"}),inlineEdit:(c,N)=>e.jsxs(W,{value:c.assignee||"_none_",onValueChange:D=>N(D==="_none_"?"":D),children:[e.jsx(Y,{className:"h-7 text-xs w-full",children:e.jsx(V,{})}),e.jsxs(H,{children:[e.jsx(T,{value:"_none_",children:"— Sem responsável —"}),Ft.map(D=>e.jsx(T,{value:D,children:D},D))]})]})},{key:"project",label:"Projeto",width:130,render:c=>c.projectName?e.jsxs(U,{variant:"outline",className:"text-[10px] gap-1",children:[e.jsx(jt,{className:"w-3 h-3"}),c.projectName]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"})}],[ae]),be=u.useCallback((c,N,D)=>{N==="status"?r(c,{status:D}):N==="assignee"?r(c,{assignee:D||void 0}):N==="dueDate"&&r(c,{deadline:D||void 0})},[r]),Me=u.useCallback(c=>{c.forEach(N=>l(N))},[l]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-3 glass p-4 rounded-xl border border-border shadow-sm mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:[e.jsxs("div",{className:"relative w-full sm:min-w-[220px] sm:max-w-xs",children:[e.jsx(Vt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"}),e.jsx(ut,{placeholder:"Buscar subtarefa...",value:k,onChange:c=>L(c.target.value),className:"pl-9 w-full text-sm"})]}),e.jsxs("div",{className:"flex gap-2 items-center ml-auto flex-wrap",children:[e.jsxs(ne,{onClick:_e,className:"gold-gradient text-primary-foreground shadow-md hover:opacity-90 transition-opacity h-9",children:[e.jsx(Ta,{className:"mr-1.5 h-4 w-4"})," Nova Subtarefa"]}),e.jsxs("div",{className:"flex border border-border rounded-lg overflow-hidden bg-muted/40",children:[e.jsxs("button",{onClick:()=>G("kanban"),className:P("flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors",M==="kanban"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx(za,{className:"w-4 h-4"})," Kanban"]}),e.jsxs("button",{onClick:()=>G("list"),className:P("flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors",M==="list"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx(Va,{className:"w-4 h-4"})," Lista"]}),e.jsxs("button",{onClick:()=>G("table"),className:P("flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors",M==="table"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx(ja,{className:"w-4 h-4"})," Tabela"]})]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap flex-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Status"}),e.jsxs(W,{value:A,onValueChange:He,children:[e.jsx(Y,{className:"w-[130px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos Status"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todos Status"}),f.map(c=>e.jsx(T,{value:c,children:x[c]||c},c))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Prazo"}),e.jsxs(W,{value:re,onValueChange:je,children:[e.jsx(Y,{className:"w-[120px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todos"}),e.jsx(T,{value:"atrasadas",children:"Atrasadas"}),e.jsx(T,{value:"hoje",children:"Vence hoje"}),e.jsx(T,{value:"esta_semana",children:"Esta semana"}),e.jsx(T,{value:"este_mes",children:"Este mês"}),e.jsx(T,{value:"sem_prazo",children:"Sem prazo"})]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Responsável"}),e.jsxs(W,{value:ge,onValueChange:ye,children:[e.jsx(Y,{className:"w-[120px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todos"}),Ft.map(c=>e.jsx(T,{value:c,children:c},c))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Tarefa-mãe"}),e.jsxs(W,{value:F,onValueChange:se,children:[e.jsx(Y,{className:"w-[160px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todas"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todas"}),t.map(c=>e.jsx(T,{value:c.id,children:c.title},c.id))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Ordenar por"}),e.jsxs(W,{value:we,onValueChange:c=>C(c),children:[e.jsx(Y,{className:"w-[160px] h-8 text-xs",children:e.jsx(V,{})}),e.jsx(H,{children:Zr.map(c=>e.jsx(T,{value:c.value,children:c.label},c.value))})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5 ml-auto shrink-0",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground cursor-pointer select-none justify-end",children:["Ocultar concluídas",e.jsx(Ge,{checked:y,onCheckedChange:ie,className:"scale-75"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground cursor-pointer select-none justify-end",children:["Observações formatadas",e.jsx(Ge,{checked:ce,onCheckedChange:de,className:"scale-75"})]})]})]})]}),e.jsx(xs,{open:w,onOpenChange:_,subtask:j,tasks:t,onSave:Se,onDelete:c=>ue(c)}),e.jsx(Na,{open:!!Ae,onOpenChange:c=>!c&&ue(null),children:e.jsxs(wa,{children:[e.jsxs(Ca,{children:[e.jsx(Da,{children:"Remover subtarefa?"}),e.jsx(_a,{children:"Esta ação não pode ser desfeita. A subtarefa será removida permanentemente."})]}),e.jsxs(Sa,{children:[e.jsx(ka,{children:"Cancelar"}),e.jsx(Ma,{onClick:wt,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remover"})]})]})}),n?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(c=>e.jsx(Xe,{children:e.jsx(Je,{className:"p-4",children:e.jsx("div",{className:"h-16 bg-muted animate-pulse rounded"})})},c))}):M==="table"?e.jsx(ba,{data:De,columns:$e,onEdit:c=>ze(c),onDelete:c=>ue(c),onBulkDelete:Me,onInlineChange:be,emptyMessage:"Nenhuma subtarefa encontrada."}):M==="list"?e.jsx("div",{className:"space-y-3",children:De.length===0?e.jsx(Xe,{children:e.jsx(Je,{className:"p-8 text-center text-muted-foreground",children:"Nenhuma subtarefa encontrada."})}):De.map(c=>e.jsx(Rt,{sub:c,today:ae,showStatus:!0,onEdit:()=>ze(c),onDelete:()=>ue(c.id),showRichNotes:ce},c.id))}):e.jsxs(La,{sensors:Nt,collisionDetection:Fa,onDragStart:Ct,onDragOver:Re,onDragEnd:Dt,onDragCancel:Be,children:[e.jsx("div",{className:"overflow-x-auto -mx-2 px-2 pb-4",children:e.jsx("div",{className:"flex gap-4",style:{minWidth:`${fe.length*300}px`},children:fe.map(c=>{const N=yt===c,D=ke[c],X=D.map(Z=>Z.id);return e.jsx("div",{className:"flex-1 min-w-[260px]",children:e.jsx(Qr,{status:c,isOver:N,items:D,itemIds:X,today:ae,onEdit:ze,onDelete:ue,showRichNotes:ce,borderColor:b[c]||"border-t-muted/60",badgeColor:p[c]||"",statusLabel:x[c]||c})},c)})})}),e.jsx(Ia,{children:ot&&e.jsx("div",{className:"shadow-xl ring-2 ring-primary/30 rotate-[2deg] scale-105",children:e.jsx(Rt,{sub:ot,today:ae,showStatus:!0,onEdit:()=>{},onDelete:()=>{},showRichNotes:ce})})})]})]})}const to=u.lazy(()=>bn(()=>import("./AdminCrmDashboard-aX3c0Ons.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]))),ao=[{value:"deadline",label:"Prazo (mais distante)"},{value:"priority",label:"Prioridade (Alta → Baixa)"},{value:"title",label:"Título (A → Z)"},{value:"client",label:"Cliente (A → Z)"}],pt={alta:0,media:1,baixa:2};function ma(t,a){return[...t].sort((n,s)=>{switch(a){case"deadline":return!n.dueDate&&!s.dueDate?0:n.dueDate?s.dueDate?s.dueDate.localeCompare(n.dueDate):-1:1;case"priority":return(pt[n.priority]??1)-(pt[s.priority]??1);case"title":return n.title.localeCompare(s.title,"pt-BR");case"client":return(n.client??"").localeCompare(s.client??"","pt-BR");default:return 0}})}const no={client:!0,dueDate:!0,priority:!0,subtasks:!0,tags:!0,description:!1},fa={client:"Cliente",dueDate:"Data de entrega",priority:"Prioridade",subtasks:"Subtarefas",tags:"Tags",description:"Descrição"},so=["pendente","agendado","em_andamento","em_tramite","concluida","cancelada"],ro={pendente:"border-t-red-500/60",agendado:"border-t-blue-500/60",em_andamento:"border-t-yellow-500/60",em_tramite:"border-t-orange-500/60",concluida:"border-t-green-500/60",cancelada:"border-t-muted/60"},oo={pendente:Ka,agendado:as,em_andamento:It,em_tramite:It,concluida:Jn,cancelada:ts},lo=[{value:"all",label:"Todos"},{value:"today",label:"Hoje"},{value:"this_week",label:"Esta semana"},{value:"this_month",label:"Este mês"},{value:"overdue",label:"Atrasadas"},{value:"no_deadline",label:"Sem prazo"}],Bt=u.memo(function({task:a,cardFields:n,today:s,isExpanded:r,onToggleExpand:l,onToggleSubtask:i,onEdit:d,onDelete:m,showStatus:h,isDragging:f,isOverlay:x,projectName:p}){const b=a.subtasks.filter(j=>j.completed).length,w=a.subtasks.length,_=a.dueDate&&a.dueDate<s&&a.status!=="concluida"&&a.status!=="cancelada";return e.jsx(Xe,{className:P("relative group transition-all duration-200 hover:shadow-md cursor-pointer",f?"opacity-40 scale-95":"",x&&"shadow-2xl ring-2 ring-primary/40 rotate-[2deg] scale-105 cursor-grabbing","border-border/50 bg-card"),onClick:()=>d==null?void 0:d(a),children:e.jsxs(Je,{className:"p-3.5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-1",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[p&&e.jsx("div",{className:"mb-2",children:e.jsxs(U,{variant:"outline",className:"text-[10px] px-1.5 py-0 gap-1 font-normal",children:[e.jsx(jt,{className:"w-3 h-3"}),p]})}),e.jsx("p",{className:"font-medium text-sm mb-1",children:a.title})]}),!x&&e.jsxs("div",{className:"flex gap-0.5 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(ne,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:j=>{j.stopPropagation(),d==null||d(a)},children:e.jsx(Ha,{className:"w-3.5 h-3.5"})}),e.jsx(ne,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive",onClick:j=>{j.stopPropagation(),m(a.id)},children:e.jsx(Ht,{className:"w-3.5 h-3.5"})})]})]}),n.description&&a.description&&e.jsx("div",{className:"text-xs text-muted-foreground mb-2 prose prose-xs max-w-none [&>*]:m-0 [&>*]:text-xs line-clamp-4",dangerouslySetInnerHTML:{__html:ha(a.description)||a.description}}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[n.priority&&e.jsx(U,{variant:"secondary",className:`text-[10px] ${ga[a.priority]}`,children:qe[a.priority]}),h&&e.jsx(U,{variant:"secondary",className:`text-[10px] ${pa[a.status]}`,children:va[a.status]}),n.dueDate&&a.dueDate&&e.jsxs("span",{className:P("flex items-center gap-1",_&&"text-destructive font-medium"),children:[_?e.jsx(Ka,{className:"w-3 h-3"}):e.jsx(Ve,{className:"w-3 h-3"}),new Date(a.dueDate+"T12:00:00").toLocaleDateString("pt-BR")]}),_&&e.jsx("span",{className:"text-destructive font-medium",children:"Atrasada"}),a.assignee&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"w-3 h-3"}),a.assignee]})]}),n.subtasks&&w>0&&!x&&e.jsx("div",{className:"flex justify-end mt-2",children:e.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-muted-foreground",children:[e.jsx($a,{className:"w-3 h-3"}),b,"/",w]})}),n.tags&&a.tags&&a.tags.length>0&&!x&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:a.tags.map(j=>e.jsx(U,{variant:"outline",className:"text-[10px]",children:j},j))})]})})});function io(t){const{attributes:a,listeners:n,setNodeRef:s,transform:r,transition:l,isDragging:i}=Wa({id:t.task.id}),d={transform:Ya.Transform.toString(r),transition:l};return e.jsx("div",{ref:s,style:d,...a,...n,children:e.jsx(Bt,{...t,isDragging:i})})}function co({status:t,tasks:a,isOver:n,cardFields:s,today:r,expandedTasks:l,onToggleExpand:i,onToggleSubtask:d,onEdit:m,onDelete:h,projectMap:f,statusLabel:x,borderColor:p,badgeColor:b}){const w=u.useMemo(()=>a.map(O=>O.id),[a]),{setNodeRef:_}=Aa({id:t}),j=oo[t]||It;return e.jsxs("div",{className:P("flex flex-col rounded-xl border border-border border-t-4 bg-card/40 min-h-[400px] transition-colors",p||"border-t-muted/60",n&&"bg-card/80 ring-2 ring-primary/20"),children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 px-4",children:[e.jsx(j,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(U,{variant:"secondary",className:P("text-xs",b),children:x}),e.jsx(U,{variant:"secondary",className:"ml-auto text-xs bg-secondary/50 tabular-nums",children:a.length})]}),e.jsxs("div",{ref:_,"data-column-status":t,className:"flex-1 p-3 pt-0 space-y-3",children:[e.jsx(Ea,{items:w,strategy:Ra,children:a.map(O=>e.jsx(io,{task:O,cardFields:s,today:r,isExpanded:l.has(O.id),onToggleExpand:i,onToggleSubtask:d,onEdit:m,onDelete:h,projectName:f.get(O.projectId||"")},O.id))}),a.length===0&&e.jsx("div",{className:"flex flex-col items-center justify-center text-xs text-muted-foreground/50 border-2 border-dashed border-border/50 rounded-xl p-4 text-center gap-1 min-h-[100px]",children:e.jsx("span",{children:"Arraste tarefas para cá"})})]})]})}function uo({projectId:t,clientNameFilter:a,hideHeader:n,forceTab:s}={}){const{tasks:r,setTasks:l,loading:i,error:d,updateTaskStatus:m,deleteTask:h,createTask:f,updateTask:x,createSubtask:p,updateSubtask:b,deleteSubtask:w}=Fn(),{projects:_}=In(),{getOrderedValues:j,getLabelsMap:O,getColorsMap:M,getBorderColorsMap:G}=Wt(),k=u.useMemo(()=>{const o=j("tarefa_status");return o.length>0?o:so},[j]),L=u.useMemo(()=>{const o=O("tarefa_status");return Object.keys(o).length>0?o:va},[O]),A=u.useMemo(()=>{const o=M("tarefa_status");return Object.keys(o).length>0?o:pa},[M]),He=u.useMemo(()=>{const o=G("tarefa_status");return Object.keys(o).length>0?o:ro},[G]),[ge,ye]=u.useState(!1),[Ne,Ke]=u.useState(null),F=u.useMemo(()=>a||t?r.filter(o=>{var E;const v=a&&((E=o.client)==null?void 0:E.toLowerCase().includes(a.toLowerCase())),g=t&&o.projectId===t;return a&&t?v||g:a?v:g}):r,[r,a,t]),[se,re]=u.useState("kanban"),[je,we]=u.useState(""),[C,y]=u.useState("all"),[ie,ce]=u.useState("all"),[de,Ae]=u.useState("all"),[ue,rt]=u.useState(t||"all"),[Ee,yt]=u.useState(new Set),[me,Nt]=u.useState(no),[Ce,$]=u.useState(null),[De,ae]=u.useState(null),[_e,ze]=u.useState("deadline"),[Se,wt]=u.useState(!1),[ke,Ct]=u.useState(!1),[Re,Dt]=u.useState("all"),[Be,ot]=u.useState("all"),fe=u.useMemo(()=>{const o=new Date;return`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`},[]),$e=u.useMemo(()=>[...new Set(F.map(o=>o.assignee).filter(Boolean))],[F]),be=u.useMemo(()=>{const v=!!(t&&a)?"all":t||ue,g=new Date,E=new Date(g);E.setDate(g.getDate()+7);const K=new Date(g.getFullYear(),g.getMonth()+1,0),xe=`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}-${String(E.getDate()).padStart(2,"0")}`,it=`${K.getFullYear()}-${String(K.getMonth()+1).padStart(2,"0")}-${String(K.getDate()).padStart(2,"0")}`,Ze=F.filter(z=>{var ct;if(je&&!z.title.toLowerCase().includes(je.toLowerCase())||C!=="all"&&z.status!==C||ie!=="all"&&z.priority!==ie||de!=="all"&&z.client!==de||Be!=="all"&&z.assignee!==Be||v!=="all"&&z.projectId!==v||Se&&z.status==="concluida"||ke&&z.status==="cancelada")return!1;if(Re!=="all"){const Q=(ct=z.dueDate)==null?void 0:ct.split("T")[0];switch(Re){case"today":if(Q!==fe)return!1;break;case"this_week":if(!Q||Q<fe||Q>xe)return!1;break;case"this_month":if(!Q||Q<fe||Q>it)return!1;break;case"overdue":if(!Q||Q>=fe||z.status==="concluida"||z.status==="cancelada")return!1;break;case"no_deadline":if(Q)return!1;break}}return!0});return ma(Ze,_e)},[F,je,C,ie,de,Be,ue,_e,Re,fe,Se,ke]),Me=fe,c=u.useMemo(()=>Ce?F.find(o=>o.id===Ce):null,[Ce,F]),N=u.useMemo(()=>[...new Set(F.map(o=>o.client).filter(Boolean))],[F]),D=u.useMemo(()=>{const o=new Map;return _.forEach(v=>o.set(v.id,v.name)),o},[_]),X=u.useMemo(()=>F.reduce((o,v)=>o+v.subtasks.length,0),[F]),Z=u.useCallback(o=>{yt(v=>{const g=new Set(v);return g.has(o)?g.delete(o):g.add(o),g})},[]),B=u.useCallback((o,v)=>{l(g=>g.map(E=>E.id===o?{...E,subtasks:E.subtasks.map(K=>K.id===v?{...K,completed:!K.completed}:K)}:E))},[l]),[J,he]=u.useState(null),Ue=u.useCallback(async()=>{J&&(l(o=>o.filter(v=>v.id!==J)),h(J),he(null))},[J,h,l]),rn=u.useCallback(o=>{Nt(v=>({...v,[o]:!v[o]}))},[]),on=u.useCallback(()=>{Ke(null),ye(!0)},[]),_t=u.useCallback(o=>{Ke(o),ye(!0)},[]),ln=u.useCallback(async(o,v,g)=>{v?await f({title:o.title,deadline:o.deadline,priority:o.priority,status:o.status,clientName:o.clientName,projectId:o.projectId,assignee:o.assignee,description:o.description,numeroProcesso:o.numeroProcesso}):g&&await x(g,{title:o.title,deadline:o.deadline,priority:o.priority,status:o.status,clientName:o.clientName,projectId:o.projectId,assignee:o.assignee,description:o.description,numeroProcesso:o.numeroProcesso})},[f,x]),cn=Oa(Pa(Ba,{activationConstraint:{distance:8}}));u.useCallback(o=>{const v=F.find(g=>g.id===o);return v==null?void 0:v.status},[F]);const dn=u.useCallback(o=>{$(o.active.id)},[]),un=u.useCallback(o=>{const{over:v}=o;if(!v){ae(null);return}const g=v.id,E=F.find(xe=>xe.id===g),K=E?E.status:k.includes(g)?g:null;ae(K)},[F]),mn=u.useCallback(o=>{const{active:v,over:g}=o;if($(null),ae(null),!g)return;const E=v.id,K=g.id;if(E===K)return;const xe=F.find(z=>z.id===E);if(!xe)return;const it=F.find(z=>z.id===K),Ze=it?it.status:k.includes(K)?K:xe.status;xe.status!==Ze&&(l(z=>{const ct=z.map(Q=>Q.id===E?{...Q,status:Ze}:Q);return ma(ct,_e)}),m(E,Ze))},[F,m,_e]),fn=u.useCallback(()=>{$(null),ae(null)},[]),hn=u.useMemo(()=>{const o={};return k.forEach(v=>{o[v]=[]}),be.forEach(v=>{o[v.status]&&o[v.status].push(v)}),o},[be,k]),aa=u.useMemo(()=>k.filter(o=>!(Se&&o==="concluida"||ke&&o==="cancelada")),[Se,ke,k]),xn=u.useMemo(()=>[{key:"title",label:"Título",width:280,minWidth:150,sticky:!0,sortable:!0,sortFn:(o,v)=>o.title.localeCompare(v.title,"pt-BR"),render:o=>e.jsx("span",{className:"font-medium",children:o.title})},{key:"status",label:"Status",width:140,sortable:!0,sortFn:(o,v)=>o.status.localeCompare(v.status),render:o=>e.jsx(U,{variant:"secondary",className:P("text-[10px]",A[o.status]),children:L[o.status]||o.status}),inlineEdit:(o,v)=>e.jsxs(W,{value:o.status,onValueChange:v,children:[e.jsx(Y,{className:"h-7 text-xs w-full",children:e.jsx(V,{})}),e.jsx(H,{children:k.map(g=>e.jsx(T,{value:g,children:L[g]||g},g))})]})},{key:"priority",label:"Prioridade",width:110,sortable:!0,sortFn:(o,v)=>(pt[o.priority]??1)-(pt[v.priority]??1),render:o=>e.jsx(U,{variant:"secondary",className:P("text-[10px]",ga[o.priority]),children:qe[o.priority]}),inlineEdit:(o,v)=>e.jsxs(W,{value:o.priority,onValueChange:v,children:[e.jsx(Y,{className:"h-7 text-xs w-full",children:e.jsx(V,{})}),e.jsx(H,{children:Object.entries(qe).map(([g,E])=>e.jsx(T,{value:g,children:E},g))})]})},{key:"dueDate",label:"Prazo",width:150,sortable:!0,sortFn:(o,v)=>!o.dueDate&&!v.dueDate?0:o.dueDate?v.dueDate?v.dueDate.localeCompare(o.dueDate):-1:1,render:o=>o.dueDate?e.jsxs("span",{className:P("text-xs flex items-center gap-1",o.dueDate<Me&&o.status!=="concluida"&&"text-destructive font-medium"),children:[e.jsx(Ve,{className:"w-3 h-3"}),new Date(o.dueDate+"T12:00:00").toLocaleDateString("pt-BR")]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"}),inlineEdit:(o,v)=>e.jsxs(mt,{children:[e.jsx(ft,{asChild:!0,children:e.jsxs(ne,{variant:"outline",className:P("h-7 text-xs w-full justify-start font-normal",!o.dueDate&&"text-muted-foreground"),children:[e.jsx(Ve,{className:"w-3 h-3 mr-1"}),o.dueDate?new Date(o.dueDate+"T12:00:00").toLocaleDateString("pt-BR"):"Selecionar"]})}),e.jsx(ht,{className:"w-auto p-0",align:"start",children:e.jsx(ta,{mode:"single",selected:o.dueDate?new Date(o.dueDate+"T12:00:00"):void 0,onSelect:g=>{if(g){const E=g.getFullYear(),K=String(g.getMonth()+1).padStart(2,"0"),xe=String(g.getDate()).padStart(2,"0");v(`${E}-${K}-${xe}`)}else v("")},initialFocus:!0,className:"p-3 pointer-events-auto"})})]})},{key:"assignee",label:"Responsável",width:140,sortable:!0,sortFn:(o,v)=>(o.assignee??"").localeCompare(v.assignee??"","pt-BR"),render:o=>o.assignee?e.jsxs("span",{className:"text-xs flex items-center gap-1",children:[e.jsx(gt,{className:"w-3 h-3"}),o.assignee]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"}),inlineEdit:(o,v)=>e.jsxs(W,{value:o.assignee||"_none_",onValueChange:g=>v(g==="_none_"?"":g),children:[e.jsx(Y,{className:"h-7 text-xs w-full",children:e.jsx(V,{})}),e.jsxs(H,{children:[e.jsx(T,{value:"_none_",children:"— Sem responsável —"}),$e.map(g=>e.jsx(T,{value:g,children:g},g))]})]})},{key:"client",label:"Cliente",width:140,sortable:!0,sortFn:(o,v)=>(o.client??"").localeCompare(v.client??"","pt-BR"),render:o=>o.client?e.jsx("span",{className:"text-xs",children:o.client}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"}),inlineEdit:(o,v)=>e.jsxs(W,{value:o.client||"_none_",onValueChange:g=>v(g==="_none_"?"":g),children:[e.jsx(Y,{className:"h-7 text-xs w-full",children:e.jsx(V,{})}),e.jsxs(H,{children:[e.jsx(T,{value:"_none_",children:"— Sem cliente —"}),N.map(g=>e.jsx(T,{value:g,children:g},g))]})]})},{key:"project",label:"Projeto",width:140,render:o=>{const v=D.get(o.projectId||"");return v?e.jsxs(U,{variant:"outline",className:"text-[10px] gap-1",children:[e.jsx(jt,{className:"w-3 h-3"}),v]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"})}}],[Me,$e,D,N]),vn=u.useCallback((o,v,g)=>{v==="status"?m(o,g):v==="assignee"?x(o,{responsavel:g||null}):v==="priority"?x(o,{prioridade:g}):v==="client"?x(o,{cliente:g||null}):v==="dueDate"&&x(o,{deadline:g||null})},[m,x]),pn=u.useCallback(o=>{o.forEach(v=>h(v))},[h]),[lt,gn]=u.useState(s||"overview");return e.jsxs(na.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[!s&&e.jsx("div",{className:"flex items-center gap-1 rounded-2xl border border-border bg-muted/40 p-1 w-fit backdrop-blur-sm mb-5",children:[{id:"overview",label:"Visão Geral",icon:Xn},{id:"tarefas",label:"Tarefas",icon:Qn,count:be.length},{id:"subtarefas",label:"Subtarefas",icon:$a,count:X}].map(o=>{const v=lt===o.id,g=o.icon;return e.jsxs("button",{onClick:()=>gn(o.id),className:P("relative flex items-center gap-2 rounded-xl px-5 py-2.5 text-sm font-medium transition-all duration-200",v?"text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-background/50"),children:[v&&e.jsx(na.div,{layoutId:"tarefas-tab-bg",className:"absolute inset-0 rounded-xl gold-gradient shadow-sm",transition:{type:"spring",bounce:.15,duration:.5}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4"}),o.label,"count"in o&&e.jsx("span",{className:P("inline-flex items-center justify-center rounded-full px-2 py-0.5 text-[10px] font-semibold tabular-nums min-w-[22px] transition-colors",v?"bg-primary-foreground/20 text-primary-foreground":"bg-secondary text-muted-foreground"),children:o.count})]})]},o.id)})}),lt==="overview"&&e.jsx(u.Suspense,{fallback:e.jsxs("div",{className:"space-y-4",children:[e.jsx(St,{className:"h-10 w-full"}),e.jsx(St,{className:"h-40 w-full"}),e.jsx(St,{className:"h-40 w-full"})]}),children:e.jsx(to,{})}),lt==="tarefas"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-3 glass p-4 rounded-xl border border-border shadow-sm mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:[e.jsxs("div",{className:"relative w-full sm:min-w-[220px] sm:max-w-xs",children:[e.jsx(Vt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"}),e.jsx(ut,{placeholder:"Buscar tarefas...",value:je,onChange:o=>we(o.target.value),className:"pl-9 w-full text-sm"})]}),e.jsxs("div",{className:"flex gap-2 items-center ml-auto flex-wrap",children:[e.jsxs(ne,{onClick:on,className:"gold-gradient text-primary-foreground shadow-md hover:opacity-90 transition-opacity h-9",children:[e.jsx(Ta,{className:"mr-1.5 h-4 w-4"})," Nova Tarefa"]}),e.jsxs("div",{className:"flex border border-border rounded-lg overflow-hidden bg-muted/40",children:[e.jsxs("button",{onClick:()=>re("kanban"),className:P("flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors",se==="kanban"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx(za,{className:"w-4 h-4"})," Kanban"]}),e.jsxs("button",{onClick:()=>re("list"),className:P("flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors",se==="list"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx(Va,{className:"w-4 h-4"})," Lista"]}),e.jsxs("button",{onClick:()=>re("table"),className:P("flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors",se==="table"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx(ja,{className:"w-4 h-4"})," Tabela"]})]}),d&&e.jsx("span",{className:"text-xs text-destructive",children:"Erro ao carregar"}),e.jsxs(mt,{children:[e.jsx(ft,{asChild:!0,children:e.jsx(ne,{variant:"outline",size:"icon",className:"h-9 w-9",children:e.jsx(ss,{className:"w-4 h-4"})})}),e.jsx(ht,{className:"w-56",align:"end",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Mostrar nos cards"}),Object.keys(fa).map(o=>e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsx(Gn,{htmlFor:`field-${o}`,className:"text-sm cursor-pointer",children:fa[o]}),e.jsx(Ge,{id:`field-${o}`,checked:me[o],onCheckedChange:()=>rn(o)})]},o))]})})]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap items-end",children:[e.jsx(es,{className:"w-4 h-4 text-muted-foreground shrink-0 mb-2"}),e.jsxs("div",{className:"flex items-end gap-2 flex-wrap flex-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Status"}),e.jsxs(W,{value:C,onValueChange:y,children:[e.jsx(Y,{className:"w-[130px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos Status"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todos Status"}),k.map(o=>e.jsx(T,{value:o,children:L[o]||o},o))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Prioridade"}),e.jsxs(W,{value:ie,onValueChange:ce,children:[e.jsx(Y,{className:"w-[110px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todas"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todas"}),Object.keys(qe).map(o=>e.jsx(T,{value:o,children:qe[o]},o))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Prazo"}),e.jsxs(W,{value:Re,onValueChange:o=>Dt(o),children:[e.jsx(Y,{className:"w-[110px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos"})}),e.jsx(H,{children:lo.map(o=>e.jsx(T,{value:o.value,children:o.label},o.value))})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Responsável"}),e.jsxs(W,{value:Be,onValueChange:ot,children:[e.jsx(Y,{className:"w-[120px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todos"}),$e.map(o=>e.jsx(T,{value:o,children:o},o))]})]})]}),!t&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Projeto"}),e.jsxs(W,{value:ue,onValueChange:rt,children:[e.jsx(Y,{className:"w-[150px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todos Projetos"}),_.map(o=>e.jsx(T,{value:o.id,children:o.name},o.id))]})]})]}),N.length>0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Cliente"}),e.jsxs(W,{value:de,onValueChange:Ae,children:[e.jsx(Y,{className:"w-[130px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todos Clientes"}),N.map(o=>e.jsx(T,{value:o,children:o},o))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Ordenar por"}),e.jsxs(W,{value:_e,onValueChange:o=>ze(o),children:[e.jsx(Y,{className:"w-[160px] h-8 text-xs",children:e.jsx(V,{})}),e.jsxs(H,{children:[e.jsx(T,{value:"deadline",children:"Sem ordenação"}),ao.map(o=>e.jsx(T,{value:o.value,children:o.label},o.value))]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5 ml-auto shrink-0",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground cursor-pointer select-none justify-end",children:["Ocultar canceladas",e.jsx(Ge,{checked:ke,onCheckedChange:Ct,className:"scale-75"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground cursor-pointer select-none justify-end",children:["Ocultar concluídas",e.jsx(Ge,{checked:Se,onCheckedChange:wt,className:"scale-75"})]})]})]})]}),e.jsx(Cn,{open:ge,onOpenChange:ye,task:Ne,onSave:ln,onDelete:o=>he(o),onCreateSubtask:p,onUpdateSubtask:b,onDeleteSubtask:w}),e.jsx(Na,{open:!!J,onOpenChange:o=>!o&&he(null),children:e.jsxs(wa,{children:[e.jsxs(Ca,{children:[e.jsx(Da,{children:"Remover tarefa?"}),e.jsx(_a,{children:"Esta ação não pode ser desfeita. A tarefa será removida permanentemente."})]}),e.jsxs(Sa,{children:[e.jsx(ka,{children:"Cancelar"}),e.jsx(Ma,{onClick:Ue,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remover"})]})]})}),i?se==="list"||se==="table"?e.jsx(Wn,{}):e.jsx(Yn,{}):se==="table"?e.jsx(ba,{data:be,columns:xn,onEdit:_t,onDelete:he,onBulkDelete:pn,onInlineChange:vn,emptyMessage:"Nenhuma tarefa encontrada."}):se==="list"?e.jsx("div",{className:"space-y-3",children:be.length===0?e.jsx(Xe,{children:e.jsx(Je,{className:"p-8 text-center text-muted-foreground",children:"Nenhuma tarefa encontrada."})}):be.map(o=>e.jsx(Bt,{task:o,cardFields:me,today:Me,isExpanded:Ee.has(o.id),onToggleExpand:Z,onToggleSubtask:B,onEdit:_t,onDelete:he,showStatus:!0,projectName:D.get(o.projectId||"")},o.id))}):e.jsxs(La,{sensors:cn,collisionDetection:Fa,onDragStart:dn,onDragOver:un,onDragEnd:mn,onDragCancel:fn,children:[e.jsx("div",{className:"overflow-x-auto -mx-2 px-2 pb-4",children:e.jsx("div",{className:"flex gap-4",style:{minWidth:`${aa.length*280}px`},children:aa.map(o=>e.jsx("div",{className:"flex-1 min-w-[260px]",children:e.jsx(co,{status:o,tasks:hn[o]||[],isOver:De===o&&Ce!==null,cardFields:me,today:Me,expandedTasks:Ee,onToggleExpand:Z,onToggleSubtask:B,onEdit:_t,onDelete:he,projectMap:D,statusLabel:L[o]||o,borderColor:He[o]||"border-t-muted/60",badgeColor:A[o]||""})},o))})}),e.jsx(Ia,{dropAnimation:{duration:200,easing:"cubic-bezier(0.18, 0.67, 0.6, 1.22)"},children:c?e.jsx("div",{className:"w-[260px]",children:e.jsx(Bt,{task:c,cardFields:me,today:Me,isExpanded:!1,onToggleExpand:()=>{},onToggleSubtask:()=>{},onDelete:()=>{},isOverlay:!0,projectName:D.get(c.projectId||"")})}):null})]})]}),lt==="subtarefas"&&e.jsx(eo,{tasks:t?F.filter(o=>o.projectId===t):F,projects:_,loading:i,onCreateSubtask:p,onUpdateSubtask:b,onDeleteSubtask:w})]})}const Go=Object.freeze(Object.defineProperty({__proto__:null,default:uo},Symbol.toStringTag,{value:"Module"}));export{uo as A,$a as L,Go as a};
