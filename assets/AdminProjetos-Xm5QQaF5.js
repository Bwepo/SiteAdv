import{c as ke,r as t,s as C,ai as Me,a4 as Fe,a3 as Re,U as Be,h as _,j as e,m as U,e as x,X as ze}from"./index-BvZpt6_-.js";import{B as L}from"./badge-BTeKtkMP.js";import{U as ve,P as je}from"./TipTapEditor-CAvWvWWw.js";import{S as He}from"./skeleton-DnWA0KNU.js";import{B as E}from"./button-BHZQesTD.js";import{S as se,f as te,g as oe,h as ie,i as O}from"./form-DA8uyQD9.js";import{D as Ve,a as Ge,c as qe,d as $e,f as Je}from"./dialog-0FpMd1rI.js";import{A as Xe,a as Ke,b as We,c as Qe,d as Ye,e as Ze,f as ea,g as aa}from"./alert-dialog-EqxRRR-f.js";import{I as be}from"./input-Ch28ePyu.js";import{L as M}from"./label-Cqqg89wQ.js";import{P as ra}from"./ProjectOverview-DvDQd-Y-.js";import{S as sa}from"./CrmSkeletons-BTPS5WLV.js";import ta from"./AdminAgenda-BnAIEZgH.js";import{A as ye,C as oa,L as ia}from"./AdminTarefas-DV35YkLI.js";import{P as na}from"./plus-BrCCLAJz.js";import{F as we}from"./folder-kanban-OZuDAg_Z.js";import{L as la}from"./list-CsRPJUtj.js";import{C as ca}from"./chevron-left-DBb4xbfh.js";import{L as ne}from"./loader-circle-C3zyyxlp.js";import{L as Ne}from"./list-todo-DcDFm4S7.js";import{C as ce}from"./calendar-LLDtZzQU.js";import{C as da}from"./chart-column-C1PdutqC.js";import"./index-C0r-sG3t.js";import"./dropdown-menu-BwNFrZKR.js";import"./index-C-mFwA4u.js";import"./index-CSY9kRV9.js";import"./index-DpIS7u9R.js";import"./chevron-right-BXs3i7q0.js";import"./check-C3OwxVEn.js";import"./tabs-Btm4yiey.js";import"./link-B9Q5b1XY.js";import"./quote-BwPS8i_Q.js";import"./trash-2-BTUNUdsR.js";import"./index-BVUagNRN.js";import"./chevron-up-BGRNgUQW.js";import"./index-AJeKEShh.js";import"./card-T5pU5rJX.js";import"./crmTypes-CmvVoXTp.js";import"./trending-up-DPtajESP.js";import"./clock-DDH2SH-p.js";import"./triangle-alert-DKGE4E99.js";import"./refresh-cw-CkeR4DYb.js";import"./scroll-area-CCEdzUdj.js";import"./AgendaEventSheet-Bg-pccjR.js";import"./sheet-DkUNjpgs.js";import"./textarea-BN4RKX2W.js";import"./types-C9wiu8_K.js";import"./users-Boy2e3hN.js";import"./map-pin-DKfkH1sV.js";import"./search-qPONIH4P.js";import"./TarefaSheet-ia5Qn-5e.js";import"./separator-CM9NCm4e.js";import"./circle-check-C2weMQaH.js";import"./popover-Be5YWT34.js";import"./switch-CSM11sWw.js";import"./circle-alert-BQ1Mf2t-.js";import"./circle-x-Du8EXv9k.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=ke("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=ke("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),le="mladv-project-covers",Ce=800,_e=600,ua=.8,pa=5*1024*1024;async function xa(o){return new Promise((h,y)=>{const m=new Image,k=URL.createObjectURL(o);m.onload=()=>{URL.revokeObjectURL(k);let{width:g,height:c}=m;if(g>Ce||c>_e){const i=Math.min(Ce/g,_e/c);g=Math.round(g*i),c=Math.round(c*i)}const u=document.createElement("canvas");u.width=g,u.height=c;const f=u.getContext("2d");if(!f){y(new Error("Canvas não suportado"));return}f.drawImage(m,0,0,g,c),u.toBlob(i=>{if(!i){y(new Error("Falha ao comprimir imagem"));return}h(i)},"image/jpeg",ua)},m.onerror=()=>{URL.revokeObjectURL(k),y(new Error("Falha ao carregar imagem para compressão"))},m.src=k})}async function ga(o){try{return{blob:await xa(o),contentType:"image/jpeg"}}catch(h){return console.warn("[CoverUpload] Compressão falhou, enviando original:",h),{blob:o,contentType:o.type}}}function ha(){const[o,h]=t.useState(!1),[y,m]=t.useState(0);return{uploadCover:async(c,u)=>{h(!0),m(0);try{if(!["image/jpeg","image/png","image/webp","image/gif"].includes(u.type))throw new Error("Tipo não permitido. Use JPEG, PNG, WebP ou GIF.");if(u.size>pa)throw new Error("Arquivo muito grande. Máximo de 5MB.");m(10);const{blob:i,contentType:w}=await ga(u);m(40);const T=w==="image/jpeg"?"jpg":u.name.split(".").pop()||"jpg",D=`covers/${`${c}-${Date.now()}.${T}`}`,{error:N}=await C.storage.from(le).upload(D,i,{contentType:w,cacheControl:"3600",upsert:!1});if(N)throw new Error(N.message);m(70);const{data:P}=C.storage.from(le).getPublicUrl(D),{data:v}=await C.from("mladv_crm_projetos").select("raw_fields").eq("airtable_id",c).single(),z=(v==null?void 0:v.raw_fields)||{},{error:j}=await C.from("mladv_crm_projetos").update({raw_fields:{...z,cover_url:P.publicUrl}}).eq("airtable_id",c);if(j)throw new Error(j.message);return m(100),{url:P.publicUrl,path:D}}finally{h(!1)}},removeCover:async(c,u)=>{try{const w=u.match(/\/object\/public\/mladv-project-covers\/(.+)$/);w&&await C.storage.from(le).remove([w[1]])}catch{}const{data:f}=await C.from("mladv_crm_projetos").select("raw_fields").eq("airtable_id",c).single(),i=(f==null?void 0:f.raw_fields)||{};delete i.cover_url,await C.from("mladv_crm_projetos").update({raw_fields:i}).eq("airtable_id",c)},isUploading:o,progress:y}}const B={Ativo:"bg-green-600/90 text-white border-green-600/50","Em Espera":"bg-yellow-600/90 text-white border-yellow-600/50",Concluído:"bg-blue-600/90 text-white border-blue-600/50",Cancelado:"bg-red-600/90 text-white border-red-600/50"},fa=[{id:"visao_geral",label:"Visão Geral",icon:da},{id:"agenda",label:"Agenda",icon:ce},{id:"tarefas",label:"Tarefas",icon:oa},{id:"subtarefas",label:"Subtarefas",icon:ia}],va=["Ativo","Em Espera","Concluído","Cancelado"],ja=["Extra","CLT","Pessoal"];function Nr(){const{projects:o,loading:h,syncing:y,error:m,lastSync:k,sync:g,createProject:c,updateProject:u,deleteProject:f}=Me(),{tasks:i,loading:w}=Fe(),{events:T}=Re(),{uploadCover:de,removeCover:D,isUploading:N}=ha(),P=t.useRef(null),[v,z]=t.useState(null),[j,H]=t.useState(null),[p,F]=t.useState(null),[S,Se]=t.useState("visao_geral"),{prefs:Ee,updatePref:Te}=Be(),V=Ee.project_view_mode,me=a=>Te("project_view_mode",a),[De,A]=t.useState(!1),[n,ue]=t.useState(null),[I,G]=t.useState(""),[q,$]=t.useState("Ativo"),[J,X]=t.useState(""),[K,W]=t.useState(""),[pe,xe]=t.useState(!1),[Q,ge]=t.useState(null),Y=async(a,s)=>{try{await de(a,s),_.success("Capa atualizada!"),g()}catch(r){_.error("Erro ao enviar capa: "+r.message)}},Pe=async(a,s)=>{try{await D(a,s),_.success("Capa removida"),g()}catch(r){_.error("Erro ao remover capa: "+r.message)}},Z=(a,s)=>{var r;s.stopPropagation(),z(a),(r=P.current)==null||r.click()},Ae=a=>{var r;const s=(r=a.target.files)==null?void 0:r[0];s&&v&&Y(v,s),a.target.value=""},ee=t.useCallback((a,s)=>{a.preventDefault(),a.stopPropagation(),H(s)},[]),ae=t.useCallback(a=>{a.preventDefault(),a.stopPropagation(),H(null)},[]),re=t.useCallback((a,s)=>{var l;a.preventDefault(),a.stopPropagation(),H(null);const r=(l=a.dataTransfer.files)==null?void 0:l[0];r&&r.type.startsWith("image/")?Y(s,r):r&&_.error("Apenas imagens são permitidas.")},[Y]),b=t.useMemo(()=>o.find(a=>a.id===p)||null,[o,p]),he=t.useMemo(()=>{if(!o.length||!i.length)return new Map;const a=new Map;return o.forEach(s=>{const r=i.filter(d=>d.projectId===s.id),l=r.filter(d=>d.status==="concluida").length;a.set(s.id,{total:r.length,concluidas:l})}),a},[o,i]),Ie=t.useMemo(()=>{if(!p)return{visao_geral:0,agenda:0,tarefas:0,subtarefas:0};const a=i.filter(l=>l.projectId===p),s=a.flatMap(l=>l.subtasks);return{visao_geral:0,agenda:T.filter(l=>l.projectId===p).length,tarefas:a.length,subtarefas:s.length}},[p,i,T]),Ue=()=>{ue(null),G(""),$("Ativo"),X(""),W(""),A(!0)},Le=a=>{ue(a),G(a.name),$(a.status||"Ativo"),X(a.tipo||""),W(a.observacoes||""),A(!0)},fe=async()=>{if(I.trim()){xe(!0);try{n?await u(n.id,{name:I.trim(),status:q,tipo:J||void 0,observacoes:K||void 0}):await c({name:I.trim(),status:q,tipo:J||void 0,observacoes:K||void 0}),A(!1)}catch(a){_.error("Erro ao salvar projeto: "+a.message)}finally{xe(!1)}}},Oe=async()=>{if(Q)try{await f(Q)}catch(a){_.error("Erro ao remover projeto: "+a.message)}finally{ge(null)}};return h||w?e.jsxs("div",{className:"space-y-6 pb-20 md:pb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Projetos"}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[1,2,3,4].map(a=>e.jsx(He,{className:"h-40 w-full rounded-xl"},a))})]}):e.jsxs(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6 pb-20 md:pb-0",children:[e.jsx("input",{ref:P,type:"file",accept:"image/jpeg,image/png,image/webp,image/gif",onChange:Ae,className:"hidden"}),p?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(E,{variant:"ghost",size:"sm",className:"gap-1.5 text-muted-foreground hover:text-foreground",onClick:()=>F(null),children:[e.jsx(ca,{className:"h-4 w-4"}),"Voltar"]}),e.jsx("span",{className:"text-lg font-semibold text-foreground",children:b==null?void 0:b.name}),b&&e.jsx(L,{variant:"outline",className:x("text-[10px] px-1.5 py-0",B[b.status]||"bg-secondary text-secondary-foreground"),children:b.status}),e.jsx(E,{variant:"outline",size:"sm",className:"text-xs h-8 ml-auto",onClick:()=>b&&Le(b),children:"Editar projeto"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Projetos"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(L,{variant:"secondary",className:"text-xs",children:[o.length," projetos"]}),e.jsx(sa,{syncing:y,lastSync:k,onSync:g,error:m}),e.jsxs(E,{onClick:Ue,className:"gold-gradient text-primary-foreground shadow-md hover:opacity-90 transition-opacity",children:[e.jsx(na,{className:"mr-2 h-4 w-4"})," Novo Projeto"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 max-w-md",children:[e.jsx(we,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsxs(se,{value:"none",onValueChange:a=>a!=="none"&&F(a),children:[e.jsx(te,{className:"bg-background/50",children:e.jsx(oe,{placeholder:"Selecionar projeto..."})}),e.jsxs(ie,{children:[e.jsx(O,{value:"none",children:"Selecionar projeto..."}),o.map(a=>e.jsx(O,{value:a.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:a.name}),e.jsx(L,{variant:"outline",className:x("text-[9px] px-1 py-0 ml-1",B[a.status]||"bg-secondary text-secondary-foreground"),children:a.status})]})},a.id))]})]})]}),e.jsxs("div",{className:"flex items-center gap-0.5 rounded-lg border border-border bg-muted/40 p-0.5",children:[e.jsx("button",{onClick:()=>me("list"),className:x("rounded-md p-1.5 transition-colors",V==="list"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:e.jsx(la,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>me("cards"),className:x("rounded-md p-1.5 transition-colors",V==="cards"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:e.jsx(ma,{className:"h-4 w-4"})})]})]})]}),p?e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"flex items-center gap-1 rounded-2xl border border-border bg-muted/40 p-1 w-fit backdrop-blur-sm",children:fa.map(a=>{const s=S===a.id,r=a.icon;return e.jsxs("button",{onClick:()=>Se(a.id),className:x("relative flex items-center gap-2 rounded-xl px-5 py-2.5 text-sm font-medium transition-all duration-200",s?"text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-background/50"),children:[s&&e.jsx(U.div,{layoutId:"project-tab-bg",className:"absolute inset-0 rounded-xl gold-gradient shadow-sm",transition:{type:"spring",bounce:.15,duration:.5}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx(r,{className:"h-4 w-4"}),a.label,a.id!=="visao_geral"&&e.jsx("span",{className:x("inline-flex items-center justify-center rounded-full px-2 py-0.5 text-[10px] font-semibold tabular-nums min-w-[22px] transition-colors",s?"bg-primary-foreground/20 text-primary-foreground":"bg-secondary text-muted-foreground"),children:Ie[a.id]})]})]},a.id)})}),e.jsxs(U.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.2},children:[S==="visao_geral"&&e.jsx(ra,{projectId:p,tasks:i,events:T}),S==="agenda"&&e.jsx(ta,{projectId:p,hideHeader:!0}),S==="tarefas"&&e.jsx(ye,{projectId:p,hideHeader:!0,forceTab:"tarefas"}),S==="subtarefas"&&e.jsx(ye,{projectId:p,hideHeader:!0,forceTab:"subtarefas"})]},`${p}-${S}`)]}):V==="list"?e.jsx("div",{className:"space-y-2",children:o.map((a,s)=>{const r=he.get(a.id),l=r&&r.total>0?Math.round(r.concluidas/r.total*100):0;return e.jsxs(U.div,{initial:{opacity:0,x:-8},animate:{opacity:1,x:0},transition:{delay:s*.03},onClick:()=>F(a.id),className:"group flex items-center gap-4 rounded-lg border border-border bg-card p-3 cursor-pointer hover:border-primary/40 hover:bg-card/90 transition-all duration-200",children:[e.jsxs("div",{className:x("shrink-0 w-24 aspect-[4/3] rounded-md overflow-hidden border-2 bg-muted/20 flex items-center justify-center relative group/thumb transition-all",j===a.id?"border-primary border-dashed ring-2 ring-primary/30":"border-border/50"),onDragOver:d=>ee(d,a.id),onDragLeave:ae,onDrop:d=>re(d,a.id),children:[a.coverUrl?e.jsx("img",{src:a.coverUrl,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/10 via-muted/30 to-muted/10 flex items-center justify-center",children:j===a.id?e.jsx(ve,{className:"h-5 w-5 text-primary animate-pulse"}):e.jsx(we,{className:"h-5 w-5 text-accent/40"})}),e.jsx("button",{onClick:d=>Z(a.id,d),className:"absolute inset-0 bg-black/50 opacity-0 group-hover/thumb:opacity-100 transition-opacity flex items-center justify-center",children:N&&v===a.id?e.jsx(ne,{className:"h-4 w-4 text-white animate-spin"}):e.jsx(R,{className:"h-4 w-4 text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground truncate",children:a.name}),e.jsx(L,{variant:"outline",className:x("text-[9px] px-1.5 py-0 shrink-0",B[a.status]||"bg-secondary text-secondary-foreground"),children:a.status})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[11px] text-muted-foreground",children:[a.tipo&&e.jsx("span",{children:a.tipo}),a.observacoes&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-border",children:"•"}),e.jsx("span",{className:"truncate",children:a.observacoes})]})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-5 shrink-0",children:[e.jsxs("div",{className:"w-32 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ne,{className:"h-3 w-3"}),(r==null?void 0:r.concluidas)||0,"/",(r==null?void 0:r.total)||0]}),e.jsxs("span",{className:"font-medium",children:[l,"%"]})]}),e.jsx(je,{value:l,className:"h-1.5"})]}),a.dataInicio&&e.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-muted-foreground whitespace-nowrap",children:[e.jsx(ce,{className:"h-3 w-3"}),new Date(a.dataInicio+"T12:00:00").toLocaleDateString("pt-BR")]})]})]},a.id)})}):e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3",children:o.map((a,s)=>{const r=he.get(a.id),l=r&&r.total>0?Math.round(r.concluidas/r.total*100):0;return e.jsxs(U.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:s*.03},onClick:()=>F(a.id),className:x("group relative rounded-lg border-2 overflow-hidden cursor-pointer hover:border-primary/40 transition-all duration-200 aspect-[4/3] flex flex-col justify-end",j===a.id?"border-primary border-dashed ring-2 ring-primary/30":"border-border"),onDragOver:d=>ee(d,a.id),onDragLeave:ae,onDrop:d=>re(d,a.id),children:[a.coverUrl?e.jsx("img",{src:a.coverUrl,alt:a.name,className:"absolute inset-0 w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-accent/8 via-card to-card"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-card via-card/60 to-transparent"}),e.jsx("button",{onClick:d=>Z(a.id,d),className:"absolute top-2.5 left-2.5 z-20 rounded-full bg-black/50 p-1.5 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70",children:N&&v===a.id?e.jsx(ne,{className:"h-3.5 w-3.5 text-white animate-spin"}):e.jsx(R,{className:"h-3.5 w-3.5 text-white"})}),e.jsx(L,{variant:"outline",className:x("absolute top-2.5 right-2.5 text-[11px] px-2 py-0.5 font-semibold backdrop-blur-sm shadow-sm",B[a.status]||"bg-secondary text-secondary-foreground"),children:a.status}),e.jsxs("div",{className:"relative z-10 p-3.5 space-y-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground truncate",children:a.name}),a.tipo&&e.jsx("span",{className:"text-[11px] text-muted-foreground",children:a.tipo})]}),a.observacoes&&e.jsx("p",{className:"text-[11px] text-muted-foreground line-clamp-1",children:a.observacoes}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ne,{className:"h-3 w-3"}),(r==null?void 0:r.concluidas)||0,"/",(r==null?void 0:r.total)||0," tarefas"]}),e.jsxs("span",{className:"font-medium",children:[l,"%"]})]}),e.jsx(je,{value:l,className:"h-1.5"})]}),a.dataInicio&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-muted-foreground",children:[e.jsx(ce,{className:"h-2.5 w-2.5"}),"Início: ",new Date(a.dataInicio+"T12:00:00").toLocaleDateString("pt-BR")]})]})]},a.id)})}),e.jsx(Ve,{open:De,onOpenChange:A,children:e.jsxs(Ge,{className:"sm:max-w-md",children:[e.jsx(qe,{children:e.jsx($e,{children:n?"Editar Projeto":"Novo Projeto"})}),e.jsxs("div",{className:"space-y-4 py-2",children:[e.jsxs("div",{children:[e.jsx(M,{htmlFor:"project-name",children:"Nome do projeto"}),e.jsx(be,{id:"project-name",value:I,onChange:a=>G(a.target.value),placeholder:"Ex: EasyBR",onKeyDown:a=>a.key==="Enter"&&fe(),autoFocus:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(M,{children:"Status"}),e.jsxs(se,{value:q,onValueChange:$,children:[e.jsx(te,{children:e.jsx(oe,{})}),e.jsx(ie,{children:va.map(a=>e.jsx(O,{value:a,children:a},a))})]})]}),e.jsxs("div",{children:[e.jsx(M,{children:"Tipo"}),e.jsxs(se,{value:J||"__none__",onValueChange:a=>X(a==="__none__"?"":a),children:[e.jsx(te,{children:e.jsx(oe,{placeholder:"Nenhum"})}),e.jsxs(ie,{children:[e.jsx(O,{value:"__none__",children:"Nenhum"}),ja.map(a=>e.jsx(O,{value:a,children:a},a))]})]})]})]}),e.jsxs("div",{children:[e.jsx(M,{htmlFor:"project-obs",children:"Observações"}),e.jsx(be,{id:"project-obs",value:K,onChange:a=>W(a.target.value),placeholder:"Notas sobre o projeto"})]}),n&&e.jsxs("div",{children:[e.jsx(M,{children:"Capa do projeto"}),e.jsxs("div",{className:x("mt-1.5 flex items-center gap-3 p-3 rounded-lg border-2 border-dashed transition-all",j===n.id?"border-primary bg-primary/5":"border-transparent"),onDragOver:a=>ee(a,n.id),onDragLeave:ae,onDrop:a=>re(a,n.id),children:[n.coverUrl?e.jsxs("div",{className:"relative w-24 aspect-[4/3] rounded-md overflow-hidden border border-border",children:[e.jsx("img",{src:n.coverUrl,alt:"Capa",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>Pe(n.id,n.coverUrl),className:"absolute top-0.5 right-0.5 rounded-full bg-destructive p-0.5",children:e.jsx(ze,{className:"h-3 w-3 text-destructive-foreground"})})]}):e.jsxs("div",{className:x("w-24 aspect-[4/3] rounded-md border-2 border-dashed flex flex-col items-center justify-center bg-muted/20 gap-1 transition-colors",j===n.id?"border-primary":"border-border"),children:[j===n.id?e.jsx(ve,{className:"h-5 w-5 text-primary animate-pulse"}):e.jsx(R,{className:"h-5 w-5 text-muted-foreground/40"}),e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Arraste aqui"})]}),e.jsx(E,{type:"button",variant:"outline",size:"sm",onClick:a=>Z(n.id,a),disabled:N,children:N&&v===n.id?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-3.5 w-3.5 mr-1.5 animate-spin"})," Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-3.5 w-3.5 mr-1.5"})," ",n.coverUrl?"Trocar":"Adicionar"]})})]})]})]}),e.jsxs(Je,{children:[e.jsx(E,{variant:"outline",onClick:()=>A(!1),children:"Cancelar"}),e.jsx(E,{onClick:fe,disabled:pe||!I.trim(),className:"gold-gradient text-primary-foreground hover:opacity-90",children:pe?"Salvando...":n?"Salvar":"Criar"})]})]})}),e.jsx(Xe,{open:!!Q,onOpenChange:a=>!a&&ge(null),children:e.jsxs(Ke,{children:[e.jsxs(We,{children:[e.jsx(Qe,{children:"Remover projeto?"}),e.jsx(Ye,{children:"Esta ação não pode ser desfeita. O projeto será removido permanentemente."})]}),e.jsxs(Ze,{children:[e.jsx(ea,{children:"Cancelar"}),e.jsx(aa,{onClick:Oe,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remover"})]})]})})]})}export{Nr as default};
