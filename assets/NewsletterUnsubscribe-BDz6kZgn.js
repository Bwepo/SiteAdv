import{l,r as a,j as e,s as p}from"./index-BMdza34P.js";import{S as x,L as b}from"./SEOHead-rFexLlKV.js";import{C as f,a as h,b as j,c as w}from"./card-njPDUjzV.js";import"./button-7P6zTbkF.js";import"./sun-CX9IgFpW.js";import"./chevron-right-DzgnFRqK.js";import"./scale-BbZjsK5J.js";import"./mail-Bqg_BxeK.js";import"./map-pin-DwCYiVvt.js";import"./arrow-right-t5nOCho2.js";const U=()=>{const o=l(),[n,r]=a.useState("idle"),[d,c]=a.useState(!1),t=a.useMemo(()=>{var s;return((s=new URLSearchParams(o.search).get("token"))==null?void 0:s.trim())||""},[o.search]);a.useEffect(()=>{(async()=>{if(!t){r("error");return}c(!0);try{const{data:s,error:i}=await p.rpc("mladv_newsletter_unsubscribe_by_token",{p_token:t});if(i){console.error("Unsubscribe error:",i),r("error");return}r(s?"success":"error")}catch{r("error")}finally{c(!1)}})()},[t]);const u=d?"Processando seu descadastro...":n==="success"?"Descadastro confirmado.":n==="error"?"Token inválido ou já descadastrado.":"";return e.jsxs(e.Fragment,{children:[e.jsx(x,{title:"Descadastro da newsletter",description:"Confirme o descadastro da newsletter da Mariana Lima Advocacia.",canonical:"https://marianalima.adv.br/newsletter/unsubscribe"}),e.jsx(b,{children:e.jsx("section",{className:"py-20 md:py-28",children:e.jsx("div",{className:"container mx-auto px-4 md:px-6",children:e.jsxs(f,{className:"mx-auto max-w-xl",children:[e.jsx(h,{children:e.jsx(j,{children:"Newsletter"})}),e.jsx(w,{children:e.jsx("p",{className:"text-base text-foreground",children:u})})]})})})})]})};export{U as default};
