import{a as b,r as C,E as D,j as e,L as u,c as P}from"./index-CH2LE9ah.js";import{A,M as E,P as T}from"./AdminLayout-BsUoGkM7.js";import{d as k,e as S,f as M}from"./usePosts-BxepUOcu.js";import{B as p}from"./button-4Pi_8_m-.js";import{B as L}from"./badge-Hhwo0Wgb.js";import{T as O,a as B,b as g,c as n,d as F,e as d,A as I,f as R,g as _,h as z,i as H,j as q,k as $,l as U}from"./alert-dialog-DBKBM8GH.js";import{D as V,a as G,b as J,c as m,d as K}from"./dropdown-menu-dC9u7SU9.js";import{E as Q}from"./external-link-lnMEX5_Q.js";import{E as N,a as v}from"./eye-Bzfy3gBr.js";import{T as W}from"./trash-2-_QdVZ_fP.js";import{e as X}from"./usePostInteractions-DGVG2AqL.js";import{C as x,d as h}from"./card-DQJQUXnA.js";import{S as Y}from"./skeleton-C622kORU.js";import{F as Z}from"./file-text-De0VLbtE.js";import{C as ee}from"./circle-alert-AFQPQDAf.js";import"./chevron-left-0-nAhtCt.js";import"./mail-CTBv1P67.js";import"./index-Bu4aPwie.js";import"./Combination-DdrPTq02.js";import"./index-BBjQn09Q.js";import"./index-VFb_Dg3b.js";import"./check-DNuosH_g.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=b("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=b("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);function f(r){return r?new Date(r).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"}function ae({posts:r,isLoading:o}){const[t,l]=C.useState(null),j=k(),i=S(),{toast:a}=D(),w=async s=>{const c=!s.published;try{await j.mutateAsync({id:s.id,published:c,published_at:c?new Date().toISOString():s.published_at}),a({title:c?"Post publicado!":"Post despublicado",description:c?"O artigo agora está visível no blog.":"O artigo foi movido para rascunhos."})}catch{a({title:"Erro",description:"Não foi possível atualizar o post.",variant:"destructive"})}},y=async()=>{if(t)try{await i.mutateAsync(t),a({title:"Post excluído",description:"O artigo foi removido permanentemente."})}catch{a({title:"Erro",description:"Não foi possível excluir o post.",variant:"destructive"})}finally{l(null)}};return r.length===0&&!o?e.jsxs("div",{className:"text-center py-12 border border-dashed border-border rounded-lg",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Nenhum post encontrado."}),e.jsx(u,{to:"/admin/posts/new",children:e.jsx(p,{children:"Criar primeiro post"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border border-border rounded-lg overflow-hidden",children:e.jsxs(O,{children:[e.jsx(B,{children:e.jsxs(g,{children:[e.jsx(n,{className:"w-[40%]",children:"Título"}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"Publicado em"}),e.jsx(n,{children:"Criado em"}),e.jsx(n,{className:"w-[100px]",children:"Ações"})]})}),e.jsx(F,{children:r.map(s=>e.jsxs(g,{children:[e.jsx(d,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground line-clamp-1",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground line-clamp-1",children:["/",s.slug]})]})}),e.jsx(d,{children:e.jsx(L,{variant:s.published?"default":"secondary",className:P(s.published?"bg-green-500/10 text-green-600 border-green-500/30":""),children:s.published?"Publicado":"Rascunho"})}),e.jsx(d,{className:"text-muted-foreground",children:f(s.published_at)}),e.jsx(d,{className:"text-muted-foreground",children:f(s.created_at)}),e.jsx(d,{children:e.jsxs(V,{children:[e.jsx(G,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon",children:e.jsx(se,{className:"w-4 h-4"})})}),e.jsxs(J,{align:"end",children:[e.jsx(m,{asChild:!0,children:e.jsxs(u,{to:`/admin/posts/${s.id}/edit`,children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Editar"]})}),s.published&&e.jsx(m,{asChild:!0,children:e.jsxs("a",{href:`/blog/${s.slug}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Ver no blog"]})}),e.jsx(m,{onClick:()=>w(s),children:s.published?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Despublicar"]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Publicar"]})}),e.jsx(K,{}),e.jsxs(m,{onClick:()=>l(s.id),className:"text-destructive focus:text-destructive",children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Excluir"]})]})]})})]},s.id))})]})}),e.jsx(I,{open:!!t,onOpenChange:()=>l(null),children:e.jsxs(R,{children:[e.jsxs(_,{children:[e.jsx(z,{children:"Excluir post?"}),e.jsx(H,{children:"Esta ação não pode ser desfeita. O post será removido permanentemente."})]}),e.jsxs(q,{children:[e.jsx($,{children:"Cancelar"}),e.jsx(U,{onClick:y,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Excluir"})]})]})})]})}const Ae=()=>{const{data:r,isLoading:o}=M(),{data:t}=X(),l=(r==null?void 0:r.filter(a=>a.published).length)||0,j=(r==null?void 0:r.filter(a=>!a.published).length)||0,i=(t==null?void 0:t.filter(a=>!a.approved).length)||0;return e.jsxs(A,{title:"Dashboard",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[e.jsx(x,{children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:e.jsx(Z,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:(r==null?void 0:r.length)||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de posts"})]})]})})}),e.jsx(x,{children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-green-500/10",children:e.jsx(v,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:l}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Publicados"})]})]})})}),e.jsx(x,{children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-yellow-500/10",children:e.jsx(N,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:j}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Rascunhos"})]})]})})}),e.jsx(u,{to:"/admin/comments",children:e.jsx(x,{className:i>0?"ring-2 ring-orange-500/50 hover:ring-orange-500/70 transition-all cursor-pointer":"hover:bg-muted/50 transition-colors cursor-pointer",children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-orange-500/10",children:e.jsx(E,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:i}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Comentários pendentes"})]}),i>0&&e.jsx(ee,{className:"w-5 h-5 text-orange-500 ml-auto animate-pulse"})]})})})})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Posts"}),e.jsx(u,{to:"/admin/posts/new",children:e.jsxs(p,{children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Novo Post"]})})]}),o?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(a=>e.jsx(Y,{className:"h-16 w-full"},a))}):e.jsx(ae,{posts:r||[]})]})};export{Ae as default};
