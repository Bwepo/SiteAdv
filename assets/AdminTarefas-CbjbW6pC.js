import{c as Dt,r as i,_ as L,f as Je,W as _n,al as Hn,j as u,e as Qe}from"./index-BvbJ-ANM.js";import{A as qn,P as Gn}from"./AdminLayout-B6ALNXwx.js";import{T as Jn}from"./TarefaSheet-_WoFjn89.js";import{C as gn,c as pn}from"./card-jEiSglxf.js";import{B as Ze}from"./badge-C2sRzUMM.js";import{B as Ie}from"./button-DhjEPs0X.js";import{I as Zn}from"./input-CKOz4xMs.js";import{S as Qn,C as er}from"./checkbox-zjqgcU1D.js";import{L as tr}from"./label-BrAU_yj2.js";import{S as He,a as qe,b as ft,d as Ge,e as xe}from"./select-BuJLo1SZ.js";import{P as nr,a as rr,b as sr}from"./popover-CcoBSJ7T.js";import{d as mt,b as Pt,T as or,c as vn}from"./crmTypes-DP3iBdIv.js";import{S as ir,T as ar,K as lr}from"./CrmSkeletons-DuInFv5Z.js";import{S as cr}from"./search-Dxbgy1Xe.js";import{F as ur}from"./folder-kanban-D5iCVMRz.js";import{L as dr}from"./list-CSLj1XEH.js";import{U as fr}from"./users-G4H7ppNW.js";import{C as hr}from"./calendar-hHMqZQC6.js";import{P as gr}from"./pencil-CPZmPTZq.js";import{T as pr}from"./trash-2-DWSP1bAu.js";import{C as vr}from"./chevron-up-DE-KF5Zc.js";import{C as mr}from"./chevron-right-vVr342WK.js";import"./dialog-CLud53xG.js";import"./index-CQUggLAB.js";import"./heart-DoVpqoiH.js";import"./sparkles-D9X7K45t.js";import"./house-7-4b66AH.js";import"./menu-COEOOGHy.js";import"./file-text-nbPxNBC6.js";import"./form-YW5LcBsb.js";import"./textarea-CuPezFU5.js";import"./separator-BOuZROBp.js";import"./alert-dialog-B7EHYPi5.js";import"./loader-circle-DjNnbRhf.js";import"./circle-check-gJXp1myO.js";import"./circle-DS1SSd5E.js";import"./clock-DbWB7tFx.js";import"./types-C9wiu8_K.js";import"./index-BZSpmO4p.js";import"./check-CJmg32bV.js";import"./index-C99KxLVi.js";import"./skeleton-CquFTMCV.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=Dt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=Dt("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=Dt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=Dt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);function Sr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const Rt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $e(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Kt(e){return"nodeType"in e}function V(e){var t,n;return e?$e(e)?e:Kt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Yt(e){const{Document:t}=V(e);return e instanceof t}function ot(e){return $e(e)?!1:e instanceof V(e).HTMLElement}function mn(e){return e instanceof V(e).SVGElement}function Ke(e){return e?$e(e)?e.document:Kt(e)?Yt(e)?e:ot(e)||mn(e)?e.ownerDocument:document:document:document}const ue=Rt?i.useLayoutEffect:i.useEffect;function Nt(e){const t=i.useRef(e);return ue(()=>{t.current=e}),i.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function Cr(){const e=i.useRef(null),t=i.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=i.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function rt(e,t){t===void 0&&(t=[e]);const n=i.useRef(e);return ue(()=>{n.current!==e&&(n.current=e)},t),n}function it(e,t){const n=i.useRef();return i.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function bt(e){const t=Nt(e),n=i.useRef(null),r=i.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function xt(e){const t=i.useRef();return i.useEffect(()=>{t.current=e},[e]),t.current}let It={};function at(e,t){return i.useMemo(()=>{if(t)return t;const n=It[e]==null?0:It[e]+1;return It[e]=n,e+"-"+n},[e,t])}function bn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,l)=>{const a=Object.entries(l);for(const[c,d]of a){const h=o[c];h!=null&&(o[c]=h+e*d)}return o},{...t})}}const Fe=bn(1),yt=bn(-1);function Dr(e){return"clientX"in e&&"clientY"in e}function Et(e){if(!e)return!1;const{KeyboardEvent:t}=V(e.target);return t&&e instanceof t}function Rr(e){if(!e)return!1;const{TouchEvent:t}=V(e.target);return t&&e instanceof t}function wt(e){if(Rr(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Dr(e)?{x:e.clientX,y:e.clientY}:null}const Ee=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ee.Translate.toString(e),Ee.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Gt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Nr(e){return e.matches(Gt)?e:e.querySelector(Gt)}const Er={display:"none"};function Tr(e){let{id:t,value:n}=e;return L.createElement("div",{id:t,style:Er},n)}function jr(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return L.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Ar(){const[e,t]=i.useState("");return{announce:i.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const xn=i.createContext(null);function kr(e){const t=i.useContext(xn);i.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Ir(){const[e]=i.useState(()=>new Set),t=i.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[i.useCallback(r=>{let{type:s,event:o}=r;e.forEach(l=>{var a;return(a=l[s])==null?void 0:a.call(l,o)})},[e]),t]}const Mr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Or={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Lr(e){let{announcements:t=Or,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=Mr}=e;const{announce:o,announcement:l}=Ar(),a=at("DndLiveRegion"),[c,d]=i.useState(!1);if(i.useEffect(()=>{d(!0)},[]),kr(i.useMemo(()=>({onDragStart(f){let{active:v}=f;o(t.onDragStart({active:v}))},onDragMove(f){let{active:v,over:p}=f;t.onDragMove&&o(t.onDragMove({active:v,over:p}))},onDragOver(f){let{active:v,over:p}=f;o(t.onDragOver({active:v,over:p}))},onDragEnd(f){let{active:v,over:p}=f;o(t.onDragEnd({active:v,over:p}))},onDragCancel(f){let{active:v,over:p}=f;o(t.onDragCancel({active:v,over:p}))}}),[o,t])),!c)return null;const h=L.createElement(L.Fragment,null,L.createElement(Tr,{id:r,value:s.draggable}),L.createElement(jr,{id:a,announcement:l}));return n?Je.createPortal(h,n):h}var z;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(z||(z={}));function St(){}function Pr(e,t){return i.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function zr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const de=Object.freeze({x:0,y:0});function Br(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Fr(e,t){const n=wt(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function $r(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Kr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Jt(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function Yr(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}const Xr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=Jt(t),o=[];for(const l of r){const{id:a}=l,c=n.get(a);if(c){const d=Jt(c),h=s.reduce((v,p,w)=>v+Br(d[w],p),0),f=Number((h/4).toFixed(4));o.push({id:a,data:{droppableContainer:l,value:f}})}}return o.sort($r)};function Ur(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=s-r,a=o-n;if(r<s&&n<o){const c=t.width*t.height,d=e.width*e.height,h=l*a,f=h/(c+d-h);return Number(f.toFixed(4))}return 0}const Vr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const o of r){const{id:l}=o,a=n.get(l);if(a){const c=Ur(a,t);c>0&&s.push({id:l,data:{droppableContainer:o,value:c}})}}return s.sort(Kr)};function Wr(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function yn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:de}function _r(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((l,a)=>({...l,top:l.top+e*a.y,bottom:l.bottom+e*a.y,left:l.left+e*a.x,right:l.right+e*a.x}),{...n})}}const Hr=_r(1);function wn(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function qr(e,t,n){const r=wn(t);if(!r)return e;const{scaleX:s,scaleY:o,x:l,y:a}=r,c=e.left-l-(1-s)*parseFloat(n),d=e.top-a-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?e.width/s:e.width,f=o?e.height/o:e.height;return{width:h,height:f,top:d,right:c+h,bottom:d+f,left:c}}const Gr={ignoreTransform:!1};function Ye(e,t){t===void 0&&(t=Gr);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:h}=V(e).getComputedStyle(e);d&&(n=qr(n,d,h))}const{top:r,left:s,width:o,height:l,bottom:a,right:c}=n;return{top:r,left:s,width:o,height:l,bottom:a,right:c}}function Zt(e){return Ye(e,{ignoreTransform:!0})}function Jr(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Zr(e,t){return t===void 0&&(t=V(e).getComputedStyle(e)),t.position==="fixed"}function Qr(e,t){t===void 0&&(t=V(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?n.test(o):!1})}function Xt(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Yt(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!ot(s)||mn(s)||n.includes(s))return n;const o=V(e).getComputedStyle(s);return s!==e&&Qr(s,o)&&n.push(s),Zr(s,o)?n:r(s.parentNode)}return e?r(e):n}function Sn(e){const[t]=Xt(e,1);return t??null}function Mt(e){return!Rt||!e?null:$e(e)?e:Kt(e)?Yt(e)||e===Ke(e).scrollingElement?window:ot(e)?e:null:null}function Cn(e){return $e(e)?e.scrollX:e.scrollLeft}function Dn(e){return $e(e)?e.scrollY:e.scrollTop}function zt(e){return{x:Cn(e),y:Dn(e)}}var F;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(F||(F={}));function Rn(e){return!Rt||!e?!1:e===document.scrollingElement}function Nn(e){const t={x:0,y:0},n=Rn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:l,isRight:a,maxScroll:r,minScroll:t}}const es={x:.2,y:.2};function ts(e,t,n,r,s){let{top:o,left:l,right:a,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=es);const{isTop:d,isBottom:h,isLeft:f,isRight:v}=Nn(e),p={x:0,y:0},w={x:0,y:0},b={height:t.height*s.y,width:t.width*s.x};return!d&&o<=t.top+b.height?(p.y=F.Backward,w.y=r*Math.abs((t.top+b.height-o)/b.height)):!h&&c>=t.bottom-b.height&&(p.y=F.Forward,w.y=r*Math.abs((t.bottom-b.height-c)/b.height)),!v&&a>=t.right-b.width?(p.x=F.Forward,w.x=r*Math.abs((t.right-b.width-a)/b.width)):!f&&l<=t.left+b.width&&(p.x=F.Backward,w.x=r*Math.abs((t.left+b.width-l)/b.width)),{direction:p,speed:w}}function ns(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function En(e){return e.reduce((t,n)=>Fe(t,zt(n)),de)}function rs(e){return e.reduce((t,n)=>t+Cn(n),0)}function ss(e){return e.reduce((t,n)=>t+Dn(n),0)}function Tn(e,t){if(t===void 0&&(t=Ye),!e)return;const{top:n,left:r,bottom:s,right:o}=t(e);Sn(e)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const os=[["x",["left","right"],rs],["y",["top","bottom"],ss]];class Ut{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Xt(n),s=En(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,a]of os)for(const c of l)Object.defineProperty(this,c,{get:()=>{const d=a(r),h=s[o]-d;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class et{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function is(e){const{EventTarget:t}=V(e);return e instanceof t?e:Ke(e)}function Ot(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var oe;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(oe||(oe={}));function Qt(e){e.preventDefault()}function as(e){e.stopPropagation()}var k;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(k||(k={}));const jn={start:[k.Space,k.Enter],cancel:[k.Esc],end:[k.Space,k.Enter,k.Tab]},ls=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case k.Right:return{...n,x:n.x+25};case k.Left:return{...n,x:n.x-25};case k.Down:return{...n,y:n.y+25};case k.Up:return{...n,y:n.y-25}}};class An{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new et(Ke(n)),this.windowListeners=new et(V(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(oe.Resize,this.handleCancel),this.windowListeners.add(oe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(oe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Tn(r),n(de)}handleKeyDown(t){if(Et(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=jn,coordinateGetter:l=ls,scrollBehavior:a="smooth"}=s,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=r.current,h=d?{x:d.left,y:d.top}:de;this.referenceCoordinates||(this.referenceCoordinates=h);const f=l(t,{active:n,context:r.current,currentCoordinates:h});if(f){const v=yt(f,h),p={x:0,y:0},{scrollableAncestors:w}=r.current;for(const b of w){const m=t.code,{isTop:S,isRight:C,isLeft:x,isBottom:R,maxScroll:N,minScroll:E}=Nn(b),y=ns(b),D={x:Math.min(m===k.Right?y.right-y.width/2:y.right,Math.max(m===k.Right?y.left:y.left+y.width/2,f.x)),y:Math.min(m===k.Down?y.bottom-y.height/2:y.bottom,Math.max(m===k.Down?y.top:y.top+y.height/2,f.y))},M=m===k.Right&&!C||m===k.Left&&!x,O=m===k.Down&&!R||m===k.Up&&!S;if(M&&D.x!==f.x){const j=b.scrollLeft+v.x,W=m===k.Right&&j<=N.x||m===k.Left&&j>=E.x;if(W&&!v.y){b.scrollTo({left:j,behavior:a});return}W?p.x=b.scrollLeft-j:p.x=m===k.Right?b.scrollLeft-N.x:b.scrollLeft-E.x,p.x&&b.scrollBy({left:-p.x,behavior:a});break}else if(O&&D.y!==f.y){const j=b.scrollTop+v.y,W=m===k.Down&&j<=N.y||m===k.Up&&j>=E.y;if(W&&!v.x){b.scrollTo({top:j,behavior:a});return}W?p.y=b.scrollTop-j:p.y=m===k.Down?b.scrollTop-N.y:b.scrollTop-E.y,p.y&&b.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(t,Fe(yt(f,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}An.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=jn,onActivation:s}=t,{active:o}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const a=o.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function en(e){return!!(e&&"distance"in e)}function tn(e){return!!(e&&"delay"in e)}class Vt{constructor(t,n,r){var s;r===void 0&&(r=is(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:l}=o;this.props=t,this.events=n,this.document=Ke(l),this.documentListeners=new et(this.document),this.listeners=new et(r),this.windowListeners=new et(V(l)),this.initialCoordinates=(s=wt(o))!=null?s:de,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(oe.Resize,this.handleCancel),this.windowListeners.add(oe.DragStart,Qt),this.windowListeners.add(oe.VisibilityChange,this.handleCancel),this.windowListeners.add(oe.ContextMenu,Qt),this.documentListeners.add(oe.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(tn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(en(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(oe.Click,as,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(oe.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:l,options:{activationConstraint:a}}=o;if(!s)return;const c=(n=wt(t))!=null?n:de,d=yt(s,c);if(!r&&a){if(en(a)){if(a.tolerance!=null&&Ot(d,a.tolerance))return this.handleCancel();if(Ot(d,a.distance))return this.handleStart()}if(tn(a)&&Ot(d,a.tolerance))return this.handleCancel();this.handlePending(a,d);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===k.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const cs={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Wt extends Vt{constructor(t){const{event:n}=t,r=Ke(n.target);super(t,cs,r)}}Wt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const us={move:{name:"mousemove"},end:{name:"mouseup"}};var Bt;(function(e){e[e.RightClick=2]="RightClick"})(Bt||(Bt={}));class ds extends Vt{constructor(t){super(t,us,Ke(t.event.target))}}ds.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Bt.RightClick?!1:(r==null||r({event:n}),!0)}}];const Lt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class fs extends Vt{constructor(t){super(t,Lt)}static setup(){return window.addEventListener(Lt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Lt.move.name,t)};function t(){}}}fs.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var tt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(tt||(tt={}));var Ct;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ct||(Ct={}));function hs(e){let{acceleration:t,activator:n=tt.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:l=5,order:a=Ct.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:h,delta:f,threshold:v}=e;const p=ps({delta:f,disabled:!o}),[w,b]=Cr(),m=i.useRef({x:0,y:0}),S=i.useRef({x:0,y:0}),C=i.useMemo(()=>{switch(n){case tt.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case tt.DraggableRect:return s}},[n,s,c]),x=i.useRef(null),R=i.useCallback(()=>{const E=x.current;if(!E)return;const y=m.current.x*S.current.x,D=m.current.y*S.current.y;E.scrollBy(y,D)},[]),N=i.useMemo(()=>a===Ct.TreeOrder?[...d].reverse():d,[a,d]);i.useEffect(()=>{if(!o||!d.length||!C){b();return}for(const E of N){if((r==null?void 0:r(E))===!1)continue;const y=d.indexOf(E),D=h[y];if(!D)continue;const{direction:M,speed:O}=ts(E,D,C,t,v);for(const j of["x","y"])p[j][M[j]]||(O[j]=0,M[j]=0);if(O.x>0||O.y>0){b(),x.current=E,w(R,l),m.current=O,S.current=M;return}}m.current={x:0,y:0},S.current={x:0,y:0},b()},[t,R,r,b,o,l,JSON.stringify(C),JSON.stringify(p),w,d,N,h,JSON.stringify(v)])}const gs={x:{[F.Backward]:!1,[F.Forward]:!1},y:{[F.Backward]:!1,[F.Forward]:!1}};function ps(e){let{delta:t,disabled:n}=e;const r=xt(t);return it(s=>{if(n||!r||!s)return gs;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[F.Backward]:s.x[F.Backward]||o.x===-1,[F.Forward]:s.x[F.Forward]||o.x===1},y:{[F.Backward]:s.y[F.Backward]||o.y===-1,[F.Forward]:s.y[F.Forward]||o.y===1}}},[n,t,r])}function vs(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return it(s=>{var o;return t==null?null:(o=r??s)!=null?o:null},[r,t])}function ms(e,t){return i.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...o]},[]),[e,t])}var st;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(st||(st={}));var Ft;(function(e){e.Optimized="optimized"})(Ft||(Ft={}));const nn=new Map;function bs(e,t){let{dragging:n,dependencies:r,config:s}=t;const[o,l]=i.useState(null),{frequency:a,measure:c,strategy:d}=s,h=i.useRef(e),f=m(),v=rt(f),p=i.useCallback(function(S){S===void 0&&(S=[]),!v.current&&l(C=>C===null?S:C.concat(S.filter(x=>!C.includes(x))))},[v]),w=i.useRef(null),b=it(S=>{if(f&&!n)return nn;if(!S||S===nn||h.current!==e||o!=null){const C=new Map;for(let x of e){if(!x)continue;if(o&&o.length>0&&!o.includes(x.id)&&x.rect.current){C.set(x.id,x.rect.current);continue}const R=x.node.current,N=R?new Ut(c(R),R):null;x.rect.current=N,N&&C.set(x.id,N)}return C}return S},[e,o,n,f,c]);return i.useEffect(()=>{h.current=e},[e]),i.useEffect(()=>{f||p()},[n,f]),i.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),i.useEffect(()=>{f||typeof a!="number"||w.current!==null||(w.current=setTimeout(()=>{p(),w.current=null},a))},[a,f,p,...r]),{droppableRects:b,measureDroppableContainers:p,measuringScheduled:o!=null};function m(){switch(d){case st.Always:return!1;case st.BeforeDragging:return n;default:return!n}}}function _t(e,t){return it(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function xs(e,t){return _t(e,t)}function ys(e){let{callback:t,disabled:n}=e;const r=Nt(t),s=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return i.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Tt(e){let{callback:t,disabled:n}=e;const r=Nt(t),s=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return i.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function ws(e){return new Ut(Ye(e),e)}function rn(e,t,n){t===void 0&&(t=ws);const[r,s]=i.useState(null);function o(){s(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??n)!=null?d:null}const h=t(e);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const l=ys({callback(c){if(e)for(const d of c){const{type:h,target:f}=d;if(h==="childList"&&f instanceof HTMLElement&&f.contains(e)){o();break}}}}),a=Tt({callback:o});return ue(()=>{o(),e?(a==null||a.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),l==null||l.disconnect())},[e]),r}function Ss(e){const t=_t(e);return yn(e,t)}const sn=[];function Cs(e){const t=i.useRef(e),n=it(r=>e?r&&r!==sn&&e&&t.current&&e.parentNode===t.current.parentNode?r:Xt(e):sn,[e]);return i.useEffect(()=>{t.current=e},[e]),n}function Ds(e){const[t,n]=i.useState(null),r=i.useRef(e),s=i.useCallback(o=>{const l=Mt(o.target);l&&n(a=>a?(a.set(l,zt(l)),new Map(a)):null)},[]);return i.useEffect(()=>{const o=r.current;if(e!==o){l(o);const a=e.map(c=>{const d=Mt(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,zt(d)]):null}).filter(c=>c!=null);n(a.length?new Map(a):null),r.current=e}return()=>{l(e),l(o)};function l(a){a.forEach(c=>{const d=Mt(c);d==null||d.removeEventListener("scroll",s)})}},[s,e]),i.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>Fe(o,l),de):En(e):de,[e,t])}function on(e,t){t===void 0&&(t=[]);const n=i.useRef(null);return i.useEffect(()=>{n.current=null},t),i.useEffect(()=>{const r=e!==de;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?yt(e,n.current):de}function Rs(e){i.useEffect(()=>{if(!Rt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Ns(e,t){return i.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=l=>{o(l,t)},n},{}),[e,t])}function kn(e){return i.useMemo(()=>e?Jr(e):null,[e])}const an=[];function Es(e,t){t===void 0&&(t=Ye);const[n]=e,r=kn(n?V(n):null),[s,o]=i.useState(an);function l(){o(()=>e.length?e.map(c=>Rn(c)?r:new Ut(t(c),c)):an)}const a=Tt({callback:l});return ue(()=>{a==null||a.disconnect(),l(),e.forEach(c=>a==null?void 0:a.observe(c))},[e]),s}function In(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return ot(t)?t:e}function Ts(e){let{measure:t}=e;const[n,r]=i.useState(null),s=i.useCallback(d=>{for(const{target:h}of d)if(ot(h)){r(f=>{const v=t(h);return f?{...f,width:v.width,height:v.height}:v});break}},[t]),o=Tt({callback:s}),l=i.useCallback(d=>{const h=In(d);o==null||o.disconnect(),h&&(o==null||o.observe(h)),r(h?t(h):null)},[t,o]),[a,c]=bt(l);return i.useMemo(()=>({nodeRef:a,rect:n,setRef:c}),[n,a,c])}const js=[{sensor:Wt,options:{}},{sensor:An,options:{}}],As={current:{}},vt={draggable:{measure:Zt},droppable:{measure:Zt,strategy:st.WhileDragging,frequency:Ft.Optimized},dragOverlay:{measure:Ye}};class nt extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const ks={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new nt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:St},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:vt,measureDroppableContainers:St,windowRect:null,measuringScheduled:!1},Mn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:St,draggableNodes:new Map,over:null,measureDroppableContainers:St},lt=i.createContext(Mn),On=i.createContext(ks);function Is(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new nt}}}function Ms(e,t){switch(t.type){case z.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case z.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case z.DragEnd:case z.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case z.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new nt(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case z.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const l=new nt(e.droppable.containers);return l.set(n,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:l}}}case z.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new nt(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function Os(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=i.useContext(lt),o=xt(r),l=xt(n==null?void 0:n.id);return i.useEffect(()=>{if(!t&&!r&&o&&l!=null){if(!Et(o)||document.activeElement===o.target)return;const a=s.get(l);if(!a)return;const{activatorNode:c,node:d}=a;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const h of[c.current,d.current]){if(!h)continue;const f=Nr(h);if(f){f.focus();break}}})}},[r,t,s,l,o]),null}function Ln(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...r}),n):n}function Ls(e){return i.useMemo(()=>({draggable:{...vt.draggable,...e==null?void 0:e.draggable},droppable:{...vt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...vt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Ps(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const o=i.useRef(!1),{x:l,y:a}=typeof s=="boolean"?{x:s,y:s}:s;ue(()=>{if(!l&&!a||!t){o.current=!1;return}if(o.current||!r)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const h=n(d),f=yn(h,r);if(l||(f.x=0),a||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const v=Sn(d);v&&v.scrollBy({top:f.y,left:f.x})}},[t,l,a,r,n])}const jt=i.createContext({...de,scaleX:1,scaleY:1});var Ne;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ne||(Ne={}));const zs=i.memo(function(t){var n,r,s,o;let{id:l,accessibility:a,autoScroll:c=!0,children:d,sensors:h=js,collisionDetection:f=Vr,measuring:v,modifiers:p,...w}=t;const b=i.useReducer(Ms,void 0,Is),[m,S]=b,[C,x]=Ir(),[R,N]=i.useState(Ne.Uninitialized),E=R===Ne.Initialized,{draggable:{active:y,nodes:D,translate:M},droppable:{containers:O}}=m,j=y!=null?D.get(y):null,W=i.useRef({initial:null,translated:null}),$=i.useMemo(()=>{var U;return y!=null?{id:y,data:(U=j==null?void 0:j.data)!=null?U:As,rect:W}:null},[y,j]),q=i.useRef(null),[ie,Te]=i.useState(null),[X,Me]=i.useState(null),_=rt(w,Object.values(w)),je=at("DndDescribedBy",l),pe=i.useMemo(()=>O.getEnabled(),[O]),B=Ls(v),{droppableRects:ae,measureDroppableContainers:te,measuringScheduled:ne}=bs(pe,{dragging:E,dependencies:[M.x,M.y],config:B.droppable}),H=vs(D,y),Oe=i.useMemo(()=>X?wt(X):null,[X]),G=Wn(),re=xs(H,B.draggable.measure);Ps({activeNode:y!=null?D.get(y):null,config:G.layoutShiftCompensation,initialRect:re,measure:B.draggable.measure});const A=rn(H,B.draggable.measure,re),ye=rn(H?H.parentElement:null),J=i.useRef({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ve=O.getNodeFor((n=J.current.over)==null?void 0:n.id),le=Ts({measure:B.dragOverlay.measure}),we=(r=le.nodeRef.current)!=null?r:H,me=E?(s=le.rect)!=null?s:A:null,ct=!!(le.nodeRef.current&&le.rect),ut=Ss(ct?null:A),Xe=kn(we?V(we):null),fe=Cs(E?ve??H:null),Le=Es(fe),Pe=Ln(p,{transform:{x:M.x-ut.x,y:M.y-ut.y,scaleX:1,scaleY:1},activatorEvent:X,active:$,activeNodeRect:A,containerNodeRect:ye,draggingNodeRect:me,over:J.current.over,overlayNodeRect:le.rect,scrollableAncestors:fe,scrollableAncestorRects:Le,windowRect:Xe}),dt=Oe?Fe(Oe,M):null,Ue=Ds(fe),g=on(Ue),T=on(Ue,[A]),I=Fe(Pe,g),P=me?Hr(me,Pe):null,K=$&&P?f({active:$,collisionRect:P,droppableRects:ae,droppableContainers:pe,pointerCoordinates:dt}):null,Se=Yr(K,"id"),[ce,ze]=i.useState(null),Ae=ct?Pe:Fe(Pe,T),At=Wr(Ae,(o=ce==null?void 0:ce.rect)!=null?o:null,A),ke=i.useRef(null),Ht=i.useCallback((U,Z)=>{let{sensor:Q,options:Ce}=Z;if(q.current==null)return;const se=D.get(q.current);if(!se)return;const ee=U.nativeEvent,he=new Q({active:q.current,activeNode:se,event:ee,options:Ce,context:J,onAbort(Y){if(!D.get(Y))return;const{onDragAbort:ge}=_.current,be={id:Y};ge==null||ge(be),C({type:"onDragAbort",event:be})},onPending(Y,De,ge,be){if(!D.get(Y))return;const{onDragPending:We}=_.current,Re={id:Y,constraint:De,initialCoordinates:ge,offset:be};We==null||We(Re),C({type:"onDragPending",event:Re})},onStart(Y){const De=q.current;if(De==null)return;const ge=D.get(De);if(!ge)return;const{onDragStart:be}=_.current,Ve={activatorEvent:ee,active:{id:De,data:ge.data,rect:W}};Je.unstable_batchedUpdates(()=>{be==null||be(Ve),N(Ne.Initializing),S({type:z.DragStart,initialCoordinates:Y,active:De}),C({type:"onDragStart",event:Ve}),Te(ke.current),Me(ee)})},onMove(Y){S({type:z.DragMove,coordinates:Y})},onEnd:Be(z.DragEnd),onCancel:Be(z.DragCancel)});ke.current=he;function Be(Y){return async function(){const{active:ge,collisions:be,over:Ve,scrollAdjustedTranslate:We}=J.current;let Re=null;if(ge&&We){const{cancelDrop:_e}=_.current;Re={activatorEvent:ee,active:ge,collisions:be,delta:We,over:Ve},Y===z.DragEnd&&typeof _e=="function"&&await Promise.resolve(_e(Re))&&(Y=z.DragCancel)}q.current=null,Je.unstable_batchedUpdates(()=>{S({type:Y}),N(Ne.Uninitialized),ze(null),Te(null),Me(null),ke.current=null;const _e=Y===z.DragEnd?"onDragEnd":"onDragCancel";if(Re){const kt=_.current[_e];kt==null||kt(Re),C({type:_e,event:Re})}})}}},[D]),Xn=i.useCallback((U,Z)=>(Q,Ce)=>{const se=Q.nativeEvent,ee=D.get(Ce);if(q.current!==null||!ee||se.dndKit||se.defaultPrevented)return;const he={active:ee};U(Q,Z.options,he)===!0&&(se.dndKit={capturedBy:Z.sensor},q.current=Ce,Ht(Q,Z))},[D,Ht]),qt=ms(h,Xn);Rs(h),ue(()=>{A&&R===Ne.Initializing&&N(Ne.Initialized)},[A,R]),i.useEffect(()=>{const{onDragMove:U}=_.current,{active:Z,activatorEvent:Q,collisions:Ce,over:se}=J.current;if(!Z||!Q)return;const ee={active:Z,activatorEvent:Q,collisions:Ce,delta:{x:I.x,y:I.y},over:se};Je.unstable_batchedUpdates(()=>{U==null||U(ee),C({type:"onDragMove",event:ee})})},[I.x,I.y]),i.useEffect(()=>{const{active:U,activatorEvent:Z,collisions:Q,droppableContainers:Ce,scrollAdjustedTranslate:se}=J.current;if(!U||q.current==null||!Z||!se)return;const{onDragOver:ee}=_.current,he=Ce.get(Se),Be=he&&he.rect.current?{id:he.id,rect:he.rect.current,data:he.data,disabled:he.disabled}:null,Y={active:U,activatorEvent:Z,collisions:Q,delta:{x:se.x,y:se.y},over:Be};Je.unstable_batchedUpdates(()=>{ze(Be),ee==null||ee(Y),C({type:"onDragOver",event:Y})})},[Se]),ue(()=>{J.current={activatorEvent:X,active:$,activeNode:H,collisionRect:P,collisions:K,droppableRects:ae,draggableNodes:D,draggingNode:we,draggingNodeRect:me,droppableContainers:O,over:ce,scrollableAncestors:fe,scrollAdjustedTranslate:I},W.current={initial:me,translated:P}},[$,H,K,P,D,we,me,ae,O,ce,fe,I]),hs({...G,delta:M,draggingRect:P,pointerCoordinates:dt,scrollableAncestors:fe,scrollableAncestorRects:Le});const Un=i.useMemo(()=>({active:$,activeNode:H,activeNodeRect:A,activatorEvent:X,collisions:K,containerNodeRect:ye,dragOverlay:le,draggableNodes:D,droppableContainers:O,droppableRects:ae,over:ce,measureDroppableContainers:te,scrollableAncestors:fe,scrollableAncestorRects:Le,measuringConfiguration:B,measuringScheduled:ne,windowRect:Xe}),[$,H,A,X,K,ye,le,D,O,ae,ce,te,fe,Le,B,ne,Xe]),Vn=i.useMemo(()=>({activatorEvent:X,activators:qt,active:$,activeNodeRect:A,ariaDescribedById:{draggable:je},dispatch:S,draggableNodes:D,over:ce,measureDroppableContainers:te}),[X,qt,$,A,S,je,D,ce,te]);return L.createElement(xn.Provider,{value:x},L.createElement(lt.Provider,{value:Vn},L.createElement(On.Provider,{value:Un},L.createElement(jt.Provider,{value:At},d)),L.createElement(Os,{disabled:(a==null?void 0:a.restoreFocus)===!1})),L.createElement(Lr,{...a,hiddenTextDescribedById:je}));function Wn(){const U=(ie==null?void 0:ie.autoScrollEnabled)===!1,Z=typeof c=="object"?c.enabled===!1:c===!1,Q=E&&!U&&!Z;return typeof c=="object"?{...c,enabled:Q}:{enabled:Q}}}),Bs=i.createContext(null),ln="button",Fs="Draggable";function $s(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const o=at(Fs),{activators:l,activatorEvent:a,active:c,activeNodeRect:d,ariaDescribedById:h,draggableNodes:f,over:v}=i.useContext(lt),{role:p=ln,roleDescription:w="draggable",tabIndex:b=0}=s??{},m=(c==null?void 0:c.id)===t,S=i.useContext(m?jt:Bs),[C,x]=bt(),[R,N]=bt(),E=Ns(l,t),y=rt(n);ue(()=>(f.set(t,{id:t,key:o,node:C,activatorNode:R,data:y}),()=>{const M=f.get(t);M&&M.key===o&&f.delete(t)}),[f,t]);const D=i.useMemo(()=>({role:p,tabIndex:b,"aria-disabled":r,"aria-pressed":m&&p===ln?!0:void 0,"aria-roledescription":w,"aria-describedby":h.draggable}),[r,p,b,m,w,h.draggable]);return{active:c,activatorEvent:a,activeNodeRect:d,attributes:D,isDragging:m,listeners:r?void 0:E,node:C,over:v,setNodeRef:x,setActivatorNodeRef:N,transform:S}}function Pn(){return i.useContext(On)}const Ks="Droppable",Ys={timeout:25};function zn(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const o=at(Ks),{active:l,dispatch:a,over:c,measureDroppableContainers:d}=i.useContext(lt),h=i.useRef({disabled:n}),f=i.useRef(!1),v=i.useRef(null),p=i.useRef(null),{disabled:w,updateMeasurementsFor:b,timeout:m}={...Ys,...s},S=rt(b??r),C=i.useCallback(()=>{if(!f.current){f.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{d(Array.isArray(S.current)?S.current:[S.current]),p.current=null},m)},[m]),x=Tt({callback:C,disabled:w||!l}),R=i.useCallback((D,M)=>{x&&(M&&(x.unobserve(M),f.current=!1),D&&x.observe(D))},[x]),[N,E]=bt(R),y=rt(t);return i.useEffect(()=>{!x||!N.current||(x.disconnect(),f.current=!1,x.observe(N.current))},[N,x]),i.useEffect(()=>(a({type:z.RegisterDroppable,element:{id:r,key:o,disabled:n,node:N,rect:v,data:y}}),()=>a({type:z.UnregisterDroppable,key:o,id:r})),[r]),i.useEffect(()=>{n!==h.current.disabled&&(a({type:z.SetDroppableDisabled,id:r,key:o,disabled:n}),h.current.disabled=n)},[r,o,n,a]),{active:l,rect:v,isOver:(c==null?void 0:c.id)===r,node:N,over:c,setNodeRef:E}}function Xs(e){let{animation:t,children:n}=e;const[r,s]=i.useState(null),[o,l]=i.useState(null),a=xt(n);return!n&&!r&&a&&s(a),ue(()=>{if(!o)return;const c=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(c==null||d==null){s(null);return}Promise.resolve(t(d,o)).then(()=>{s(null)})},[t,r,o]),L.createElement(L.Fragment,null,n,r?i.cloneElement(r,{ref:l}):null)}const Us={x:0,y:0,scaleX:1,scaleY:1};function Vs(e){let{children:t}=e;return L.createElement(lt.Provider,{value:Mn},L.createElement(jt.Provider,{value:Us},t))}const Ws={position:"fixed",touchAction:"none"},_s=e=>Et(e)?"transform 250ms ease":void 0,Hs=i.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:o,className:l,rect:a,style:c,transform:d,transition:h=_s}=e;if(!a)return null;const f=s?d:{...d,scaleX:1,scaleY:1},v={...Ws,width:a.width,height:a.height,top:a.top,left:a.left,transform:Ee.Transform.toString(f),transformOrigin:s&&r?Fr(r,a):void 0,transition:typeof h=="function"?h(r):h,...c};return L.createElement(n,{className:l,style:v,ref:t},o)}),qs=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:o,className:l}=e;if(o!=null&&o.active)for(const[a,c]of Object.entries(o.active))c!==void 0&&(s[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,c));if(o!=null&&o.dragOverlay)for(const[a,c]of Object.entries(o.dragOverlay))c!==void 0&&r.node.style.setProperty(a,c);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(const[c,d]of Object.entries(s))n.node.style.setProperty(c,d);l!=null&&l.active&&n.node.classList.remove(l.active)}},Gs=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Ee.Transform.toString(t)},{transform:Ee.Transform.toString(n)}]},Js={duration:250,easing:"ease",keyframes:Gs,sideEffects:qs({styles:{active:{opacity:"0"}}})};function Zs(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return Nt((o,l)=>{if(t===null)return;const a=n.get(o);if(!a)return;const c=a.node.current;if(!c)return;const d=In(l);if(!d)return;const{transform:h}=V(l).getComputedStyle(l),f=wn(h);if(!f)return;const v=typeof t=="function"?t:Qs(t);return Tn(c,s.draggable.measure),v({active:{id:o,data:a.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:l,rect:s.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function Qs(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...Js,...e};return o=>{let{active:l,dragOverlay:a,transform:c,...d}=o;if(!t)return;const h={x:a.rect.left-l.rect.left,y:a.rect.top-l.rect.top},f={scaleX:c.scaleX!==1?l.rect.width*c.scaleX/a.rect.width:1,scaleY:c.scaleY!==1?l.rect.height*c.scaleY/a.rect.height:1},v={x:c.x-h.x,y:c.y-h.y,...f},p=s({...d,active:l,dragOverlay:a,transform:{initial:c,final:v}}),[w]=p,b=p[p.length-1];if(JSON.stringify(w)===JSON.stringify(b))return;const m=r==null?void 0:r({active:l,dragOverlay:a,...d}),S=a.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise(C=>{S.onfinish=()=>{m==null||m(),C()}})}}let cn=0;function eo(e){return i.useMemo(()=>{if(e!=null)return cn++,cn},[e])}const to=L.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:o,modifiers:l,wrapperElement:a="div",className:c,zIndex:d=999}=e;const{activatorEvent:h,active:f,activeNodeRect:v,containerNodeRect:p,draggableNodes:w,droppableContainers:b,dragOverlay:m,over:S,measuringConfiguration:C,scrollableAncestors:x,scrollableAncestorRects:R,windowRect:N}=Pn(),E=i.useContext(jt),y=eo(f==null?void 0:f.id),D=Ln(l,{activatorEvent:h,active:f,activeNodeRect:v,containerNodeRect:p,draggingNodeRect:m.rect,over:S,overlayNodeRect:m.rect,scrollableAncestors:x,scrollableAncestorRects:R,transform:E,windowRect:N}),M=_t(v),O=Zs({config:r,draggableNodes:w,droppableContainers:b,measuringConfiguration:C}),j=M?m.setRef:void 0;return L.createElement(Vs,null,L.createElement(Xs,{animation:O},f&&y?L.createElement(Hs,{key:y,id:f.id,ref:j,as:a,activatorEvent:h,adjustScale:t,className:c,transition:o,rect:M,style:{zIndex:d,...s},transform:D},n):null))});function Bn(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function no(e,t){return e.reduce((n,r,s)=>{const o=t.get(r);return o&&(n[s]=o),n},Array(e.length))}function ht(e){return e!==null&&e>=0}function ro(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function so(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Fn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const o=Bn(t,r,n),l=t[s],a=o[s];return!a||!l?null:{x:a.left-l.left,y:a.top-l.top,scaleX:a.width/l.width,scaleY:a.height/l.height}},gt={scaleX:1,scaleY:1},oo=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:l}=e;const a=(t=o[n])!=null?t:r;if(!a)return null;if(s===n){const d=o[l];return d?{x:0,y:n<l?d.top+d.height-(a.top+a.height):d.top-a.top,...gt}:null}const c=io(o,s,n);return s>n&&s<=l?{x:0,y:-a.height-c,...gt}:s<n&&s>=l?{x:0,y:a.height+c,...gt}:{x:0,y:0,...gt}};function io(e,t,n){const r=e[t],s=e[t-1],o=e[t+1];return r?n<t?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const $n="Sortable",Kn=L.createContext({activeIndex:-1,containerId:$n,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Fn,disabled:{draggable:!1,droppable:!1}});function ao(e){let{children:t,id:n,items:r,strategy:s=Fn,disabled:o=!1}=e;const{active:l,dragOverlay:a,droppableRects:c,over:d,measureDroppableContainers:h}=Pn(),f=at($n,n),v=a.rect!==null,p=i.useMemo(()=>r.map(E=>typeof E=="object"&&"id"in E?E.id:E),[r]),w=l!=null,b=l?p.indexOf(l.id):-1,m=d?p.indexOf(d.id):-1,S=i.useRef(p),C=!ro(p,S.current),x=m!==-1&&b===-1||C,R=so(o);ue(()=>{C&&w&&h(p)},[C,p,w,h]),i.useEffect(()=>{S.current=p},[p]);const N=i.useMemo(()=>({activeIndex:b,containerId:f,disabled:R,disableTransforms:x,items:p,overIndex:m,useDragOverlay:v,sortedRects:no(p,c),strategy:s}),[b,f,R.draggable,R.droppable,x,p,m,c,v,s]);return L.createElement(Kn.Provider,{value:N},t)}const lo=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return Bn(n,r,s).indexOf(t)},co=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:o,newIndex:l,previousItems:a,previousContainerId:c,transition:d}=e;return!d||!r||a!==o&&s===l?!1:n?!0:l!==s&&t===c},uo={duration:200,easing:"ease"},Yn="transform",fo=Ee.Transition.toString({property:Yn,duration:0,easing:"linear"}),ho={roleDescription:"sortable"};function go(e){let{disabled:t,index:n,node:r,rect:s}=e;const[o,l]=i.useState(null),a=i.useRef(n);return ue(()=>{if(!t&&n!==a.current&&r.current){const c=s.current;if(c){const d=Ye(r.current,{ignoreTransform:!0}),h={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(h.x||h.y)&&l(h)}}n!==a.current&&(a.current=n)},[t,n,r,s]),i.useEffect(()=>{o&&l(null)},[o]),o}function po(e){let{animateLayoutChanges:t=co,attributes:n,disabled:r,data:s,getNewIndex:o=lo,id:l,strategy:a,resizeObserverConfig:c,transition:d=uo}=e;const{items:h,containerId:f,activeIndex:v,disabled:p,disableTransforms:w,sortedRects:b,overIndex:m,useDragOverlay:S,strategy:C}=i.useContext(Kn),x=vo(r,p),R=h.indexOf(l),N=i.useMemo(()=>({sortable:{containerId:f,index:R,items:h},...s}),[f,s,R,h]),E=i.useMemo(()=>h.slice(h.indexOf(l)),[h,l]),{rect:y,node:D,isOver:M,setNodeRef:O}=zn({id:l,data:N,disabled:x.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...c}}),{active:j,activatorEvent:W,activeNodeRect:$,attributes:q,setNodeRef:ie,listeners:Te,isDragging:X,over:Me,setActivatorNodeRef:_,transform:je}=$s({id:l,data:N,attributes:{...ho,...n},disabled:x.draggable}),pe=Sr(O,ie),B=!!j,ae=B&&!w&&ht(v)&&ht(m),te=!S&&X,ne=te&&ae?je:null,Oe=ae?ne??(a??C)({rects:b,activeNodeRect:$,activeIndex:v,overIndex:m,index:R}):null,G=ht(v)&&ht(m)?o({id:l,items:h,activeIndex:v,overIndex:m}):R,re=j==null?void 0:j.id,A=i.useRef({activeId:re,items:h,newIndex:G,containerId:f}),ye=h!==A.current.items,J=t({active:j,containerId:f,isDragging:X,isSorting:B,id:l,index:R,items:h,newIndex:A.current.newIndex,previousItems:A.current.items,previousContainerId:A.current.containerId,transition:d,wasDragging:A.current.activeId!=null}),ve=go({disabled:!J,index:R,node:D,rect:y});return i.useEffect(()=>{B&&A.current.newIndex!==G&&(A.current.newIndex=G),f!==A.current.containerId&&(A.current.containerId=f),h!==A.current.items&&(A.current.items=h)},[B,G,f,h]),i.useEffect(()=>{if(re===A.current.activeId)return;if(re!=null&&A.current.activeId==null){A.current.activeId=re;return}const we=setTimeout(()=>{A.current.activeId=re},50);return()=>clearTimeout(we)},[re]),{active:j,activeIndex:v,attributes:q,data:N,rect:y,index:R,newIndex:G,items:h,isOver:M,isSorting:B,isDragging:X,listeners:Te,node:D,overIndex:m,over:Me,setNodeRef:pe,setActivatorNodeRef:_,setDroppableNodeRef:O,setDraggableNodeRef:ie,transform:ve??Oe,transition:le()};function le(){if(ve||ye&&A.current.newIndex===R)return fo;if(!(te&&!Et(W)||!d)&&(B||J))return Ee.Transition.toString({...d,property:Yn})}}function vo(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}k.Down,k.Right,k.Up,k.Left;const un=[{value:"deadline",label:"Prazo (mais prximo)"},{value:"priority",label:"Prioridade (Alta  Baixa)"},{value:"title",label:"Ttulo (A  Z)"},{value:"client",label:"Cliente (A  Z)"}],dn={alta:0,media:1,baixa:2};function fn(e,t){return[...e].sort((n,r)=>{switch(t){case"deadline":return!n.dueDate&&!r.dueDate?0:n.dueDate?r.dueDate?n.dueDate.localeCompare(r.dueDate):-1:1;case"priority":return(dn[n.priority]??1)-(dn[r.priority]??1);case"title":return n.title.localeCompare(r.title,"pt-BR");case"client":return(n.client??"").localeCompare(r.client??"","pt-BR");default:return 0}})}const mo={client:!0,dueDate:!0,priority:!0,subtasks:!0,tags:!0,description:!1},hn={client:"Cliente",dueDate:"Data de entrega",priority:"Prioridade",subtasks:"Subtarefas",tags:"Tags",description:"Descrio"},pt=["pendente","agendado","em_andamento","em_tramite","concluida","cancelada"],$t=i.memo(function({task:t,cardFields:n,today:r,isExpanded:s,onToggleExpand:o,onToggleSubtask:l,onEdit:a,onDelete:c,showStatus:d,isDragging:h,isOverlay:f}){const v=t.subtasks.filter(m=>m.completed).length,p=t.subtasks.length,w=p>0?Math.round(v/p*100):0,b=t.dueDate&&t.dueDate<r&&t.status!=="concluida"&&t.status!=="cancelada";return u.jsx(gn,{className:Qe("transition-shadow duration-150",h&&"opacity-40",f&&"shadow-xl ring-2 ring-primary/30 rotate-[2deg]",b&&"border-destructive/50"),children:u.jsxs(pn,{className:"p-3",children:[u.jsxs("div",{className:"flex items-start gap-2",children:[!f&&u.jsx(yr,{className:"w-4 h-4 text-muted-foreground mt-0.5 shrink-0 cursor-grab active:cursor-grabbing"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 mb-1 flex-wrap",children:[n.priority&&u.jsx(Ze,{variant:"secondary",className:`text-[10px] ${or[t.priority]}`,children:Pt[t.priority]}),d&&u.jsx(Ze,{variant:"secondary",className:`text-[10px] ${vn[t.status]}`,children:mt[t.status]}),b&&u.jsx(Ze,{variant:"destructive",className:"text-[10px]",children:"Atrasada"})]}),u.jsx("p",{className:"font-medium text-sm",children:t.title}),n.description&&t.description&&u.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:t.description}),u.jsxs("div",{className:"flex flex-wrap gap-3 mt-1 text-xs text-muted-foreground",children:[n.client&&t.client&&u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(fr,{className:"w-3 h-3"}),t.client]}),n.dueDate&&t.dueDate&&u.jsxs("span",{className:Qe("flex items-center gap-1",b&&"text-destructive font-medium"),children:[u.jsx(hr,{className:"w-3 h-3"}),new Date(t.dueDate+"T12:00:00").toLocaleDateString("pt-BR")]})]})]}),!f&&u.jsxs("div",{className:"flex gap-1 shrink-0",children:[u.jsx(Ie,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>a==null?void 0:a(t),children:u.jsx(gr,{className:"w-3.5 h-3.5"})}),u.jsx(Ie,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive",onClick:()=>c(t.id),children:u.jsx(pr,{className:"w-3.5 h-3.5"})})]})]}),n.subtasks&&p>0&&!f&&u.jsxs("div",{className:"mt-2",children:[u.jsxs("button",{className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors w-full",onClick:()=>o(t.id),children:[s?u.jsx(vr,{className:"w-3 h-3"}):u.jsx(mr,{className:"w-3 h-3"}),u.jsxs("span",{children:[v,"/",p," subtarefas"]}),u.jsx("div",{className:"flex-1 mx-2 bg-muted rounded-full h-1.5",children:u.jsx("div",{className:"bg-primary rounded-full h-1.5 transition-all",style:{width:`${w}%`}})}),u.jsxs("span",{className:"text-[10px]",children:[w,"%"]})]}),s&&u.jsx("div",{className:"mt-2 space-y-1 pl-4",children:t.subtasks.map(m=>u.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer hover:bg-muted/50 rounded p-1 -ml-1",children:[u.jsx(er,{checked:m.completed,onCheckedChange:()=>l(t.id,m.id)}),u.jsx("span",{className:Qe(m.completed&&"line-through text-muted-foreground"),children:m.title})]},m.id))})]}),n.tags&&t.tags&&t.tags.length>0&&!f&&u.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:t.tags.map(m=>u.jsx(Ze,{variant:"outline",className:"text-[10px]",children:m},m))})]})})});function bo(e){const{attributes:t,listeners:n,setNodeRef:r,transform:s,transition:o,isDragging:l}=po({id:e.task.id}),a={transform:Ee.Transform.toString(s),transition:o};return u.jsx("div",{ref:r,style:a,...t,...n,children:u.jsx($t,{...e,isDragging:l})})}function xo({status:e,tasks:t,isOver:n,cardFields:r,today:s,expandedTasks:o,onToggleExpand:l,onToggleSubtask:a,onEdit:c,onDelete:d}){const h=i.useMemo(()=>t.map(v=>v.id),[t]),{setNodeRef:f}=zn({id:e});return u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(Ze,{variant:"secondary",className:vn[e],children:mt[e]}),u.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.length,")"]})]}),u.jsx("div",{ref:f,"data-column-status":e,className:Qe("space-y-3 min-h-[400px] p-2 rounded-lg transition-colors duration-150",n?"bg-primary/10 border-2 border-dashed border-primary/40":"bg-muted/30 border-2 border-transparent"),children:u.jsx(ao,{items:h,strategy:oo,children:t.length===0?u.jsx("p",{className:Qe("text-xs text-center py-8 transition-colors",n?"text-primary font-medium":"text-muted-foreground"),children:n?" Soltar aqui":"Vazio"}):t.map(v=>u.jsx(bo,{task:v,cardFields:r,today:s,isExpanded:o.has(v.id),onToggleExpand:l,onToggleSubtask:a,onEdit:c,onDelete:d},v.id))})})]})}function li(){var Ue;const{tasks:e,setTasks:t,loading:n,syncing:r,error:s,lastSync:o,sync:l,updateTaskStatus:a,deleteTask:c,createTask:d,updateTask:h,createSubtask:f,updateSubtask:v,deleteSubtask:p}=_n(),{projects:w}=Hn(),[b,m]=i.useState(!1),[S,C]=i.useState(null),[x,R]=i.useState([]),[N,E]=i.useState("kanban"),[y,D]=i.useState(""),[M,O]=i.useState("all"),[j,W]=i.useState("all"),[$,q]=i.useState("all"),[ie,Te]=i.useState("all"),[X,Me]=i.useState(new Set),[_,je]=i.useState(mo),[pe,B]=i.useState(null),[ae,te]=i.useState(null),[ne,H]=i.useState("deadline");i.useEffect(()=>{e.length>0&&R(e)},[e]);const Oe=i.useMemo(()=>[...new Set(x.map(g=>g.client).filter(Boolean))],[x]),G=i.useMemo(()=>{const g=x.filter(T=>{if(y&&!T.title.toLowerCase().includes(y.toLowerCase())||M!=="all"&&T.status!==M||j!=="all"&&T.priority!==j||$!=="all"&&T.client!==$)return!1;if(ie!=="all"){const I=w.find(P=>P.id===ie);if(I&&T.client!==I.name)return!1}return!0});return fn(g,ne)},[x,y,M,j,$,ie,w,ne]),re=i.useMemo(()=>pe?x.find(g=>g.id===pe):null,[pe,x]),A=i.useMemo(()=>{const g=new Date;return`${g.getFullYear()}-${String(g.getMonth()+1).padStart(2,"0")}-${String(g.getDate()).padStart(2,"0")}`},[]),ye=i.useCallback(g=>{Me(T=>{const I=new Set(T);return I.has(g)?I.delete(g):I.add(g),I})},[]),J=i.useCallback((g,T)=>{R(I=>I.map(P=>P.id===g?{...P,subtasks:P.subtasks.map(K=>K.id===T?{...K,completed:!K.completed}:K)}:P))},[]),ve=i.useCallback(g=>{c(g),R(T=>T.filter(I=>I.id!==g))},[c]),le=i.useCallback(g=>{je(T=>({...T,[g]:!T[g]}))},[]),we=i.useCallback(()=>{C(null),m(!0)},[]),me=i.useCallback(g=>{C(g),m(!0)},[]),ct=i.useCallback(async(g,T,I)=>{T?await d({title:g.title,deadline:g.deadline,priority:g.priority,status:g.status,clientName:g.clientName,assignee:g.assignee,description:g.description}):I&&await h(I,{title:g.title,deadline:g.deadline,priority:g.priority,status:g.status,clientName:g.clientName,assignee:g.assignee,description:g.description})},[d,h]),ut=zr(Pr(Wt,{activationConstraint:{distance:8}}));i.useCallback(g=>{const T=x.find(I=>I.id===g);return T==null?void 0:T.status},[x]);const Xe=i.useCallback(g=>{B(g.active.id)},[]),fe=i.useCallback(g=>{const{over:T}=g;if(!T){te(null);return}const I=T.id,P=x.find(Se=>Se.id===I),K=P?P.status:pt.includes(I)?I:null;te(K)},[x]),Le=i.useCallback(g=>{const{active:T,over:I}=g;if(B(null),te(null),!I)return;const P=T.id,K=I.id;if(P===K)return;const Se=x.find(Ae=>Ae.id===P);if(!Se)return;const ce=x.find(Ae=>Ae.id===K),ze=ce?ce.status:pt.includes(K)?K:Se.status;Se.status!==ze&&(R(Ae=>{const At=Ae.map(ke=>ke.id===P?{...ke,status:ze}:ke);return fn(At,ne)}),a(P,ze))},[x,a,ne]),Pe=i.useCallback(()=>{B(null),te(null)},[]),dt=i.useMemo(()=>{const g={};return pt.forEach(T=>{g[T]=[]}),G.forEach(T=>{g[T.status]&&g[T.status].push(T)}),g},[G]);return u.jsxs(qn,{title:"Tarefas",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(cr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),u.jsx(Zn,{placeholder:"Buscar tarefa...",value:y,onChange:g=>D(g.target.value),className:"pl-9"})]}),u.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[u.jsxs(He,{value:M,onValueChange:O,children:[u.jsx(qe,{className:"w-[130px]",children:u.jsx(ft,{placeholder:"Status"})}),u.jsxs(Ge,{children:[u.jsx(xe,{value:"all",children:"Todos"}),Object.keys(mt).map(g=>u.jsx(xe,{value:g,children:mt[g]},g))]})]}),u.jsxs(He,{value:j,onValueChange:W,children:[u.jsx(qe,{className:"w-[110px]",children:u.jsx(ft,{placeholder:"Prioridade"})}),u.jsxs(Ge,{children:[u.jsx(xe,{value:"all",children:"Todas"}),Object.keys(Pt).map(g=>u.jsx(xe,{value:g,children:Pt[g]},g))]})]}),u.jsxs(He,{value:$,onValueChange:q,children:[u.jsx(qe,{className:"w-[140px]",children:u.jsx(ft,{placeholder:"Cliente"})}),u.jsxs(Ge,{children:[u.jsx(xe,{value:"all",children:"Todos"}),Oe.map(g=>u.jsx(xe,{value:g,children:g},g))]})]}),u.jsxs(He,{value:ie,onValueChange:Te,children:[u.jsxs(qe,{className:"w-[150px]",children:[u.jsx(ur,{className:"w-3.5 h-3.5 mr-1 text-muted-foreground"}),u.jsx(ft,{placeholder:"Projeto"})]}),u.jsxs(Ge,{children:[u.jsx(xe,{value:"all",children:"Todos"}),w.map(g=>u.jsx(xe,{value:g.id,children:g.name},g.id))]})]}),u.jsxs(He,{value:ne,onValueChange:g=>H(g),children:[u.jsxs(qe,{className:"w-[44px] sm:w-[170px] gap-1.5",children:[u.jsx(br,{className:"w-3.5 h-3.5 shrink-0 text-muted-foreground"}),u.jsx("span",{className:"hidden sm:inline truncate",children:(Ue=un.find(g=>g.value===ne))==null?void 0:Ue.label})]}),u.jsx(Ge,{children:un.map(g=>u.jsx(xe,{value:g.value,children:g.label},g.value))})]}),u.jsxs(nr,{children:[u.jsx(rr,{asChild:!0,children:u.jsxs(Ie,{variant:"outline",size:"sm",className:"gap-1.5",children:[u.jsx(wr,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Campos"})]})}),u.jsx(sr,{className:"w-56",align:"end",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-sm font-medium mb-2",children:"Mostrar nos cards"}),Object.keys(hn).map(g=>u.jsxs("div",{className:"flex items-center justify-between py-1",children:[u.jsx(tr,{htmlFor:`field-${g}`,className:"text-sm cursor-pointer",children:hn[g]}),u.jsx(Qn,{id:`field-${g}`,checked:_[g],onCheckedChange:()=>le(g)})]},g))]})})]}),(M!=="all"||j!=="all"||$!=="all"||ie!=="all"||y)&&u.jsx(Ie,{variant:"ghost",size:"sm",onClick:()=>{O("all"),W("all"),q("all"),Te("all"),D("")},className:"text-xs gap-1",children:" Limpar filtros"}),u.jsxs("div",{className:"flex border border-border rounded-md overflow-hidden",children:[u.jsx(Ie,{variant:N==="list"?"default":"ghost",size:"sm",onClick:()=>E("list"),className:"rounded-none",children:u.jsx(dr,{className:"w-4 h-4"})}),u.jsx(Ie,{variant:N==="kanban"?"default":"ghost",size:"sm",onClick:()=>E("kanban"),className:"rounded-none",children:u.jsx(xr,{className:"w-4 h-4"})})]}),u.jsx(ir,{syncing:r,lastSync:o,onSync:l,error:s}),u.jsxs(Ie,{size:"sm",onClick:we,className:"gap-1.5",children:[u.jsx(Gn,{className:"w-4 h-4"})," Nova Tarefa"]})]})]}),u.jsx(Jn,{open:b,onOpenChange:m,task:S,onSave:ct,onCreateSubtask:f,onUpdateSubtask:v,onDeleteSubtask:p}),n?N==="list"?u.jsx(ar,{}):u.jsx(lr,{}):N==="list"?u.jsx("div",{className:"space-y-3",children:G.length===0?u.jsx(gn,{children:u.jsx(pn,{className:"p-8 text-center text-muted-foreground",children:"Nenhuma tarefa encontrada."})}):G.map(g=>u.jsx($t,{task:g,cardFields:_,today:A,isExpanded:X.has(g.id),onToggleExpand:ye,onToggleSubtask:J,onEdit:me,onDelete:ve,showStatus:!0},g.id))}):u.jsxs(zs,{sensors:ut,collisionDetection:Xr,onDragStart:Xe,onDragOver:fe,onDragEnd:Le,onDragCancel:Pe,children:[u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:pt.map(g=>u.jsx(xo,{status:g,tasks:dt[g],isOver:ae===g&&pe!==null,cardFields:_,today:A,expandedTasks:X,onToggleExpand:ye,onToggleSubtask:J,onEdit:me,onDelete:ve},g))}),u.jsx(to,{dropAnimation:{duration:200,easing:"cubic-bezier(0.18, 0.67, 0.6, 1.22)"},children:re?u.jsx("div",{className:"w-[260px]",children:u.jsx($t,{task:re,cardFields:_,today:A,isExpanded:!1,onToggleExpand:()=>{},onToggleSubtask:()=>{},onDelete:()=>{},isOverlay:!0})}):null})]})]})}export{li as default};
