import{u as i,a as n}from"./useMutation-S1XUc4T2.js";import{a7 as u,E as a}from"./index-CRbxGvyX.js";function g(){return i({queryKey:["categories"],queryFn:async()=>{const{data:r,error:e}=await a.from("mladv_categories").select("*").order("name",{ascending:!0});if(e)throw e;return r||[]}})}function l(r){return i({queryKey:["post-categories",r],queryFn:async()=>{const{data:e,error:t}=await a.from("mladv_post_categories").select("category_id, mladv_categories(*)").eq("post_id",r);if(t)throw t;return(e==null?void 0:e.map(o=>o.mladv_categories).filter(Boolean))||[]},enabled:!!r})}function y(){const r=u();return n({mutationFn:async({postId:e,categoryIds:t})=>{if(await a.from("mladv_post_categories").delete().eq("post_id",e),t.length>0){const{error:s}=await a.from("mladv_post_categories").insert(t.map(o=>({post_id:e,category_id:o})));if(s)throw s}},onSuccess:(e,{postId:t})=>{r.invalidateQueries({queryKey:["post-categories",t]}),r.invalidateQueries({queryKey:["posts"]})}})}export{y as a,l as b,g as u};
