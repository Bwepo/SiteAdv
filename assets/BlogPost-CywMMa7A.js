import{a as S,j as e,r as x,c as u,m as h,L as v,P as M,E as R,A as z,F as $,N as H}from"./index-COma9mtY.js";import{U as b,W as U,L as w}from"./Layout-BaUyH9WU.js";import{S as V}from"./SEOHead-kGAnQErh.js";import{C as W}from"./calendar-BdDLHeCx.js";import{C as X}from"./clock-BAYTCqTx.js";import{L as Y,P as Z}from"./PostContent-CiZl7Ict.js";import{B as f}from"./button-C1OkAfBA.js";import{S as q}from"./share-2-CShOdB2C.js";import{L as G}from"./linkedin-BfUTup4u.js";import{C as J}from"./check-CntCDWWJ.js";import{L as K}from"./link-C3cCFmxa.js";import{b as Q,c as ee}from"./usePosts-BmNEaL1n.js";import{S as g}from"./skeleton-NJxENkMe.js";import{A as te}from"./arrow-right-BoP9PvgW.js";import{I as C}from"./input-D-MLC4-a.js";import{T as ae,S as se}from"./textarea-CG1-psXA.js";import{L as j}from"./label-DRut47Q2.js";import{g as re,u as ie,a as oe,b as ne,c as le,d as ce}from"./usePostInteractions-Cf0bfQH3.js";import{H as me}from"./heart-DiFOhf7h.js";import{M as de}from"./mail-BgFgtXFe.js";import{L as he}from"./loader-circle-BzHqWbtU.js";import{C as xe}from"./chevron-down-7VwLw36M.js";import{C as ue}from"./chevron-up-BNXGuJaK.js";import{N as pe}from"./NewsletterForm-CSrEtUFp.js";import{u as ge}from"./usePostViews-Dx0cBc9r.js";import{A as fe}from"./arrow-left-DUbtuzVk.js";import"./chevron-right-BfBOoy8r.js";import"./useMutation-DBN1NvE6.js";import"./useNewsletter-BxkrXg6i.js";import"./circle-check-big-22u8SOr0.js";import"./types-3c7sL9OC.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=S("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=S("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);function be(a){return a?new Date(a).toLocaleDateString("pt-BR",{day:"numeric",month:"long",year:"numeric"}):""}function Ne(a){if(!a)return 0;const t=a.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(Boolean).length;return Math.max(1,Math.ceil(t/200))}function ye({post:a}){const t=Ne(a.content_html);return e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-serif font-bold text-foreground mb-6 leading-tight",children:a.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 md:gap-6 text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:a.author_name})]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("time",{dateTime:a.published_at||"",children:be(a.published_at)})]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsxs("span",{children:[t," min de leitura"]})]})]})]})}function k({url:a,title:t,className:r}){const[i,o]=x.useState(!1),s=encodeURIComponent(a),c=encodeURIComponent(t),d={whatsapp:`https://wa.me/?text=${c}%20${s}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${s}`,twitter:`https://twitter.com/intent/tweet?text=${c}&url=${s}`},l=async()=>{try{await navigator.clipboard.writeText(a),o(!0),setTimeout(()=>o(!1),2e3)}catch(m){console.error("Failed to copy:",m)}},n={hover:{scale:1.05},tap:{scale:.95}};return e.jsxs("div",{className:u("flex items-center gap-3",r),children:[e.jsxs("span",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(q,{className:"w-4 h-4"}),"Compartilhar:"]}),e.jsx(h.a,{href:d.whatsapp,target:"_blank",rel:"noopener noreferrer",variants:n,whileHover:"hover",whileTap:"tap",className:"p-3 rounded-full bg-[#25D366]/10 text-[#25D366] hover:bg-[#25D366]/20 transition-colors","aria-label":"Compartilhar no WhatsApp",children:e.jsx(U,{className:"w-6 h-6"})}),e.jsx(h.a,{href:d.linkedin,target:"_blank",rel:"noopener noreferrer",variants:n,whileHover:"hover",whileTap:"tap",className:"p-3 rounded-full bg-[#0077B5]/10 text-[#0077B5] hover:bg-[#0077B5]/20 transition-colors","aria-label":"Compartilhar no LinkedIn",children:e.jsx(G,{className:"w-6 h-6"})}),e.jsx(h.a,{href:d.twitter,target:"_blank",rel:"noopener noreferrer",variants:n,whileHover:"hover",whileTap:"tap",className:"p-3 rounded-full bg-foreground/10 text-foreground hover:bg-foreground/20 transition-colors","aria-label":"Compartilhar no Twitter/X",children:e.jsx(ve,{className:"w-6 h-6"})}),e.jsx(h.div,{variants:n,whileHover:"hover",whileTap:"tap",children:e.jsx(f,{variant:"outline",size:"icon",onClick:l,className:u("rounded-full h-12 w-12",i&&"bg-green-500/10 border-green-500/50 text-green-500"),"aria-label":"Copiar link",children:i?e.jsx(J,{className:"w-5 h-5"}):e.jsx(K,{className:"w-5 h-5"})})})]})}function we(a){return a?new Date(a).toLocaleDateString("pt-BR",{day:"numeric",month:"short",year:"numeric"}):""}function Ce({currentSlug:a,className:t}){const{data:r,isLoading:i}=Q({published:!0,pageSize:4}),o=(r==null?void 0:r.posts.filter(s=>s.slug!==a).slice(0,3))||[];return i?e.jsxs("div",{className:u("space-y-4",t),children:[e.jsx("h3",{className:"text-xl font-serif font-semibold",children:"Outros Artigos"}),e.jsx("div",{className:"grid gap-4",children:[1,2,3].map(s=>e.jsx(g,{className:"h-24"},s))})]}):o.length===0?null:e.jsxs("aside",{className:t,children:[e.jsx("h3",{className:"text-xl font-serif font-semibold mb-4",children:"Outros Artigos"}),e.jsx("div",{className:"grid gap-4",children:o.map(s=>e.jsxs(v,{to:`/blog/${s.slug}`,className:u("group block p-4 rounded-lg border border-border/50","bg-card/30 backdrop-blur-sm","hover:border-primary/30 hover:bg-card/50","transition-all duration-200"),children:[e.jsx("h4",{className:"font-medium text-foreground group-hover:text-primary transition-colors line-clamp-2 mb-2",children:s.title}),e.jsx("span",{className:"text-sm text-muted-foreground",children:we(s.published_at)})]},s.id))}),e.jsxs(v,{to:"/blog",className:"inline-flex items-center text-primary hover:underline mt-4 text-sm font-medium",children:["Ver todos os artigos",e.jsx(te,{className:"w-4 h-4 ml-1"})]})]})}var ke="Separator",L="horizontal",Le=["horizontal","vertical"],T=x.forwardRef((a,t)=>{const{decorative:r,orientation:i=L,...o}=a,s=_e(i)?i:L,d=r?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return e.jsx(M.div,{"data-orientation":s,...d,...o,ref:t})});T.displayName=ke;function _e(a){return Le.includes(a)}var I=T;const E=x.forwardRef(({className:a,orientation:t="horizontal",decorative:r=!0,...i},o)=>e.jsx(I,{ref:o,decorative:r,orientation:t,className:u("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",a),...i}));E.displayName=I.displayName;const A=x.createContext(null);function F(){const a=x.useContext(A);if(!a)throw new Error("PostInteractions components must be used within PostInteractionsProvider.");return a}function Pe({postId:a,children:t}){const{toast:r}=R(),i=re(),{data:o=0}=ie(a),{data:s=!1}=oe(a,i),c=ne(),{data:d=[]}=le(a),l=ce(),[n,m]=x.useState(!1),[p,N]=x.useState({author_name:"",author_email:"",content:""}),D=async()=>{try{await c.mutateAsync({postId:a,fingerprint:i})}catch{r({title:"Erro",description:"Não foi possível registrar sua curtida.",variant:"destructive"})}},O=async y=>{if(y.preventDefault(),!p.author_name.trim()||!p.author_email.trim()||!p.content.trim()){r({title:"Campos obrigatórios",description:"Preencha todos os campos para enviar seu comentário.",variant:"destructive"});return}try{await l.mutateAsync({post_id:a,...p}),N({author_name:"",author_email:"",content:""}),m(!1),r({title:"Comentário enviado!",description:"Seu comentário será publicado após aprovação."})}catch{r({title:"Erro ao enviar",description:"Não foi possível enviar seu comentário. Tente novamente.",variant:"destructive"})}},B=x.useMemo(()=>({likeCount:o,hasLiked:s,isTogglingLike:c.isPending,onToggleLike:D,comments:d,commentCount:d.length,showCommentForm:n,setShowCommentForm:m,commentForm:p,setCommentForm:N,onSubmitComment:O,isSubmittingComment:l.isPending}),[o,s,c.isPending,d,n,p,l.isPending]);return e.jsx(A.Provider,{value:B,children:t})}function _({className:a,commentSectionId:t="post-comments"}){const{likeCount:r,hasLiked:i,isTogglingLike:o,onToggleLike:s,commentCount:c,setShowCommentForm:d}=F(),l=()=>{d(!0);const n=document.getElementById(t);n&&n.scrollIntoView({behavior:"smooth",block:"start"})};return e.jsxs("div",{className:u("flex items-center gap-4",a),children:[e.jsxs(f,{variant:"outline",size:"lg",onClick:s,disabled:o,className:u("group transition-all duration-300",i&&"border-red-500/50 bg-red-500/10 hover:bg-red-500/20"),children:[e.jsx(me,{className:u("w-5 h-5 transition-all",i?"fill-red-500 text-red-500":"group-hover:text-red-500")}),e.jsx("span",{className:"font-medium",children:r})]}),e.jsxs(f,{variant:"outline",size:"lg",onClick:l,children:[e.jsx(je,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:c})]})]})}function Se({className:a,id:t="post-comments"}){const{comments:r,showCommentForm:i,setShowCommentForm:o,commentForm:s,setCommentForm:c,onSubmitComment:d,isSubmittingComment:l}=F();return e.jsxs("div",{className:u("space-y-6",a),id:t,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Comentários"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",r.length,")"]})]}),e.jsx(z,{children:i&&e.jsx(h.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:e.jsxs("form",{onSubmit:d,className:"space-y-4 p-4 bg-muted/30 rounded-lg border border-border",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Deixe seu comentário"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"author_name",children:"Nome *"}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(C,{id:"author_name",value:s.author_name,onChange:n=>c(m=>({...m,author_name:n.target.value})),placeholder:"Seu nome",className:"pl-10",maxLength:100})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"author_email",children:"E-mail *"}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(C,{id:"author_email",type:"email",value:s.author_email,onChange:n=>c(m=>({...m,author_email:n.target.value})),placeholder:"seu@email.com",className:"pl-10",maxLength:255})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Seu e-mail não será publicado."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"content",children:"Comentário *"}),e.jsx(ae,{id:"content",value:s.content,onChange:n=>c(m=>({...m,content:n.target.value})),placeholder:"Escreva seu comentário...",rows:4,maxLength:1e3}),e.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[s.content.length,"/1000 caracteres"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{type:"submit",disabled:l,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[l?e.jsx(he,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(se,{className:"w-4 h-4 mr-2"}),"Enviar comentário"]}),e.jsx(f,{type:"button",variant:"ghost",onClick:()=>o(!1),children:"Cancelar"})]})]})})}),r.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(E,{}),e.jsx("div",{className:"space-y-4",children:r.map((n,m)=>e.jsx(Te,{comment:n,index:m},n.id))})]})]})}function Te({comment:a,index:t}){const r=i=>new Date(i).toLocaleDateString("pt-BR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsx(h.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:t*.1},className:"p-4 bg-card rounded-lg border border-border",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center shrink-0",children:e.jsx(b,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-medium text-foreground",children:a.author_name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"•"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:r(a.created_at)})]}),e.jsx("p",{className:"mt-2 text-foreground/90 whitespace-pre-wrap",children:a.content})]})]})})}function Ie(a){return a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"").slice(0,50)}function Ee(a){const t=[],r=/<h([23])[^>]*>([^<]+)<\/h[23]>/gi;let i;for(;(i=r.exec(a))!==null;){const o=parseInt(i[1]),s=i[2].trim();s&&t.push({id:Ie(s),text:s,level:o})}return t}function P({html:a,className:t}){const[r,i]=x.useState(""),[o,s]=x.useState(!1),c=x.useMemo(()=>Ee(a),[a]);x.useEffect(()=>{if(c.length===0)return;const l=new IntersectionObserver(n=>{n.forEach(m=>{m.isIntersecting&&i(m.target.id)})},{rootMargin:"-80px 0px -80% 0px",threshold:0});return c.forEach(({id:n})=>{const m=document.getElementById(n);m&&l.observe(m)}),()=>{l.disconnect()}},[c]);const d=l=>{const n=document.getElementById(l);if(n){const p=n.getBoundingClientRect().top+window.pageYOffset+-100;window.scrollTo({top:p,behavior:"smooth"})}};return c.length<2?null:e.jsxs(h.nav,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},className:u("bg-card/50 backdrop-blur-sm border border-border/50 rounded-lg p-4",t),"aria-label":"Índice do artigo",children:[e.jsxs("button",{onClick:()=>s(!o),className:"flex items-center justify-between w-full text-sm font-medium text-foreground mb-3",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4 text-primary"}),"Índice"]}),o?e.jsx(xe,{className:"w-4 h-4"}):e.jsx(ue,{className:"w-4 h-4"})]}),!o&&e.jsx(h.ul,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-1",children:c.map(l=>e.jsx("li",{className:u(l.level===3&&"ml-3"),children:e.jsx("button",{onClick:()=>d(l.id),className:u("block w-full text-left text-sm py-1.5 px-2 rounded-md transition-colors duration-200","hover:bg-muted hover:text-foreground",r===l.id?"text-primary font-medium bg-primary/5 border-l-2 border-primary":"text-muted-foreground",l.level===3&&"text-xs"),children:l.text})},l.id))})]})}const dt=()=>{const{slug:a}=$(),{data:t,isLoading:r,isError:i}=ee(a||"");if(ge((t==null?void 0:t.id)||""),r)return e.jsx(w,{children:e.jsx("article",{className:"py-16 md:py-20",children:e.jsxs("div",{className:"container mx-auto px-4 md:px-6 max-w-4xl",children:[e.jsx(g,{className:"h-4 w-32 mb-8"}),e.jsx(g,{className:"h-12 w-full mb-4"}),e.jsx(g,{className:"h-12 w-3/4 mb-6"}),e.jsxs("div",{className:"flex gap-4 mb-8",children:[e.jsx(g,{className:"h-4 w-24"}),e.jsx(g,{className:"h-4 w-24"}),e.jsx(g,{className:"h-4 w-24"})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(c=>e.jsx(g,{className:"h-4 w-full"},c))})]})})});if(i||!t)return e.jsx(H,{to:"/404",replace:!0});const o=`https://marianalima.adv.br/blog/${t.slug}`,s={"@context":"https://schema.org","@type":"Article",headline:t.title,description:t.excerpt||t.title,image:t.cover_image_url||"https://marianalima.adv.br/og-image.png",datePublished:t.published_at,dateModified:t.updated_at,author:{"@type":"Person",name:t.author_name,url:"https://marianalima.adv.br/sobre"},publisher:{"@type":"Organization",name:"Mariana Lima Advocacia",logo:{"@type":"ImageObject",url:"https://marianalima.adv.br/logo-horizontal.png"}},mainEntityOfPage:{"@type":"WebPage","@id":o}};return e.jsxs(e.Fragment,{children:[e.jsx(V,{title:t.title,description:t.excerpt||`Leia "${t.title}" no blog de Mariana Lima Advocacia.`,canonical:o,type:"article",image:t.cover_image_url||"/og-image.png",structuredData:s}),e.jsx(w,{children:e.jsx("article",{className:"pt-24 md:pt-28 pb-16 md:pb-20",children:e.jsx("div",{className:"container mx-auto px-4 md:px-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx(h.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.3},className:"max-w-4xl",children:e.jsx(v,{to:"/blog",children:e.jsxs(f,{variant:"ghost",className:"mb-8 -ml-4 text-muted-foreground hover:text-foreground",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Voltar para o blog"]})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"flex-1 max-w-4xl",children:[t.cover_image_url&&e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"aspect-video overflow-hidden rounded-xl mb-8",children:e.jsx("img",{src:t.cover_image_url,alt:t.title,className:"w-full h-full object-cover"})}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx(ye,{post:t})}),e.jsxs(Pe,{postId:t.id,children:[e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-8 pb-8 border-b border-border/50",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(k,{url:o,title:t.title}),e.jsx(_,{})]})}),e.jsx("div",{className:"lg:hidden mb-8",children:e.jsx(P,{html:t.content_html})}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsx(Z,{html:t.content_html})}),e.jsx("div",{className:"mt-12",children:e.jsx(pe,{})}),e.jsx("div",{className:"mt-12 pt-8 border-t border-border/50",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(k,{url:o,title:t.title}),e.jsx(_,{})]})}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mt-12 pt-8 border-t border-border/50",children:e.jsx(Se,{})})]}),e.jsx("div",{className:"mt-16 pt-8 border-t border-border/50",children:e.jsx(Ce,{currentSlug:t.slug})})]}),e.jsx("aside",{className:"hidden lg:block w-72 flex-shrink-0",children:e.jsx("div",{className:"sticky top-24",children:e.jsx(P,{html:t.content_html})})})]})]})})})})]})};export{dt as default};
