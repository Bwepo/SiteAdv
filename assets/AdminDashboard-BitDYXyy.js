import{V as H,W,r as i,j as e,L as l,e as j}from"./index--VkK_6xW.js";import{A as G,P as S,L as D,M as J}from"./AdminLayout-BBlkaNDR.js";import{b as Q}from"./usePosts-CztFNCJC.js";import{e as X}from"./usePostInteractions-BY1plIZc.js";import{a as Z}from"./usePostViews-CqSNquAa.js";import{a as ee}from"./useNewsletter-CZ7vjW4U.js";import{A as se}from"./AgendaEventSheet-B4x4yKq3.js";import{T as te}from"./TarefaSheet-Cug_4LEq.js";import{B as g}from"./button-BNnjEdlp.js";import{C as a,c as r,a as C,b as T}from"./card-axwwrsGo.js";import{S as M}from"./skeleton-BEXVZZmk.js";import{B as o}from"./badge-Dt7x2lqa.js";import{E as ae,a as re,T as R,b as k,c as ie,d as le}from"./crmTypes-DP3iBdIv.js";import{C as A}from"./calendar-BhjfDFmQ.js";import{B as V}from"./building-2-C13_ASX7.js";import{C as ne}from"./chart-column-CuGYe-Xy.js";import{A as E}from"./arrow-right-CWRhKa-J.js";import{C as de}from"./circle-check-byz_LTwl.js";import{F as ce}from"./file-text-pDZcbHxd.js";import{M as oe}from"./menu-DPTdwRDk.js";import{E as me}from"./external-link-C-azHpw7.js";import"./dialog-BGwx2yHr.js";import"./index-ftCiKN76.js";import"./heart-c2aXVGpz.js";import"./sparkles-ABMq_5Qg.js";import"./house-DmKTZdQW.js";import"./users-l5ClWeL2.js";import"./useMutation-Cn7_PTXz.js";import"./form-1xsfOPso.js";import"./label-DOlvlUnr.js";import"./input-XXLJvWnV.js";import"./textarea-pt7U9Oic.js";import"./select-BEs-C6p3.js";import"./index-wqxuX6B3.js";import"./index-Scap3YIl.js";import"./chevron-up-BuO1GvTp.js";import"./check-DII1-jKf.js";import"./loader-circle-D38fRm10.js";import"./types-C9wiu8_K.js";import"./separator-BOrQnTwg.js";import"./alert-dialog-DdJCDIQ2.js";import"./chevron-right-8Qug1pP7.js";import"./circle-DpjQhG_t.js";import"./clock-DCptoS8H.js";import"./pencil-DtrytP-J.js";import"./trash-2-CTyzDFyk.js";function L(m){return new Date(m+"T12:00:00").toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})}const ns=()=>{const m=new Date,n=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")}`,{events:p,loading:I,createEvent:O,updateEvent:xe}=H(),{tasks:d,loading:$,createTask:P,updateTask:pe}=W(),[z,f]=i.useState(!1),[Y,N]=i.useState(!1),K=i.useCallback(async(s,t)=>{t&&await O(s),f(!1)},[O]),F=i.useCallback(async(s,t)=>{t&&await P({title:s.title,deadline:s.deadline,priority:s.priority,status:s.status,clientName:s.clientName,assignee:s.assignee,description:s.description}),N(!1)},[P]),{data:c,isLoading:he}=Q(),{data:b}=X(),{data:U}=Z(),{data:v}=ee(),w=i.useMemo(()=>p.filter(s=>s.date>=n&&s.status!=="cancelado").sort((s,t)=>s.date.localeCompare(t.date)).slice(0,6),[p,n]),y=i.useMemo(()=>d.filter(s=>s.status!=="concluida"&&s.status!=="cancelada"),[d]),x=i.useMemo(()=>d.filter(s=>s.dueDate&&s.dueDate<n&&s.status!=="concluida"&&s.status!=="cancelada"),[d,n]),h=i.useMemo(()=>p.filter(s=>{var t;return((t=s.client)==null?void 0:t.toLowerCase().includes("bosi"))&&s.date>=n&&s.status!=="cancelado"}).sort((s,t)=>s.date.localeCompare(t.date)).slice(0,4),[p,n]),u=i.useMemo(()=>d.filter(s=>{var t;return((t=s.client)==null?void 0:t.toLowerCase().includes("bosi"))&&s.status!=="concluida"&&s.status!=="cancelada"}),[d]),q=(c==null?void 0:c.filter(s=>s.published).length)||0,_=(b==null?void 0:b.filter(s=>!s.reviewed_at).length)||0,B=I||$;return e.jsxs(G,{title:"Dashboard",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-5",children:[e.jsxs(g,{size:"sm",onClick:()=>f(!0),children:[e.jsx(S,{className:"w-4 h-4 mr-1.5"}),"Novo Compromisso"]}),e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>N(!0),children:[e.jsx(S,{className:"w-4 h-4 mr-1.5"}),"Nova Tarefa"]})]}),e.jsxs("div",{className:"grid gap-3 grid-cols-2 lg:grid-cols-4 mb-6",children:[e.jsx(l,{to:"/admin/agenda",children:e.jsx(a,{className:"h-full hover:bg-muted/50 transition-colors cursor-pointer",children:e.jsx(r,{className:"pt-5 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-lg bg-blue-500/10",children:e.jsx(A,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold leading-none",children:w.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pr贸ximos"})]})]})})})}),e.jsx(l,{to:"/admin/tarefas",children:e.jsx(a,{className:j("h-full transition-all cursor-pointer hover:bg-muted/50",x.length>0&&"ring-2 ring-red-500/50"),children:e.jsx(r,{className:"pt-5 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-lg bg-amber-500/10",children:e.jsx(D,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold leading-none",children:y.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Tarefas pendentes"}),x.length>0&&e.jsxs("p",{className:"text-[11px] text-red-500 font-medium",children:[x.length," atrasadas"]})]})]})})})}),e.jsx(l,{to:"/admin/bosi",children:e.jsx(a,{className:"h-full hover:bg-muted/50 transition-colors cursor-pointer",children:e.jsx(r,{className:"pt-5 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-lg bg-emerald-500/10",children:e.jsx(V,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold leading-none",children:u.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"BOSI pendentes"}),e.jsxs("p",{className:"text-[11px] text-muted-foreground",children:[h.length," compromissos"]})]})]})})})}),e.jsx(a,{children:e.jsx(r,{className:"pt-5 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-lg bg-purple-500/10",children:e.jsx(ne,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold leading-none",children:U??0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Visualiza莽玫es"}),e.jsxs("p",{className:"text-[11px] text-muted-foreground",children:[q," posts pub."]})]})]})})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2 mb-6",children:[e.jsxs(a,{children:[e.jsxs(C,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsxs(T,{className:"text-base flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"})," Pr贸ximos Compromissos"]}),e.jsxs(l,{to:"/admin/agenda",className:"text-xs text-primary hover:underline flex items-center gap-1",children:["Ver agenda ",e.jsx(E,{className:"w-3 h-3"})]})]}),e.jsx(r,{children:B?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsx(M,{className:"h-14 w-full"},s))}):w.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(A,{className:"w-10 h-10 text-muted-foreground/40 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum compromisso pr贸ximo."})]}):e.jsx("div",{className:"space-y-2",children:w.map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-border hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"text-center min-w-[3rem]",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:L(s.date)}),s.time&&e.jsx("p",{className:"text-sm font-bold",children:s.time})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.title}),s.client&&e.jsx("p",{className:"text-[11px] text-muted-foreground",children:s.client})]}),e.jsx(o,{variant:"secondary",className:`text-[10px] shrink-0 ${ae[s.type]}`,children:re[s.type]})]},s.id))})})]}),e.jsxs(a,{children:[e.jsxs(C,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsxs(T,{className:"text-base flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"})," Tarefas Pendentes",x.length>0&&e.jsxs(o,{variant:"destructive",className:"text-[10px] px-1.5",children:[x.length," atrasadas"]})]}),e.jsxs(l,{to:"/admin/tarefas",className:"text-xs text-primary hover:underline flex items-center gap-1",children:["Ver todas ",e.jsx(E,{className:"w-3 h-3"})]})]}),e.jsx(r,{children:B?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsx(M,{className:"h-14 w-full"},s))}):y.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(de,{className:"w-10 h-10 text-muted-foreground/40 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Todas as tarefas conclu铆das "})]}):e.jsx("div",{className:"space-y-2",children:y.slice(0,6).map(s=>{const t=s.dueDate&&s.dueDate<n&&s.status!=="concluida"&&s.status!=="cancelada";return e.jsx("div",{className:j("p-3 rounded-lg border border-border hover:bg-muted/30 transition-colors",t&&"border-destructive/50"),children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx(o,{variant:"secondary",className:`text-[10px] px-1.5 py-0 ${R[s.priority]}`,children:k[s.priority]}),t&&e.jsx(o,{variant:"destructive",className:"text-[10px] px-1.5 py-0",children:"Atrasada"})]}),e.jsx("p",{className:"text-sm font-medium truncate",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[s.client&&e.jsx("span",{className:"text-[11px] text-muted-foreground",children:s.client}),s.dueDate&&e.jsxs("span",{className:j("text-[11px]",t?"text-red-500":"text-muted-foreground"),children:["Prazo: ",L(s.dueDate)]})]})]}),e.jsx(o,{variant:"secondary",className:`text-[10px] shrink-0 ${ie[s.status]}`,children:le[s.status]})]})},s.id)})})})]})]}),(h.length>0||u.length>0)&&e.jsxs(a,{className:"mb-6",children:[e.jsxs(C,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsxs(T,{className:"text-base flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"})," BOSI Empreendimentos"]}),e.jsxs(l,{to:"/admin/bosi",className:"text-xs text-primary hover:underline flex items-center gap-1",children:["Painel completo ",e.jsx(E,{className:"w-3 h-3"})]})]}),e.jsx(r,{children:e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[h.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Pr贸ximos compromissos"}),e.jsx("div",{className:"space-y-1.5",children:h.map(s=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-xs text-muted-foreground min-w-[3.5rem]",children:L(s.date)}),e.jsx("span",{className:"truncate",children:s.title})]},s.id))})]}),u.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Tarefas pendentes"}),e.jsx("div",{className:"space-y-1.5",children:u.slice(0,4).map(s=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(o,{variant:"secondary",className:`text-[9px] px-1 py-0 ${R[s.priority]}`,children:k[s.priority]}),e.jsx("span",{className:"truncate",children:s.title})]},s.id))})]})]})})]}),e.jsxs("div",{className:"border-t border-border pt-6",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-4 uppercase tracking-wider",children:"Conte煤do & Blog"}),e.jsxs("div",{className:"grid gap-3 grid-cols-2 lg:grid-cols-4 mb-4",children:[e.jsx(a,{children:e.jsx(r,{className:"pt-4 pb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold leading-none",children:(c==null?void 0:c.length)||0}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Posts"})]})]})})}),e.jsx(l,{to:"/admin/comments",children:e.jsx(a,{className:j("h-full hover:bg-muted/50 cursor-pointer",_>0&&"ring-1 ring-orange-500/40"),children:e.jsx(r,{className:"pt-4 pb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold leading-none",children:_}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Coment. pendentes"})]})]})})})}),e.jsx(l,{to:"/admin/newsletter",children:e.jsx(a,{className:"h-full hover:bg-muted/50 cursor-pointer",children:e.jsx(r,{className:"pt-4 pb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold leading-none",children:(v==null?void 0:v.active)??0}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Inscritos"})]})]})})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{to:"/admin/posts/new",children:e.jsxs(g,{size:"sm",variant:"outline",className:"text-xs",children:[e.jsx(S,{className:"w-3.5 h-3.5 mr-1"})," Novo Post"]})}),e.jsx("a",{href:"/blog",target:"_blank",rel:"noopener noreferrer",children:e.jsx(g,{variant:"ghost",size:"sm",className:"text-xs",children:e.jsx(me,{className:"w-3.5 h-3.5"})})})]})]})]}),e.jsx(se,{open:z,onOpenChange:f,event:null,onSave:K}),e.jsx(te,{open:Y,onOpenChange:N,task:null,onSave:F})]})};export{ns as default};
