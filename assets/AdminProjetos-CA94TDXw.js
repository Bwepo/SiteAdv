import{c as Ee,r as t,s as w,a0 as Re,U as Be,h as N,j as e,m as L,e as x,X as Ve}from"./index-DMoDefBM.js";import{b as ze,a as He,u as Ge}from"./crmTypes-Jrrif-Dp.js";import{B as O,P as qe}from"./badge-DKwebHgW.js";import{U as je,P as ye}from"./TipTapEditor-qFaYTIZk.js";import{S as $e}from"./skeleton-Bt9tmkYU.js";import{B as E}from"./button-C-_vi0Zu.js";import{S as ie,a as ne,b as le,c as ce,d as M}from"./select-PWtQO5cS.js";import{D as Je,a as Xe,c as Ke,d as We,f as Qe}from"./dialog-KCcQSkVD.js";import{A as Ye,a as Ze,b as ea,c as aa,d as ra,e as sa,f as ta,g as oa}from"./alert-dialog-Dwsde9f3.js";import{I as we}from"./input-Y7beki80.js";import{L as D}from"./label-x6DvL_8e.js";import{P as ia}from"./ProjectOverview-NugF1mn-.js";import{C as na}from"./ClientSelect-Dk7VBKpP.js";import la from"./AdminAgenda-DgEnCNsp.js";import{A as Ne,L as ca}from"./AdminTarefas-Bm6Fbcao.js";import{F as Ce}from"./folder-kanban-D2K5q8L6.js";import{L as da}from"./list-DpBoCmHO.js";import{C as ma}from"./chevron-left-GO5H-YPH.js";import{L as de}from"./loader-circle-CR4jeWnI.js";import{L as _e}from"./list-todo-D0oiM9Nc.js";import{C as pe}from"./calendar-CXdjtBSH.js";import{C as pa}from"./circle-check-NuSOVJni.js";import{C as ua}from"./clipboard-list-Cul3ZOtN.js";import"./useQuery-BKj-FdUb.js";import"./index-DdaZ2Gi8.js";import"./dropdown-menu-Dxs-tVgc.js";import"./index-Mb_RR8zD.js";import"./index-BrdMehLm.js";import"./index-BiCqcnA4.js";import"./chevron-right-CLiENeM8.js";import"./check-ZbOhGp0s.js";import"./tabs-rCI8W9GL.js";import"./link-BdBvK7l2.js";import"./quote-CcsHd9tK.js";import"./trash-2-BX_Tlfhj.js";import"./index-DSXxtbLd.js";import"./chevron-up-CTBfXa5V.js";import"./index-Dvt9Gg1r.js";import"./card-CFby4uYn.js";import"./trending-up-BLpEmWl4.js";import"./clock-fNLOOJMo.js";import"./triangle-alert-2Khe53JW.js";import"./popover-BAVLbdYH.js";import"./search-PnSbNlhL.js";import"./CrmSkeletons-DK1dMPSP.js";import"./checkbox-C3FN9mBd.js";import"./pencil-DPqYqtPE.js";import"./arrow-up-down-DyZU4QCt.js";import"./scroll-area-DztrTPIU.js";import"./AgendaEventSheet-DsDAAX7v.js";import"./form-BzZ46ziT.js";import"./DatePickerInput-D9Xvgrmg.js";import"./pt-BR-ZY5I46FX.js";import"./sheet-BmOc_PMV.js";import"./textarea-D327tOrQ.js";import"./useCrmFieldOptions-D9OMJUG4.js";import"./useMutation-C1VZbnj6.js";import"./types-3c7sL9OC.js";import"./users-wjD39e6n.js";import"./map-pin-Ce6iR3u-.js";import"./formatters-Cwti1LYi.js";import"./download-B-8ObNJD.js";import"./file-text-DbbzuEx8.js";import"./purify.es-D9RiKzGB.js";import"./TarefaSheet-BEPToviC.js";import"./separator-B4lZzcWp.js";import"./ProcessosList-BZCcc4ob.js";import"./scale-B0vBjEm0.js";import"./user-HcYyGCG6.js";import"./switch-CC5auWRL.js";import"./sortable.esm-CvirDEZ5.js";import"./filter-iUKVfskv.js";import"./circle-x-By9w3-Sk.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=Ee("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Ee("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),me="mladv-project-covers",ke=800,Se=600,ga=.8,ha=5*1024*1024;async function fa(i){return new Promise((h,C)=>{const p=new Image,_=URL.createObjectURL(i);p.onload=()=>{URL.revokeObjectURL(_);let{width:f,height:l}=p;if(f>ke||l>Se){const m=Math.min(ke/f,Se/l);f=Math.round(f*m),l=Math.round(l*m)}const o=document.createElement("canvas");o.width=f,o.height=l;const v=o.getContext("2d");if(!v){C(new Error("Canvas não suportado"));return}v.drawImage(p,0,0,f,l),o.toBlob(m=>{if(!m){C(new Error("Falha ao comprimir imagem"));return}h(m)},"image/jpeg",ga)},p.onerror=()=>{URL.revokeObjectURL(_),C(new Error("Falha ao carregar imagem para compressão"))},p.src=_})}async function va(i){try{return{blob:await fa(i),contentType:"image/jpeg"}}catch(h){return console.warn("[CoverUpload] Compressão falhou, enviando original:",h),{blob:i,contentType:i.type}}}function ba(){const[i,h]=t.useState(!1),[C,p]=t.useState(0);return{uploadCover:async(l,o)=>{h(!0),p(0);try{if(!["image/jpeg","image/png","image/webp","image/gif"].includes(o.type))throw new Error("Tipo não permitido. Use JPEG, PNG, WebP ou GIF.");if(o.size>ha)throw new Error("Arquivo muito grande. Máximo de 5MB.");p(10);const{blob:m,contentType:y}=await va(o);p(40);const H=y==="image/jpeg"?"jpg":o.name.split(".").pop()||"jpg",k=`covers/${`${l}-${Date.now()}.${H}`}`,{error:b}=await w.storage.from(me).upload(k,m,{contentType:y,cacheControl:"3600",upsert:!1});if(b)throw new Error(b.message);p(70);const{data:F}=w.storage.from(me).getPublicUrl(k),{data:g}=await w.from("mladv_crm_projetos").select("raw_fields").eq("airtable_id",l).single(),T=(g==null?void 0:g.raw_fields)||{},{error:A}=await w.from("mladv_crm_projetos").update({raw_fields:{...T,cover_url:F.publicUrl}}).eq("airtable_id",l);if(A)throw new Error(A.message);return p(100),{url:F.publicUrl,path:k}}finally{h(!1)}},removeCover:async(l,o)=>{try{const y=o.match(/\/object\/public\/mladv-project-covers\/(.+)$/);y&&await w.storage.from(me).remove([y[1]])}catch{}const{data:v}=await w.from("mladv_crm_projetos").select("raw_fields").eq("airtable_id",l).single(),m=(v==null?void 0:v.raw_fields)||{};delete m.cover_url,await w.from("mladv_crm_projetos").update({raw_fields:m}).eq("airtable_id",l)},isUploading:i,progress:C}}const z={Ativo:"bg-green-600/90 text-white border-green-600/50","Em Espera":"bg-yellow-600/90 text-white border-yellow-600/50",Concluído:"bg-blue-600/90 text-white border-blue-600/50",Cancelado:"bg-red-600/90 text-white border-red-600/50"},ja=[{id:"visao_geral",label:"Visão Geral",icon:pa},{id:"agenda",label:"Agenda",icon:pe},{id:"tarefas",label:"Tarefas",icon:ua},{id:"subtarefas",label:"Subtarefas",icon:ca}],ya=["Ativo","Em Espera","Concluído","Cancelado"],wa=["Extra","CLT","Pessoal"];function zr(){const{projects:i,loading:h,error:C,createProject:p,updateProject:_,deleteProject:f}=ze(),l=()=>{},{tasks:o,loading:v}=He(),{events:m}=Ge(),{uploadCover:y,removeCover:H,isUploading:P}=ba(),k=t.useRef(null),[b,F]=t.useState(null),[g,T]=t.useState(null),[A,R]=Re(),u=A.get("projeto")||null,S=A.get("tab")||"visao_geral",B=t.useCallback(a=>{R(s=>(a?(s.set("projeto",a),s.has("tab")||s.set("tab","visao_geral")):(s.delete("projeto"),s.delete("tab")),s),{replace:!0})},[R]),De=t.useCallback(a=>{R(s=>(s.set("tab",a),s),{replace:!0})},[R]),{prefs:Pe,updatePref:Te}=Be(),G=Pe.project_view_mode,ue=a=>Te("project_view_mode",a),[Ae,I]=t.useState(!1),[n,xe]=t.useState(null),[U,q]=t.useState(""),[$,J]=t.useState("Ativo"),[X,K]=t.useState(""),[W,Q]=t.useState(""),[Y,Z]=t.useState(""),[ge,he]=t.useState(!1),[ee,fe]=t.useState(null),ae=async(a,s)=>{try{await y(a,s),N.success("Capa atualizada!"),l()}catch(r){N.error("Erro ao enviar capa: "+r.message)}},Ie=async(a,s)=>{try{await H(a,s),N.success("Capa removida"),l()}catch(r){N.error("Erro ao remover capa: "+r.message)}},re=(a,s)=>{var r;s.stopPropagation(),F(a),(r=k.current)==null||r.click()},Ue=a=>{var r;const s=(r=a.target.files)==null?void 0:r[0];s&&b&&ae(b,s),a.target.value=""},se=t.useCallback((a,s)=>{a.preventDefault(),a.stopPropagation(),T(s)},[]),te=t.useCallback(a=>{a.preventDefault(),a.stopPropagation(),T(null)},[]),oe=t.useCallback((a,s)=>{var c;a.preventDefault(),a.stopPropagation(),T(null);const r=(c=a.dataTransfer.files)==null?void 0:c[0];r&&r.type.startsWith("image/")?ae(s,r):r&&N.error("Apenas imagens são permitidas.")},[ae]),j=t.useMemo(()=>i.find(a=>a.id===u)||null,[i,u]),ve=t.useMemo(()=>{if(!i.length||!o.length)return new Map;const a=new Map;return i.forEach(s=>{const r=o.filter(d=>d.projectId===s.id&&d.status!=="cancelada"),c=r.filter(d=>d.status==="concluida").length;a.set(s.id,{total:r.length,concluidas:c})}),a},[i,o]),Le=t.useMemo(()=>{if(!u)return{visao_geral:0,agenda:0,tarefas:0,subtarefas:0};const a=o.filter(c=>c.projectId===u),s=a.flatMap(c=>c.subtasks);return{visao_geral:0,agenda:m.filter(c=>c.projectId===u).length,tarefas:a.length,subtarefas:s.length}},[u,o,m]),Oe=()=>{xe(null),q(""),J("Ativo"),K(""),Q(""),Z(""),I(!0)},Me=a=>{xe(a),q(a.name),J(a.status||"Ativo"),K(a.tipo||""),Q(a.observacoes||""),Z(a.cliente||""),I(!0)},be=async()=>{if(U.trim()){he(!0);try{n?await _(n.id,{name:U.trim(),status:$,tipo:X||void 0,observacoes:W||void 0,cliente:Y||void 0}):await p({name:U.trim(),status:$,tipo:X||void 0,observacoes:W||void 0,cliente:Y||void 0}),I(!1)}catch(a){N.error("Erro ao salvar projeto: "+a.message)}finally{he(!1)}}},Fe=async()=>{if(ee)try{await f(ee)}catch(a){N.error("Erro ao remover projeto: "+a.message)}finally{fe(null)}};return h||v?e.jsxs("div",{className:"space-y-6 pb-20 md:pb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Projetos"}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[1,2,3,4].map(a=>e.jsx($e,{className:"h-40 w-full rounded-xl"},a))})]}):e.jsxs(L.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6 pb-20 md:pb-0",children:[e.jsx("input",{ref:k,type:"file",accept:"image/jpeg,image/png,image/webp,image/gif",onChange:Ue,className:"hidden"}),u?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(E,{variant:"ghost",size:"sm",className:"gap-1.5 text-muted-foreground hover:text-foreground",onClick:()=>B(null),children:[e.jsx(ma,{className:"h-4 w-4"}),"Voltar"]}),e.jsx("span",{className:"text-lg font-semibold text-foreground",children:j==null?void 0:j.name}),j&&e.jsx(O,{variant:"outline",className:x("text-[10px] px-1.5 py-0",z[j.status]||"bg-secondary text-secondary-foreground"),children:j.status}),e.jsx(E,{variant:"outline",size:"sm",className:"text-xs h-8 ml-auto",onClick:()=>j&&Me(j),children:"Editar projeto"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Projetos"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(O,{variant:"secondary",className:"text-xs",children:[i.length," projetos"]}),e.jsxs(E,{onClick:Oe,className:"gold-gradient text-primary-foreground shadow-md hover:opacity-90 transition-opacity",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"})," Novo Projeto"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 max-w-md",children:[e.jsx(Ce,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsxs(ie,{value:"none",onValueChange:a=>a!=="none"&&B(a),children:[e.jsx(ne,{className:"bg-background/50",children:e.jsx(le,{placeholder:"Selecionar projeto..."})}),e.jsxs(ce,{children:[e.jsx(M,{value:"none",children:"Selecionar projeto..."}),i.map(a=>e.jsx(M,{value:a.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:a.name}),e.jsx(O,{variant:"outline",className:x("text-[9px] px-1 py-0 ml-1",z[a.status]||"bg-secondary text-secondary-foreground"),children:a.status})]})},a.id))]})]})]}),e.jsxs("div",{className:"flex items-center gap-0.5 rounded-lg border border-border bg-muted/40 p-0.5",children:[e.jsx("button",{onClick:()=>ue("list"),className:x("rounded-md p-1.5 transition-colors",G==="list"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:e.jsx(da,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ue("cards"),className:x("rounded-md p-1.5 transition-colors",G==="cards"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:e.jsx(xa,{className:"h-4 w-4"})})]})]})]}),u?e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"flex items-center gap-1 rounded-2xl border border-border bg-muted/40 p-1 w-fit backdrop-blur-sm",children:ja.map(a=>{const s=S===a.id,r=a.icon;return e.jsxs("button",{onClick:()=>De(a.id),className:x("relative flex items-center gap-2 rounded-xl px-5 py-2.5 text-sm font-medium transition-all duration-200",s?"text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-background/50"),children:[s&&e.jsx(L.div,{layoutId:"project-tab-bg",className:"absolute inset-0 rounded-xl gold-gradient shadow-sm",transition:{type:"spring",bounce:.15,duration:.5}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx(r,{className:"h-4 w-4"}),a.label,a.id!=="visao_geral"&&e.jsx("span",{className:x("inline-flex items-center justify-center rounded-full px-2 py-0.5 text-[10px] font-semibold tabular-nums min-w-[22px] transition-colors",s?"bg-primary-foreground/20 text-primary-foreground":"bg-secondary text-muted-foreground"),children:Le[a.id]})]})]},a.id)})}),e.jsxs(L.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.2},children:[S==="visao_geral"&&e.jsx(ia,{projectId:u,tasks:o,events:m}),S==="agenda"&&e.jsx(la,{projectId:u,hideHeader:!0}),S==="tarefas"&&e.jsx(Ne,{projectId:u,hideHeader:!0,forceTab:"tarefas"}),S==="subtarefas"&&e.jsx(Ne,{projectId:u,hideHeader:!0,forceTab:"subtarefas"})]},`${u}-${S}`)]}):G==="list"?e.jsx("div",{className:"space-y-2",children:i.map((a,s)=>{const r=ve.get(a.id),c=r&&r.total>0?Math.round(r.concluidas/r.total*100):0;return e.jsxs(L.div,{initial:{opacity:0,x:-8},animate:{opacity:1,x:0},transition:{delay:s*.03},onClick:()=>B(a.id),className:"group flex items-center gap-4 rounded-lg border border-border bg-card p-3 cursor-pointer hover:border-primary/40 hover:bg-card/90 transition-all duration-200",children:[e.jsxs("div",{className:x("shrink-0 w-24 aspect-[4/3] rounded-md overflow-hidden border-2 bg-muted/20 flex items-center justify-center relative group/thumb transition-all",g===a.id?"border-primary border-dashed ring-2 ring-primary/30":"border-border/50"),onDragOver:d=>se(d,a.id),onDragLeave:te,onDrop:d=>oe(d,a.id),children:[a.coverUrl?e.jsx("img",{src:a.coverUrl,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/10 via-muted/30 to-muted/10 flex items-center justify-center",children:g===a.id?e.jsx(je,{className:"h-5 w-5 text-primary animate-pulse"}):e.jsx(Ce,{className:"h-5 w-5 text-accent/40"})}),e.jsx("button",{onClick:d=>re(a.id,d),className:"absolute inset-0 bg-black/50 opacity-0 group-hover/thumb:opacity-100 transition-opacity flex items-center justify-center",children:P&&b===a.id?e.jsx(de,{className:"h-4 w-4 text-white animate-spin"}):e.jsx(V,{className:"h-4 w-4 text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground truncate",children:a.name}),e.jsx(O,{variant:"outline",className:x("text-[9px] px-1.5 py-0 shrink-0",z[a.status]||"bg-secondary text-secondary-foreground"),children:a.status})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[11px] text-muted-foreground",children:[a.tipo&&e.jsx("span",{children:a.tipo}),a.observacoes&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-border",children:"•"}),e.jsx("span",{className:"truncate",children:a.observacoes})]})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-5 shrink-0",children:[e.jsxs("div",{className:"w-32 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_e,{className:"h-3 w-3"}),(r==null?void 0:r.concluidas)||0,"/",(r==null?void 0:r.total)||0]}),e.jsxs("span",{className:"font-medium",children:[c,"%"]})]}),e.jsx(ye,{value:c,className:"h-1.5"})]}),a.dataInicio&&e.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-muted-foreground whitespace-nowrap",children:[e.jsx(pe,{className:"h-3 w-3"}),new Date(a.dataInicio+"T12:00:00").toLocaleDateString("pt-BR")]})]})]},a.id)})}):e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3",children:i.map((a,s)=>{const r=ve.get(a.id),c=r&&r.total>0?Math.round(r.concluidas/r.total*100):0;return e.jsxs(L.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:s*.03},onClick:()=>B(a.id),className:x("group relative rounded-lg border-2 overflow-hidden cursor-pointer hover:border-primary/40 transition-all duration-200 aspect-[4/3] flex flex-col justify-end",g===a.id?"border-primary border-dashed ring-2 ring-primary/30":"border-border"),onDragOver:d=>se(d,a.id),onDragLeave:te,onDrop:d=>oe(d,a.id),children:[a.coverUrl?e.jsx("img",{src:a.coverUrl,alt:a.name,className:"absolute inset-0 w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-accent/8 via-card to-card"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-card via-card/60 to-transparent"}),e.jsx("button",{onClick:d=>re(a.id,d),className:"absolute top-2.5 left-2.5 z-20 rounded-full bg-black/50 p-1.5 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70",children:P&&b===a.id?e.jsx(de,{className:"h-3.5 w-3.5 text-white animate-spin"}):e.jsx(V,{className:"h-3.5 w-3.5 text-white"})}),e.jsx(O,{variant:"outline",className:x("absolute top-2.5 right-2.5 text-[11px] px-2 py-0.5 font-semibold backdrop-blur-sm shadow-sm",z[a.status]||"bg-secondary text-secondary-foreground"),children:a.status}),e.jsxs("div",{className:"relative z-10 p-3.5 space-y-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground truncate",children:a.name}),a.tipo&&e.jsx("span",{className:"text-[11px] text-muted-foreground",children:a.tipo})]}),a.observacoes&&e.jsx("p",{className:"text-[11px] text-muted-foreground line-clamp-1",children:a.observacoes}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_e,{className:"h-3 w-3"}),(r==null?void 0:r.concluidas)||0,"/",(r==null?void 0:r.total)||0," tarefas"]}),e.jsxs("span",{className:"font-medium",children:[c,"%"]})]}),e.jsx(ye,{value:c,className:"h-1.5"})]}),a.dataInicio&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-muted-foreground",children:[e.jsx(pe,{className:"h-2.5 w-2.5"}),"Início: ",new Date(a.dataInicio+"T12:00:00").toLocaleDateString("pt-BR")]})]})]},a.id)})}),e.jsx(Je,{open:Ae,onOpenChange:I,children:e.jsxs(Xe,{className:"sm:max-w-md",children:[e.jsx(Ke,{children:e.jsx(We,{children:n?"Editar Projeto":"Novo Projeto"})}),e.jsxs("div",{className:"space-y-4 py-2",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"project-name",children:"Nome do projeto"}),e.jsx(we,{id:"project-name",value:U,onChange:a=>q(a.target.value),placeholder:"Ex: EasyBR",onKeyDown:a=>a.key==="Enter"&&be(),autoFocus:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(D,{children:"Status"}),e.jsxs(ie,{value:$,onValueChange:J,children:[e.jsx(ne,{children:e.jsx(le,{})}),e.jsx(ce,{children:ya.map(a=>e.jsx(M,{value:a,children:a},a))})]})]}),e.jsxs("div",{children:[e.jsx(D,{children:"Tipo"}),e.jsxs(ie,{value:X||"__none__",onValueChange:a=>K(a==="__none__"?"":a),children:[e.jsx(ne,{children:e.jsx(le,{placeholder:"Nenhum"})}),e.jsxs(ce,{children:[e.jsx(M,{value:"__none__",children:"Nenhum"}),wa.map(a=>e.jsx(M,{value:a,children:a},a))]})]})]})]}),e.jsxs("div",{children:[e.jsx(D,{children:"Cliente"}),e.jsx(na,{value:Y,onValueChange:a=>Z(a)})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"project-obs",children:"Observações"}),e.jsx(we,{id:"project-obs",value:W,onChange:a=>Q(a.target.value),placeholder:"Notas sobre o projeto"})]}),n&&e.jsxs("div",{children:[e.jsx(D,{children:"Capa do projeto"}),e.jsxs("div",{className:x("mt-1.5 flex items-center gap-3 p-3 rounded-lg border-2 border-dashed transition-all",g===n.id?"border-primary bg-primary/5":"border-transparent"),onDragOver:a=>se(a,n.id),onDragLeave:te,onDrop:a=>oe(a,n.id),children:[n.coverUrl?e.jsxs("div",{className:"relative w-24 aspect-[4/3] rounded-md overflow-hidden border border-border",children:[e.jsx("img",{src:n.coverUrl,alt:"Capa",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>Ie(n.id,n.coverUrl),className:"absolute top-0.5 right-0.5 rounded-full bg-destructive p-0.5",children:e.jsx(Ve,{className:"h-3 w-3 text-destructive-foreground"})})]}):e.jsxs("div",{className:x("w-24 aspect-[4/3] rounded-md border-2 border-dashed flex flex-col items-center justify-center bg-muted/20 gap-1 transition-colors",g===n.id?"border-primary":"border-border"),children:[g===n.id?e.jsx(je,{className:"h-5 w-5 text-primary animate-pulse"}):e.jsx(V,{className:"h-5 w-5 text-muted-foreground/40"}),e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Arraste aqui"})]}),e.jsx(E,{type:"button",variant:"outline",size:"sm",onClick:a=>re(n.id,a),disabled:P,children:P&&b===n.id?e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"h-3.5 w-3.5 mr-1.5 animate-spin"})," Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"h-3.5 w-3.5 mr-1.5"})," ",n.coverUrl?"Trocar":"Adicionar"]})})]})]})]}),e.jsxs(Qe,{children:[e.jsx(E,{variant:"outline",onClick:()=>I(!1),children:"Cancelar"}),e.jsx(E,{onClick:be,disabled:ge||!U.trim(),className:"gold-gradient text-primary-foreground hover:opacity-90",children:ge?"Salvando...":n?"Salvar":"Criar"})]})]})}),e.jsx(Ye,{open:!!ee,onOpenChange:a=>!a&&fe(null),children:e.jsxs(Ze,{children:[e.jsxs(ea,{children:[e.jsx(aa,{children:"Remover projeto?"}),e.jsx(ra,{children:"Esta ação não pode ser desfeita. O projeto será removido permanentemente."})]}),e.jsxs(sa,{children:[e.jsx(ta,{children:"Cancelar"}),e.jsx(oa,{onClick:Fe,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remover"})]})]})})]})}export{zr as default};
