import{l as m,r as a,j as s,s as p}from"./index-CtUswwnO.js";import{S as x,L as b}from"./SEOHead-DInLUyZF.js";import{C as f,a as h,b as j,c as w}from"./card-CoLq0NeL.js";import"./button-DloSvteA.js";import"./sun-KLYd9YSl.js";import"./chevron-right-BTvq9gRs.js";import"./scale-Cm3xd-w0.js";import"./mail-DLoiSorq.js";import"./map-pin-D8KJvbxa.js";import"./arrow-right-CkWEg9tH.js";const D=()=>{const o=m(),[n,e]=a.useState("idle"),[d,i]=a.useState(!1),t=a.useMemo(()=>{var r;return((r=new URLSearchParams(o.search).get("token"))==null?void 0:r.trim())||""},[o.search]);a.useEffect(()=>{(async()=>{if(!t){e("error");return}i(!0);try{const r=atob(t),{error:c}=await p.from("mladv_newsletter_subscribers").update({unsubscribed_at:new Date().toISOString()}).eq("email",r).is("unsubscribed_at",null);if(c){console.error("Unsubscribe error:",c),e("error");return}e("success")}catch{e("error")}finally{i(!1)}})()},[t]);const u=d?"Processando seu descadastro...":n==="success"?"Descadastro confirmado.":n==="error"?"Token inválido ou já descadastrado.":"";return s.jsxs(s.Fragment,{children:[s.jsx(x,{title:"Descadastro da newsletter",description:"Confirme o descadastro da newsletter da Mariana Lima Advocacia.",canonical:"https://marianalima.adv.br/newsletter/unsubscribe"}),s.jsx(b,{children:s.jsx("section",{className:"py-20 md:py-28",children:s.jsx("div",{className:"container mx-auto px-4 md:px-6",children:s.jsxs(f,{className:"mx-auto max-w-xl",children:[s.jsx(h,{children:s.jsx(j,{children:"Newsletter"})}),s.jsx(w,{children:s.jsx("p",{className:"text-base text-foreground",children:u})})]})})})})]})};export{D as default};
