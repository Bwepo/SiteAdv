import{a as S,r as F,E as _,j as e,L as m,c as v}from"./index-5dVDhfMS.js";import{A as z,M as L,P as O}from"./AdminLayout-CoiJWOne.js";import{d as B,e as R,f as I}from"./usePosts-DKxR6Y-j.js";import{B as n}from"./button-D3NIKPLr.js";import{B as w}from"./badge-CEUSmHEM.js";import{T as H,a as $,b as y,c,d as q,e as o,A as V,f as U,g as G,h as J,i as K,j as Q,k as W,l as X}from"./alert-dialog-D8uV7XLW.js";import{D as C,a as D,b as P,c as t,d as Y}from"./dropdown-menu-CR-83TuK.js";import{E as A}from"./external-link-D9QDzst8.js";import{E as b,a as f}from"./eye-BVi20R8c.js";import{T as E}from"./trash-2-CygKbCUz.js";import{e as Z}from"./usePostInteractions-TTtpNpMP.js";import{C as u,d as j}from"./card-BjQ-TbWW.js";import{S as ee}from"./skeleton-DBoY2SiJ.js";import{F as se}from"./file-text-XHJGmdwH.js";import{C as re}from"./circle-alert-Ce6Gp5Et.js";import"./chevron-left-CiFxNMiR.js";import"./mail-ChG-cClA.js";import"./index-XR7A8t40.js";import"./Combination-Dl2AQCzc.js";import"./index-DZYzxPhz.js";import"./index-DygnP4pq.js";import"./check-BGfKTw1e.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=S("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=S("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);function g(r){return r?new Date(r).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"}function ae({posts:r,isLoading:x}){const[l,i]=F.useState(null),p=B(),d=R(),{toast:a}=_(),N=async s=>{const h=!s.published;try{await p.mutateAsync({id:s.id,published:h,published_at:h?new Date().toISOString():s.published_at}),a({title:h?"Post publicado!":"Post despublicado",description:h?"O artigo agora está visível no blog.":"O artigo foi movido para rascunhos."})}catch{a({title:"Erro",description:"Não foi possível atualizar o post.",variant:"destructive"})}},M=async()=>{if(l)try{await d.mutateAsync(l),a({title:"Post excluído",description:"O artigo foi removido permanentemente."})}catch{a({title:"Erro",description:"Não foi possível excluir o post.",variant:"destructive"})}finally{i(null)}};return r.length===0&&!x?e.jsxs("div",{className:"text-center py-12 border border-dashed border-border rounded-lg",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Nenhum post encontrado."}),e.jsx(m,{to:"/admin/posts/new",children:e.jsx(n,{children:"Criar primeiro post"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block border border-border rounded-lg overflow-hidden",children:e.jsxs(H,{children:[e.jsx($,{children:e.jsxs(y,{children:[e.jsx(c,{className:"w-[40%]",children:"Título"}),e.jsx(c,{children:"Status"}),e.jsx(c,{children:"Publicado em"}),e.jsx(c,{children:"Criado em"}),e.jsx(c,{className:"w-[100px]",children:"Ações"})]})}),e.jsx(q,{children:r.map(s=>e.jsxs(y,{children:[e.jsx(o,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground line-clamp-1",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground line-clamp-1",children:["/",s.slug]})]})}),e.jsx(o,{children:e.jsx(w,{variant:s.published?"default":"secondary",className:v(s.published?"bg-green-500/10 text-green-600 border-green-500/30":""),children:s.published?"Publicado":"Rascunho"})}),e.jsx(o,{className:"text-muted-foreground",children:g(s.published_at)}),e.jsx(o,{className:"text-muted-foreground",children:g(s.created_at)}),e.jsx(o,{children:e.jsxs(C,{children:[e.jsx(D,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"icon",children:e.jsx(k,{className:"w-4 h-4"})})}),e.jsxs(P,{align:"end",className:"bg-popover",children:[e.jsx(t,{asChild:!0,children:e.jsxs(m,{to:`/admin/posts/${s.id}/edit`,children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Editar"]})}),s.published&&e.jsx(t,{asChild:!0,children:e.jsxs("a",{href:`/blog/${s.slug}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Ver no blog"]})}),e.jsx(t,{onClick:()=>N(s),children:s.published?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Despublicar"]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Publicar"]})}),e.jsx(Y,{}),e.jsxs(t,{onClick:()=>i(s.id),className:"text-destructive focus:text-destructive",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Excluir"]})]})]})})]},s.id))})]})}),e.jsx("div",{className:"lg:hidden space-y-3",children:r.map(s=>e.jsxs("div",{className:"bg-card rounded-lg border border-border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-foreground line-clamp-2 text-sm sm:text-base",children:s.title}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:["/",s.slug]})]}),e.jsx(w,{variant:s.published?"default":"secondary",className:v("shrink-0 text-xs",s.published?"bg-green-500/10 text-green-600 border-green-500/30":""),children:s.published?"Publicado":"Rascunho"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Publicado: ",g(s.published_at)]}),e.jsxs("span",{children:["Criado: ",g(s.created_at)]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2 border-t border-border",children:[e.jsx(m,{to:`/admin/posts/${s.id}/edit`,children:e.jsxs(n,{variant:"outline",size:"sm",className:"h-8 text-xs",children:[e.jsx(T,{className:"w-3.5 h-3.5 mr-1.5"}),"Editar"]})}),e.jsx(n,{variant:"outline",size:"sm",className:"h-8 text-xs",onClick:()=>N(s),children:s.published?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-3.5 h-3.5 mr-1.5"}),"Despublicar"]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"w-3.5 h-3.5 mr-1.5"}),"Publicar"]})}),e.jsxs(C,{children:[e.jsx(D,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(k,{className:"w-4 h-4"})})}),e.jsxs(P,{align:"end",className:"bg-popover",children:[s.published&&e.jsx(t,{asChild:!0,children:e.jsxs("a",{href:`/blog/${s.slug}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Ver no blog"]})}),e.jsxs(t,{onClick:()=>i(s.id),className:"text-destructive focus:text-destructive",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Excluir"]})]})]})]})]},s.id))}),e.jsx(V,{open:!!l,onOpenChange:()=>i(null),children:e.jsxs(U,{children:[e.jsxs(G,{children:[e.jsx(J,{children:"Excluir post?"}),e.jsx(K,{children:"Esta ação não pode ser desfeita. O post será removido permanentemente."})]}),e.jsxs(Q,{children:[e.jsx(W,{children:"Cancelar"}),e.jsx(X,{onClick:M,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Excluir"})]})]})})]})}const Ae=()=>{const{data:r,isLoading:x}=I(),{data:l}=Z(),i=(r==null?void 0:r.filter(a=>a.published).length)||0,p=(r==null?void 0:r.filter(a=>!a.published).length)||0,d=(l==null?void 0:l.filter(a=>!a.approved).length)||0;return e.jsxs(z,{title:"Dashboard",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[e.jsx(u,{children:e.jsx(j,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:e.jsx(se,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:(r==null?void 0:r.length)||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de posts"})]})]})})}),e.jsx(u,{children:e.jsx(j,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-green-500/10",children:e.jsx(f,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:i}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Publicados"})]})]})})}),e.jsx(u,{children:e.jsx(j,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-yellow-500/10",children:e.jsx(b,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:p}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Rascunhos"})]})]})})}),e.jsx(m,{to:"/admin/comments",children:e.jsx(u,{className:d>0?"ring-2 ring-orange-500/50 hover:ring-orange-500/70 transition-all cursor-pointer":"hover:bg-muted/50 transition-colors cursor-pointer",children:e.jsx(j,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-orange-500/10",children:e.jsx(L,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:d}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Comentários pendentes"})]}),d>0&&e.jsx(re,{className:"w-5 h-5 text-orange-500 ml-auto animate-pulse"})]})})})})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Posts"}),e.jsx(m,{to:"/admin/posts/new",children:e.jsxs(n,{children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Novo Post"]})})]}),x?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(a=>e.jsx(ee,{className:"h-16 w-full"},a))}):e.jsx(ae,{posts:r||[]})]})};export{Ae as default};
