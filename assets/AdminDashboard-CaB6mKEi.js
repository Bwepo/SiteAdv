import{a as A,j as e,c as n,ad as ie,r as l,e as ne,u as C,i as de,ae as ce,ac as me,L as N}from"./index-rGXuuAVG.js";import{E as T,a as R,A as pe,P as ue}from"./AdminLayout-CfPMja3u.js";import{b as xe,c as ge,d as he,S as fe}from"./skeleton-BxEJsNAC.js";import{b as P,B as y}from"./button-BlI5sIj8.js";import{D as je,a as be,b as ve,c as f,d as Ne}from"./dropdown-menu-oRfykECr.js";import{c as E,b as ye,O as De,W as Ae,C as we,T as Ce,D as Te,a as _,P as Re,R as Pe}from"./index-CiRGwXSx.js";import{E as Ee}from"./external-link-BfpNt9Kd.js";import{C as b,d as v}from"./card-BdqrtM1q.js";import{F as _e}from"./file-text-Dr_thm1K.js";import"./house-Dp1DU4jy.js";import"./index-5Eqt3AO6.js";import"./Combination-BYliXn3m.js";import"./index-C3Yfc3Hi.js";import"./check-D8xic58A.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=A("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=A("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=A("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Me=ie("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function $e({className:a,variant:t,...s}){return e.jsx("div",{className:n(Me({variant:t}),a),...s})}const S=l.forwardRef(({className:a,...t},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:n("w-full caption-bottom text-sm",a),...t})}));S.displayName="Table";const O=l.forwardRef(({className:a,...t},s)=>e.jsx("thead",{ref:s,className:n("[&_tr]:border-b",a),...t}));O.displayName="TableHeader";const k=l.forwardRef(({className:a,...t},s)=>e.jsx("tbody",{ref:s,className:n("[&_tr:last-child]:border-0",a),...t}));k.displayName="TableBody";const Ie=l.forwardRef(({className:a,...t},s)=>e.jsx("tfoot",{ref:s,className:n("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...t}));Ie.displayName="TableFooter";const D=l.forwardRef(({className:a,...t},s)=>e.jsx("tr",{ref:s,className:n("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",a),...t}));D.displayName="TableRow";const p=l.forwardRef(({className:a,...t},s)=>e.jsx("th",{ref:s,className:n("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...t}));p.displayName="TableHead";const u=l.forwardRef(({className:a,...t},s)=>e.jsx("td",{ref:s,className:n("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...t}));u.displayName="TableCell";const Fe=l.forwardRef(({className:a,...t},s)=>e.jsx("caption",{ref:s,className:n("mt-4 text-sm text-muted-foreground",a),...t}));Fe.displayName="TableCaption";var M="AlertDialog",[Le,ga]=ne(M,[E]),c=E(),$=a=>{const{__scopeAlertDialog:t,...s}=a,r=c(t);return e.jsx(Pe,{...r,...s,modal:!0})};$.displayName=M;var He="AlertDialogTrigger",ze=l.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,i=c(s);return e.jsx(ye,{...i,...r,ref:t})});ze.displayName=He;var Be="AlertDialogPortal",I=a=>{const{__scopeAlertDialog:t,...s}=a,r=c(t);return e.jsx(Re,{...r,...s})};I.displayName=Be;var Ve="AlertDialogOverlay",F=l.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,i=c(s);return e.jsx(De,{...i,...r,ref:t})});F.displayName=Ve;var x="AlertDialogContent",[qe,Ge]=Le(x),We=ce("AlertDialogContent"),L=l.forwardRef((a,t)=>{const{__scopeAlertDialog:s,children:r,...i}=a,g=c(s),d=l.useRef(null),j=C(t,d),h=l.useRef(null);return e.jsx(Ae,{contentName:x,titleName:H,docsSlug:"alert-dialog",children:e.jsx(qe,{scope:s,cancelRef:h,children:e.jsxs(we,{role:"alertdialog",...g,...i,ref:j,onOpenAutoFocus:de(i.onOpenAutoFocus,o=>{var m;o.preventDefault(),(m=h.current)==null||m.focus({preventScroll:!0})}),onPointerDownOutside:o=>o.preventDefault(),onInteractOutside:o=>o.preventDefault(),children:[e.jsx(We,{children:r}),e.jsx(Ue,{contentRef:d})]})})})});L.displayName=x;var H="AlertDialogTitle",z=l.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,i=c(s);return e.jsx(Ce,{...i,...r,ref:t})});z.displayName=H;var B="AlertDialogDescription",V=l.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,i=c(s);return e.jsx(Te,{...i,...r,ref:t})});V.displayName=B;var Ye="AlertDialogAction",q=l.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,i=c(s);return e.jsx(_,{...i,...r,ref:t})});q.displayName=Ye;var G="AlertDialogCancel",W=l.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,{cancelRef:i}=Ge(G,s),g=c(s),d=C(t,i);return e.jsx(_,{...g,...r,ref:d})});W.displayName=G;var Ue=({contentRef:a})=>{const t=`\`${x}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${x}\` by passing a \`${B}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${x}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{var r;document.getElementById((r=a.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,a]),null},Je=$,Ke=I,Y=F,U=L,J=q,K=W,Q=z,X=V;const Qe=Je,Xe=Ke,Z=l.forwardRef(({className:a,...t},s)=>e.jsx(Y,{className:n("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t,ref:s}));Z.displayName=Y.displayName;const ee=l.forwardRef(({className:a,...t},s)=>e.jsxs(Xe,{children:[e.jsx(Z,{}),e.jsx(U,{ref:s,className:n("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...t})]}));ee.displayName=U.displayName;const ae=({className:a,...t})=>e.jsx("div",{className:n("flex flex-col space-y-2 text-center sm:text-left",a),...t});ae.displayName="AlertDialogHeader";const te=({className:a,...t})=>e.jsx("div",{className:n("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t});te.displayName="AlertDialogFooter";const se=l.forwardRef(({className:a,...t},s)=>e.jsx(Q,{ref:s,className:n("text-lg font-semibold",a),...t}));se.displayName=Q.displayName;const re=l.forwardRef(({className:a,...t},s)=>e.jsx(X,{ref:s,className:n("text-sm text-muted-foreground",a),...t}));re.displayName=X.displayName;const oe=l.forwardRef(({className:a,...t},s)=>e.jsx(J,{ref:s,className:n(P(),a),...t}));oe.displayName=J.displayName;const le=l.forwardRef(({className:a,...t},s)=>e.jsx(K,{ref:s,className:n(P({variant:"outline"}),"mt-2 sm:mt-0",a),...t}));le.displayName=K.displayName;function w(a){return a?new Date(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"}function Ze({posts:a,isLoading:t}){const[s,r]=l.useState(null),i=xe(),g=ge(),{toast:d}=me(),j=async o=>{const m=!o.published;try{await i.mutateAsync({id:o.id,published:m,published_at:m?new Date().toISOString():o.published_at}),d({title:m?"Post publicado!":"Post despublicado",description:m?"O artigo agora está visível no blog.":"O artigo foi movido para rascunhos."})}catch{d({title:"Erro",description:"Não foi possível atualizar o post.",variant:"destructive"})}},h=async()=>{if(s)try{await g.mutateAsync(s),d({title:"Post excluído",description:"O artigo foi removido permanentemente."})}catch{d({title:"Erro",description:"Não foi possível excluir o post.",variant:"destructive"})}finally{r(null)}};return a.length===0&&!t?e.jsxs("div",{className:"text-center py-12 border border-dashed border-border rounded-lg",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Nenhum post encontrado."}),e.jsx(N,{to:"/admin/posts/new",children:e.jsx(y,{children:"Criar primeiro post"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border border-border rounded-lg overflow-hidden",children:e.jsxs(S,{children:[e.jsx(O,{children:e.jsxs(D,{children:[e.jsx(p,{className:"w-[40%]",children:"Título"}),e.jsx(p,{children:"Status"}),e.jsx(p,{children:"Publicado em"}),e.jsx(p,{children:"Criado em"}),e.jsx(p,{className:"w-[100px]",children:"Ações"})]})}),e.jsx(k,{children:a.map(o=>e.jsxs(D,{children:[e.jsx(u,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground line-clamp-1",children:o.title}),e.jsxs("p",{className:"text-sm text-muted-foreground line-clamp-1",children:["/",o.slug]})]})}),e.jsx(u,{children:e.jsx($e,{variant:o.published?"default":"secondary",className:n(o.published?"bg-green-500/10 text-green-600 border-green-500/30":""),children:o.published?"Publicado":"Rascunho"})}),e.jsx(u,{className:"text-muted-foreground",children:w(o.published_at)}),e.jsx(u,{className:"text-muted-foreground",children:w(o.created_at)}),e.jsx(u,{children:e.jsxs(je,{children:[e.jsx(be,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"icon",children:e.jsx(Se,{className:"w-4 h-4"})})}),e.jsxs(ve,{align:"end",children:[e.jsx(f,{asChild:!0,children:e.jsxs(N,{to:`/admin/posts/${o.id}/edit`,children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Editar"]})}),o.published&&e.jsx(f,{asChild:!0,children:e.jsxs("a",{href:`/blog/${o.slug}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Ver no blog"]})}),e.jsx(f,{onClick:()=>j(o),children:o.published?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Despublicar"]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Publicar"]})}),e.jsx(Ne,{}),e.jsxs(f,{onClick:()=>r(o.id),className:"text-destructive focus:text-destructive",children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),"Excluir"]})]})]})})]},o.id))})]})}),e.jsx(Qe,{open:!!s,onOpenChange:()=>r(null),children:e.jsxs(ee,{children:[e.jsxs(ae,{children:[e.jsx(se,{children:"Excluir post?"}),e.jsx(re,{children:"Esta ação não pode ser desfeita. O post será removido permanentemente."})]}),e.jsxs(te,{children:[e.jsx(le,{children:"Cancelar"}),e.jsx(oe,{onClick:h,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Excluir"})]})]})})]})}const ha=()=>{const{data:a,isLoading:t}=he(),s=(a==null?void 0:a.filter(i=>i.published).length)||0,r=(a==null?void 0:a.filter(i=>!i.published).length)||0;return e.jsxs(pe,{title:"Dashboard",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3 mb-8",children:[e.jsx(b,{children:e.jsx(v,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:e.jsx(_e,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:(a==null?void 0:a.length)||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de posts"})]})]})})}),e.jsx(b,{children:e.jsx(v,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-green-500/10",children:e.jsx(R,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:s}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Publicados"})]})]})})}),e.jsx(b,{children:e.jsx(v,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-yellow-500/10",children:e.jsx(T,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:r}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Rascunhos"})]})]})})})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Posts"}),e.jsx(N,{to:"/admin/posts/new",children:e.jsxs(y,{children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Novo Post"]})})]}),t?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(i=>e.jsx(fe,{className:"h-16 w-full"},i))}):e.jsx(Ze,{posts:a||[]})]})};export{ha as default};
