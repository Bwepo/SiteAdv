import{r as d,j as e,m as c,c as i,A as f}from"./index-CvkQFygN.js";import{B as b}from"./button-u0bd8duK.js";import{I as j}from"./input-CWwyUq9T.js";import{u as w}from"./useNewsletter-EPc2wsIe.js";import{C as S}from"./circle-check-big-DVl51YjH.js";import{L as y}from"./loader-circle-CR_CmJZh.js";import{M as u}from"./mail-GZS3z8eN.js";import{s as P}from"./types-3c7sL9OC.js";const C=P().email("Por favor, insira um email válido");function L({variant:x="card",className:l}){const[n,o]=d.useState(""),[s,t]=d.useState(null),[v,N]=d.useState(!1),a=w(),p=async r=>{var g;r.preventDefault(),t(null);const h=C.safeParse(n.trim());if(!h.success){t(h.error.errors[0].message);return}try{await a.mutateAsync({email:n.trim()}),N(!0),o("")}catch(m){(g=m==null?void 0:m.message)!=null&&g.includes("duplicate")?t("Este email já está cadastrado."):t("Erro ao cadastrar. Tente novamente.")}};return v?e.jsxs(c.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:i("flex items-center gap-3 text-primary",x==="card"&&"p-6 bg-primary/5 rounded-lg border border-primary/20",l),children:[e.jsx(S,{className:"w-6 h-6 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Inscrição confirmada!"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Você receberá nossas atualizações jurídicas."})]})]}):x==="inline"?e.jsxs("form",{onSubmit:p,className:i("flex gap-2",l),children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(j,{type:"email",placeholder:"Seu melhor email",value:n,onChange:r=>o(r.target.value),className:i(s&&"border-destructive"),disabled:a.isPending}),e.jsx(f,{children:s&&e.jsx(c.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"absolute -bottom-5 left-0 text-xs text-destructive",children:s})})]}),e.jsx(b,{type:"submit",disabled:a.isPending,children:a.isPending?e.jsx(y,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Inscrever"]})})]}):e.jsxs(c.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},className:i("bg-gradient-to-br from-primary/5 to-accent/5 border border-border/50 rounded-xl p-6 md:p-8",l),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-primary/10",children:e.jsx(u,{className:"w-5 h-5 text-primary"})}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Receba novidades jurídicas"})]}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"Artigos, atualizações legislativas e insights diretamente no seu email. Sem spam, apenas conteúdo relevante."}),e.jsxs("form",{onSubmit:p,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(j,{type:"email",placeholder:"Seu melhor email",value:n,onChange:r=>{o(r.target.value),s&&t(null)},className:i("bg-background",s&&"border-destructive focus-visible:ring-destructive"),disabled:a.isPending}),e.jsx(f,{children:s&&e.jsx(c.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-xs text-destructive mt-1",children:s})})]}),e.jsxs(b,{type:"submit",className:"w-full",disabled:a.isPending,children:[a.isPending?e.jsx(y,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(u,{className:"w-4 h-4 mr-2"}),"Inscrever-se gratuitamente"]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Ao se inscrever, você concorda em receber nossos emails. Cancele quando quiser."})]})]})}export{L as N};
