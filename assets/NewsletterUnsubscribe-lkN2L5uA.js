import{G as l,r,j as s,I as p}from"./index-CibxSx2l.js";import{L as x}from"./Layout-BGYC2dQH.js";import{S as f}from"./SEOHead-DqbBy_zz.js";import{C as b,a as h,b as j,c as w}from"./card-CR-mjDBQ.js";import"./button-B2_MK6XK.js";import"./ThemeToggle-DP8ManfQ.js";import"./chevron-right-CBaXHH51.js";const y=()=>{const n=l(),[o,a]=r.useState("idle"),[i,c]=r.useState(!1),t=r.useMemo(()=>{var e;return((e=new URLSearchParams(n.search).get("token"))==null?void 0:e.trim())||""},[n.search]);r.useEffect(()=>{(async()=>{if(!t){a("error");return}c(!0);const{data:e,error:m}=await p.rpc("mladv_newsletter_unsubscribe_by_token",{p_token:t});if(c(!1),m||e!==!0){a("error");return}a("success")})()},[t]);const d=i?"Processando seu descadastro...":o==="success"?"Descadastro confirmado.":o==="error"?"Token inválido ou já descadastrado.":"";return s.jsxs(s.Fragment,{children:[s.jsx(f,{title:"Descadastro da newsletter",description:"Confirme o descadastro da newsletter da Mariana Lima Advocacia.",canonical:"https://marianalima.adv.br/newsletter/unsubscribe"}),s.jsx(x,{children:s.jsx("section",{className:"py-20 md:py-28",children:s.jsx("div",{className:"container mx-auto px-4 md:px-6",children:s.jsxs(b,{className:"mx-auto max-w-xl",children:[s.jsx(h,{children:s.jsx(j,{children:"Newsletter"})}),s.jsx(w,{children:s.jsx("p",{className:"text-base text-foreground",children:d})})]})})})})]})};export{y as default};
