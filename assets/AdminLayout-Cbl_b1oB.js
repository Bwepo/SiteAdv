import{c as ne,r as n,j as e,m as z,V as U,P as F,W as ee,e as A,u as $e,s as Z,U as et,Y as tt,p as at,Z as rt,_ as nt,$ as st,a0 as lt,a1 as je,l as ke,L as Y,a2 as Ne,a3 as Ce,a4 as Se,X as ot,a5 as it}from"./index-C5rdV3ki.js";import{D as De,a as Oe}from"./dialog-CjGIzY2y.js";import{B as O}from"./button-V3BEsbEG.js";import{H as Ee}from"./heart-gVz7m4I4.js";import{S as Ie}from"./sparkles-DCLHUHVe.js";import{R as ct,P as dt,O as ut,C as mt}from"./index-DhX7exH0.js";import{S as Pe}from"./search-Ca7hmoNW.js";import{B as ft}from"./badge-BMLAq-mz.js";import{L as pe}from"./list-todo-DkkhuRZV.js";import{C as he}from"./calendar-C3sKBTp-.js";import{F as xe}from"./folder-kanban-BnnlfNqM.js";import{S as pt,a as ht,b as xt,c as gt,d as bt}from"./sheet-Bq_BPsEQ.js";import{C as vt}from"./chevron-right-B3DLkH4w.js";import{C as yt}from"./chevron-left-DDrp74a_.js";import{P as wt}from"./plus-B1CoPVXr.js";import{H as jt}from"./house-BufQqBoT.js";import{S as kt,M as Nt,a as Ct}from"./sun-BG8XS1MW.js";import{R as St}from"./refresh-cw-BjslH46I.js";import{S as ue}from"./settings-DOtSCbRD.js";import{T as Et}from"./triangle-alert-Bu_CNG_I.js";import{U as It}from"./users-CkoqQKX3.js";import{F as _t}from"./file-text-BWwf9xpW.js";import{M as Mt}from"./message-square-CIph5uxV.js";import{M as Lt}from"./mail-CplCFmR8.js";import{S as Rt}from"./shield-check-BAfTi4S4.js";import"./index-YIY_kSu2.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=ne("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=ne("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=ne("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Me="mladv_welcome_shown";function $t(){const[t,s]=n.useState(!1);n.useEffect(()=>{if(!sessionStorage.getItem(Me)){const l=setTimeout(()=>s(!0),600);return()=>clearTimeout(l)}},[]);const a=()=>{sessionStorage.setItem(Me,"true"),s(!1)};return e.jsx(De,{open:t,onOpenChange:p=>{p||a()},children:e.jsx(Oe,{className:"sm:max-w-md border-none bg-gradient-to-br from-rose-50 via-white to-pink-50 dark:from-rose-950/40 dark:via-background dark:to-pink-950/30 shadow-2xl p-0 overflow-hidden",children:e.jsxs(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"p-8 text-center",children:[e.jsxs("div",{className:"relative flex justify-center mb-6",children:[e.jsx(z.div,{animate:{y:[0,-8,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(Ee,{className:"w-16 h-16 text-rose-400 fill-rose-400 drop-shadow-lg"})}),e.jsx(z.div,{className:"absolute -left-2 top-0",animate:{y:[0,-6,0],opacity:[.4,1,.4]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut",delay:.3},children:e.jsx(Ie,{className:"w-5 h-5 text-amber-400"})}),e.jsx(z.div,{className:"absolute -right-2 top-2",animate:{y:[0,-5,0],opacity:[.5,1,.5]},transition:{duration:2.2,repeat:1/0,ease:"easeInOut",delay:.6},children:e.jsx(Ie,{className:"w-4 h-4 text-amber-400"})})]}),e.jsx(z.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-2xl font-bold bg-gradient-to-r from-rose-600 to-pink-600 dark:from-rose-400 dark:to-pink-400 bg-clip-text text-transparent mb-4",children:"Bem-vinda, meu amor! ðŸ’•"}),e.jsxs(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-3 text-sm leading-relaxed text-muted-foreground",children:[e.jsx("p",{children:"Este portal foi feito com muito carinho, especialmente pra vocÃª."}),e.jsx("p",{children:"Ã‰ o meu presente â€” um cantinho digital onde vocÃª pode organizar sua agenda, suas tarefas, seus clientes e tudo o que precisar para brilhar ainda mais no seu trabalho."}),e.jsx("p",{className:"text-base font-medium text-foreground/80",children:"Eu te amo. Sempre. ðŸ¤"})]}),e.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"mt-8",children:e.jsxs(O,{onClick:a,className:"bg-gradient-to-r from-rose-500 to-pink-500 hover:from-rose-600 hover:to-pink-600 text-white px-8 shadow-lg shadow-rose-200 dark:shadow-rose-900/30",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2 fill-white"}),"ComeÃ§ar"]})}),e.jsx(z.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"mt-4 text-[11px] text-muted-foreground/60 italic",children:"â€” Com amor, CÃ¡ssio"})]})})})}var Le=1,Dt=.9,Ot=.8,Pt=.17,ie=.1,ce=.999,zt=.9999,Bt=.99,Ft=/[\\\/_+.#"@\[\(\{&]/,qt=/[\\\/_+.#"@\[\(\{&]/g,Kt=/[\s-]/,Be=/[\s-]/g;function me(t,s,a,p,l,u,m){if(u===s.length)return l===t.length?Le:Bt;var h=`${l},${u}`;if(m[h]!==void 0)return m[h];for(var k=p.charAt(u),c=a.indexOf(k,l),o=0,d,y,v,I;c>=0;)d=me(t,s,a,p,c+1,u+1,m),d>o&&(c===l?d*=Le:Ft.test(t.charAt(c-1))?(d*=Ot,v=t.slice(l,c-1).match(qt),v&&l>0&&(d*=Math.pow(ce,v.length))):Kt.test(t.charAt(c-1))?(d*=Dt,I=t.slice(l,c-1).match(Be),I&&l>0&&(d*=Math.pow(ce,I.length))):(d*=Pt,l>0&&(d*=Math.pow(ce,c-l))),t.charAt(c)!==s.charAt(u)&&(d*=zt)),(d<ie&&a.charAt(c-1)===p.charAt(u+1)||p.charAt(u+1)===p.charAt(u)&&a.charAt(c-1)!==p.charAt(u))&&(y=me(t,s,a,p,c+1,u+2,m),y*ie>d&&(d=y*ie)),d>o&&(o=d),c=a.indexOf(k,c+1);return m[h]=o,o}function Re(t){return t.toLowerCase().replace(Be," ")}function Vt(t,s,a){return t=a&&a.length>0?`${t+" "+a.join(" ")}`:t,me(t,s,Re(t),Re(s),0,0,{})}var J='[cmdk-group=""]',de='[cmdk-group-items=""]',Ht='[cmdk-group-heading=""]',Fe='[cmdk-item=""]',Ae=`${Fe}:not([aria-disabled="true"])`,fe="cmdk-item-select",H="data-value",Gt=(t,s,a)=>Vt(t,s,a),qe=n.createContext(void 0),te=()=>n.useContext(qe),Ke=n.createContext(void 0),ge=()=>n.useContext(Ke),Ve=n.createContext(void 0),He=n.forwardRef((t,s)=>{let a=G(()=>{var r,f;return{search:"",value:(f=(r=t.value)!=null?r:t.defaultValue)!=null?f:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),p=G(()=>new Set),l=G(()=>new Map),u=G(()=>new Map),m=G(()=>new Set),h=Ge(t),{label:k,children:c,value:o,onValueChange:d,filter:y,shouldFilter:v,loop:I,disablePointerSelection:P=!1,vimBindings:T=!0,...E}=t,x=U(),q=U(),Q=U(),D=n.useRef(null),C=ra();K(()=>{if(o!==void 0){let r=o.trim();a.current.value=r,_.emit()}},[o]),K(()=>{C(6,j)},[]);let _=n.useMemo(()=>({subscribe:r=>(m.current.add(r),()=>m.current.delete(r)),snapshot:()=>a.current,setState:(r,f,g)=>{var i,w,N,R;if(!Object.is(a.current[r],f)){if(a.current[r]=f,r==="search")b(),X(),C(1,V);else if(r==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let M=document.getElementById(Q);M?M.focus():(i=document.getElementById(x))==null||i.focus()}if(C(7,()=>{var M;a.current.selectedItemId=(M=S())==null?void 0:M.id,_.emit()}),g||C(5,j),((w=h.current)==null?void 0:w.value)!==void 0){let M=f??"";(R=(N=h.current).onValueChange)==null||R.call(N,M);return}}_.emit()}},emit:()=>{m.current.forEach(r=>r())}}),[]),W=n.useMemo(()=>({value:(r,f,g)=>{var i;f!==((i=u.current.get(r))==null?void 0:i.value)&&(u.current.set(r,{value:f,keywords:g}),a.current.filtered.items.set(r,ae(f,g)),C(2,()=>{X(),_.emit()}))},item:(r,f)=>(p.current.add(r),f&&(l.current.has(f)?l.current.get(f).add(r):l.current.set(f,new Set([r]))),C(3,()=>{b(),X(),a.current.value||V(),_.emit()}),()=>{u.current.delete(r),p.current.delete(r),a.current.filtered.items.delete(r);let g=S();C(4,()=>{b(),(g==null?void 0:g.getAttribute("id"))===r&&V(),_.emit()})}),group:r=>(l.current.has(r)||l.current.set(r,new Set),()=>{u.current.delete(r),l.current.delete(r)}),filter:()=>h.current.shouldFilter,label:k||t["aria-label"],getDisablePointerSelection:()=>h.current.disablePointerSelection,listId:x,inputId:Q,labelId:q,listInnerRef:D}),[]);function ae(r,f){var g,i;let w=(i=(g=h.current)==null?void 0:g.filter)!=null?i:Gt;return r?w(r,a.current.search,f):0}function X(){if(!a.current.search||h.current.shouldFilter===!1)return;let r=a.current.filtered.items,f=[];a.current.filtered.groups.forEach(i=>{let w=l.current.get(i),N=0;w.forEach(R=>{let M=r.get(R);N=Math.max(M,N)}),f.push([i,N])});let g=D.current;$().sort((i,w)=>{var N,R;let M=i.getAttribute("id"),re=w.getAttribute("id");return((N=r.get(re))!=null?N:0)-((R=r.get(M))!=null?R:0)}).forEach(i=>{let w=i.closest(de);w?w.appendChild(i.parentElement===w?i:i.closest(`${de} > *`)):g.appendChild(i.parentElement===g?i:i.closest(`${de} > *`))}),f.sort((i,w)=>w[1]-i[1]).forEach(i=>{var w;let N=(w=D.current)==null?void 0:w.querySelector(`${J}[${H}="${encodeURIComponent(i[0])}"]`);N==null||N.parentElement.appendChild(N)})}function V(){let r=$().find(g=>g.getAttribute("aria-disabled")!=="true"),f=r==null?void 0:r.getAttribute(H);_.setState("value",f||void 0)}function b(){var r,f,g,i;if(!a.current.search||h.current.shouldFilter===!1){a.current.filtered.count=p.current.size;return}a.current.filtered.groups=new Set;let w=0;for(let N of p.current){let R=(f=(r=u.current.get(N))==null?void 0:r.value)!=null?f:"",M=(i=(g=u.current.get(N))==null?void 0:g.keywords)!=null?i:[],re=ae(R,M);a.current.filtered.items.set(N,re),re>0&&w++}for(let[N,R]of l.current)for(let M of R)if(a.current.filtered.items.get(M)>0){a.current.filtered.groups.add(N);break}a.current.filtered.count=w}function j(){var r,f,g;let i=S();i&&(((r=i.parentElement)==null?void 0:r.firstChild)===i&&((g=(f=i.closest(J))==null?void 0:f.querySelector(Ht))==null||g.scrollIntoView({block:"nearest"})),i.scrollIntoView({block:"nearest"}))}function S(){var r;return(r=D.current)==null?void 0:r.querySelector(`${Fe}[aria-selected="true"]`)}function $(){var r;return Array.from(((r=D.current)==null?void 0:r.querySelectorAll(Ae))||[])}function le(r){let f=$()[r];f&&_.setState("value",f.getAttribute(H))}function oe(r){var f;let g=S(),i=$(),w=i.findIndex(R=>R===g),N=i[w+r];(f=h.current)!=null&&f.loop&&(N=w+r<0?i[i.length-1]:w+r===i.length?i[0]:i[w+r]),N&&_.setState("value",N.getAttribute(H))}function be(r){let f=S(),g=f==null?void 0:f.closest(J),i;for(;g&&!i;)g=r>0?ta(g,J):aa(g,J),i=g==null?void 0:g.querySelector(Ae);i?_.setState("value",i.getAttribute(H)):oe(r)}let ve=()=>le($().length-1),ye=r=>{r.preventDefault(),r.metaKey?ve():r.altKey?be(1):oe(1)},we=r=>{r.preventDefault(),r.metaKey?le(0):r.altKey?be(-1):oe(-1)};return n.createElement(F.div,{ref:s,tabIndex:-1,...E,"cmdk-root":"",onKeyDown:r=>{var f;(f=E.onKeyDown)==null||f.call(E,r);let g=r.nativeEvent.isComposing||r.keyCode===229;if(!(r.defaultPrevented||g))switch(r.key){case"n":case"j":{T&&r.ctrlKey&&ye(r);break}case"ArrowDown":{ye(r);break}case"p":case"k":{T&&r.ctrlKey&&we(r);break}case"ArrowUp":{we(r);break}case"Home":{r.preventDefault(),le(0);break}case"End":{r.preventDefault(),ve();break}case"Enter":{r.preventDefault();let i=S();if(i){let w=new Event(fe);i.dispatchEvent(w)}}}}},n.createElement("label",{"cmdk-label":"",htmlFor:W.inputId,id:W.labelId,style:sa},k),se(t,r=>n.createElement(Ke.Provider,{value:_},n.createElement(qe.Provider,{value:W},r))))}),Ut=n.forwardRef((t,s)=>{var a,p;let l=U(),u=n.useRef(null),m=n.useContext(Ve),h=te(),k=Ge(t),c=(p=(a=k.current)==null?void 0:a.forceMount)!=null?p:m==null?void 0:m.forceMount;K(()=>{if(!c)return h.item(l,m==null?void 0:m.id)},[c]);let o=Ue(l,u,[t.value,t.children,u],t.keywords),d=ge(),y=B(C=>C.value&&C.value===o.current),v=B(C=>c||h.filter()===!1?!0:C.search?C.filtered.items.get(l)>0:!0);n.useEffect(()=>{let C=u.current;if(!(!C||t.disabled))return C.addEventListener(fe,I),()=>C.removeEventListener(fe,I)},[v,t.onSelect,t.disabled]);function I(){var C,_;P(),(_=(C=k.current).onSelect)==null||_.call(C,o.current)}function P(){d.setState("value",o.current,!0)}if(!v)return null;let{disabled:T,value:E,onSelect:x,forceMount:q,keywords:Q,...D}=t;return n.createElement(F.div,{ref:ee(u,s),...D,id:l,"cmdk-item":"",role:"option","aria-disabled":!!T,"aria-selected":!!y,"data-disabled":!!T,"data-selected":!!y,onPointerMove:T||h.getDisablePointerSelection()?void 0:P,onClick:T?void 0:I},t.children)}),Qt=n.forwardRef((t,s)=>{let{heading:a,children:p,forceMount:l,...u}=t,m=U(),h=n.useRef(null),k=n.useRef(null),c=U(),o=te(),d=B(v=>l||o.filter()===!1?!0:v.search?v.filtered.groups.has(m):!0);K(()=>o.group(m),[]),Ue(m,h,[t.value,t.heading,k]);let y=n.useMemo(()=>({id:m,forceMount:l}),[l]);return n.createElement(F.div,{ref:ee(h,s),...u,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},a&&n.createElement("div",{ref:k,"cmdk-group-heading":"","aria-hidden":!0,id:c},a),se(t,v=>n.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":a?c:void 0},n.createElement(Ve.Provider,{value:y},v))))}),Wt=n.forwardRef((t,s)=>{let{alwaysRender:a,...p}=t,l=n.useRef(null),u=B(m=>!m.search);return!a&&!u?null:n.createElement(F.div,{ref:ee(l,s),...p,"cmdk-separator":"",role:"separator"})}),Xt=n.forwardRef((t,s)=>{let{onValueChange:a,...p}=t,l=t.value!=null,u=ge(),m=B(c=>c.search),h=B(c=>c.selectedItemId),k=te();return n.useEffect(()=>{t.value!=null&&u.setState("search",t.value)},[t.value]),n.createElement(F.input,{ref:s,...p,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":k.listId,"aria-labelledby":k.labelId,"aria-activedescendant":h,id:k.inputId,type:"text",value:l?t.value:m,onChange:c=>{l||u.setState("search",c.target.value),a==null||a(c.target.value)}})}),Yt=n.forwardRef((t,s)=>{let{children:a,label:p="Suggestions",...l}=t,u=n.useRef(null),m=n.useRef(null),h=B(c=>c.selectedItemId),k=te();return n.useEffect(()=>{if(m.current&&u.current){let c=m.current,o=u.current,d,y=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let v=c.offsetHeight;o.style.setProperty("--cmdk-list-height",v.toFixed(1)+"px")})});return y.observe(c),()=>{cancelAnimationFrame(d),y.unobserve(c)}}},[]),n.createElement(F.div,{ref:ee(u,s),...l,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":h,"aria-label":p,id:k.listId},se(t,c=>n.createElement("div",{ref:ee(m,k.listInnerRef),"cmdk-list-sizer":""},c)))}),Jt=n.forwardRef((t,s)=>{let{open:a,onOpenChange:p,overlayClassName:l,contentClassName:u,container:m,...h}=t;return n.createElement(ct,{open:a,onOpenChange:p},n.createElement(dt,{container:m},n.createElement(ut,{"cmdk-overlay":"",className:l}),n.createElement(mt,{"aria-label":t.label,"cmdk-dialog":"",className:u},n.createElement(He,{ref:s,...h}))))}),Zt=n.forwardRef((t,s)=>B(a=>a.filtered.count===0)?n.createElement(F.div,{ref:s,...t,"cmdk-empty":"",role:"presentation"}):null),ea=n.forwardRef((t,s)=>{let{progress:a,children:p,label:l="Loading...",...u}=t;return n.createElement(F.div,{ref:s,...u,"cmdk-loading":"",role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-label":l},se(t,m=>n.createElement("div",{"aria-hidden":!0},m)))}),L=Object.assign(He,{List:Yt,Item:Ut,Input:Xt,Group:Qt,Separator:Wt,Dialog:Jt,Empty:Zt,Loading:ea});function ta(t,s){let a=t.nextElementSibling;for(;a;){if(a.matches(s))return a;a=a.nextElementSibling}}function aa(t,s){let a=t.previousElementSibling;for(;a;){if(a.matches(s))return a;a=a.previousElementSibling}}function Ge(t){let s=n.useRef(t);return K(()=>{s.current=t}),s}var K=typeof window>"u"?n.useEffect:n.useLayoutEffect;function G(t){let s=n.useRef();return s.current===void 0&&(s.current=t()),s}function B(t){let s=ge(),a=()=>t(s.snapshot());return n.useSyncExternalStore(s.subscribe,a,a)}function Ue(t,s,a,p=[]){let l=n.useRef(),u=te();return K(()=>{var m;let h=(()=>{var c;for(let o of a){if(typeof o=="string")return o.trim();if(typeof o=="object"&&"current"in o)return o.current?(c=o.current.textContent)==null?void 0:c.trim():l.current}})(),k=p.map(c=>c.trim());u.value(t,h,k),(m=s.current)==null||m.setAttribute(H,h),l.current=h}),l}var ra=()=>{let[t,s]=n.useState(),a=G(()=>new Map);return K(()=>{a.current.forEach(p=>p()),a.current=new Map},[t]),(p,l)=>{a.current.set(p,l),s({})}};function na(t){let s=t.type;return typeof s=="function"?s(t.props):"render"in s?s.render(t.props):t}function se({asChild:t,children:s},a){return t&&n.isValidElement(s)?n.cloneElement(na(s),{ref:s.ref},a(s.props.children)):a(s)}var sa={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Qe=n.forwardRef(({className:t,...s},a)=>e.jsx(L,{ref:a,className:A("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...s}));Qe.displayName=L.displayName;const la=({children:t,...s})=>e.jsx(De,{...s,children:e.jsx(Oe,{className:"overflow-hidden p-0 shadow-lg",children:e.jsx(Qe,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:t})})}),We=n.forwardRef(({className:t,...s},a)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Pe,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(L.Input,{ref:a,className:A("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...s})]}));We.displayName=L.Input.displayName;const Xe=n.forwardRef(({className:t,...s},a)=>e.jsx(L.List,{ref:a,className:A("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...s}));Xe.displayName=L.List.displayName;const Ye=n.forwardRef((t,s)=>e.jsx(L.Empty,{ref:s,className:"py-6 text-center text-sm",...t}));Ye.displayName=L.Empty.displayName;const Je=n.forwardRef(({className:t,...s},a)=>e.jsx(L.Group,{ref:a,className:A("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...s}));Je.displayName=L.Group.displayName;const oa=n.forwardRef(({className:t,...s},a)=>e.jsx(L.Separator,{ref:a,className:A("-mx-1 h-px bg-border",t),...s}));oa.displayName=L.Separator.displayName;const Ze=n.forwardRef(({className:t,...s},a)=>e.jsx(L.Item,{ref:a,className:A("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",t),...s}));Ze.displayName=L.Item.displayName;const ia={tarefa:{label:"Tarefa",icon:pe,className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"},subtarefa:{label:"Subtarefa",icon:Tt,className:"bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-300"},agenda:{label:"Agenda",icon:he,className:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},projeto:{label:"Projeto",icon:xe,className:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"}};function ca(){const[t,s]=n.useState(!1),[a,p]=n.useState(""),[l,u]=n.useState({tarefas:[],subtarefas:[],agenda:[],projetos:[]}),m=$e();n.useEffect(()=>{const o=d=>{(d.key==="k"&&(d.metaKey||d.ctrlKey)||d.key==="/")&&(d.preventDefault(),s(y=>!y))};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[]),n.useEffect(()=>{if(!t)return;(async()=>{const[d,y,v,I]=await Promise.all([Z.from("mladv_crm_tarefas").select("airtable_id, titulo, status, cliente, deadline").limit(500),Z.from("mladv_crm_subtarefas").select("airtable_id, titulo, status, deadline, tarefa_airtable_id").limit(500),Z.from("mladv_crm_agenda").select("airtable_id, titulo, tipo, status, data_local, cliente").limit(500),Z.from("mladv_crm_projetos").select("airtable_id, nome, status, tipo").limit(500)]);u({tarefas:d.data||[],subtarefas:y.data||[],agenda:v.data||[],projetos:I.data||[]})})()},[t]);const h=n.useMemo(()=>{var y,v,I,P,T,E;const o=a.toLowerCase().trim();if(!o)return[];const d=[];for(const x of l.tarefas)((y=x.titulo)!=null&&y.toLowerCase().includes(o)||(v=x.cliente)!=null&&v.toLowerCase().includes(o))&&d.push({id:`t-${x.airtable_id}`,title:x.titulo,subtitle:[x.status,x.cliente].filter(Boolean).join(" Â· "),type:"tarefa",href:"/admin/tarefas"});for(const x of l.subtarefas)(I=x.titulo)!=null&&I.toLowerCase().includes(o)&&d.push({id:`s-${x.airtable_id}`,title:x.titulo,subtitle:x.status,type:"subtarefa",href:"/admin/tarefas"});for(const x of l.agenda)((P=x.titulo)!=null&&P.toLowerCase().includes(o)||(T=x.cliente)!=null&&T.toLowerCase().includes(o))&&d.push({id:`a-${x.airtable_id}`,title:x.titulo,subtitle:[x.tipo,x.data_local,x.cliente].filter(Boolean).join(" Â· "),type:"agenda",href:"/admin/agenda"});for(const x of l.projetos)(E=x.nome)!=null&&E.toLowerCase().includes(o)&&d.push({id:`p-${x.airtable_id}`,title:x.nome,subtitle:[x.status,x.tipo].filter(Boolean).join(" Â· "),type:"projeto",href:"/admin/projetos"});return d.slice(0,20)},[a,l]),k=n.useMemo(()=>{const o={};for(const d of h)o[d.type]||(o[d.type]=[]),o[d.type].push(d);return o},[h]),c=n.useCallback(o=>{s(!1),p(""),m(o)},[m]);return e.jsxs(e.Fragment,{children:[e.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>s(!0),className:"text-muted-foreground h-8 px-2 gap-1.5",children:[e.jsx(Pe,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Buscar"}),e.jsx("kbd",{className:"hidden sm:inline-flex pointer-events-none h-5 select-none items-center gap-0.5 rounded border border-border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground",children:"âŒ˜K"})]}),e.jsxs(la,{open:t,onOpenChange:s,children:[e.jsx(We,{placeholder:"Buscar tarefas, agenda, projetos...",value:a,onValueChange:p}),e.jsxs(Xe,{children:[e.jsx(Ye,{children:"Nenhum resultado encontrado."}),Object.entries(k).map(([o,d])=>{const y=ia[o];return e.jsx(Je,{heading:y.label,children:d.map(v=>{const I=y.icon;return e.jsxs(Ze,{value:v.title,onSelect:()=>c(v.href),className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4 shrink-0 text-muted-foreground"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm truncate block",children:v.title}),v.subtitle&&e.jsx("span",{className:"text-xs text-muted-foreground truncate block",children:v.subtitle})]}),e.jsx(ft,{variant:"outline",className:`text-[10px] shrink-0 ${y.className}`,children:y.label})]},v.id)})},o)})]})]})]})}const Te=[{title:"VisÃ£o geral",items:[{href:"/admin",label:"Dashboard",icon:ze}]},{title:"CRM",items:[{href:"/admin/projetos",label:"Projetos",icon:xe},{href:"/admin/agenda",label:"Agenda",icon:he},{href:"/admin/tarefas",label:"Tarefas",icon:pe},{href:"/admin/bosi",label:"BOSI",icon:It}]},{title:"ConteÃºdo",items:[{href:"/admin/posts",label:"Posts",icon:_t},{href:"/admin/comments",label:"ComentÃ¡rios",icon:Mt},{href:"/admin/newsletter",label:"Inscritos",icon:Lt},{href:"/admin/newsletter/campaigns",label:"Campanhas",icon:At},{href:"/admin/newsletter/settings",label:"Config. Newsletter",icon:ue}]},{title:"Conta",items:[{href:"/admin/security",label:"SeguranÃ§a",icon:Rt},{href:"/admin/configuracoes",label:"ConfiguraÃ§Ãµes",icon:ue}]}],da=[{href:"/admin",label:"InÃ­cio",icon:ze},{href:"/admin/projetos",label:"Projetos",icon:xe},{href:"/admin/agenda",label:"Agenda",icon:he},{href:"/admin/tarefas",label:"Tarefas",icon:pe}];function Oa(){const{user:t,signOut:s}=et(),{prefs:a,loaded:p,updatePref:l}=tt(),u=$e(),m=at(),h=rt(),[k,c]=n.useState(!1),[o,d]=n.useState(!1),[y,v]=n.useState(null),{limitExceeded:I,error:P,dismiss:T}=nt(),[E,x]=n.useState(!0),q=n.useRef(null),Q=n.useCallback(()=>{q.current&&(clearTimeout(q.current),q.current=null),x(!1)},[]),D=n.useCallback(()=>{q.current=setTimeout(()=>{x(!0)},300)},[]),C=st.includes(a.color_theme),_=a.theme==="dark",W=()=>{l("theme",_?"light":"dark")};n.useEffect(()=>{Z.from("mladv_crm_sync_status").select("completed_at").order("completed_at",{ascending:!1}).limit(1).single().then(({data:b})=>{b!=null&&b.completed_at&&v(new Date(b.completed_at))})},[]);const ae=n.useCallback(async()=>{d(!0);try{const b=await lt(),j=Object.entries((b==null?void 0:b.results)||{}).filter(([,S])=>S==null?void 0:S.error).map(([S,$])=>`${S}: ${$.error}`);if(j.length>0){const S=j.some($=>$.includes("429")||$.includes("BILLING_LIMIT"));je(!0,S?"Limite mensal da API do Airtable atingido.":`Erro na sincronizaÃ§Ã£o: ${j[0].slice(0,120)}`)}else je(!1),ke.success("Dados sincronizados");h.invalidateQueries({queryKey:["crm"]}),v(new Date)}catch{ke.error("Erro ao sincronizar")}finally{d(!1)}},[h]),X=b=>{const j=Math.floor((Date.now()-b.getTime())/6e4);if(j<1)return"agora";if(j<60)return`${j}min atrÃ¡s`;const S=Math.floor(j/60);return S<24?`${S}h atrÃ¡s`:b.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})},V=async()=>{await s(),u("/")};return e.jsxs("div",{className:"flex min-h-screen bg-background",children:[e.jsx($t,{}),e.jsxs("aside",{className:A("hidden md:flex flex-col border-r border-sidebar-border bg-sidebar transition-all duration-300 shrink-0",E?"w-14":"w-60"),onMouseEnter:Q,onMouseLeave:D,children:[e.jsxs("div",{className:"flex h-12 items-center justify-between border-b border-sidebar-border px-3",children:[!E&&e.jsx("span",{className:"font-serif text-lg font-semibold text-sidebar-foreground truncate",children:a.panel_name||"Painel Admin"}),e.jsx(O,{variant:"ghost",size:"icon",onClick:()=>x(!E),className:"h-8 w-8 text-sidebar-foreground hover:bg-sidebar-accent shrink-0",children:E?e.jsx(vt,{className:"h-4 w-4"}):e.jsx(yt,{className:"h-4 w-4"})})]}),e.jsx("nav",{className:"flex-1 space-y-3 p-2 overflow-y-auto",children:Te.map(b=>e.jsxs("div",{children:[!E&&e.jsx("p",{className:"px-2.5 text-[10px] font-semibold uppercase tracking-widest text-muted-foreground/50 mb-1",children:b.title}),e.jsx("div",{className:"space-y-px",children:b.items.map(j=>{const S=m.pathname===j.href;return e.jsxs(Y,{to:j.href,title:E?j.label:void 0,className:A("group flex items-center gap-2.5 rounded-lg transition-all duration-150 text-[13px]",E?"justify-center p-2":"px-2.5 py-[7px]",S?"bg-sidebar-accent text-accent font-medium":"text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"),children:[e.jsx(j.icon,{className:A("w-[18px] h-[18px] shrink-0 transition-all duration-200",S?"text-accent scale-110":"text-muted-foreground group-hover:text-foreground group-hover:scale-110")}),!E&&e.jsx("span",{className:"truncate",children:j.label})]},j.href)})})]},b.title))}),e.jsx("div",{className:"p-2 space-y-1.5 border-t border-sidebar-border",children:e.jsx(Y,{to:"/admin/posts/new",className:"block",children:e.jsxs(O,{className:A("w-full gap-1.5 h-8 text-xs font-medium gold-gradient text-primary-foreground hover:opacity-90",E&&"px-0"),size:"sm",title:E?"Novo Post":void 0,children:[e.jsx(wt,{className:"w-3.5 h-3.5 shrink-0"}),!E&&e.jsx("span",{children:"Novo Post"})]})})})]}),e.jsxs("div",{className:"flex flex-1 flex-col min-w-0",children:[e.jsxs("header",{className:"sticky top-0 z-40 flex h-12 items-center justify-between border-b border-border/40 px-4 glass",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsxs(Y,{to:"/",className:"flex items-center gap-1.5 text-muted-foreground hover:text-foreground transition-colors text-xs",children:[e.jsx(jt,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Site"})]}),e.jsx("div",{className:"w-px h-4 bg-border/60 hidden sm:block"}),e.jsx(ca,{})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[!C&&e.jsx(O,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:W,children:_?e.jsx(kt,{className:"h-4 w-4"}):e.jsx(Nt,{className:"h-4 w-4"})}),e.jsxs(Ne,{children:[e.jsx(Ce,{asChild:!0,children:e.jsx(O,{variant:"ghost",size:"sm",onClick:ae,disabled:o,className:"text-muted-foreground h-7 w-7 p-0",children:e.jsx(St,{className:A("w-3.5 h-3.5",o&&"animate-spin")})})}),e.jsx(Se,{side:"bottom",className:"text-xs",children:y?`Sync: ${X(y)}`:"Sincronizar CRM"})]}),e.jsx(O,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>u("/admin/configuracoes"),children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-4 bg-border/60 mx-0.5 hidden sm:block"}),e.jsx("span",{className:"text-[11px] text-muted-foreground hidden md:block truncate max-w-[160px]",children:t==null?void 0:t.email}),e.jsxs(Ne,{children:[e.jsx(Ce,{asChild:!0,children:e.jsx(O,{variant:"ghost",size:"sm",onClick:V,className:"text-muted-foreground hover:text-destructive h-7 w-7 p-0",children:e.jsx(_e,{className:"w-3.5 h-3.5"})})}),e.jsx(Se,{side:"bottom",className:"text-xs",children:"Sair"})]})]})]}),I&&e.jsxs("div",{className:"mx-4 md:mx-6 mt-3 flex items-center gap-3 rounded-lg border border-amber-500/30 bg-amber-500/10 px-4 py-2.5 text-sm text-amber-700 dark:text-amber-300",children:[e.jsx(Et,{className:"h-4 w-4 shrink-0"}),e.jsx("span",{className:"flex-1",children:P||"Limite da API do Airtable atingido. Dados salvos apenas localmente."}),e.jsx("button",{onClick:T,className:"shrink-0 rounded p-0.5 hover:bg-amber-500/20 transition-colors",children:e.jsx(ot,{className:"h-3.5 w-3.5"})})]}),e.jsx("main",{className:"flex-1 overflow-auto p-4 md:p-6 pb-20 md:pb-6",children:e.jsx("div",{className:"mx-auto max-w-[1400px]",children:e.jsx(it,{})})})]}),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-xl border-t border-border/40 px-1 py-1 md:hidden z-40",children:e.jsxs("div",{className:"flex justify-around items-center max-w-md mx-auto",children:[da.map(b=>{const j=m.pathname===b.href;return e.jsxs(Y,{to:b.href,className:A("flex flex-col items-center gap-0.5 p-1.5 rounded-lg transition-colors min-w-[3.5rem]",j?"text-accent":"text-muted-foreground"),children:[e.jsx(b.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[10px] leading-tight font-medium",children:b.label})]},b.href)}),e.jsxs(pt,{open:k,onOpenChange:c,children:[e.jsx(ht,{asChild:!0,children:e.jsxs("button",{className:"flex flex-col items-center gap-0.5 p-1.5 rounded-lg text-muted-foreground min-w-[3.5rem]",children:[e.jsx(Ct,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[10px] leading-tight font-medium",children:"Mais"})]})}),e.jsxs(xt,{side:"bottom",className:"rounded-t-2xl pb-safe",children:[e.jsx(gt,{className:"mb-2",children:e.jsx(bt,{className:"text-left text-sm font-medium",children:"Menu"})}),e.jsx("div",{className:"space-y-0.5 max-h-[60vh] overflow-y-auto",children:Te.map(b=>e.jsxs("div",{children:[e.jsx("p",{className:"px-2.5 pt-3 pb-1 text-[10px] font-semibold uppercase tracking-widest text-muted-foreground/50",children:b.title}),b.items.map(j=>{const S=m.pathname===j.href;return e.jsxs(Y,{to:j.href,onClick:()=>c(!1),className:A("flex items-center gap-3 px-2.5 py-2.5 rounded-md transition-colors text-[13px]",S?"bg-accent/10 text-accent font-medium":"text-muted-foreground hover:text-foreground hover:bg-muted/40"),children:[e.jsx(j.icon,{className:"w-4 h-4"}),e.jsx("span",{children:j.label})]},j.href)})]},b.title))}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-border/40 flex items-center justify-between",children:[e.jsx("span",{className:"text-[11px] text-muted-foreground truncate mr-4",children:t==null?void 0:t.email}),e.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>{V(),c(!1)},className:"text-destructive h-7 shrink-0 text-xs",children:[e.jsx(_e,{className:"w-3.5 h-3.5 mr-1"}),"Sair"]})]})]})]})]})})]})}export{Oa as AdminLayout,Oa as default};
