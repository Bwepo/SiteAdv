import{c as Et,r as i,_ as L,f as Qe,W as Hn,al as qn,j as u,e as $e}from"./index-DhJFBbWG.js";import{A as Gn,F as Jn,P as Zn}from"./AdminLayout-CDbhK-g5.js";import{T as Qn}from"./TarefaSheet-Dy853eui.js";import{C as mn,c as bn}from"./card-Hjm0KW_H.js";import{A as er,a as tr,b as nr,c as rr,d as sr,e as or,f as ir,g as ar}from"./alert-dialog-DWG2k6K2.js";import{B as et}from"./badge-CDc01jpx.js";import{B as Oe}from"./button-CTgOP9BP.js";import{I as lr}from"./input-BEyB0Bda.js";import{S as Zt,C as cr}from"./checkbox-CjLabs7g.js";import{L as ur}from"./label-B5HqNB-O.js";import{S as Ge,a as Je,b as pt,d as Ze,e as ye}from"./select-Cw38bR30.js";import{P as dr,a as fr,b as hr}from"./popover-D_LnxZDb.js";import{d as yt,b as $t,T as gr,c as xn}from"./crmTypes-DP3iBdIv.js";import{S as pr}from"./SyncToolbar-D8VZzcGK.js";import{T as vr,K as mr}from"./CrmSkeletons-DxHGj8po.js";import{S as br}from"./search-D0j5I04E.js";import{L as xr}from"./list-C2Jax-CB.js";import{U as yr}from"./users-BQGUgHhH.js";import{C as wr}from"./calendar-A6NhF1Y-.js";import{P as Sr}from"./pencil-D858aD_s.js";import{T as Cr}from"./trash-2-D5coiWg1.js";import{C as Dr}from"./chevron-up-Cw17qWFG.js";import{C as Rr}from"./chevron-right-DEhnMEow.js";import"./dialog-CuSga5C6.js";import"./index-uMC9S6FD.js";import"./heart-7CwMcy4p.js";import"./sparkles-BXA2HqAb.js";import"./house-Br8nU-l7.js";import"./menu-CAk_CmdA.js";import"./file-text-DvZETzYg.js";import"./form-ipqBocWH.js";import"./textarea-CaRkNUTz.js";import"./separator-DHRKEkZ2.js";import"./loader-circle-C-BpveA3.js";import"./circle-check-C2w3QQCa.js";import"./circle-Bl2lfeKG.js";import"./clock-BwWpl41w.js";import"./types-C9wiu8_K.js";import"./index-T5SEvGUW.js";import"./check-DHh9ZPzw.js";import"./index-BAaUBjb8.js";import"./skeleton-BxCEHRwB.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Et("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Et("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=Et("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Et("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);function Ar(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const jt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ye(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Vt(e){return"nodeType"in e}function U(e){var t,n;return e?Ye(e)?e:Vt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Wt(e){const{Document:t}=U(e);return e instanceof t}function it(e){return Ye(e)?!1:e instanceof U(e).HTMLElement}function yn(e){return e instanceof U(e).SVGElement}function Xe(e){return e?Ye(e)?e.document:Vt(e)?Wt(e)?e:it(e)||yn(e)?e.ownerDocument:document:document:document}const de=jt?i.useLayoutEffect:i.useEffect;function Tt(e){const t=i.useRef(e);return de(()=>{t.current=e}),i.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function kr(){const e=i.useRef(null),t=i.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=i.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function st(e,t){t===void 0&&(t=[e]);const n=i.useRef(e);return de(()=>{n.current!==e&&(n.current=e)},t),n}function at(e,t){const n=i.useRef();return i.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function wt(e){const t=Tt(e),n=i.useRef(null),r=i.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function St(e){const t=i.useRef();return i.useEffect(()=>{t.current=e},[e]),t.current}let Pt={};function lt(e,t){return i.useMemo(()=>{if(t)return t;const n=Pt[e]==null?0:Pt[e]+1;return Pt[e]=n,e+"-"+n},[e,t])}function wn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,l)=>{const a=Object.entries(l);for(const[c,d]of a){const g=o[c];g!=null&&(o[c]=g+e*d)}return o},{...t})}}const Ke=wn(1),Ct=wn(-1);function Ir(e){return"clientX"in e&&"clientY"in e}function At(e){if(!e)return!1;const{KeyboardEvent:t}=U(e.target);return t&&e instanceof t}function Or(e){if(!e)return!1;const{TouchEvent:t}=U(e.target);return t&&e instanceof t}function Dt(e){if(Or(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Ir(e)?{x:e.clientX,y:e.clientY}:null}const je=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[je.Translate.toString(e),je.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Qt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Mr(e){return e.matches(Qt)?e:e.querySelector(Qt)}const Lr={display:"none"};function Pr(e){let{id:t,value:n}=e;return L.createElement("div",{id:t,style:Lr},n)}function zr(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return L.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Br(){const[e,t]=i.useState("");return{announce:i.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Sn=i.createContext(null);function Fr(e){const t=i.useContext(Sn);i.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function $r(){const[e]=i.useState(()=>new Set),t=i.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[i.useCallback(r=>{let{type:s,event:o}=r;e.forEach(l=>{var a;return(a=l[s])==null?void 0:a.call(l,o)})},[e]),t]}const Kr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Yr={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Xr(e){let{announcements:t=Yr,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=Kr}=e;const{announce:o,announcement:l}=Br(),a=lt("DndLiveRegion"),[c,d]=i.useState(!1);if(i.useEffect(()=>{d(!0)},[]),Fr(i.useMemo(()=>({onDragStart(h){let{active:v}=h;o(t.onDragStart({active:v}))},onDragMove(h){let{active:v,over:p}=h;t.onDragMove&&o(t.onDragMove({active:v,over:p}))},onDragOver(h){let{active:v,over:p}=h;o(t.onDragOver({active:v,over:p}))},onDragEnd(h){let{active:v,over:p}=h;o(t.onDragEnd({active:v,over:p}))},onDragCancel(h){let{active:v,over:p}=h;o(t.onDragCancel({active:v,over:p}))}}),[o,t])),!c)return null;const g=L.createElement(L.Fragment,null,L.createElement(Pr,{id:r,value:s.draggable}),L.createElement(zr,{id:a,announcement:l}));return n?Qe.createPortal(g,n):g}var P;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(P||(P={}));function Rt(){}function Ur(e,t){return i.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Vr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const fe=Object.freeze({x:0,y:0});function Wr(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function _r(e,t){const n=Dt(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function Hr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function qr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function en(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function Gr(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}const Jr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=en(t),o=[];for(const l of r){const{id:a}=l,c=n.get(a);if(c){const d=en(c),g=s.reduce((v,p,w)=>v+Wr(d[w],p),0),h=Number((g/4).toFixed(4));o.push({id:a,data:{droppableContainer:l,value:h}})}}return o.sort(Hr)};function Zr(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=s-r,a=o-n;if(r<s&&n<o){const c=t.width*t.height,d=e.width*e.height,g=l*a,h=g/(c+d-g);return Number(h.toFixed(4))}return 0}const Qr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const o of r){const{id:l}=o,a=n.get(l);if(a){const c=Zr(a,t);c>0&&s.push({id:l,data:{droppableContainer:o,value:c}})}}return s.sort(qr)};function es(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Cn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:fe}function ts(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((l,a)=>({...l,top:l.top+e*a.y,bottom:l.bottom+e*a.y,left:l.left+e*a.x,right:l.right+e*a.x}),{...n})}}const ns=ts(1);function Dn(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function rs(e,t,n){const r=Dn(t);if(!r)return e;const{scaleX:s,scaleY:o,x:l,y:a}=r,c=e.left-l-(1-s)*parseFloat(n),d=e.top-a-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),g=s?e.width/s:e.width,h=o?e.height/o:e.height;return{width:g,height:h,top:d,right:c+g,bottom:d+h,left:c}}const ss={ignoreTransform:!1};function Ue(e,t){t===void 0&&(t=ss);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:g}=U(e).getComputedStyle(e);d&&(n=rs(n,d,g))}const{top:r,left:s,width:o,height:l,bottom:a,right:c}=n;return{top:r,left:s,width:o,height:l,bottom:a,right:c}}function tn(e){return Ue(e,{ignoreTransform:!0})}function os(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function is(e,t){return t===void 0&&(t=U(e).getComputedStyle(e)),t.position==="fixed"}function as(e,t){t===void 0&&(t=U(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?n.test(o):!1})}function _t(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Wt(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!it(s)||yn(s)||n.includes(s))return n;const o=U(e).getComputedStyle(s);return s!==e&&as(s,o)&&n.push(s),is(s,o)?n:r(s.parentNode)}return e?r(e):n}function Rn(e){const[t]=_t(e,1);return t??null}function zt(e){return!jt||!e?null:Ye(e)?e:Vt(e)?Wt(e)||e===Xe(e).scrollingElement?window:it(e)?e:null:null}function Nn(e){return Ye(e)?e.scrollX:e.scrollLeft}function En(e){return Ye(e)?e.scrollY:e.scrollTop}function Kt(e){return{x:Nn(e),y:En(e)}}var B;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(B||(B={}));function jn(e){return!jt||!e?!1:e===document.scrollingElement}function Tn(e){const t={x:0,y:0},n=jn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:l,isRight:a,maxScroll:r,minScroll:t}}const ls={x:.2,y:.2};function cs(e,t,n,r,s){let{top:o,left:l,right:a,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=ls);const{isTop:d,isBottom:g,isLeft:h,isRight:v}=Tn(e),p={x:0,y:0},w={x:0,y:0},b={height:t.height*s.y,width:t.width*s.x};return!d&&o<=t.top+b.height?(p.y=B.Backward,w.y=r*Math.abs((t.top+b.height-o)/b.height)):!g&&c>=t.bottom-b.height&&(p.y=B.Forward,w.y=r*Math.abs((t.bottom-b.height-c)/b.height)),!v&&a>=t.right-b.width?(p.x=B.Forward,w.x=r*Math.abs((t.right-b.width-a)/b.width)):!h&&l<=t.left+b.width&&(p.x=B.Backward,w.x=r*Math.abs((t.left+b.width-l)/b.width)),{direction:p,speed:w}}function us(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function An(e){return e.reduce((t,n)=>Ke(t,Kt(n)),fe)}function ds(e){return e.reduce((t,n)=>t+Nn(n),0)}function fs(e){return e.reduce((t,n)=>t+En(n),0)}function kn(e,t){if(t===void 0&&(t=Ue),!e)return;const{top:n,left:r,bottom:s,right:o}=t(e);Rn(e)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const hs=[["x",["left","right"],ds],["y",["top","bottom"],fs]];class Ht{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=_t(n),s=An(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,a]of hs)for(const c of l)Object.defineProperty(this,c,{get:()=>{const d=a(r),g=s[o]-d;return this.rect[c]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class tt{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function gs(e){const{EventTarget:t}=U(e);return e instanceof t?e:Xe(e)}function Bt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var oe;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(oe||(oe={}));function nn(e){e.preventDefault()}function ps(e){e.stopPropagation()}var k;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(k||(k={}));const In={start:[k.Space,k.Enter],cancel:[k.Esc],end:[k.Space,k.Enter,k.Tab]},vs=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case k.Right:return{...n,x:n.x+25};case k.Left:return{...n,x:n.x-25};case k.Down:return{...n,y:n.y+25};case k.Up:return{...n,y:n.y-25}}};class On{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new tt(Xe(n)),this.windowListeners=new tt(U(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(oe.Resize,this.handleCancel),this.windowListeners.add(oe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(oe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&kn(r),n(fe)}handleKeyDown(t){if(At(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=In,coordinateGetter:l=vs,scrollBehavior:a="smooth"}=s,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=r.current,g=d?{x:d.left,y:d.top}:fe;this.referenceCoordinates||(this.referenceCoordinates=g);const h=l(t,{active:n,context:r.current,currentCoordinates:g});if(h){const v=Ct(h,g),p={x:0,y:0},{scrollableAncestors:w}=r.current;for(const b of w){const m=t.code,{isTop:S,isRight:C,isLeft:x,isBottom:N,maxScroll:R,minScroll:j}=Tn(b),y=us(b),D={x:Math.min(m===k.Right?y.right-y.width/2:y.right,Math.max(m===k.Right?y.left:y.left+y.width/2,h.x)),y:Math.min(m===k.Down?y.bottom-y.height/2:y.bottom,Math.max(m===k.Down?y.top:y.top+y.height/2,h.y))},I=m===k.Right&&!C||m===k.Left&&!x,M=m===k.Down&&!N||m===k.Up&&!S;if(I&&D.x!==h.x){const A=b.scrollLeft+v.x,V=m===k.Right&&A<=R.x||m===k.Left&&A>=j.x;if(V&&!v.y){b.scrollTo({left:A,behavior:a});return}V?p.x=b.scrollLeft-A:p.x=m===k.Right?b.scrollLeft-R.x:b.scrollLeft-j.x,p.x&&b.scrollBy({left:-p.x,behavior:a});break}else if(M&&D.y!==h.y){const A=b.scrollTop+v.y,V=m===k.Down&&A<=R.y||m===k.Up&&A>=j.y;if(V&&!v.x){b.scrollTo({top:A,behavior:a});return}V?p.y=b.scrollTop-A:p.y=m===k.Down?b.scrollTop-R.y:b.scrollTop-j.y,p.y&&b.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(t,Ke(Ct(h,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}On.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=In,onActivation:s}=t,{active:o}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const a=o.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function rn(e){return!!(e&&"distance"in e)}function sn(e){return!!(e&&"delay"in e)}class qt{constructor(t,n,r){var s;r===void 0&&(r=gs(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:l}=o;this.props=t,this.events=n,this.document=Xe(l),this.documentListeners=new tt(this.document),this.listeners=new tt(r),this.windowListeners=new tt(U(l)),this.initialCoordinates=(s=Dt(o))!=null?s:fe,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(oe.Resize,this.handleCancel),this.windowListeners.add(oe.DragStart,nn),this.windowListeners.add(oe.VisibilityChange,this.handleCancel),this.windowListeners.add(oe.ContextMenu,nn),this.documentListeners.add(oe.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(sn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(rn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(oe.Click,ps,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(oe.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:l,options:{activationConstraint:a}}=o;if(!s)return;const c=(n=Dt(t))!=null?n:fe,d=Ct(s,c);if(!r&&a){if(rn(a)){if(a.tolerance!=null&&Bt(d,a.tolerance))return this.handleCancel();if(Bt(d,a.distance))return this.handleStart()}if(sn(a)&&Bt(d,a.tolerance))return this.handleCancel();this.handlePending(a,d);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===k.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ms={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Gt extends qt{constructor(t){const{event:n}=t,r=Xe(n.target);super(t,ms,r)}}Gt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const bs={move:{name:"mousemove"},end:{name:"mouseup"}};var Yt;(function(e){e[e.RightClick=2]="RightClick"})(Yt||(Yt={}));class xs extends qt{constructor(t){super(t,bs,Xe(t.event.target))}}xs.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Yt.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ft={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ys extends qt{constructor(t){super(t,Ft)}static setup(){return window.addEventListener(Ft.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ft.move.name,t)};function t(){}}}ys.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var nt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(nt||(nt={}));var Nt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Nt||(Nt={}));function ws(e){let{acceleration:t,activator:n=nt.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:l=5,order:a=Nt.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:g,delta:h,threshold:v}=e;const p=Cs({delta:h,disabled:!o}),[w,b]=kr(),m=i.useRef({x:0,y:0}),S=i.useRef({x:0,y:0}),C=i.useMemo(()=>{switch(n){case nt.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case nt.DraggableRect:return s}},[n,s,c]),x=i.useRef(null),N=i.useCallback(()=>{const j=x.current;if(!j)return;const y=m.current.x*S.current.x,D=m.current.y*S.current.y;j.scrollBy(y,D)},[]),R=i.useMemo(()=>a===Nt.TreeOrder?[...d].reverse():d,[a,d]);i.useEffect(()=>{if(!o||!d.length||!C){b();return}for(const j of R){if((r==null?void 0:r(j))===!1)continue;const y=d.indexOf(j),D=g[y];if(!D)continue;const{direction:I,speed:M}=cs(j,D,C,t,v);for(const A of["x","y"])p[A][I[A]]||(M[A]=0,I[A]=0);if(M.x>0||M.y>0){b(),x.current=j,w(N,l),m.current=M,S.current=I;return}}m.current={x:0,y:0},S.current={x:0,y:0},b()},[t,N,r,b,o,l,JSON.stringify(C),JSON.stringify(p),w,d,R,g,JSON.stringify(v)])}const Ss={x:{[B.Backward]:!1,[B.Forward]:!1},y:{[B.Backward]:!1,[B.Forward]:!1}};function Cs(e){let{delta:t,disabled:n}=e;const r=St(t);return at(s=>{if(n||!r||!s)return Ss;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[B.Backward]:s.x[B.Backward]||o.x===-1,[B.Forward]:s.x[B.Forward]||o.x===1},y:{[B.Backward]:s.y[B.Backward]||o.y===-1,[B.Forward]:s.y[B.Forward]||o.y===1}}},[n,t,r])}function Ds(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return at(s=>{var o;return t==null?null:(o=r??s)!=null?o:null},[r,t])}function Rs(e,t){return i.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...o]},[]),[e,t])}var ot;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ot||(ot={}));var Xt;(function(e){e.Optimized="optimized"})(Xt||(Xt={}));const on=new Map;function Ns(e,t){let{dragging:n,dependencies:r,config:s}=t;const[o,l]=i.useState(null),{frequency:a,measure:c,strategy:d}=s,g=i.useRef(e),h=m(),v=st(h),p=i.useCallback(function(S){S===void 0&&(S=[]),!v.current&&l(C=>C===null?S:C.concat(S.filter(x=>!C.includes(x))))},[v]),w=i.useRef(null),b=at(S=>{if(h&&!n)return on;if(!S||S===on||g.current!==e||o!=null){const C=new Map;for(let x of e){if(!x)continue;if(o&&o.length>0&&!o.includes(x.id)&&x.rect.current){C.set(x.id,x.rect.current);continue}const N=x.node.current,R=N?new Ht(c(N),N):null;x.rect.current=R,R&&C.set(x.id,R)}return C}return S},[e,o,n,h,c]);return i.useEffect(()=>{g.current=e},[e]),i.useEffect(()=>{h||p()},[n,h]),i.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),i.useEffect(()=>{h||typeof a!="number"||w.current!==null||(w.current=setTimeout(()=>{p(),w.current=null},a))},[a,h,p,...r]),{droppableRects:b,measureDroppableContainers:p,measuringScheduled:o!=null};function m(){switch(d){case ot.Always:return!1;case ot.BeforeDragging:return n;default:return!n}}}function Jt(e,t){return at(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Es(e,t){return Jt(e,t)}function js(e){let{callback:t,disabled:n}=e;const r=Tt(t),s=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return i.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function kt(e){let{callback:t,disabled:n}=e;const r=Tt(t),s=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return i.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Ts(e){return new Ht(Ue(e),e)}function an(e,t,n){t===void 0&&(t=Ts);const[r,s]=i.useState(null);function o(){s(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??n)!=null?d:null}const g=t(e);return JSON.stringify(c)===JSON.stringify(g)?c:g})}const l=js({callback(c){if(e)for(const d of c){const{type:g,target:h}=d;if(g==="childList"&&h instanceof HTMLElement&&h.contains(e)){o();break}}}}),a=kt({callback:o});return de(()=>{o(),e?(a==null||a.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),l==null||l.disconnect())},[e]),r}function As(e){const t=Jt(e);return Cn(e,t)}const ln=[];function ks(e){const t=i.useRef(e),n=at(r=>e?r&&r!==ln&&e&&t.current&&e.parentNode===t.current.parentNode?r:_t(e):ln,[e]);return i.useEffect(()=>{t.current=e},[e]),n}function Is(e){const[t,n]=i.useState(null),r=i.useRef(e),s=i.useCallback(o=>{const l=zt(o.target);l&&n(a=>a?(a.set(l,Kt(l)),new Map(a)):null)},[]);return i.useEffect(()=>{const o=r.current;if(e!==o){l(o);const a=e.map(c=>{const d=zt(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,Kt(d)]):null}).filter(c=>c!=null);n(a.length?new Map(a):null),r.current=e}return()=>{l(e),l(o)};function l(a){a.forEach(c=>{const d=zt(c);d==null||d.removeEventListener("scroll",s)})}},[s,e]),i.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>Ke(o,l),fe):An(e):fe,[e,t])}function cn(e,t){t===void 0&&(t=[]);const n=i.useRef(null);return i.useEffect(()=>{n.current=null},t),i.useEffect(()=>{const r=e!==fe;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Ct(e,n.current):fe}function Os(e){i.useEffect(()=>{if(!jt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Ms(e,t){return i.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=l=>{o(l,t)},n},{}),[e,t])}function Mn(e){return i.useMemo(()=>e?os(e):null,[e])}const un=[];function Ls(e,t){t===void 0&&(t=Ue);const[n]=e,r=Mn(n?U(n):null),[s,o]=i.useState(un);function l(){o(()=>e.length?e.map(c=>jn(c)?r:new Ht(t(c),c)):un)}const a=kt({callback:l});return de(()=>{a==null||a.disconnect(),l(),e.forEach(c=>a==null?void 0:a.observe(c))},[e]),s}function Ln(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return it(t)?t:e}function Ps(e){let{measure:t}=e;const[n,r]=i.useState(null),s=i.useCallback(d=>{for(const{target:g}of d)if(it(g)){r(h=>{const v=t(g);return h?{...h,width:v.width,height:v.height}:v});break}},[t]),o=kt({callback:s}),l=i.useCallback(d=>{const g=Ln(d);o==null||o.disconnect(),g&&(o==null||o.observe(g)),r(g?t(g):null)},[t,o]),[a,c]=wt(l);return i.useMemo(()=>({nodeRef:a,rect:n,setRef:c}),[n,a,c])}const zs=[{sensor:Gt,options:{}},{sensor:On,options:{}}],Bs={current:{}},xt={draggable:{measure:tn},droppable:{measure:tn,strategy:ot.WhileDragging,frequency:Xt.Optimized},dragOverlay:{measure:Ue}};class rt extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Fs={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new rt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Rt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:xt,measureDroppableContainers:Rt,windowRect:null,measuringScheduled:!1},Pn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Rt,draggableNodes:new Map,over:null,measureDroppableContainers:Rt},ct=i.createContext(Pn),zn=i.createContext(Fs);function $s(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new rt}}}function Ks(e,t){switch(t.type){case P.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case P.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case P.DragEnd:case P.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case P.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new rt(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case P.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const l=new rt(e.droppable.containers);return l.set(n,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:l}}}case P.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new rt(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function Ys(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=i.useContext(ct),o=St(r),l=St(n==null?void 0:n.id);return i.useEffect(()=>{if(!t&&!r&&o&&l!=null){if(!At(o)||document.activeElement===o.target)return;const a=s.get(l);if(!a)return;const{activatorNode:c,node:d}=a;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const g of[c.current,d.current]){if(!g)continue;const h=Mr(g);if(h){h.focus();break}}})}},[r,t,s,l,o]),null}function Bn(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...r}),n):n}function Xs(e){return i.useMemo(()=>({draggable:{...xt.draggable,...e==null?void 0:e.draggable},droppable:{...xt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...xt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Us(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const o=i.useRef(!1),{x:l,y:a}=typeof s=="boolean"?{x:s,y:s}:s;de(()=>{if(!l&&!a||!t){o.current=!1;return}if(o.current||!r)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const g=n(d),h=Cn(g,r);if(l||(h.x=0),a||(h.y=0),o.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const v=Rn(d);v&&v.scrollBy({top:h.y,left:h.x})}},[t,l,a,r,n])}const It=i.createContext({...fe,scaleX:1,scaleY:1});var Ee;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ee||(Ee={}));const Vs=i.memo(function(t){var n,r,s,o;let{id:l,accessibility:a,autoScroll:c=!0,children:d,sensors:g=zs,collisionDetection:h=Qr,measuring:v,modifiers:p,...w}=t;const b=i.useReducer(Ks,void 0,$s),[m,S]=b,[C,x]=$r(),[N,R]=i.useState(Ee.Uninitialized),j=N===Ee.Initialized,{draggable:{active:y,nodes:D,translate:I},droppable:{containers:M}}=m,A=y!=null?D.get(y):null,V=i.useRef({initial:null,translated:null}),F=i.useMemo(()=>{var Y;return y!=null?{id:y,data:(Y=A==null?void 0:A.data)!=null?Y:Bs,rect:V}:null},[y,A]),q=i.useRef(null),[ie,Te]=i.useState(null),[K,Me]=i.useState(null),W=st(w,Object.values(w)),Ae=lt("DndDescribedBy",l),ve=i.useMemo(()=>M.getEnabled(),[M]),z=Xs(v),{droppableRects:ae,measureDroppableContainers:ee,measuringScheduled:te}=Ns(ve,{dragging:j,dependencies:[I.x,I.y],config:z.droppable}),_=Ds(D,y),we=i.useMemo(()=>K?Dt(K):null,[K]),he=_n(),le=Es(_,z.draggable.measure);Us({activeNode:y!=null?D.get(y):null,config:he.layoutShiftCompensation,initialRect:le,measure:z.draggable.measure});const T=an(_,z.draggable.measure,le),Se=an(_?_.parentElement:null),H=i.useRef({activatorEvent:null,active:null,activeNode:_,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),me=M.getNodeFor((n=H.current.over)==null?void 0:n.id),ne=Ps({measure:z.dragOverlay.measure}),re=(r=ne.nodeRef.current)!=null?r:_,ce=j?(s=ne.rect)!=null?s:T:null,ut=!!(ne.nodeRef.current&&ne.rect),dt=As(ut?null:T),Ve=Mn(re?U(re):null),ue=ks(j?me??_:null),Le=Ls(ue),Pe=Bn(p,{transform:{x:I.x-dt.x,y:I.y-dt.y,scaleX:1,scaleY:1},activatorEvent:K,active:F,activeNodeRect:T,containerNodeRect:Se,draggingNodeRect:ce,over:H.current.over,overlayNodeRect:ne.rect,scrollableAncestors:ue,scrollableAncestorRects:Le,windowRect:Ve}),ft=we?Ke(we,I):null,ht=Is(ue),Ot=cn(ht),Mt=cn(ht,[T]),Ce=Ke(Pe,Ot),be=ce?ns(ce,Pe):null,f=F&&be?h({active:F,collisionRect:be,droppableRects:ae,droppableContainers:ve,pointerCoordinates:ft}):null,E=Gr(f,"id"),[O,X]=i.useState(null),G=ut?Pe:Ke(Pe,Mt),ke=es(G,(o=O==null?void 0:O.rect)!=null?o:null,T),ze=i.useRef(null),Be=i.useCallback((Y,J)=>{let{sensor:Z,options:De}=J;if(q.current==null)return;const se=D.get(q.current);if(!se)return;const Q=Y.nativeEvent,ge=new Z({active:q.current,activeNode:se,event:Q,options:De,context:H,onAbort($){if(!D.get($))return;const{onDragAbort:pe}=W.current,xe={id:$};pe==null||pe(xe),C({type:"onDragAbort",event:xe})},onPending($,Re,pe,xe){if(!D.get($))return;const{onDragPending:He}=W.current,Ne={id:$,constraint:Re,initialCoordinates:pe,offset:xe};He==null||He(Ne),C({type:"onDragPending",event:Ne})},onStart($){const Re=q.current;if(Re==null)return;const pe=D.get(Re);if(!pe)return;const{onDragStart:xe}=W.current,_e={activatorEvent:Q,active:{id:Re,data:pe.data,rect:V}};Qe.unstable_batchedUpdates(()=>{xe==null||xe(_e),R(Ee.Initializing),S({type:P.DragStart,initialCoordinates:$,active:Re}),C({type:"onDragStart",event:_e}),Te(ze.current),Me(Q)})},onMove($){S({type:P.DragMove,coordinates:$})},onEnd:Fe(P.DragEnd),onCancel:Fe(P.DragCancel)});ze.current=ge;function Fe($){return async function(){const{active:pe,collisions:xe,over:_e,scrollAdjustedTranslate:He}=H.current;let Ne=null;if(pe&&He){const{cancelDrop:qe}=W.current;Ne={activatorEvent:Q,active:pe,collisions:xe,delta:He,over:_e},$===P.DragEnd&&typeof qe=="function"&&await Promise.resolve(qe(Ne))&&($=P.DragCancel)}q.current=null,Qe.unstable_batchedUpdates(()=>{S({type:$}),R(Ee.Uninitialized),X(null),Te(null),Me(null),ze.current=null;const qe=$===P.DragEnd?"onDragEnd":"onDragCancel";if(Ne){const Lt=W.current[qe];Lt==null||Lt(Ne),C({type:qe,event:Ne})}})}}},[D]),Ie=i.useCallback((Y,J)=>(Z,De)=>{const se=Z.nativeEvent,Q=D.get(De);if(q.current!==null||!Q||se.dndKit||se.defaultPrevented)return;const ge={active:Q};Y(Z,J.options,ge)===!0&&(se.dndKit={capturedBy:J.sensor},q.current=De,Be(Z,J))},[D,Be]),gt=Rs(g,Ie);Os(g),de(()=>{T&&N===Ee.Initializing&&R(Ee.Initialized)},[T,N]),i.useEffect(()=>{const{onDragMove:Y}=W.current,{active:J,activatorEvent:Z,collisions:De,over:se}=H.current;if(!J||!Z)return;const Q={active:J,activatorEvent:Z,collisions:De,delta:{x:Ce.x,y:Ce.y},over:se};Qe.unstable_batchedUpdates(()=>{Y==null||Y(Q),C({type:"onDragMove",event:Q})})},[Ce.x,Ce.y]),i.useEffect(()=>{const{active:Y,activatorEvent:J,collisions:Z,droppableContainers:De,scrollAdjustedTranslate:se}=H.current;if(!Y||q.current==null||!J||!se)return;const{onDragOver:Q}=W.current,ge=De.get(E),Fe=ge&&ge.rect.current?{id:ge.id,rect:ge.rect.current,data:ge.data,disabled:ge.disabled}:null,$={active:Y,activatorEvent:J,collisions:Z,delta:{x:se.x,y:se.y},over:Fe};Qe.unstable_batchedUpdates(()=>{X(Fe),Q==null||Q($),C({type:"onDragOver",event:$})})},[E]),de(()=>{H.current={activatorEvent:K,active:F,activeNode:_,collisionRect:be,collisions:f,droppableRects:ae,draggableNodes:D,draggingNode:re,draggingNodeRect:ce,droppableContainers:M,over:O,scrollableAncestors:ue,scrollAdjustedTranslate:Ce},V.current={initial:ce,translated:be}},[F,_,f,be,D,re,ce,ae,M,O,ue,Ce]),ws({...he,delta:I,draggingRect:be,pointerCoordinates:ft,scrollableAncestors:ue,scrollableAncestorRects:Le});const We=i.useMemo(()=>({active:F,activeNode:_,activeNodeRect:T,activatorEvent:K,collisions:f,containerNodeRect:Se,dragOverlay:ne,draggableNodes:D,droppableContainers:M,droppableRects:ae,over:O,measureDroppableContainers:ee,scrollableAncestors:ue,scrollableAncestorRects:Le,measuringConfiguration:z,measuringScheduled:te,windowRect:Ve}),[F,_,T,K,f,Se,ne,D,M,ae,O,ee,ue,Le,z,te,Ve]),Wn=i.useMemo(()=>({activatorEvent:K,activators:gt,active:F,activeNodeRect:T,ariaDescribedById:{draggable:Ae},dispatch:S,draggableNodes:D,over:O,measureDroppableContainers:ee}),[K,gt,F,T,S,Ae,D,O,ee]);return L.createElement(Sn.Provider,{value:x},L.createElement(ct.Provider,{value:Wn},L.createElement(zn.Provider,{value:We},L.createElement(It.Provider,{value:ke},d)),L.createElement(Ys,{disabled:(a==null?void 0:a.restoreFocus)===!1})),L.createElement(Xr,{...a,hiddenTextDescribedById:Ae}));function _n(){const Y=(ie==null?void 0:ie.autoScrollEnabled)===!1,J=typeof c=="object"?c.enabled===!1:c===!1,Z=j&&!Y&&!J;return typeof c=="object"?{...c,enabled:Z}:{enabled:Z}}}),Ws=i.createContext(null),dn="button",_s="Draggable";function Hs(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const o=lt(_s),{activators:l,activatorEvent:a,active:c,activeNodeRect:d,ariaDescribedById:g,draggableNodes:h,over:v}=i.useContext(ct),{role:p=dn,roleDescription:w="draggable",tabIndex:b=0}=s??{},m=(c==null?void 0:c.id)===t,S=i.useContext(m?It:Ws),[C,x]=wt(),[N,R]=wt(),j=Ms(l,t),y=st(n);de(()=>(h.set(t,{id:t,key:o,node:C,activatorNode:N,data:y}),()=>{const I=h.get(t);I&&I.key===o&&h.delete(t)}),[h,t]);const D=i.useMemo(()=>({role:p,tabIndex:b,"aria-disabled":r,"aria-pressed":m&&p===dn?!0:void 0,"aria-roledescription":w,"aria-describedby":g.draggable}),[r,p,b,m,w,g.draggable]);return{active:c,activatorEvent:a,activeNodeRect:d,attributes:D,isDragging:m,listeners:r?void 0:j,node:C,over:v,setNodeRef:x,setActivatorNodeRef:R,transform:S}}function Fn(){return i.useContext(zn)}const qs="Droppable",Gs={timeout:25};function $n(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const o=lt(qs),{active:l,dispatch:a,over:c,measureDroppableContainers:d}=i.useContext(ct),g=i.useRef({disabled:n}),h=i.useRef(!1),v=i.useRef(null),p=i.useRef(null),{disabled:w,updateMeasurementsFor:b,timeout:m}={...Gs,...s},S=st(b??r),C=i.useCallback(()=>{if(!h.current){h.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{d(Array.isArray(S.current)?S.current:[S.current]),p.current=null},m)},[m]),x=kt({callback:C,disabled:w||!l}),N=i.useCallback((D,I)=>{x&&(I&&(x.unobserve(I),h.current=!1),D&&x.observe(D))},[x]),[R,j]=wt(N),y=st(t);return i.useEffect(()=>{!x||!R.current||(x.disconnect(),h.current=!1,x.observe(R.current))},[R,x]),i.useEffect(()=>(a({type:P.RegisterDroppable,element:{id:r,key:o,disabled:n,node:R,rect:v,data:y}}),()=>a({type:P.UnregisterDroppable,key:o,id:r})),[r]),i.useEffect(()=>{n!==g.current.disabled&&(a({type:P.SetDroppableDisabled,id:r,key:o,disabled:n}),g.current.disabled=n)},[r,o,n,a]),{active:l,rect:v,isOver:(c==null?void 0:c.id)===r,node:R,over:c,setNodeRef:j}}function Js(e){let{animation:t,children:n}=e;const[r,s]=i.useState(null),[o,l]=i.useState(null),a=St(n);return!n&&!r&&a&&s(a),de(()=>{if(!o)return;const c=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(c==null||d==null){s(null);return}Promise.resolve(t(d,o)).then(()=>{s(null)})},[t,r,o]),L.createElement(L.Fragment,null,n,r?i.cloneElement(r,{ref:l}):null)}const Zs={x:0,y:0,scaleX:1,scaleY:1};function Qs(e){let{children:t}=e;return L.createElement(ct.Provider,{value:Pn},L.createElement(It.Provider,{value:Zs},t))}const eo={position:"fixed",touchAction:"none"},to=e=>At(e)?"transform 250ms ease":void 0,no=i.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:o,className:l,rect:a,style:c,transform:d,transition:g=to}=e;if(!a)return null;const h=s?d:{...d,scaleX:1,scaleY:1},v={...eo,width:a.width,height:a.height,top:a.top,left:a.left,transform:je.Transform.toString(h),transformOrigin:s&&r?_r(r,a):void 0,transition:typeof g=="function"?g(r):g,...c};return L.createElement(n,{className:l,style:v,ref:t},o)}),ro=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:o,className:l}=e;if(o!=null&&o.active)for(const[a,c]of Object.entries(o.active))c!==void 0&&(s[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,c));if(o!=null&&o.dragOverlay)for(const[a,c]of Object.entries(o.dragOverlay))c!==void 0&&r.node.style.setProperty(a,c);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(const[c,d]of Object.entries(s))n.node.style.setProperty(c,d);l!=null&&l.active&&n.node.classList.remove(l.active)}},so=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:je.Transform.toString(t)},{transform:je.Transform.toString(n)}]},oo={duration:250,easing:"ease",keyframes:so,sideEffects:ro({styles:{active:{opacity:"0"}}})};function io(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return Tt((o,l)=>{if(t===null)return;const a=n.get(o);if(!a)return;const c=a.node.current;if(!c)return;const d=Ln(l);if(!d)return;const{transform:g}=U(l).getComputedStyle(l),h=Dn(g);if(!h)return;const v=typeof t=="function"?t:ao(t);return kn(c,s.draggable.measure),v({active:{id:o,data:a.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:l,rect:s.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:s,transform:h})})}function ao(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...oo,...e};return o=>{let{active:l,dragOverlay:a,transform:c,...d}=o;if(!t)return;const g={x:a.rect.left-l.rect.left,y:a.rect.top-l.rect.top},h={scaleX:c.scaleX!==1?l.rect.width*c.scaleX/a.rect.width:1,scaleY:c.scaleY!==1?l.rect.height*c.scaleY/a.rect.height:1},v={x:c.x-g.x,y:c.y-g.y,...h},p=s({...d,active:l,dragOverlay:a,transform:{initial:c,final:v}}),[w]=p,b=p[p.length-1];if(JSON.stringify(w)===JSON.stringify(b))return;const m=r==null?void 0:r({active:l,dragOverlay:a,...d}),S=a.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise(C=>{S.onfinish=()=>{m==null||m(),C()}})}}let fn=0;function lo(e){return i.useMemo(()=>{if(e!=null)return fn++,fn},[e])}const co=L.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:o,modifiers:l,wrapperElement:a="div",className:c,zIndex:d=999}=e;const{activatorEvent:g,active:h,activeNodeRect:v,containerNodeRect:p,draggableNodes:w,droppableContainers:b,dragOverlay:m,over:S,measuringConfiguration:C,scrollableAncestors:x,scrollableAncestorRects:N,windowRect:R}=Fn(),j=i.useContext(It),y=lo(h==null?void 0:h.id),D=Bn(l,{activatorEvent:g,active:h,activeNodeRect:v,containerNodeRect:p,draggingNodeRect:m.rect,over:S,overlayNodeRect:m.rect,scrollableAncestors:x,scrollableAncestorRects:N,transform:j,windowRect:R}),I=Jt(v),M=io({config:r,draggableNodes:w,droppableContainers:b,measuringConfiguration:C}),A=I?m.setRef:void 0;return L.createElement(Qs,null,L.createElement(Js,{animation:M},h&&y?L.createElement(no,{key:y,id:h.id,ref:A,as:a,activatorEvent:g,adjustScale:t,className:c,transition:o,rect:I,style:{zIndex:d,...s},transform:D},n):null))});function Kn(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function uo(e,t){return e.reduce((n,r,s)=>{const o=t.get(r);return o&&(n[s]=o),n},Array(e.length))}function vt(e){return e!==null&&e>=0}function fo(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ho(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Yn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const o=Kn(t,r,n),l=t[s],a=o[s];return!a||!l?null:{x:a.left-l.left,y:a.top-l.top,scaleX:a.width/l.width,scaleY:a.height/l.height}},mt={scaleX:1,scaleY:1},go=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:l}=e;const a=(t=o[n])!=null?t:r;if(!a)return null;if(s===n){const d=o[l];return d?{x:0,y:n<l?d.top+d.height-(a.top+a.height):d.top-a.top,...mt}:null}const c=po(o,s,n);return s>n&&s<=l?{x:0,y:-a.height-c,...mt}:s<n&&s>=l?{x:0,y:a.height+c,...mt}:{x:0,y:0,...mt}};function po(e,t,n){const r=e[t],s=e[t-1],o=e[t+1];return r?n<t?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Xn="Sortable",Un=L.createContext({activeIndex:-1,containerId:Xn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Yn,disabled:{draggable:!1,droppable:!1}});function vo(e){let{children:t,id:n,items:r,strategy:s=Yn,disabled:o=!1}=e;const{active:l,dragOverlay:a,droppableRects:c,over:d,measureDroppableContainers:g}=Fn(),h=lt(Xn,n),v=a.rect!==null,p=i.useMemo(()=>r.map(j=>typeof j=="object"&&"id"in j?j.id:j),[r]),w=l!=null,b=l?p.indexOf(l.id):-1,m=d?p.indexOf(d.id):-1,S=i.useRef(p),C=!fo(p,S.current),x=m!==-1&&b===-1||C,N=ho(o);de(()=>{C&&w&&g(p)},[C,p,w,g]),i.useEffect(()=>{S.current=p},[p]);const R=i.useMemo(()=>({activeIndex:b,containerId:h,disabled:N,disableTransforms:x,items:p,overIndex:m,useDragOverlay:v,sortedRects:uo(p,c),strategy:s}),[b,h,N.draggable,N.droppable,x,p,m,c,v,s]);return L.createElement(Un.Provider,{value:R},t)}const mo=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return Kn(n,r,s).indexOf(t)},bo=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:o,newIndex:l,previousItems:a,previousContainerId:c,transition:d}=e;return!d||!r||a!==o&&s===l?!1:n?!0:l!==s&&t===c},xo={duration:200,easing:"ease"},Vn="transform",yo=je.Transition.toString({property:Vn,duration:0,easing:"linear"}),wo={roleDescription:"sortable"};function So(e){let{disabled:t,index:n,node:r,rect:s}=e;const[o,l]=i.useState(null),a=i.useRef(n);return de(()=>{if(!t&&n!==a.current&&r.current){const c=s.current;if(c){const d=Ue(r.current,{ignoreTransform:!0}),g={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(g.x||g.y)&&l(g)}}n!==a.current&&(a.current=n)},[t,n,r,s]),i.useEffect(()=>{o&&l(null)},[o]),o}function Co(e){let{animateLayoutChanges:t=bo,attributes:n,disabled:r,data:s,getNewIndex:o=mo,id:l,strategy:a,resizeObserverConfig:c,transition:d=xo}=e;const{items:g,containerId:h,activeIndex:v,disabled:p,disableTransforms:w,sortedRects:b,overIndex:m,useDragOverlay:S,strategy:C}=i.useContext(Un),x=Do(r,p),N=g.indexOf(l),R=i.useMemo(()=>({sortable:{containerId:h,index:N,items:g},...s}),[h,s,N,g]),j=i.useMemo(()=>g.slice(g.indexOf(l)),[g,l]),{rect:y,node:D,isOver:I,setNodeRef:M}=$n({id:l,data:R,disabled:x.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...c}}),{active:A,activatorEvent:V,activeNodeRect:F,attributes:q,setNodeRef:ie,listeners:Te,isDragging:K,over:Me,setActivatorNodeRef:W,transform:Ae}=Hs({id:l,data:R,attributes:{...wo,...n},disabled:x.draggable}),ve=Ar(M,ie),z=!!A,ae=z&&!w&&vt(v)&&vt(m),ee=!S&&K,te=ee&&ae?Ae:null,we=ae?te??(a??C)({rects:b,activeNodeRect:F,activeIndex:v,overIndex:m,index:N}):null,he=vt(v)&&vt(m)?o({id:l,items:g,activeIndex:v,overIndex:m}):N,le=A==null?void 0:A.id,T=i.useRef({activeId:le,items:g,newIndex:he,containerId:h}),Se=g!==T.current.items,H=t({active:A,containerId:h,isDragging:K,isSorting:z,id:l,index:N,items:g,newIndex:T.current.newIndex,previousItems:T.current.items,previousContainerId:T.current.containerId,transition:d,wasDragging:T.current.activeId!=null}),me=So({disabled:!H,index:N,node:D,rect:y});return i.useEffect(()=>{z&&T.current.newIndex!==he&&(T.current.newIndex=he),h!==T.current.containerId&&(T.current.containerId=h),g!==T.current.items&&(T.current.items=g)},[z,he,h,g]),i.useEffect(()=>{if(le===T.current.activeId)return;if(le!=null&&T.current.activeId==null){T.current.activeId=le;return}const re=setTimeout(()=>{T.current.activeId=le},50);return()=>clearTimeout(re)},[le]),{active:A,activeIndex:v,attributes:q,data:R,rect:y,index:N,newIndex:he,items:g,isOver:I,isSorting:z,isDragging:K,listeners:Te,node:D,overIndex:m,over:Me,setNodeRef:ve,setActivatorNodeRef:W,setDroppableNodeRef:M,setDraggableNodeRef:ie,transform:me??we,transition:ne()};function ne(){if(me||Se&&T.current.newIndex===N)return yo;if(!(ee&&!At(V)||!d)&&(z||H))return je.Transition.toString({...d,property:Vn})}}function Do(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}k.Down,k.Right,k.Up,k.Left;const hn=[{value:"deadline",label:"Prazo (mais prximo)"},{value:"priority",label:"Prioridade (Alta  Baixa)"},{value:"title",label:"Ttulo (A  Z)"},{value:"client",label:"Cliente (A  Z)"}],gn={alta:0,media:1,baixa:2};function pn(e,t){return[...e].sort((n,r)=>{switch(t){case"deadline":return!n.dueDate&&!r.dueDate?0:n.dueDate?r.dueDate?n.dueDate.localeCompare(r.dueDate):-1:1;case"priority":return(gn[n.priority]??1)-(gn[r.priority]??1);case"title":return n.title.localeCompare(r.title,"pt-BR");case"client":return(n.client??"").localeCompare(r.client??"","pt-BR");default:return 0}})}const Ro={client:!0,dueDate:!0,priority:!0,subtasks:!0,tags:!0,description:!1},vn={client:"Cliente",dueDate:"Data de entrega",priority:"Prioridade",subtasks:"Subtarefas",tags:"Tags",description:"Descrio"},bt=["pendente","agendado","em_andamento","em_tramite","concluida","cancelada"],Ut=i.memo(function({task:t,cardFields:n,today:r,isExpanded:s,onToggleExpand:o,onToggleSubtask:l,onEdit:a,onDelete:c,showStatus:d,isDragging:g,isOverlay:h}){const v=t.subtasks.filter(m=>m.completed).length,p=t.subtasks.length,w=p>0?Math.round(v/p*100):0,b=t.dueDate&&t.dueDate<r&&t.status!=="concluida"&&t.status!=="cancelada";return u.jsx(mn,{className:$e("transition-shadow duration-150",g&&"opacity-40",h&&"shadow-xl ring-2 ring-primary/30 rotate-[2deg]",b&&"border-destructive/50"),children:u.jsxs(bn,{className:"p-3",children:[u.jsxs("div",{className:"flex items-start gap-2",children:[!h&&u.jsx(jr,{className:"w-4 h-4 text-muted-foreground mt-0.5 shrink-0 cursor-grab active:cursor-grabbing"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 mb-1 flex-wrap",children:[n.priority&&u.jsx(et,{variant:"secondary",className:`text-[10px] ${gr[t.priority]}`,children:$t[t.priority]}),d&&u.jsx(et,{variant:"secondary",className:`text-[10px] ${xn[t.status]}`,children:yt[t.status]}),b&&u.jsx(et,{variant:"destructive",className:"text-[10px]",children:"Atrasada"})]}),u.jsx("p",{className:"font-medium text-sm",children:t.title}),n.description&&t.description&&u.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:t.description}),u.jsxs("div",{className:"flex flex-wrap gap-3 mt-1 text-xs text-muted-foreground",children:[n.client&&t.client&&u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(yr,{className:"w-3 h-3"}),t.client]}),n.dueDate&&t.dueDate&&u.jsxs("span",{className:$e("flex items-center gap-1",b&&"text-destructive font-medium"),children:[u.jsx(wr,{className:"w-3 h-3"}),new Date(t.dueDate+"T12:00:00").toLocaleDateString("pt-BR")]})]})]}),!h&&u.jsxs("div",{className:"flex gap-1 shrink-0",children:[u.jsx(Oe,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>a==null?void 0:a(t),children:u.jsx(Sr,{className:"w-3.5 h-3.5"})}),u.jsx(Oe,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive",onClick:()=>c(t.id),children:u.jsx(Cr,{className:"w-3.5 h-3.5"})})]})]}),n.subtasks&&p>0&&!h&&u.jsxs("div",{className:"mt-2",children:[u.jsxs("button",{className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors w-full",onClick:()=>o(t.id),children:[s?u.jsx(Dr,{className:"w-3 h-3"}):u.jsx(Rr,{className:"w-3 h-3"}),u.jsxs("span",{children:[v,"/",p," subtarefas"]}),u.jsx("div",{className:"flex-1 mx-2 bg-muted rounded-full h-1.5",children:u.jsx("div",{className:"bg-primary rounded-full h-1.5 transition-all",style:{width:`${w}%`}})}),u.jsxs("span",{className:"text-[10px]",children:[w,"%"]})]}),s&&u.jsx("div",{className:"mt-2 space-y-1 pl-4",children:t.subtasks.map(m=>u.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer hover:bg-muted/50 rounded p-1 -ml-1",children:[u.jsx(cr,{checked:m.completed,onCheckedChange:()=>l(t.id,m.id)}),u.jsx("span",{className:$e(m.completed&&"line-through text-muted-foreground"),children:m.title})]},m.id))})]}),n.tags&&t.tags&&t.tags.length>0&&!h&&u.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:t.tags.map(m=>u.jsx(et,{variant:"outline",className:"text-[10px]",children:m},m))})]})})});function No(e){const{attributes:t,listeners:n,setNodeRef:r,transform:s,transition:o,isDragging:l}=Co({id:e.task.id}),a={transform:je.Transform.toString(s),transition:o};return u.jsx("div",{ref:r,style:a,...t,...n,children:u.jsx(Ut,{...e,isDragging:l})})}function Eo({status:e,tasks:t,isOver:n,cardFields:r,today:s,expandedTasks:o,onToggleExpand:l,onToggleSubtask:a,onEdit:c,onDelete:d}){const g=i.useMemo(()=>t.map(v=>v.id),[t]),{setNodeRef:h}=$n({id:e});return u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(et,{variant:"secondary",className:xn[e],children:yt[e]}),u.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.length,")"]})]}),u.jsx("div",{ref:h,"data-column-status":e,className:$e("space-y-3 min-h-[400px] p-2 rounded-lg transition-colors duration-150",n?"bg-primary/10 border-2 border-dashed border-primary/40":"bg-muted/30 border-2 border-transparent"),children:u.jsx(vo,{items:g,strategy:go,children:t.length===0?u.jsx("p",{className:$e("text-xs text-center py-8 transition-colors",n?"text-primary font-medium":"text-muted-foreground"),children:n?" Soltar aqui":"Vazio"}):t.map(v=>u.jsx(No,{task:v,cardFields:r,today:s,isExpanded:o.has(v.id),onToggleExpand:l,onToggleSubtask:a,onEdit:c,onDelete:d},v.id))})})]})}function vi(){var be;const{tasks:e,setTasks:t,loading:n,syncing:r,error:s,lastSync:o,sync:l,updateTaskStatus:a,deleteTask:c,createTask:d,updateTask:g,createSubtask:h,updateSubtask:v,deleteSubtask:p}=Hn(),{projects:w}=qn(),[b,m]=i.useState(!1),[S,C]=i.useState(null),[x,N]=i.useState([]),[R,j]=i.useState("kanban"),[y,D]=i.useState(""),[I,M]=i.useState("all"),[A,V]=i.useState("all"),[F,q]=i.useState("all"),[ie,Te]=i.useState("all"),[K,Me]=i.useState(new Set),[W,Ae]=i.useState(Ro),[ve,z]=i.useState(null),[ae,ee]=i.useState(null),[te,_]=i.useState("deadline"),[we,he]=i.useState(!1);i.useEffect(()=>{e.length>0&&N(e)},[e]);const le=i.useMemo(()=>[...new Set(x.map(f=>f.client).filter(Boolean))],[x]),T=i.useMemo(()=>{const f=x.filter(E=>!(y&&!E.title.toLowerCase().includes(y.toLowerCase())||I!=="all"&&E.status!==I||A!=="all"&&E.priority!==A||F!=="all"&&E.client!==F||ie!=="all"&&E.projectId!==ie));return pn(f,te)},[x,y,I,A,F,ie,te]),Se=i.useMemo(()=>ve?x.find(f=>f.id===ve):null,[ve,x]),H=i.useMemo(()=>{const f=new Date;return`${f.getFullYear()}-${String(f.getMonth()+1).padStart(2,"0")}-${String(f.getDate()).padStart(2,"0")}`},[]),me=i.useCallback(f=>{Me(E=>{const O=new Set(E);return O.has(f)?O.delete(f):O.add(f),O})},[]),ne=i.useCallback((f,E)=>{N(O=>O.map(X=>X.id===f?{...X,subtasks:X.subtasks.map(G=>G.id===E?{...G,completed:!G.completed}:G)}:X))},[]),[re,ce]=i.useState(null),ut=i.useCallback(async()=>{re&&(c(re),N(f=>f.filter(E=>E.id!==re)),ce(null))},[re,c]),dt=i.useCallback(f=>{Ae(E=>({...E,[f]:!E[f]}))},[]),Ve=i.useCallback(()=>{C(null),m(!0)},[]),ue=i.useCallback(f=>{C(f),m(!0)},[]),Le=i.useCallback(async(f,E,O)=>{E?await d({title:f.title,deadline:f.deadline,priority:f.priority,status:f.status,clientName:f.clientName,assignee:f.assignee,description:f.description}):O&&await g(O,{title:f.title,deadline:f.deadline,priority:f.priority,status:f.status,clientName:f.clientName,assignee:f.assignee,description:f.description})},[d,g]),Pe=Vr(Ur(Gt,{activationConstraint:{distance:8}}));i.useCallback(f=>{const E=x.find(O=>O.id===f);return E==null?void 0:E.status},[x]);const ft=i.useCallback(f=>{z(f.active.id)},[]),ht=i.useCallback(f=>{const{over:E}=f;if(!E){ee(null);return}const O=E.id,X=x.find(ke=>ke.id===O),G=X?X.status:bt.includes(O)?O:null;ee(G)},[x]),Ot=i.useCallback(f=>{const{active:E,over:O}=f;if(z(null),ee(null),!O)return;const X=E.id,G=O.id;if(X===G)return;const ke=x.find(Ie=>Ie.id===X);if(!ke)return;const ze=x.find(Ie=>Ie.id===G),Be=ze?ze.status:bt.includes(G)?G:ke.status;ke.status!==Be&&(N(Ie=>{const gt=Ie.map(We=>We.id===X?{...We,status:Be}:We);return pn(gt,te)}),a(X,Be))},[x,a,te]),Mt=i.useCallback(()=>{z(null),ee(null)},[]),Ce=i.useMemo(()=>{const f={};return bt.forEach(E=>{f[E]=[]}),T.forEach(E=>{f[E.status]&&f[E.status].push(E)}),f},[T]);return u.jsxs(Gn,{title:"Tarefas",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(br,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),u.jsx(lr,{placeholder:"Buscar tarefa...",value:y,onChange:f=>D(f.target.value),className:"pl-9"})]}),u.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[u.jsxs(Ge,{value:I,onValueChange:M,children:[u.jsx(Je,{className:"w-[130px]",children:u.jsx(pt,{placeholder:"Status"})}),u.jsxs(Ze,{children:[u.jsx(ye,{value:"all",children:"Todos"}),Object.keys(yt).map(f=>u.jsx(ye,{value:f,children:yt[f]},f))]})]}),u.jsxs(Ge,{value:A,onValueChange:V,children:[u.jsx(Je,{className:"w-[110px]",children:u.jsx(pt,{placeholder:"Prioridade"})}),u.jsxs(Ze,{children:[u.jsx(ye,{value:"all",children:"Todas"}),Object.keys($t).map(f=>u.jsx(ye,{value:f,children:$t[f]},f))]})]}),u.jsxs(Ge,{value:F,onValueChange:q,children:[u.jsx(Je,{className:"w-[140px]",children:u.jsx(pt,{placeholder:"Cliente"})}),u.jsxs(Ze,{children:[u.jsx(ye,{value:"all",children:"Todos"}),le.map(f=>u.jsx(ye,{value:f,children:f},f))]})]}),u.jsxs(Ge,{value:ie,onValueChange:Te,children:[u.jsxs(Je,{className:"w-[150px]",children:[u.jsx(Jn,{className:"w-3.5 h-3.5 mr-1 text-muted-foreground"}),u.jsx(pt,{placeholder:"Projeto"})]}),u.jsxs(Ze,{children:[u.jsx(ye,{value:"all",children:"Todos"}),w.map(f=>u.jsx(ye,{value:f.id,children:f.name},f.id))]})]}),u.jsxs(Ge,{value:te,onValueChange:f=>_(f),children:[u.jsxs(Je,{className:"w-[44px] sm:w-[170px] gap-1.5",children:[u.jsx(Nr,{className:"w-3.5 h-3.5 shrink-0 text-muted-foreground"}),u.jsx("span",{className:"hidden sm:inline truncate",children:(be=hn.find(f=>f.value===te))==null?void 0:be.label})]}),u.jsx(Ze,{children:hn.map(f=>u.jsx(ye,{value:f.value,children:f.label},f.value))})]}),u.jsxs(dr,{children:[u.jsx(fr,{asChild:!0,children:u.jsxs(Oe,{variant:"outline",size:"sm",className:"gap-1.5",children:[u.jsx(Tr,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Campos"})]})}),u.jsx(hr,{className:"w-56",align:"end",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-sm font-medium mb-2",children:"Mostrar nos cards"}),Object.keys(vn).map(f=>u.jsxs("div",{className:"flex items-center justify-between py-1",children:[u.jsx(ur,{htmlFor:`field-${f}`,className:"text-sm cursor-pointer",children:vn[f]}),u.jsx(Zt,{id:`field-${f}`,checked:W[f],onCheckedChange:()=>dt(f)})]},f))]})})]}),(I!=="all"||A!=="all"||F!=="all"||ie!=="all"||y)&&u.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>{M("all"),V("all"),q("all"),Te("all"),D("")},className:"text-xs gap-1",children:" Limpar filtros"}),u.jsxs("div",{className:"flex border border-border rounded-md overflow-hidden",children:[u.jsx(Oe,{variant:R==="list"?"default":"ghost",size:"sm",onClick:()=>j("list"),className:"rounded-none",children:u.jsx(xr,{className:"w-4 h-4"})}),u.jsx(Oe,{variant:R==="kanban"?"default":"ghost",size:"sm",onClick:()=>j("kanban"),className:"rounded-none",children:u.jsx(Er,{className:"w-4 h-4"})})]}),R==="kanban"&&u.jsxs("label",{className:"flex items-center gap-1.5 text-xs text-muted-foreground cursor-pointer select-none",children:[u.jsx(Zt,{checked:we,onCheckedChange:he,className:"scale-75"}),"Ocultar concludas"]}),u.jsx(pr,{syncing:r,lastSync:o,onSync:l,error:s}),u.jsxs(Oe,{size:"sm",onClick:Ve,className:"gap-1.5",children:[u.jsx(Zn,{className:"w-4 h-4"})," Nova Tarefa"]})]})]}),u.jsx(Qn,{open:b,onOpenChange:m,task:S,onSave:Le,onCreateSubtask:h,onUpdateSubtask:v,onDeleteSubtask:p}),u.jsx(er,{open:!!re,onOpenChange:f=>!f&&ce(null),children:u.jsxs(tr,{children:[u.jsxs(nr,{children:[u.jsx(rr,{children:"Remover tarefa?"}),u.jsx(sr,{children:"Esta ao no pode ser desfeita. A tarefa ser removida permanentemente do Airtable e do banco local."})]}),u.jsxs(or,{children:[u.jsx(ir,{children:"Cancelar"}),u.jsx(ar,{onClick:ut,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remover"})]})]})}),n?R==="list"?u.jsx(vr,{}):u.jsx(mr,{}):R==="list"?u.jsx("div",{className:"space-y-3",children:T.length===0?u.jsx(mn,{children:u.jsx(bn,{className:"p-8 text-center text-muted-foreground",children:"Nenhuma tarefa encontrada."})}):T.map(f=>u.jsx(Ut,{task:f,cardFields:W,today:H,isExpanded:K.has(f.id),onToggleExpand:me,onToggleSubtask:ne,onEdit:ue,onDelete:ce,showStatus:!0},f.id))}):u.jsxs(Vs,{sensors:Pe,collisionDetection:Jr,onDragStart:ft,onDragOver:ht,onDragEnd:Ot,onDragCancel:Mt,children:[u.jsx("div",{className:$e("grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",we?"xl:grid-cols-4":"xl:grid-cols-6"),children:bt.filter(f=>!we||f!=="concluida"&&f!=="cancelada").map(f=>u.jsx(Eo,{status:f,tasks:Ce[f],isOver:ae===f&&ve!==null,cardFields:W,today:H,expandedTasks:K,onToggleExpand:me,onToggleSubtask:ne,onEdit:ue,onDelete:ce},f))}),u.jsx(co,{dropAnimation:{duration:200,easing:"cubic-bezier(0.18, 0.67, 0.6, 1.22)"},children:Se?u.jsx("div",{className:"w-[260px]",children:u.jsx(Ut,{task:Se,cardFields:W,today:H,isExpanded:!1,onToggleExpand:()=>{},onToggleSubtask:()=>{},onDelete:()=>{},isOverlay:!0})}):null})]})]})}export{vi as default};
