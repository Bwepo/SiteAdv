import{c as ke,r as t,s as w,U as Me,h as N,j as e,m as U,e as x,X as Fe}from"./index-Bl_6Uoau.js";import{b as Re,a as Be,u as Ve}from"./crmTypes-Dn4xFaQy.js";import{B as L,P as ze}from"./badge-g3iwkDrd.js";import{U as ve,P as je}from"./TipTapEditor-ATZjuPOQ.js";import{S as He}from"./skeleton-DvlTUUP7.js";import{B as E}from"./button-BvYdXv9R.js";import{S as te,a as oe,b as ie,c as ne,d as O}from"./select-OVZjbvUN.js";import{D as Ge,a as qe,c as $e,d as Je,f as Xe}from"./dialog-mAehaKRl.js";import{A as Ke,a as We,b as Qe,c as Ye,d as Ze,e as ea,f as aa,g as ra}from"./alert-dialog-kD6pt4qf.js";import{I as be}from"./input-BNgSOOX1.js";import{L as D}from"./label-Dhkl9ll1.js";import{P as sa}from"./ProjectOverview-BewO4xW8.js";import{C as ta}from"./ClientSelect-DtNj-hFY.js";import oa from"./AdminAgenda-B5LewEiY.js";import{A as ye,L as ia}from"./AdminTarefas-CQ2GmUmB.js";import{F as we}from"./folder-kanban-Cll1ichG.js";import{L as na}from"./list-D93w3V9q.js";import{C as la}from"./chevron-left-BsVGwEmW.js";import{L as le}from"./loader-circle-vFcLMjPn.js";import{L as Ne}from"./list-todo-CMMrdNWb.js";import{C as de}from"./calendar-gKNzVd1i.js";import{C as ca}from"./chart-column-DdSEIT22.js";import{C as da}from"./clipboard-list-vPbk6Bpg.js";import"./useQuery-Bx5HeV_0.js";import"./index-BlYmp7Hz.js";import"./dropdown-menu-Dd7wYNvt.js";import"./index-BYz7ll2T.js";import"./index-DQpIUBG5.js";import"./index-CGdmxKAN.js";import"./chevron-right-BMa5MxPj.js";import"./check-CQlnsCrv.js";import"./tabs-LUwC95AS.js";import"./link-Otguc2Nk.js";import"./quote-lEu8s3DX.js";import"./trash-2-DM00DEZb.js";import"./index-CVMpPoUC.js";import"./chevron-up-BmvLRntF.js";import"./index-2To_0qWy.js";import"./card-W1hrYHER.js";import"./triangle-alert-BY-F5XkZ.js";import"./clock-CcbvUEQA.js";import"./popover-D_e6AMA5.js";import"./search-EIYqpv5r.js";import"./scroll-area-BM2KZ8_o.js";import"./CrmSkeletons-CMrCMUzZ.js";import"./AgendaEventSheet-8j_BN0X3.js";import"./form-BXGYnwlU.js";import"./sheet--MDMMNpX.js";import"./textarea-CuJpOgr-.js";import"./useCrmFieldOptions-Bqu5cEuc.js";import"./useMutation-6vvXitli.js";import"./types-C9wiu8_K.js";import"./users-DqEjyMHF.js";import"./map-pin-DdKe0__X.js";import"./pencil-BDBLmfod.js";import"./formatters-BRfsOrXZ.js";import"./download-B7vlXbOO.js";import"./file-text-RSyCl5mZ.js";import"./TarefaSheet-DlTmJtUl.js";import"./separator-0yVKYQ3K.js";import"./ProcessosList-CQnFNcEU.js";import"./scale-3H5bVk_b.js";import"./user-D-r7cLOE.js";import"./circle-check-hhY3ZRi0.js";import"./switch-yEhZpEdH.js";import"./filter-Bq29PFOh.js";import"./circle-x-CLh1BIjB.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=ke("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=ke("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),ce="mladv-project-covers",Ce=800,_e=600,pa=.8,ua=5*1024*1024;async function xa(i){return new Promise((h,C)=>{const u=new Image,_=URL.createObjectURL(i);u.onload=()=>{URL.revokeObjectURL(_);let{width:f,height:l}=u;if(f>Ce||l>_e){const p=Math.min(Ce/f,_e/l);f=Math.round(f*p),l=Math.round(l*p)}const o=document.createElement("canvas");o.width=f,o.height=l;const v=o.getContext("2d");if(!v){C(new Error("Canvas não suportado"));return}v.drawImage(u,0,0,f,l),o.toBlob(p=>{if(!p){C(new Error("Falha ao comprimir imagem"));return}h(p)},"image/jpeg",pa)},u.onerror=()=>{URL.revokeObjectURL(_),C(new Error("Falha ao carregar imagem para compressão"))},u.src=_})}async function ga(i){try{return{blob:await xa(i),contentType:"image/jpeg"}}catch(h){return console.warn("[CoverUpload] Compressão falhou, enviando original:",h),{blob:i,contentType:i.type}}}function ha(){const[i,h]=t.useState(!1),[C,u]=t.useState(0);return{uploadCover:async(l,o)=>{h(!0),u(0);try{if(!["image/jpeg","image/png","image/webp","image/gif"].includes(o.type))throw new Error("Tipo não permitido. Use JPEG, PNG, WebP ou GIF.");if(o.size>ua)throw new Error("Arquivo muito grande. Máximo de 5MB.");u(10);const{blob:p,contentType:y}=await ga(o);u(40);const V=y==="image/jpeg"?"jpg":o.name.split(".").pop()||"jpg",k=`covers/${`${l}-${Date.now()}.${V}`}`,{error:j}=await w.storage.from(ce).upload(k,p,{contentType:y,cacheControl:"3600",upsert:!1});if(j)throw new Error(j.message);u(70);const{data:M}=w.storage.from(ce).getPublicUrl(k),{data:g}=await w.from("mladv_crm_projetos").select("raw_fields").eq("airtable_id",l).single(),P=(g==null?void 0:g.raw_fields)||{},{error:c}=await w.from("mladv_crm_projetos").update({raw_fields:{...P,cover_url:M.publicUrl}}).eq("airtable_id",l);if(c)throw new Error(c.message);return u(100),{url:M.publicUrl,path:k}}finally{h(!1)}},removeCover:async(l,o)=>{try{const y=o.match(/\/object\/public\/mladv-project-covers\/(.+)$/);y&&await w.storage.from(ce).remove([y[1]])}catch{}const{data:v}=await w.from("mladv_crm_projetos").select("raw_fields").eq("airtable_id",l).single(),p=(v==null?void 0:v.raw_fields)||{};delete p.cover_url,await w.from("mladv_crm_projetos").update({raw_fields:p}).eq("airtable_id",l)},isUploading:i,progress:C}}const B={Ativo:"bg-green-600/90 text-white border-green-600/50","Em Espera":"bg-yellow-600/90 text-white border-yellow-600/50",Concluído:"bg-blue-600/90 text-white border-blue-600/50",Cancelado:"bg-red-600/90 text-white border-red-600/50"},fa=[{id:"visao_geral",label:"Visão Geral",icon:ca},{id:"agenda",label:"Agenda",icon:de},{id:"tarefas",label:"Tarefas",icon:da},{id:"subtarefas",label:"Subtarefas",icon:ia}],va=["Ativo","Em Espera","Concluído","Cancelado"],ja=["Extra","CLT","Pessoal"];function Ir(){const{projects:i,loading:h,error:C,createProject:u,updateProject:_,deleteProject:f}=Re(),l=()=>{},{tasks:o,loading:v}=Be(),{events:p}=Ve(),{uploadCover:y,removeCover:V,isUploading:T}=ha(),k=t.useRef(null),[j,M]=t.useState(null),[g,P]=t.useState(null),[c,F]=t.useState(null),[S,Se]=t.useState("visao_geral"),{prefs:Ee,updatePref:De}=Me(),z=Ee.project_view_mode,me=a=>De("project_view_mode",a),[Te,A]=t.useState(!1),[n,pe]=t.useState(null),[I,H]=t.useState(""),[G,q]=t.useState("Ativo"),[$,J]=t.useState(""),[X,K]=t.useState(""),[W,Q]=t.useState(""),[ue,xe]=t.useState(!1),[Y,ge]=t.useState(null),Z=async(a,s)=>{try{await y(a,s),N.success("Capa atualizada!"),l()}catch(r){N.error("Erro ao enviar capa: "+r.message)}},Pe=async(a,s)=>{try{await V(a,s),N.success("Capa removida"),l()}catch(r){N.error("Erro ao remover capa: "+r.message)}},ee=(a,s)=>{var r;s.stopPropagation(),M(a),(r=k.current)==null||r.click()},Ae=a=>{var r;const s=(r=a.target.files)==null?void 0:r[0];s&&j&&Z(j,s),a.target.value=""},ae=t.useCallback((a,s)=>{a.preventDefault(),a.stopPropagation(),P(s)},[]),re=t.useCallback(a=>{a.preventDefault(),a.stopPropagation(),P(null)},[]),se=t.useCallback((a,s)=>{var d;a.preventDefault(),a.stopPropagation(),P(null);const r=(d=a.dataTransfer.files)==null?void 0:d[0];r&&r.type.startsWith("image/")?Z(s,r):r&&N.error("Apenas imagens são permitidas.")},[Z]),b=t.useMemo(()=>i.find(a=>a.id===c)||null,[i,c]),he=t.useMemo(()=>{if(!i.length||!o.length)return new Map;const a=new Map;return i.forEach(s=>{const r=o.filter(m=>m.projectId===s.id),d=r.filter(m=>m.status==="concluida").length;a.set(s.id,{total:r.length,concluidas:d})}),a},[i,o]),Ie=t.useMemo(()=>{if(!c)return{visao_geral:0,agenda:0,tarefas:0,subtarefas:0};const a=o.filter(d=>d.projectId===c),s=a.flatMap(d=>d.subtasks);return{visao_geral:0,agenda:p.filter(d=>d.projectId===c).length,tarefas:a.length,subtarefas:s.length}},[c,o,p]),Ue=()=>{pe(null),H(""),q("Ativo"),J(""),K(""),Q(""),A(!0)},Le=a=>{pe(a),H(a.name),q(a.status||"Ativo"),J(a.tipo||""),K(a.observacoes||""),Q(a.cliente||""),A(!0)},fe=async()=>{if(I.trim()){xe(!0);try{n?await _(n.id,{name:I.trim(),status:G,tipo:$||void 0,observacoes:X||void 0,cliente:W||void 0}):await u({name:I.trim(),status:G,tipo:$||void 0,observacoes:X||void 0,cliente:W||void 0}),A(!1)}catch(a){N.error("Erro ao salvar projeto: "+a.message)}finally{xe(!1)}}},Oe=async()=>{if(Y)try{await f(Y)}catch(a){N.error("Erro ao remover projeto: "+a.message)}finally{ge(null)}};return h||v?e.jsxs("div",{className:"space-y-6 pb-20 md:pb-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Projetos"}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[1,2,3,4].map(a=>e.jsx(He,{className:"h-40 w-full rounded-xl"},a))})]}):e.jsxs(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6 pb-20 md:pb-0",children:[e.jsx("input",{ref:k,type:"file",accept:"image/jpeg,image/png,image/webp,image/gif",onChange:Ae,className:"hidden"}),c?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(E,{variant:"ghost",size:"sm",className:"gap-1.5 text-muted-foreground hover:text-foreground",onClick:()=>F(null),children:[e.jsx(la,{className:"h-4 w-4"}),"Voltar"]}),e.jsx("span",{className:"text-lg font-semibold text-foreground",children:b==null?void 0:b.name}),b&&e.jsx(L,{variant:"outline",className:x("text-[10px] px-1.5 py-0",B[b.status]||"bg-secondary text-secondary-foreground"),children:b.status}),e.jsx(E,{variant:"outline",size:"sm",className:"text-xs h-8 ml-auto",onClick:()=>b&&Le(b),children:"Editar projeto"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Projetos"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(L,{variant:"secondary",className:"text-xs",children:[i.length," projetos"]}),e.jsxs(E,{onClick:Ue,className:"gold-gradient text-primary-foreground shadow-md hover:opacity-90 transition-opacity",children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," Novo Projeto"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 max-w-md",children:[e.jsx(we,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsxs(te,{value:"none",onValueChange:a=>a!=="none"&&F(a),children:[e.jsx(oe,{className:"bg-background/50",children:e.jsx(ie,{placeholder:"Selecionar projeto..."})}),e.jsxs(ne,{children:[e.jsx(O,{value:"none",children:"Selecionar projeto..."}),i.map(a=>e.jsx(O,{value:a.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:a.name}),e.jsx(L,{variant:"outline",className:x("text-[9px] px-1 py-0 ml-1",B[a.status]||"bg-secondary text-secondary-foreground"),children:a.status})]})},a.id))]})]})]}),e.jsxs("div",{className:"flex items-center gap-0.5 rounded-lg border border-border bg-muted/40 p-0.5",children:[e.jsx("button",{onClick:()=>me("list"),className:x("rounded-md p-1.5 transition-colors",z==="list"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:e.jsx(na,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>me("cards"),className:x("rounded-md p-1.5 transition-colors",z==="cards"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:e.jsx(ma,{className:"h-4 w-4"})})]})]})]}),c?e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"flex items-center gap-1 rounded-2xl border border-border bg-muted/40 p-1 w-fit backdrop-blur-sm",children:fa.map(a=>{const s=S===a.id,r=a.icon;return e.jsxs("button",{onClick:()=>Se(a.id),className:x("relative flex items-center gap-2 rounded-xl px-5 py-2.5 text-sm font-medium transition-all duration-200",s?"text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-background/50"),children:[s&&e.jsx(U.div,{layoutId:"project-tab-bg",className:"absolute inset-0 rounded-xl gold-gradient shadow-sm",transition:{type:"spring",bounce:.15,duration:.5}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx(r,{className:"h-4 w-4"}),a.label,a.id!=="visao_geral"&&e.jsx("span",{className:x("inline-flex items-center justify-center rounded-full px-2 py-0.5 text-[10px] font-semibold tabular-nums min-w-[22px] transition-colors",s?"bg-primary-foreground/20 text-primary-foreground":"bg-secondary text-muted-foreground"),children:Ie[a.id]})]})]},a.id)})}),e.jsxs(U.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.2},children:[S==="visao_geral"&&e.jsx(sa,{projectId:c,tasks:o,events:p}),S==="agenda"&&e.jsx(oa,{projectId:c,hideHeader:!0}),S==="tarefas"&&e.jsx(ye,{projectId:c,hideHeader:!0,forceTab:"tarefas"}),S==="subtarefas"&&e.jsx(ye,{projectId:c,hideHeader:!0,forceTab:"subtarefas"})]},`${c}-${S}`)]}):z==="list"?e.jsx("div",{className:"space-y-2",children:i.map((a,s)=>{const r=he.get(a.id),d=r&&r.total>0?Math.round(r.concluidas/r.total*100):0;return e.jsxs(U.div,{initial:{opacity:0,x:-8},animate:{opacity:1,x:0},transition:{delay:s*.03},onClick:()=>F(a.id),className:"group flex items-center gap-4 rounded-lg border border-border bg-card p-3 cursor-pointer hover:border-primary/40 hover:bg-card/90 transition-all duration-200",children:[e.jsxs("div",{className:x("shrink-0 w-24 aspect-[4/3] rounded-md overflow-hidden border-2 bg-muted/20 flex items-center justify-center relative group/thumb transition-all",g===a.id?"border-primary border-dashed ring-2 ring-primary/30":"border-border/50"),onDragOver:m=>ae(m,a.id),onDragLeave:re,onDrop:m=>se(m,a.id),children:[a.coverUrl?e.jsx("img",{src:a.coverUrl,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/10 via-muted/30 to-muted/10 flex items-center justify-center",children:g===a.id?e.jsx(ve,{className:"h-5 w-5 text-primary animate-pulse"}):e.jsx(we,{className:"h-5 w-5 text-accent/40"})}),e.jsx("button",{onClick:m=>ee(a.id,m),className:"absolute inset-0 bg-black/50 opacity-0 group-hover/thumb:opacity-100 transition-opacity flex items-center justify-center",children:T&&j===a.id?e.jsx(le,{className:"h-4 w-4 text-white animate-spin"}):e.jsx(R,{className:"h-4 w-4 text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground truncate",children:a.name}),e.jsx(L,{variant:"outline",className:x("text-[9px] px-1.5 py-0 shrink-0",B[a.status]||"bg-secondary text-secondary-foreground"),children:a.status})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[11px] text-muted-foreground",children:[a.tipo&&e.jsx("span",{children:a.tipo}),a.observacoes&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-border",children:"•"}),e.jsx("span",{className:"truncate",children:a.observacoes})]})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-5 shrink-0",children:[e.jsxs("div",{className:"w-32 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ne,{className:"h-3 w-3"}),(r==null?void 0:r.concluidas)||0,"/",(r==null?void 0:r.total)||0]}),e.jsxs("span",{className:"font-medium",children:[d,"%"]})]}),e.jsx(je,{value:d,className:"h-1.5"})]}),a.dataInicio&&e.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-muted-foreground whitespace-nowrap",children:[e.jsx(de,{className:"h-3 w-3"}),new Date(a.dataInicio+"T12:00:00").toLocaleDateString("pt-BR")]})]})]},a.id)})}):e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3",children:i.map((a,s)=>{const r=he.get(a.id),d=r&&r.total>0?Math.round(r.concluidas/r.total*100):0;return e.jsxs(U.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:s*.03},onClick:()=>F(a.id),className:x("group relative rounded-lg border-2 overflow-hidden cursor-pointer hover:border-primary/40 transition-all duration-200 aspect-[4/3] flex flex-col justify-end",g===a.id?"border-primary border-dashed ring-2 ring-primary/30":"border-border"),onDragOver:m=>ae(m,a.id),onDragLeave:re,onDrop:m=>se(m,a.id),children:[a.coverUrl?e.jsx("img",{src:a.coverUrl,alt:a.name,className:"absolute inset-0 w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-accent/8 via-card to-card"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-card via-card/60 to-transparent"}),e.jsx("button",{onClick:m=>ee(a.id,m),className:"absolute top-2.5 left-2.5 z-20 rounded-full bg-black/50 p-1.5 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70",children:T&&j===a.id?e.jsx(le,{className:"h-3.5 w-3.5 text-white animate-spin"}):e.jsx(R,{className:"h-3.5 w-3.5 text-white"})}),e.jsx(L,{variant:"outline",className:x("absolute top-2.5 right-2.5 text-[11px] px-2 py-0.5 font-semibold backdrop-blur-sm shadow-sm",B[a.status]||"bg-secondary text-secondary-foreground"),children:a.status}),e.jsxs("div",{className:"relative z-10 p-3.5 space-y-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground truncate",children:a.name}),a.tipo&&e.jsx("span",{className:"text-[11px] text-muted-foreground",children:a.tipo})]}),a.observacoes&&e.jsx("p",{className:"text-[11px] text-muted-foreground line-clamp-1",children:a.observacoes}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ne,{className:"h-3 w-3"}),(r==null?void 0:r.concluidas)||0,"/",(r==null?void 0:r.total)||0," tarefas"]}),e.jsxs("span",{className:"font-medium",children:[d,"%"]})]}),e.jsx(je,{value:d,className:"h-1.5"})]}),a.dataInicio&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-muted-foreground",children:[e.jsx(de,{className:"h-2.5 w-2.5"}),"Início: ",new Date(a.dataInicio+"T12:00:00").toLocaleDateString("pt-BR")]})]})]},a.id)})}),e.jsx(Ge,{open:Te,onOpenChange:A,children:e.jsxs(qe,{className:"sm:max-w-md",children:[e.jsx($e,{children:e.jsx(Je,{children:n?"Editar Projeto":"Novo Projeto"})}),e.jsxs("div",{className:"space-y-4 py-2",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"project-name",children:"Nome do projeto"}),e.jsx(be,{id:"project-name",value:I,onChange:a=>H(a.target.value),placeholder:"Ex: EasyBR",onKeyDown:a=>a.key==="Enter"&&fe(),autoFocus:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(D,{children:"Status"}),e.jsxs(te,{value:G,onValueChange:q,children:[e.jsx(oe,{children:e.jsx(ie,{})}),e.jsx(ne,{children:va.map(a=>e.jsx(O,{value:a,children:a},a))})]})]}),e.jsxs("div",{children:[e.jsx(D,{children:"Tipo"}),e.jsxs(te,{value:$||"__none__",onValueChange:a=>J(a==="__none__"?"":a),children:[e.jsx(oe,{children:e.jsx(ie,{placeholder:"Nenhum"})}),e.jsxs(ne,{children:[e.jsx(O,{value:"__none__",children:"Nenhum"}),ja.map(a=>e.jsx(O,{value:a,children:a},a))]})]})]})]}),e.jsxs("div",{children:[e.jsx(D,{children:"Cliente"}),e.jsx(ta,{value:W,onValueChange:a=>Q(a)})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"project-obs",children:"Observações"}),e.jsx(be,{id:"project-obs",value:X,onChange:a=>K(a.target.value),placeholder:"Notas sobre o projeto"})]}),n&&e.jsxs("div",{children:[e.jsx(D,{children:"Capa do projeto"}),e.jsxs("div",{className:x("mt-1.5 flex items-center gap-3 p-3 rounded-lg border-2 border-dashed transition-all",g===n.id?"border-primary bg-primary/5":"border-transparent"),onDragOver:a=>ae(a,n.id),onDragLeave:re,onDrop:a=>se(a,n.id),children:[n.coverUrl?e.jsxs("div",{className:"relative w-24 aspect-[4/3] rounded-md overflow-hidden border border-border",children:[e.jsx("img",{src:n.coverUrl,alt:"Capa",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>Pe(n.id,n.coverUrl),className:"absolute top-0.5 right-0.5 rounded-full bg-destructive p-0.5",children:e.jsx(Fe,{className:"h-3 w-3 text-destructive-foreground"})})]}):e.jsxs("div",{className:x("w-24 aspect-[4/3] rounded-md border-2 border-dashed flex flex-col items-center justify-center bg-muted/20 gap-1 transition-colors",g===n.id?"border-primary":"border-border"),children:[g===n.id?e.jsx(ve,{className:"h-5 w-5 text-primary animate-pulse"}):e.jsx(R,{className:"h-5 w-5 text-muted-foreground/40"}),e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Arraste aqui"})]}),e.jsx(E,{type:"button",variant:"outline",size:"sm",onClick:a=>ee(n.id,a),disabled:T,children:T&&j===n.id?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-3.5 w-3.5 mr-1.5 animate-spin"})," Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-3.5 w-3.5 mr-1.5"})," ",n.coverUrl?"Trocar":"Adicionar"]})})]})]})]}),e.jsxs(Xe,{children:[e.jsx(E,{variant:"outline",onClick:()=>A(!1),children:"Cancelar"}),e.jsx(E,{onClick:fe,disabled:ue||!I.trim(),className:"gold-gradient text-primary-foreground hover:opacity-90",children:ue?"Salvando...":n?"Salvar":"Criar"})]})]})}),e.jsx(Ke,{open:!!Y,onOpenChange:a=>!a&&ge(null),children:e.jsxs(We,{children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Remover projeto?"}),e.jsx(Ze,{children:"Esta ação não pode ser desfeita. O projeto será removido permanentemente."})]}),e.jsxs(ea,{children:[e.jsx(aa,{children:"Cancelar"}),e.jsx(ra,{onClick:Oe,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remover"})]})]})})]})}export{Ir as default};
