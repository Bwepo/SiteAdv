import{c as L,j as e,r as l,e as A,X as Me,U as Ve,m as $e,h as p,V as fe,s as Ce}from"./index-DyFY_geq.js";import{C as P,a as O,c as R,b as G,d as X}from"./card-DKgjZrhA.js";import{B as j}from"./button-DDKUy5aI.js";import{P as Fe,a as qe,b as Ue}from"./popover-RWDgTVEa.js";import{I as _}from"./input-Dh2VVhU3.js";import{L as ee}from"./label-CXBGdOI9.js";import{T as Ge,a as He,b as Q,c as W,E as be,U as Je}from"./tabs-CGo_2eXS.js";import{u as Ke}from"./useCrmFieldOptions-_aWsi9AX.js";import{P as Xe,B as U}from"./badge-cv0ZjFJD.js";import{S as Qe}from"./separator-D0ulFvhr.js";import{A as se,a as ae,b as re,c as te,d as le,e as oe,f as ne,g as ce,h as ve}from"./alert-dialog-vXHv_RDa.js";import{S as ie,a as de,c as me,d as he,b as We}from"./select-74VM9eyW.js";import{S as Z}from"./skeleton-DvD88n1b.js";import{u as Ye,a as Ne,s as Ze,K as es,P as ss,D as as,f as rs,S as ts,v as ls,e as os,C as ns,g as cs}from"./sortable.esm-DJvzpeOe.js";import{L as F}from"./loader-circle-49uHq0JK.js";import{C as ue}from"./check-CKVpSA4r.js";import{P as is}from"./pencil-Cg4rNZO6.js";import{T as ke}from"./trash-2-CQAi9VgV.js";import{S as ds}from"./settings-DslTRfah.js";import{L as Se}from"./lock-CtnqmACX.js";import{E as ye}from"./eye-off-DclDdDyx.js";import{D as ms}from"./download-B2uaFunL.js";import"./index-m5olh0Pl.js";import"./index-CiWQL2JN.js";import"./index-C--ltkpL.js";import"./useQuery-BAUPoymC.js";import"./useMutation-N6yCiwHQ.js";import"./index-DCxkZEM0.js";import"./index-Duj2ZiZw.js";import"./chevron-up-VLQ2nNh1.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=L("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=L("FolderArchive",[["circle",{cx:"15",cy:"19",r:"2",key:"u2pros"}],["path",{d:"M20.9 19.8A2 2 0 0 0 22 18V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h5.1",key:"1jj40k"}],["path",{d:"M15 11v-1",key:"cntcp"}],["path",{d:"M15 17v-2",key:"1279jj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=L("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=L("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=L("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=L("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=L("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=L("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),q=[{label:"Vermelho",value:"bg-red-100 text-red-800"},{label:"Amarelo",value:"bg-yellow-100 text-yellow-800"},{label:"Verde",value:"bg-green-100 text-green-800"},{label:"Azul",value:"bg-blue-100 text-blue-800"},{label:"Roxo",value:"bg-purple-100 text-purple-800"},{label:"Cinza",value:"bg-gray-100 text-gray-800"},{label:"Slate",value:"bg-slate-100 text-slate-800"},{label:"Laranja",value:"bg-orange-100 text-orange-800"},{label:"Rosa",value:"bg-pink-100 text-pink-800"},{label:"Teal",value:"bg-teal-100 text-teal-800"}],gs=[{fieldName:"tarefa_status",title:"Status da Tarefa",description:"OpÃ§Ãµes de status para tarefas do CRM."},{fieldName:"tarefa_prioridade",title:"Prioridade da Tarefa",description:"NÃ­veis de prioridade para tarefas."},{fieldName:"agenda_tipo",title:"Tipo de Evento",description:"Tipos de compromissos na agenda."},{fieldName:"agenda_status",title:"Status do Evento",description:"Status dos compromissos da agenda."},{fieldName:"subtarefa_status",title:"Status da Subtarefa",description:"Status das subtarefas."}];function fs({opt:o,editingId:g,editLabel:u,editColor:c,editValue:f,setEditLabel:b,setEditColor:x,setEditValue:r,onStartEdit:n,onSaveEdit:v,onCancelEdit:d,onDelete:m}){var s;const{attributes:N,listeners:w,setNodeRef:B,transform:T,transition:M,isDragging:S}=os({id:o.id}),E={transform:ns.Transform.toString(T),transition:M,zIndex:S?10:void 0,opacity:S?.8:1};return e.jsxs("div",{ref:B,style:E,className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-border/50 bg-muted/30 group",children:[e.jsx("button",{type:"button",...N,...w,className:"cursor-grab active:cursor-grabbing touch-none p-1 -m-1 rounded hover:bg-muted/60",children:e.jsx(us,{className:"h-4 w-4 text-muted-foreground shrink-0"})}),g===o.id?e.jsxs(e.Fragment,{children:[e.jsx(_,{value:u,onChange:t=>b(t.target.value),placeholder:"Label",className:"h-7 text-sm flex-1",autoFocus:!0}),e.jsx(_,{value:f,onChange:t=>r(t.target.value.toLowerCase().replace(/\s+/g,"_")),placeholder:"Valor",className:"h-7 text-sm w-28 font-mono"}),e.jsxs(ie,{value:c,onValueChange:x,children:[e.jsx(de,{className:"h-7 w-28",children:e.jsx(U,{className:A("text-[10px]",c),children:((s=q.find(t=>t.value===c))==null?void 0:s.label)??"Cor"})}),e.jsx(me,{children:q.map(t=>e.jsx(he,{value:t.value,children:e.jsx(U,{className:A("text-[10px]",t.value),children:t.label})},t.value))})]}),e.jsx(j,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:v,children:e.jsx(ue,{className:"h-3.5 w-3.5 text-primary"})}),e.jsx(j,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:d,children:e.jsx(Me,{className:"h-3.5 w-3.5"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:A("text-[10px]",o.color),children:o.label}),e.jsx("span",{className:"text-[10px] text-muted-foreground font-mono",children:o.value}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(j,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>n(o),children:e.jsx(is,{className:"h-3 w-3"})}),e.jsx(j,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:()=>m(o.id),children:e.jsx(ke,{className:"h-3 w-3"})})]})]})]})}function bs({fieldName:o,title:g,description:u,options:c,onAdd:f,onUpdate:b,onDelete:x,onReorder:r,onCountRecords:n}){var ge;const[v,d]=l.useState(!1),[m,N]=l.useState(""),[w,B]=l.useState(""),[T,M]=l.useState(q[5].value),[S,E]=l.useState(null),[s,t]=l.useState(""),[h,i]=l.useState(""),[y,z]=l.useState(""),[C,H]=l.useState(null),[D,V]=l.useState(""),[k,Y]=l.useState(null),[xe,pe]=l.useState(!1),$=C?c.find(a=>a.id===C):null,je=$?c.filter(a=>a.id!==C):[];l.useEffect(()=>{var a;$?(pe(!0),V(((a=je[0])==null?void 0:a.value)??""),n(o,$.value).then(Y).catch(()=>Y(0)).finally(()=>pe(!1))):Y(null)},[C]);const Te=Ye(Ne(ss,{activationConstraint:{distance:5}}),Ne(es,{coordinateGetter:Ze})),De=()=>{!m.trim()||!w.trim()||(f({field_name:o,value:m.trim().toLowerCase().replace(/\s+/g,"_"),label:w.trim(),color:T}),N(""),B(""),M(q[5].value),d(!1))},Le=a=>{E(a.id),t(a.label),i(a.color),z(a.value)},ze=()=>{if(!S||!s.trim())return;const a=c.find(J=>J.id===S),I={id:S,label:s.trim(),color:h};a&&y.trim()&&y.trim()!==a.value&&(I.value=y.trim()),b(I),E(null)},Ie=()=>{C&&(x({id:C,migrateToValue:k&&k>0?D:void 0}),H(null))},Pe=a=>{const{active:I,over:J}=a;if(!J||I.id===J.id)return;const Oe=c.findIndex(K=>K.id===I.id),Re=c.findIndex(K=>K.id===J.id),_e=cs(c,Oe,Re);r(_e.map((K,Be)=>({id:K.id,sort_order:Be})))};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground",children:g}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u})]}),e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>d(!0),className:"gap-1",children:[e.jsx(Xe,{className:"h-3.5 w-3.5"})," Adicionar"]})]}),e.jsx(as,{sensors:Te,collisionDetection:rs,onDragEnd:Pe,children:e.jsx(ts,{items:c.map(a=>a.id),strategy:ls,children:e.jsx("div",{className:"space-y-1.5",children:c.map(a=>e.jsx(fs,{opt:a,editingId:S,editLabel:s,editColor:h,editValue:y,setEditLabel:t,setEditColor:i,setEditValue:z,onStartEdit:Le,onSaveEdit:ze,onCancelEdit:()=>E(null),onDelete:I=>H(I)},a.id))})})}),v&&e.jsxs("div",{className:"p-3 rounded-lg border border-border bg-muted/50 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(_,{value:w,onChange:a=>{B(a.target.value),(!m||m===w.trim().toLowerCase().replace(/\s+/g,"_"))&&N(a.target.value.trim().toLowerCase().replace(/\s+/g,"_"))},placeholder:"Nome (ex: Ultra)",className:"h-8 text-sm",autoFocus:!0}),e.jsx(_,{value:m,onChange:a=>N(a.target.value),placeholder:"Valor (ex: ultra)",className:"h-8 text-sm font-mono"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ie,{value:T,onValueChange:M,children:[e.jsx(de,{className:"h-8 w-36",children:e.jsx(U,{className:A("text-[10px]",T),children:((ge=q.find(a=>a.value===T))==null?void 0:ge.label)??"Cor"})}),e.jsx(me,{children:q.map(a=>e.jsx(he,{value:a.value,children:e.jsx(U,{className:A("text-[10px]",a.value),children:a.label})},a.value))})]}),e.jsx("div",{className:"flex-1"}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>d(!1),children:"Cancelar"}),e.jsx(j,{size:"sm",onClick:De,disabled:!w.trim()||!m.trim(),children:"Adicionar"})]})]}),e.jsx(se,{open:!!C,onOpenChange:a=>!a&&H(null),children:e.jsxs(ae,{children:[e.jsxs(re,{children:[e.jsxs(te,{children:['Remover opÃ§Ã£o "',$==null?void 0:$.label,'"?']}),e.jsx(le,{asChild:!0,children:e.jsx("div",{className:"space-y-3",children:xe?e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(F,{className:"h-4 w-4 animate-spin"}),"Verificando registros afetados..."]}):k&&k>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-destructive font-medium",children:[k," registro",k>1?"s":""," usa",k>1?"m":""," este valor."]}),e.jsx("p",{children:"Migrar para:"}),e.jsxs(ie,{value:D,onValueChange:V,children:[e.jsx(de,{className:"w-full",children:e.jsx(We,{})}),e.jsx(me,{children:je.map(a=>e.jsxs(he,{value:a.value,children:[e.jsx(U,{className:A("text-[10px] mr-2",a.color),children:a.label}),e.jsx("span",{className:"text-muted-foreground font-mono text-xs",children:a.value})]},a.value))})]})]}):e.jsx("p",{children:"Nenhum registro utiliza este valor. A opÃ§Ã£o serÃ¡ removida dos seletores."})})})]}),e.jsxs(oe,{children:[e.jsx(ne,{children:"Cancelar"}),e.jsx(ce,{onClick:Ie,disabled:xe||!!k&&k>0&&!D,children:k&&k>0?"Migrar e Remover":"Remover"})]})]})})]})}function vs(){const{allOptions:o,isLoading:g,getOptions:u,countRecords:c,addOption:f,updateOption:b,deleteOption:x,reorderOptions:r}=Ke();return g?e.jsxs(P,{className:"border-border/50 bg-card/80 backdrop-blur-sm",children:[e.jsxs(O,{className:"pb-4",children:[e.jsx(Z,{className:"h-5 w-48"}),e.jsx(Z,{className:"h-4 w-72"})]}),e.jsx(R,{className:"space-y-4",children:[1,2,3].map(n=>e.jsx(Z,{className:"h-20 w-full"},n))})]}):e.jsxs(P,{className:"border-border/50 bg-card/80 backdrop-blur-sm",children:[e.jsxs(O,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-5 w-5 text-primary"}),e.jsx(G,{className:"text-base",children:"Campos do CRM"})]}),e.jsx(X,{children:"Gerencie as opÃ§Ãµes de status, prioridade e tipo de evento."})]}),e.jsx(R,{className:"space-y-6",children:gs.map((n,v)=>e.jsxs("div",{children:[v>0&&e.jsx(Qe,{className:"mb-6"}),e.jsx(bs,{fieldName:n.fieldName,title:n.title,description:n.description,options:u(n.fieldName),onAdd:d=>f.mutate(d),onUpdate:d=>b.mutate(d),onDelete:d=>x.mutate(d),onReorder:d=>r.mutate(d),onCountRecords:c})]},n.fieldName))})]})}function Ns(){const[o,g]=l.useState(""),[u,c]=l.useState(""),[f,b]=l.useState(!1),[x,r]=l.useState(!1),[n,v]=l.useState(!1),d=async m=>{if(m.preventDefault(),o.length<6){p.error("A nova senha deve ter no mÃ­nimo 6 caracteres.");return}if(o!==u){p.error("As senhas nÃ£o coincidem.");return}b(!0);try{const{error:N}=await Ce.auth.updateUser({password:o});N?p.error(N.message):(p.success("Senha alterada com sucesso!"),g(""),c(""))}catch{p.error("Erro ao alterar a senha.")}finally{b(!1)}};return e.jsxs(P,{className:"border-border/50 bg-card/80 backdrop-blur-sm",children:[e.jsxs(O,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5 text-primary"}),e.jsx(G,{className:"text-base",children:"Alterar Senha"})]}),e.jsx(X,{children:"Atualize sua senha de acesso."})]}),e.jsx(R,{children:e.jsxs("form",{onSubmit:d,className:"space-y-4 max-w-sm",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Nova Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{type:x?"text":"password",value:o,onChange:m=>g(m.target.value),placeholder:"MÃ­nimo 6 caracteres",required:!0,minLength:6}),e.jsx("button",{type:"button",onClick:()=>r(!x),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:x?e.jsx(ye,{className:"h-4 w-4"}):e.jsx(be,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Confirmar Nova Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{type:n?"text":"password",value:u,onChange:m=>c(m.target.value),placeholder:"Repita a nova senha",required:!0,minLength:6}),e.jsx("button",{type:"button",onClick:()=>v(!n),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:n?e.jsx(ye,{className:"h-4 w-4"}):e.jsx(be,{className:"h-4 w-4"})})]})]}),e.jsx(j,{type:"submit",disabled:f,className:"gold-gradient text-primary-foreground hover:opacity-90",children:f?"Alterando...":"Alterar Senha"})]})})]})}function ys(){const[o,g]=l.useState([]),[u,c]=l.useState(!1),[f,b]=l.useState(!1),[x,r]=l.useState(null),[n,v]=l.useState(!1),[d,m]=l.useState(null),N=async()=>{var t;const{data:s}=await Ce.auth.getSession();return(t=s.session)==null?void 0:t.access_token},w=async()=>{c(!0);try{const s=await N(),h=await fetch("https://xlumfscnfnqldlvpbpil.supabase.co/functions/v1/backup-data",{method:"GET",headers:{Authorization:`Bearer ${s}`}}),i=await h.json();if(!h.ok)throw new Error(i.error||"Erro ao listar backups");g(i.backups||[])}catch(s){console.error("Error loading backups:",s),p.error("Erro ao carregar backups: "+s.message)}finally{c(!1)}};l.useEffect(()=>{w()},[]);const B=async()=>{b(!0);try{const s=await N(),h=await fetch("https://xlumfscnfnqldlvpbpil.supabase.co/functions/v1/backup-data",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({})}),i=await h.json();if(!h.ok)throw new Error(i.error||"Erro no backup");p.success(`Backup criado! ${i.total_rows} registros em ${i.timestamp}`),w()}catch(s){p.error("Erro no backup: "+s.message)}finally{b(!1)}},T=async s=>{r(s);try{const t=await N(),i=await fetch("https://xlumfscnfnqldlvpbpil.supabase.co/functions/v1/restore-data",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({storage_path:s})}),y=await i.json();if(!i.ok)throw new Error(y.error||"Erro na restauraÃ§Ã£o");p.success("Backup restaurado com sucesso!")}catch(t){p.error("Erro na restauraÃ§Ã£o: "+t.message)}finally{r(null)}},M=async s=>{m(s);try{const t=await N(),i=await fetch("https://xlumfscnfnqldlvpbpil.supabase.co/functions/v1/backup-data",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({folder:s})}),y=await i.json();if(!i.ok)throw new Error(y.error||"Erro ao excluir");p.success("Backup excluÃ­do!"),w()}catch(t){p.error("Erro ao excluir: "+t.message)}finally{m(null)}},S=async s=>{const t=s.target.files;if(!(!t||t.length===0)){v(!0);try{const h=await N(),i="xlumfscnfnqldlvpbpil",y=new FormData;y.append("mode","upsert");for(const D of Array.from(t)){const V=D.name.replace(/\.csv$/i,"");y.append(V,D)}const z=await fetch(`https://${i}.supabase.co/functions/v1/restore-data`,{method:"POST",headers:{Authorization:`Bearer ${h}`},body:y}),C=await z.json();if(!z.ok)throw new Error(C.error||"Erro na importaÃ§Ã£o");const H=Object.entries(C.results||{}).map(([D,V])=>`${D}: ${V.inserted||0}`).join(", ");p.success(`ImportaÃ§Ã£o concluÃ­da! ${H}`)}catch(h){p.error("Erro na importaÃ§Ã£o: "+h.message)}finally{v(!1),s.target.value=""}}},E=s=>{try{const t=s.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2})-(\d{2})-(\d{2})$/);if(!t)return s;const[,h,i,y,z,C]=t;return`${y}/${i}/${h} ${z}:${C}`}catch{return s}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(P,{className:"border-border/50 bg-card/80 backdrop-blur-sm",children:[e.jsxs(O,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-5 w-5 text-primary"}),e.jsx(G,{className:"text-base",children:"AÃ§Ãµes de Backup"})]}),e.jsx(X,{children:"Backup automÃ¡tico diÃ¡rio Ã s 3h. Use os botÃµes abaixo para operaÃ§Ãµes manuais."})]}),e.jsxs(R,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(j,{onClick:B,disabled:f,className:"gold-gradient text-primary-foreground hover:opacity-90 gap-2",children:[f?e.jsx(F,{className:"h-4 w-4 animate-spin"}):e.jsx(ms,{className:"h-4 w-4"}),f?"Fazendo backup...":"Fazer Backup Agora"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:".csv",multiple:!0,onChange:S,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:n}),e.jsxs(j,{variant:"outline",disabled:n,className:"gap-2 pointer-events-none w-full sm:w-auto",children:[n?e.jsx(F,{className:"h-4 w-4 animate-spin"}):e.jsx(Je,{className:"h-4 w-4"}),n?"Importando...":"Importar CSVs (Upsert)"]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-3",children:["Os arquivos CSV devem ser nomeados com o nome da tabela (ex: ",e.jsx("code",{children:"mladv_crm_tarefas.csv"}),"). O sistema farÃ¡ upsert por ID."]})]})]}),e.jsxs(P,{className:"border-border/50 bg-card/80 backdrop-blur-sm",children:[e.jsx(O,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-5 w-5 text-primary"}),e.jsx(G,{className:"text-base",children:"Backups Salvos"})]}),e.jsxs(j,{variant:"ghost",size:"sm",onClick:w,disabled:u,className:"gap-1.5",children:[e.jsx(ps,{className:A("h-3.5 w-3.5",u&&"animate-spin")}),"Atualizar"]})]})}),e.jsx(R,{children:u&&o.length===0?e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground py-8 justify-center",children:[e.jsx(F,{className:"h-4 w-4 animate-spin"}),"Carregando..."]}):o.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:'Nenhum backup encontrado. Clique em "Fazer Backup Agora" para criar o primeiro.'}):e.jsx("div",{className:"space-y-2",children:o.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border/50 bg-background/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:E(s.name)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.name})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(se,{children:[e.jsx(ve,{asChild:!0,children:e.jsxs(j,{variant:"outline",size:"sm",disabled:x===s.name,className:"gap-1.5",children:[x===s.name?e.jsx(F,{className:"h-3.5 w-3.5 animate-spin"}):e.jsx(js,{className:"h-3.5 w-3.5"}),"Restaurar"]})}),e.jsxs(ae,{children:[e.jsxs(re,{children:[e.jsx(te,{children:"Restaurar Backup"}),e.jsxs(le,{children:["Isso irÃ¡ ",e.jsx("strong",{children:"substituir todos os dados atuais"})," pelos dados deste backup (",E(s.name),"). Esta aÃ§Ã£o nÃ£o pode ser desfeita. Tem certeza?"]})]}),e.jsxs(oe,{children:[e.jsx(ne,{children:"Cancelar"}),e.jsx(ce,{onClick:()=>T(s.name),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sim, Restaurar"})]})]})]}),e.jsxs(se,{children:[e.jsx(ve,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"sm",disabled:d===s.name,className:"text-destructive hover:text-destructive",children:d===s.name?e.jsx(F,{className:"h-3.5 w-3.5 animate-spin"}):e.jsx(ke,{className:"h-3.5 w-3.5"})})}),e.jsxs(ae,{children:[e.jsxs(re,{children:[e.jsx(te,{children:"Excluir Backup"}),e.jsxs(le,{children:["Excluir o backup de ",E(s.name),"? Esta aÃ§Ã£o nÃ£o pode ser desfeita."]})]}),e.jsxs(oe,{children:[e.jsx(ne,{children:"Cancelar"}),e.jsx(ce,{onClick:()=>M(s.name),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Excluir"})]})]})]})]})]},s.name))})})]})]})}const Zs=()=>{const{prefs:o,updatePref:g}=Ve(),[u,c]=l.useState(""),[f,b]=l.useState(!1);l.useEffect(()=>{c(o.panel_name||"Painel Admin")},[o.panel_name]);const x=[{id:"forest",name:"Forest",desc:"Verde & Dourado",colors:["hsl(165 14% 9%)","hsl(40 58% 54%)","hsl(162 11% 13%)","hsl(160 7% 20%)"]},{id:"ocean",name:"Ocean",desc:"Azul & Teal",colors:["hsl(220 18% 10%)","hsl(210 65% 60%)","hsl(218 16% 14%)","hsl(185 55% 48%)"]},{id:"slate",name:"Slate",desc:"Cinza & Indigo",colors:["hsl(240 10% 10%)","hsl(250 45% 65%)","hsl(240 8% 14%)","hsl(240 6% 22%)"]},{id:"midnight",name:"Midnight",desc:"Navy & ElÃ©trico",colors:["hsl(228 25% 7%)","hsl(217 90% 61%)","hsl(226 22% 11%)","hsl(225 15% 18%)"]},{id:"copper",name:"Copper",desc:"Bronze & Rose Gold",colors:["hsl(20 18% 8%)","hsl(25 65% 58%)","hsl(18 15% 12%)","hsl(15 55% 52%)"]},{id:"arctic",name:"Arctic",desc:"Gelo & Ciano",colors:["hsl(200 25% 97%)","hsl(195 80% 42%)","hsl(200 20% 94%)","hsl(200 12% 88%)"]}];return e.jsxs($e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6 pb-20 md:pb-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ds,{className:"h-6 w-6 text-primary"}),e.jsx("h1",{className:"text-2xl font-bold text-foreground font-serif",children:"ConfiguraÃ§Ãµes"})]}),e.jsxs(Ge,{defaultValue:"geral",className:"space-y-6",children:[e.jsxs(He,{className:"bg-muted/40 border border-border",children:[e.jsxs(Q,{value:"geral",className:"gap-1.5 data-[state=active]:bg-background",children:[e.jsx(we,{className:"h-4 w-4"}),"Geral"]}),e.jsxs(Q,{value:"senha",className:"gap-1.5 data-[state=active]:bg-background",children:[e.jsx(Se,{className:"h-4 w-4"}),"Senha"]}),e.jsxs(Q,{value:"campos",className:"gap-1.5 data-[state=active]:bg-background",children:[e.jsx(Ae,{className:"h-4 w-4"}),"Campos CRM"]}),e.jsxs(Q,{value:"backup",className:"gap-1.5 data-[state=active]:bg-background",children:[e.jsx(Ee,{className:"h-4 w-4"}),"Backup"]})]}),e.jsxs(W,{value:"geral",className:"space-y-6",children:[e.jsxs(P,{className:"border-border/50 bg-card/80 backdrop-blur-sm",children:[e.jsxs(O,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-5 w-5 text-primary"}),e.jsx(G,{className:"text-base",children:"Painel"})]}),e.jsx(X,{children:"Personalize o nome exibido no menu lateral."})]}),e.jsx(R,{children:e.jsxs("div",{className:"space-y-3 max-w-md",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Nome do Painel"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{value:u,onChange:r=>c(r.target.value),placeholder:"Painel Admin",maxLength:30,className:"flex-1"}),e.jsxs(Fe,{open:f,onOpenChange:b,children:[e.jsx(qe,{asChild:!0,children:e.jsx(j,{variant:"outline",size:"icon",className:"shrink-0 h-10 w-10",type:"button",children:e.jsx("span",{className:"text-lg",children:"ðŸ˜Š"})})}),e.jsx(Ue,{className:"w-64 p-2",align:"end",children:e.jsx("div",{className:"grid grid-cols-8 gap-1",children:["ðŸ“Š","ðŸ“ˆ","ðŸ“‹","ðŸ“","ðŸ—‚ï¸","ðŸ’¼","ðŸ¢","ðŸš€","âš¡","ðŸ”¥","ðŸ’¡","ðŸŽ¯","âœ…","â­","ðŸ†","ðŸ’Ž","ðŸ“Œ","ðŸ””","ðŸ“…","ðŸ—“ï¸","ðŸ‘¥","ðŸ¤","ðŸ’¬","ðŸ“§","ðŸ› ï¸","âš™ï¸","ðŸ”§","ðŸ”‘","ðŸŒ¿","ðŸŒŠ","ðŸª¨","ðŸŽ¨","â¤ï¸","ðŸ’™","ðŸ’š","ðŸ’›","ðŸ§ ","ðŸŽ‰","âœ¨","ðŸŒŸ"].map(r=>e.jsx("button",{type:"button",className:"h-8 w-8 flex items-center justify-center rounded hover:bg-muted text-lg transition-colors",onClick:()=>{c(n=>n+r),b(!1)},children:r},r))})})]})]})]}),e.jsx(j,{onClick:()=>{g("panel_name",u),p.success("Nome do painel atualizado!")},className:"gold-gradient text-primary-foreground hover:opacity-90",children:"Salvar"})]})})]}),e.jsxs(P,{className:"border-border/50 bg-card/80 backdrop-blur-sm",children:[e.jsxs(O,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-5 w-5 text-primary"}),e.jsx(G,{className:"text-base",children:"Tema de Cores"})]}),e.jsx(X,{children:"Escolha o estilo visual do painel."})]}),e.jsxs(R,{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Com modo claro/escuro"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:x.filter(r=>!fe.includes(r.id)).map(r=>e.jsxs("button",{onClick:()=>g("color_theme",r.id),className:A("relative rounded-xl border-2 p-3 text-left transition-all",o.color_theme===r.id?"border-accent shadow-card-hover":"border-border/50 hover:border-border"),children:[o.color_theme===r.id&&e.jsx("div",{className:"absolute top-2 right-2 h-5 w-5 rounded-full gold-gradient flex items-center justify-center",children:e.jsx(ue,{className:"h-3 w-3 text-primary-foreground"})}),e.jsx("div",{className:"flex gap-1.5 mb-2",children:r.colors.map((n,v)=>e.jsx("div",{className:"h-6 w-6 rounded-full border border-border/30",style:{background:n}},v))}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:r.name}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:r.desc})]},r.id))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-6 mb-3",children:"Temas fixos (aparÃªncia Ãºnica)"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:x.filter(r=>fe.includes(r.id)).map(r=>e.jsxs("button",{onClick:()=>g("color_theme",r.id),className:A("relative rounded-xl border-2 p-3 text-left transition-all",o.color_theme===r.id?"border-accent shadow-card-hover":"border-border/50 hover:border-border"),children:[o.color_theme===r.id&&e.jsx("div",{className:"absolute top-2 right-2 h-5 w-5 rounded-full gold-gradient flex items-center justify-center",children:e.jsx(ue,{className:"h-3 w-3 text-primary-foreground"})}),e.jsx("div",{className:"flex gap-1.5 mb-2",children:r.colors.map((n,v)=>e.jsx("div",{className:"h-6 w-6 rounded-full border border-border/30",style:{background:n}},v))}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:r.name}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:r.desc})]},r.id))})]})]})]}),e.jsx(W,{value:"senha",children:e.jsx(Ns,{})}),e.jsx(W,{value:"campos",children:e.jsx(vs,{})}),e.jsx(W,{value:"backup",children:e.jsx(ys,{})})]})]})};export{Zs as default};
