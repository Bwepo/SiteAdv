const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminCrmDashboard-BsuKnusX.js","assets/index-JxP8ARrG.js","assets/index-VmxuTQbD.css","assets/card-B5381-fB.js","assets/badge-Dm4EMv_j.js","assets/button-LCxQCZRg.js","assets/skeleton-CosiL6vH.js","assets/select-Cxnz3x0Y.js","assets/index-D-Hsf1M6.js","assets/index-DcYb61uB.js","assets/index-aMprewlz.js","assets/chevron-up-C0XhV3yf.js","assets/check-kjAg3Vje.js","assets/crmTypes-BBbIp7sT.js","assets/useQuery-Bx6NQgtZ.js","assets/filter-BvyG8t6K.js","assets/folder-kanban-DvJWkQ0d.js","assets/calendar-CV3qLDLu.js","assets/list-todo-IjAxe6ke.js","assets/clock-RGZ_4iDy.js","assets/triangle-alert-DuRfk4-U.js","assets/circle-check-flRfz64u.js","assets/arrow-right-BSbBWYtK.js","assets/users-CSPX4MbE.js"])))=>i.map(i=>d[i]);
import{c as at,r as u,j as e,e as L,h as bn,m as sa,a4 as yn}from"./index-JxP8ARrG.js";import{E as Nn,A as wn,m as xa}from"./formatters-C_-sJhUH.js";import{P as Cn,T as Dn}from"./TarefaSheet-CA6oOo8Z.js";import{u as Yt}from"./useCrmFieldOptions-C5LPDX9Q.js";import{u as _n,F as Sn,a as Te,b as Oe,c as Pe,d as Ye,e as Le,t as kn}from"./form-dYYhlp6x.js";import{S as Mn,b as Tn,c as On,d as Pn,e as Ln,f as Fn}from"./sheet-YfM2atZR.js";import{I as mt}from"./input-DJ4Woytf.js";import{B as ne,b as ra}from"./button-LCxQCZRg.js";import{S as W,a as Y,b as V,c as H,d as T}from"./select-Cxnz3x0Y.js";import{P as ft,a as ht,b as xt}from"./popover-C7gzI-V9.js";import{S as Vt,g as It,h as va,a as In,b as An,i as pa,j as ga,T as ja,c as Ge}from"./crmTypes-BBbIp7sT.js";import{S as Ht}from"./search-BAsjL_37.js";import{C as En}from"./check-kjAg3Vje.js";import{U as Rn}from"./user-ghZSgpQQ.js";import{T as Kt}from"./trash-2-C7_Ue8oW.js";import{L as Bn}from"./loader-circle-BolFStrn.js";import{o as Wn,s as Fe}from"./types-3c7sL9OC.js";import{T as ba,b as ya,c as Yn,K as Vn}from"./CrmSkeletons-Dg1PPBnH.js";import{C as Je,c as Qe}from"./card-B5381-fB.js";import{t as R,e as Ve,s as vt,g as et,h as oa,m as Hn,i as Kn,j as ge,k as zn,l as $n,n as zt,o as Un,p as Zn,f as Ie,q as Na}from"./format-Bo8wDDlG.js";import{C as qn}from"./chevron-left-CAuzfHwX.js";import{C as Gn}from"./chevron-right-Ky2EHfAN.js";import{A as wa,a as Ca,b as Da,c as _a,d as Sa,e as ka,f as Ma,g as Ta}from"./alert-dialog-Dv_0WALP.js";import{B as U,P as Oa}from"./badge-Dm4EMv_j.js";import{S as Xe}from"./switch-DlPlMcVP.js";import{u as Pa,a as La,D as Fa,c as Ia,b as Aa,d as Ea,S as Ra,v as Ba,P as Wa,e as Ya,C as Va}from"./sortable.esm-DLMQGdGC.js";import{C as He}from"./calendar-CV3qLDLu.js";import{U as jt}from"./users-CSPX4MbE.js";import{F as bt}from"./folder-kanban-DvJWkQ0d.js";import{L as Ha}from"./list-BCYiqQOQ.js";import{P as Ka}from"./pencil-DsnM9qOy.js";import{L as Xn}from"./label-XqjZf4OI.js";import{S as kt}from"./skeleton-CosiL6vH.js";import{C as Jn,a as Qn}from"./circle-check-flRfz64u.js";import{C as es}from"./clipboard-list-BAMMEuel.js";import{F as ts}from"./filter-BvyG8t6K.js";import{C as za,a as as}from"./circle-x-BAs4QpT_.js";import{C as ns}from"./clock-RGZ_4iDy.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=at("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=at("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=at("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=at("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=at("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);function G(t,a){const n=R(t);return isNaN(a)?Ve(t,NaN):(a&&n.setDate(n.getDate()+a),n)}function le(t,a){const n=R(t);if(isNaN(a))return Ve(t,NaN);if(!a)return n;const s=n.getDate(),r=Ve(t,n.getTime());r.setMonth(n.getMonth()+a+1,0);const l=r.getDate();return s>=l?r:(n.setFullYear(r.getFullYear(),r.getMonth(),s),n)}function Et(t,a){const n=a*7;return G(t,n)}function os(t,a){return le(t,a*12)}function ls(t){let a;return t.forEach(function(n){const s=R(n);(a===void 0||a<s||isNaN(Number(s)))&&(a=s)}),a||new Date(NaN)}function is(t){let a;return t.forEach(n=>{const s=R(n);(!a||a>s||isNaN(+s))&&(a=s)}),a||new Date(NaN)}function ee(t,a){const n=vt(t),s=vt(a);return+n==+s}function tt(t,a){const n=R(t),s=R(a),r=n.getFullYear()-s.getFullYear(),l=n.getMonth()-s.getMonth();return r*12+l}function cs(t,a,n){const s=et(t,n),r=et(a,n),l=+s-oa(s),i=+r-oa(r);return Math.round((l-i)/Hn)}function $t(t){const a=R(t),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(23,59,59,999),a}function te(t){const a=R(t);return a.setDate(1),a.setHours(0,0,0,0),a}function Ut(t,a){var d,m,h,f;const n=Kn(),s=(a==null?void 0:a.weekStartsOn)??((m=(d=a==null?void 0:a.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??n.weekStartsOn??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,r=R(t),l=r.getDay(),i=(l<s?-7:0)+6-(l-s);return r.setDate(r.getDate()+i),r.setHours(23,59,59,999),r}function Za(t){return Ut(t,{weekStartsOn:1})}function ds(t){const a=R(t),n=a.getFullYear(),s=a.getMonth(),r=Ve(t,0);return r.setFullYear(n,s+1,0),r.setHours(0,0,0,0),r.getDate()}function us(t){return Math.trunc(+R(t)/1e3)}function ms(t){const a=R(t),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(0,0,0,0),a}function fs(t,a){return cs(ms(t),te(t),a)+1}function Rt(t,a){const n=R(t),s=R(a);return n.getTime()>s.getTime()}function qa(t,a){const n=R(t),s=R(a);return+n<+s}function Zt(t,a){const n=R(t),s=R(a);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function hs(t,a){const n=R(t),s=R(a);return n.getFullYear()===s.getFullYear()}function Mt(t,a){return G(t,-a)}function Tt(t,a){const n=R(t),s=n.getFullYear(),r=n.getDate(),l=Ve(t,0);l.setFullYear(s,a,15),l.setHours(0,0,0,0);const i=ds(l);return n.setMonth(a,Math.min(r,i)),n}function la(t,a){const n=R(t);return isNaN(+n)?Ve(t,NaN):(n.setFullYear(a),n)}const xs=Wn({title:Fe().trim().min(1,"Título obrigatório").max(200),parentTaskId:Fe().min(1,"Tarefa-mãe obrigatória"),deadline:Fe().optional(),status:Fe().min(1),assignee:Fe().optional(),notes:Fe().max(2e3).optional(),numeroProcesso:Fe().max(25).optional()});function vs({open:t,onOpenChange:a,subtask:n,tasks:s,onSave:r,onDelete:l}){const i=!n,[d,m]=u.useState(!1),[h,f]=u.useState(""),{getOptions:x}=Yt(),p=x("subtarefa_status").map(M=>[M.value,M.label]),b=Object.entries(Vt),w=p.length>0?p:b,[S,g]=u.useState(!1),O=u.useMemo(()=>{if(!h.trim())return s;const M=h.toLowerCase();return s.filter(P=>P.title.toLowerCase().includes(M))},[s,h]),k=_n({resolver:kn(xs),defaultValues:{title:"",parentTaskId:"",deadline:"",status:"A fazer",assignee:"",notes:""}});u.useEffect(()=>{t&&(n?k.reset({title:n.title,parentTaskId:n.parentTaskId,deadline:n.dueDate??"",status:n.status,assignee:n.assignee??"",notes:n.notes??"",numeroProcesso:n.numeroProcesso??""}):k.reset({title:"",parentTaskId:"",deadline:"",status:"A fazer",assignee:"",notes:"",numeroProcesso:""}))},[t,n]);const Z=async M=>{m(!0);try{await r(M,i,n==null?void 0:n.id),a(!1)}catch(P){bn.error("Erro ao salvar subtarefa: "+P.message),console.error("Erro ao salvar subtarefa:",P)}finally{m(!1)}};return e.jsx(Mn,{open:t,onOpenChange:a,children:e.jsxs(Tn,{side:"right",className:"w-full sm:max-w-lg overflow-y-auto",children:[e.jsxs(On,{className:"mb-6",children:[e.jsx(Pn,{children:i?"Nova Subtarefa":"Editar Subtarefa"}),e.jsx(Ln,{children:i?"Preencha os dados e selecione a tarefa-mãe relacionada.":"Altere os campos e salve."})]}),e.jsx(Sn,{...k,children:e.jsxs("form",{onSubmit:k.handleSubmit(Z),className:"space-y-5",children:[e.jsx(Te,{control:k.control,name:"title",render:({field:M})=>e.jsxs(Oe,{children:[e.jsx(Pe,{children:"Título *"}),e.jsx(Ye,{children:e.jsx(mt,{placeholder:"Ex: Enviar documento",...M})}),e.jsx(Le,{})]})}),e.jsx(Te,{control:k.control,name:"parentTaskId",render:({field:M})=>{var P;return e.jsxs(Oe,{className:"flex flex-col",children:[e.jsx(Pe,{children:"Tarefa-mãe *"}),e.jsxs(ft,{open:S,onOpenChange:g,children:[e.jsx(ht,{asChild:!0,children:e.jsx(Ye,{children:e.jsxs(ne,{variant:"outline",role:"combobox",className:L("w-full justify-between font-normal",!M.value&&"text-muted-foreground"),children:[e.jsx("span",{className:"truncate",children:M.value?((P=s.find(A=>A.id===M.value))==null?void 0:P.title)??"Tarefa não encontrada":"Selecione a tarefa-mãe..."}),e.jsx(ss,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),e.jsxs(xt,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:[e.jsxs("div",{className:"flex items-center border-b px-3",children:[e.jsx(Ht,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx("input",{className:"flex h-10 w-full bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground",placeholder:"Buscar tarefa...",value:h,onChange:A=>f(A.target.value)})]}),e.jsx("div",{className:"max-h-[200px] overflow-y-auto p-1",children:O.length===0?e.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"Nenhuma tarefa encontrada."}):O.map(A=>e.jsxs("button",{type:"button",className:L("relative flex w-full cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground",M.value===A.id&&"bg-accent"),onClick:()=>{M.onChange(A.id),g(!1),f("")},children:[e.jsx(En,{className:L("mr-2 h-4 w-4",M.value===A.id?"opacity-100":"opacity-0")}),e.jsx("span",{className:"truncate",children:A.title})]},A.id))})]})]}),e.jsx(Le,{})]})}}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(Te,{control:k.control,name:"deadline",render:({field:M})=>e.jsxs(Oe,{children:[e.jsx(Pe,{children:"Prazo"}),e.jsx(Ye,{children:e.jsx(mt,{type:"date",...M})}),e.jsx(Le,{})]})}),e.jsx(Te,{control:k.control,name:"status",render:({field:M})=>e.jsxs(Oe,{children:[e.jsx(Pe,{children:"Status"}),e.jsxs(W,{onValueChange:M.onChange,value:M.value,children:[e.jsx(Ye,{children:e.jsx(Y,{children:e.jsx(V,{})})}),e.jsx(H,{children:w.map(([P,A])=>e.jsx(T,{value:P,children:A},P))})]}),e.jsx(Le,{})]})})]}),e.jsx(Te,{control:k.control,name:"assignee",render:({field:M})=>e.jsxs(Oe,{children:[e.jsx(Pe,{children:"Responsável"}),e.jsxs(W,{onValueChange:P=>M.onChange(P==="_none_"?"":P),value:M.value||"_none_",children:[e.jsx(Ye,{children:e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rn,{className:"w-3.5 h-3.5 text-muted-foreground"}),e.jsx(V,{placeholder:"Responsável..."})]})})}),e.jsxs(H,{children:[e.jsx(T,{value:"_none_",children:"— Sem responsável —"}),It.map(P=>e.jsx(T,{value:P,children:P},P))]})]}),e.jsx(Le,{})]})}),e.jsx(Te,{control:k.control,name:"numeroProcesso",render:({field:M})=>e.jsxs(Oe,{children:[e.jsx(Pe,{children:"Processo Judicial"}),e.jsx(Cn,{value:M.value??"",onValueChange:M.onChange}),e.jsx(Le,{})]})}),e.jsx(Te,{control:k.control,name:"notes",render:({field:M})=>e.jsxs(Oe,{children:[e.jsx(Pe,{children:"Observações"}),e.jsx(Ye,{children:e.jsx(Nn,{value:M.value??"",onChange:M.onChange,placeholder:"Observações...",modalTitle:"Editar Observações da Subtarefa"})}),e.jsx(Le,{})]})}),!i&&(n==null?void 0:n.id)&&e.jsx(wn,{folder:`subtarefas/${n.id}`}),e.jsxs(Fn,{className:"gap-2 flex-col sm:flex-row",children:[!i&&n&&l&&e.jsxs(ne,{type:"button",variant:"destructive",className:"sm:mr-auto",onClick:()=>{l(n.id),a(!1)},disabled:d,children:[e.jsx(Kt,{className:"w-4 h-4 mr-2"})," Excluir"]}),e.jsxs(ne,{type:"submit",disabled:d,className:"flex-1",children:[d&&e.jsx(Bn,{className:"w-4 h-4 mr-2 animate-spin"}),i?"Criar Subtarefa":"Salvar Alterações"]})]})]})})]})})}var _=function(){return _=Object.assign||function(a){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(a[l]=n[l])}return a},_.apply(this,arguments)};function ps(t,a){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)a.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function Ga(t,a,n){for(var s=0,r=a.length,l;s<r;s++)(l||!(s in a))&&(l||(l=Array.prototype.slice.call(a,0,s)),l[s]=a[s]);return t.concat(l||Array.prototype.slice.call(a))}function nt(t){return t.mode==="multiple"}function st(t){return t.mode==="range"}function yt(t){return t.mode==="single"}var gs={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function js(t,a){return Ie(t,"LLLL y",a)}function bs(t,a){return Ie(t,"d",a)}function ys(t,a){return Ie(t,"LLLL",a)}function Ns(t){return"".concat(t)}function ws(t,a){return Ie(t,"cccccc",a)}function Cs(t,a){return Ie(t,"yyyy",a)}var Ds=Object.freeze({__proto__:null,formatCaption:js,formatDay:bs,formatMonthCaption:ys,formatWeekNumber:Ns,formatWeekdayName:ws,formatYearCaption:Cs}),_s=function(t,a,n){return Ie(t,"do MMMM (EEEE)",n)},Ss=function(){return"Month: "},ks=function(){return"Go to next month"},Ms=function(){return"Go to previous month"},Ts=function(t,a){return Ie(t,"cccc",a)},Os=function(t){return"Week n. ".concat(t)},Ps=function(){return"Year: "},Ls=Object.freeze({__proto__:null,labelDay:_s,labelMonthDropdown:Ss,labelNext:ks,labelPrevious:Ms,labelWeekNumber:Os,labelWeekday:Ts,labelYearDropdown:Ps});function Fs(){var t="buttons",a=gs,n=zn,s={},r={},l=1,i={},d=new Date;return{captionLayout:t,classNames:a,formatters:Ds,labels:Ls,locale:n,modifiersClassNames:s,modifiers:r,numberOfMonths:l,styles:i,today:d,mode:"default"}}function Is(t){var a=t.fromYear,n=t.toYear,s=t.fromMonth,r=t.toMonth,l=t.fromDate,i=t.toDate;return s?l=te(s):a&&(l=new Date(a,0,1)),r?i=$t(r):n&&(i=new Date(n,11,31)),{fromDate:l?vt(l):void 0,toDate:i?vt(i):void 0}}var Xa=u.createContext(void 0);function As(t){var a,n=t.initialProps,s=Fs(),r=Is(n),l=r.fromDate,i=r.toDate,d=(a=n.captionLayout)!==null&&a!==void 0?a:s.captionLayout;d!=="buttons"&&(!l||!i)&&(d="buttons");var m;(yt(n)||nt(n)||st(n))&&(m=n.onSelect);var h=_(_(_({},s),n),{captionLayout:d,classNames:_(_({},s.classNames),n.classNames),components:_({},n.components),formatters:_(_({},s.formatters),n.formatters),fromDate:l,labels:_(_({},s.labels),n.labels),mode:n.mode||s.mode,modifiers:_(_({},s.modifiers),n.modifiers),modifiersClassNames:_(_({},s.modifiersClassNames),n.modifiersClassNames),onSelect:m,styles:_(_({},s.styles),n.styles),toDate:i});return e.jsx(Xa.Provider,{value:h,children:t.children})}function I(){var t=u.useContext(Xa);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function Ja(t){var a=I(),n=a.locale,s=a.classNames,r=a.styles,l=a.formatters.formatCaption;return e.jsx("div",{className:s.caption_label,style:r.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:l(t.displayMonth,{locale:n})})}function Es(t){return e.jsx("svg",_({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Qa(t){var a,n,s=t.onChange,r=t.value,l=t.children,i=t.caption,d=t.className,m=t.style,h=I(),f=(n=(a=h.components)===null||a===void 0?void 0:a.IconDropdown)!==null&&n!==void 0?n:Es;return e.jsxs("div",{className:d,style:m,children:[e.jsx("span",{className:h.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:h.classNames.dropdown,style:h.styles.dropdown,value:r,onChange:s,children:l}),e.jsxs("div",{className:h.classNames.caption_label,style:h.styles.caption_label,"aria-hidden":"true",children:[i,e.jsx(f,{className:h.classNames.dropdown_icon,style:h.styles.dropdown_icon})]})]})}function Rs(t){var a,n=I(),s=n.fromDate,r=n.toDate,l=n.styles,i=n.locale,d=n.formatters.formatMonthCaption,m=n.classNames,h=n.components,f=n.labels.labelMonthDropdown;if(!s)return e.jsx(e.Fragment,{});if(!r)return e.jsx(e.Fragment,{});var x=[];if(hs(s,r))for(var p=te(s),b=s.getMonth();b<=r.getMonth();b++)x.push(Tt(p,b));else for(var p=te(new Date),b=0;b<=11;b++)x.push(Tt(p,b));var w=function(g){var O=Number(g.target.value),k=Tt(te(t.displayMonth),O);t.onChange(k)},S=(a=h==null?void 0:h.Dropdown)!==null&&a!==void 0?a:Qa;return e.jsx(S,{name:"months","aria-label":f(),className:m.dropdown_month,style:l.dropdown_month,onChange:w,value:t.displayMonth.getMonth(),caption:d(t.displayMonth,{locale:i}),children:x.map(function(g){return e.jsx("option",{value:g.getMonth(),children:d(g,{locale:i})},g.getMonth())})})}function Bs(t){var a,n=t.displayMonth,s=I(),r=s.fromDate,l=s.toDate,i=s.locale,d=s.styles,m=s.classNames,h=s.components,f=s.formatters.formatYearCaption,x=s.labels.labelYearDropdown,p=[];if(!r)return e.jsx(e.Fragment,{});if(!l)return e.jsx(e.Fragment,{});for(var b=r.getFullYear(),w=l.getFullYear(),S=b;S<=w;S++)p.push(la($n(new Date),S));var g=function(k){var Z=la(te(n),Number(k.target.value));t.onChange(Z)},O=(a=h==null?void 0:h.Dropdown)!==null&&a!==void 0?a:Qa;return e.jsx(O,{name:"years","aria-label":x(),className:m.dropdown_year,style:d.dropdown_year,onChange:g,value:n.getFullYear(),caption:f(n,{locale:i}),children:p.map(function(k){return e.jsx("option",{value:k.getFullYear(),children:f(k,{locale:i})},k.getFullYear())})})}function Ws(t,a){var n=u.useState(t),s=n[0],r=n[1],l=a===void 0?s:a;return[l,r]}function Ys(t){var a=t.month,n=t.defaultMonth,s=t.today,r=a||n||s||new Date,l=t.toDate,i=t.fromDate,d=t.numberOfMonths,m=d===void 0?1:d;if(l&&tt(l,r)<0){var h=-1*(m-1);r=le(l,h)}return i&&tt(r,i)<0&&(r=i),te(r)}function Vs(){var t=I(),a=Ys(t),n=Ws(a,t.month),s=n[0],r=n[1],l=function(i){var d;if(!t.disableNavigation){var m=te(i);r(m),(d=t.onMonthChange)===null||d===void 0||d.call(t,m)}};return[s,l]}function Hs(t,a){for(var n=a.reverseMonths,s=a.numberOfMonths,r=te(t),l=te(le(r,s)),i=tt(l,r),d=[],m=0;m<i;m++){var h=le(r,m);d.push(h)}return n&&(d=d.reverse()),d}function Ks(t,a){if(!a.disableNavigation){var n=a.toDate,s=a.pagedNavigation,r=a.numberOfMonths,l=r===void 0?1:r,i=s?l:1,d=te(t);if(!n)return le(d,i);var m=tt(n,t);if(!(m<l))return le(d,i)}}function zs(t,a){if(!a.disableNavigation){var n=a.fromDate,s=a.pagedNavigation,r=a.numberOfMonths,l=r===void 0?1:r,i=s?l:1,d=te(t);if(!n)return le(d,-i);var m=tt(d,n);if(!(m<=0))return le(d,-i)}}var en=u.createContext(void 0);function $s(t){var a=I(),n=Vs(),s=n[0],r=n[1],l=Hs(s,a),i=Ks(s,a),d=zs(s,a),m=function(x){return l.some(function(p){return Zt(x,p)})},h=function(x,p){m(x)||(p&&qa(x,p)?r(le(x,1+a.numberOfMonths*-1)):r(x))},f={currentMonth:s,displayMonths:l,goToMonth:r,goToDate:h,previousMonth:d,nextMonth:i,isDateDisplayed:m};return e.jsx(en.Provider,{value:f,children:t.children})}function rt(){var t=u.useContext(en);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function ia(t){var a,n=I(),s=n.classNames,r=n.styles,l=n.components,i=rt().goToMonth,d=function(f){i(le(f,t.displayIndex?-t.displayIndex:0))},m=(a=l==null?void 0:l.CaptionLabel)!==null&&a!==void 0?a:Ja,h=e.jsx(m,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:s.caption_dropdowns,style:r.caption_dropdowns,children:[e.jsx("div",{className:s.vhidden,children:h}),e.jsx(Rs,{onChange:d,displayMonth:t.displayMonth}),e.jsx(Bs,{onChange:d,displayMonth:t.displayMonth})]})}function Us(t){return e.jsx("svg",_({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Zs(t){return e.jsx("svg",_({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var pt=u.forwardRef(function(t,a){var n=I(),s=n.classNames,r=n.styles,l=[s.button_reset,s.button];t.className&&l.push(t.className);var i=l.join(" "),d=_(_({},r.button_reset),r.button);return t.style&&Object.assign(d,t.style),e.jsx("button",_({},t,{ref:a,type:"button",className:i,style:d}))});function qs(t){var a,n,s=I(),r=s.dir,l=s.locale,i=s.classNames,d=s.styles,m=s.labels,h=m.labelPrevious,f=m.labelNext,x=s.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var p=h(t.previousMonth,{locale:l}),b=[i.nav_button,i.nav_button_previous].join(" "),w=f(t.nextMonth,{locale:l}),S=[i.nav_button,i.nav_button_next].join(" "),g=(a=x==null?void 0:x.IconRight)!==null&&a!==void 0?a:Zs,O=(n=x==null?void 0:x.IconLeft)!==null&&n!==void 0?n:Us;return e.jsxs("div",{className:i.nav,style:d.nav,children:[!t.hidePrevious&&e.jsx(pt,{name:"previous-month","aria-label":p,className:b,style:d.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:r==="rtl"?e.jsx(g,{className:i.nav_icon,style:d.nav_icon}):e.jsx(O,{className:i.nav_icon,style:d.nav_icon})}),!t.hideNext&&e.jsx(pt,{name:"next-month","aria-label":w,className:S,style:d.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:r==="rtl"?e.jsx(O,{className:i.nav_icon,style:d.nav_icon}):e.jsx(g,{className:i.nav_icon,style:d.nav_icon})})]})}function ca(t){var a=I().numberOfMonths,n=rt(),s=n.previousMonth,r=n.nextMonth,l=n.goToMonth,i=n.displayMonths,d=i.findIndex(function(w){return Zt(t.displayMonth,w)}),m=d===0,h=d===i.length-1,f=a>1&&(m||!h),x=a>1&&(h||!m),p=function(){s&&l(s)},b=function(){r&&l(r)};return e.jsx(qs,{displayMonth:t.displayMonth,hideNext:f,hidePrevious:x,nextMonth:r,previousMonth:s,onPreviousClick:p,onNextClick:b})}function Gs(t){var a,n=I(),s=n.classNames,r=n.disableNavigation,l=n.styles,i=n.captionLayout,d=n.components,m=(a=d==null?void 0:d.CaptionLabel)!==null&&a!==void 0?a:Ja,h;return r?h=e.jsx(m,{id:t.id,displayMonth:t.displayMonth}):i==="dropdown"?h=e.jsx(ia,{displayMonth:t.displayMonth,id:t.id}):i==="dropdown-buttons"?h=e.jsxs(e.Fragment,{children:[e.jsx(ia,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx(ca,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):h=e.jsxs(e.Fragment,{children:[e.jsx(m,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(ca,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:s.caption,style:l.caption,children:h})}function Xs(t){var a=I(),n=a.footer,s=a.styles,r=a.classNames.tfoot;return n?e.jsx("tfoot",{className:r,style:s.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:n})})}):e.jsx(e.Fragment,{})}function Js(t,a,n){for(var s=n?zt(new Date):et(new Date,{locale:t,weekStartsOn:a}),r=[],l=0;l<7;l++){var i=G(s,l);r.push(i)}return r}function Qs(){var t=I(),a=t.classNames,n=t.styles,s=t.showWeekNumber,r=t.locale,l=t.weekStartsOn,i=t.ISOWeek,d=t.formatters.formatWeekdayName,m=t.labels.labelWeekday,h=Js(r,l,i);return e.jsxs("tr",{style:n.head_row,className:a.head_row,children:[s&&e.jsx("td",{style:n.head_cell,className:a.head_cell}),h.map(function(f,x){return e.jsx("th",{scope:"col",className:a.head_cell,style:n.head_cell,"aria-label":m(f,{locale:r}),children:d(f,{locale:r})},x)})]})}function er(){var t,a=I(),n=a.classNames,s=a.styles,r=a.components,l=(t=r==null?void 0:r.HeadRow)!==null&&t!==void 0?t:Qs;return e.jsx("thead",{style:s.head,className:n.head,children:e.jsx(l,{})})}function tr(t){var a=I(),n=a.locale,s=a.formatters.formatDay;return e.jsx(e.Fragment,{children:s(t.date,{locale:n})})}var qt=u.createContext(void 0);function ar(t){if(!nt(t.initialProps)){var a={selected:void 0,modifiers:{disabled:[]}};return e.jsx(qt.Provider,{value:a,children:t.children})}return e.jsx(nr,{initialProps:t.initialProps,children:t.children})}function nr(t){var a=t.initialProps,n=t.children,s=a.selected,r=a.min,l=a.max,i=function(h,f,x){var p,b;(p=a.onDayClick)===null||p===void 0||p.call(a,h,f,x);var w=!!(f.selected&&r&&(s==null?void 0:s.length)===r);if(!w){var S=!!(!f.selected&&l&&(s==null?void 0:s.length)===l);if(!S){var g=s?Ga([],s):[];if(f.selected){var O=g.findIndex(function(k){return ee(h,k)});g.splice(O,1)}else g.push(h);(b=a.onSelect)===null||b===void 0||b.call(a,g,h,f,x)}}},d={disabled:[]};s&&d.disabled.push(function(h){var f=l&&s.length>l-1,x=s.some(function(p){return ee(p,h)});return!!(f&&!x)});var m={selected:s,onDayClick:i,modifiers:d};return e.jsx(qt.Provider,{value:m,children:n})}function Gt(){var t=u.useContext(qt);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function sr(t,a){var n=a||{},s=n.from,r=n.to;return s&&r?ee(r,t)&&ee(s,t)?void 0:ee(r,t)?{from:r,to:void 0}:ee(s,t)?void 0:Rt(s,t)?{from:t,to:r}:{from:s,to:t}:r?Rt(t,r)?{from:r,to:t}:{from:t,to:r}:s?qa(t,s)?{from:t,to:s}:{from:s,to:t}:{from:t,to:void 0}}var Xt=u.createContext(void 0);function rr(t){if(!st(t.initialProps)){var a={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(Xt.Provider,{value:a,children:t.children})}return e.jsx(or,{initialProps:t.initialProps,children:t.children})}function or(t){var a=t.initialProps,n=t.children,s=a.selected,r=s||{},l=r.from,i=r.to,d=a.min,m=a.max,h=function(b,w,S){var g,O;(g=a.onDayClick)===null||g===void 0||g.call(a,b,w,S);var k=sr(b,s);(O=a.onSelect)===null||O===void 0||O.call(a,k,b,w,S)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(l?(f.range_start=[l],i?(f.range_end=[i],ee(l,i)||(f.range_middle=[{after:l,before:i}])):f.range_end=[l]):i&&(f.range_start=[i],f.range_end=[i]),d&&(l&&!i&&f.disabled.push({after:Mt(l,d-1),before:G(l,d-1)}),l&&i&&f.disabled.push({after:l,before:G(l,d-1)}),!l&&i&&f.disabled.push({after:Mt(i,d-1),before:G(i,d-1)})),m){if(l&&!i&&(f.disabled.push({before:G(l,-m+1)}),f.disabled.push({after:G(l,m-1)})),l&&i){var x=ge(i,l)+1,p=m-x;f.disabled.push({before:Mt(l,p)}),f.disabled.push({after:G(i,p)})}!l&&i&&(f.disabled.push({before:G(i,-m+1)}),f.disabled.push({after:G(i,m-1)}))}return e.jsx(Xt.Provider,{value:{selected:s,onDayClick:h,modifiers:f},children:n})}function Jt(){var t=u.useContext(Xt);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function ut(t){return Array.isArray(t)?Ga([],t):t!==void 0?[t]:[]}function lr(t){var a={};return Object.entries(t).forEach(function(n){var s=n[0],r=n[1];a[s]=ut(r)}),a}var ie;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(ie||(ie={}));var ir=ie.Selected,pe=ie.Disabled,cr=ie.Hidden,dr=ie.Today,Ot=ie.RangeEnd,Pt=ie.RangeMiddle,Lt=ie.RangeStart,ur=ie.Outside;function mr(t,a,n){var s,r=(s={},s[ir]=ut(t.selected),s[pe]=ut(t.disabled),s[cr]=ut(t.hidden),s[dr]=[t.today],s[Ot]=[],s[Pt]=[],s[Lt]=[],s[ur]=[],s);return t.fromDate&&r[pe].push({before:t.fromDate}),t.toDate&&r[pe].push({after:t.toDate}),nt(t)?r[pe]=r[pe].concat(a.modifiers[pe]):st(t)&&(r[pe]=r[pe].concat(n.modifiers[pe]),r[Lt]=n.modifiers[Lt],r[Pt]=n.modifiers[Pt],r[Ot]=n.modifiers[Ot]),r}var tn=u.createContext(void 0);function fr(t){var a=I(),n=Gt(),s=Jt(),r=mr(a,n,s),l=lr(a.modifiers),i=_(_({},r),l);return e.jsx(tn.Provider,{value:i,children:t.children})}function an(){var t=u.useContext(tn);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function hr(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function xr(t){return!!(t&&typeof t=="object"&&"from"in t)}function vr(t){return!!(t&&typeof t=="object"&&"after"in t)}function pr(t){return!!(t&&typeof t=="object"&&"before"in t)}function gr(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function jr(t,a){var n,s=a.from,r=a.to;if(s&&r){var l=ge(r,s)<0;l&&(n=[r,s],s=n[0],r=n[1]);var i=ge(t,s)>=0&&ge(r,t)>=0;return i}return r?ee(r,t):s?ee(s,t):!1}function br(t){return Na(t)}function yr(t){return Array.isArray(t)&&t.every(Na)}function Nr(t,a){return a.some(function(n){if(typeof n=="boolean")return n;if(br(n))return ee(t,n);if(yr(n))return n.includes(t);if(xr(n))return jr(t,n);if(gr(n))return n.dayOfWeek.includes(t.getDay());if(hr(n)){var s=ge(n.before,t),r=ge(n.after,t),l=s>0,i=r<0,d=Rt(n.before,n.after);return d?i&&l:l||i}return vr(n)?ge(t,n.after)>0:pr(n)?ge(n.before,t)>0:typeof n=="function"?n(t):!1})}function Qt(t,a,n){var s=Object.keys(a).reduce(function(l,i){var d=a[i];return Nr(t,d)&&l.push(i),l},[]),r={};return s.forEach(function(l){return r[l]=!0}),n&&!Zt(t,n)&&(r.outside=!0),r}function wr(t,a){for(var n=te(t[0]),s=$t(t[t.length-1]),r,l,i=n;i<=s;){var d=Qt(i,a),m=!d.disabled&&!d.hidden;if(!m){i=G(i,1);continue}if(d.selected)return i;d.today&&!l&&(l=i),r||(r=i),i=G(i,1)}return l||r}var Cr=365;function nn(t,a){var n=a.moveBy,s=a.direction,r=a.context,l=a.modifiers,i=a.retry,d=i===void 0?{count:0,lastFocused:t}:i,m=r.weekStartsOn,h=r.fromDate,f=r.toDate,x=r.locale,p={day:G,week:Et,month:le,year:os,startOfWeek:function(g){return r.ISOWeek?zt(g):et(g,{locale:x,weekStartsOn:m})},endOfWeek:function(g){return r.ISOWeek?Za(g):Ut(g,{locale:x,weekStartsOn:m})}},b=p[n](t,s==="after"?1:-1);s==="before"&&h?b=ls([h,b]):s==="after"&&f&&(b=is([f,b]));var w=!0;if(l){var S=Qt(b,l);w=!S.disabled&&!S.hidden}return w?b:d.count>Cr?d.lastFocused:nn(b,{moveBy:n,direction:s,context:r,modifiers:l,retry:_(_({},d),{count:d.count+1})})}var sn=u.createContext(void 0);function Dr(t){var a=rt(),n=an(),s=u.useState(),r=s[0],l=s[1],i=u.useState(),d=i[0],m=i[1],h=wr(a.displayMonths,n),f=r??(d&&a.isDateDisplayed(d))?d:h,x=function(){m(r),l(void 0)},p=function(g){l(g)},b=I(),w=function(g,O){if(r){var k=nn(r,{moveBy:g,direction:O,context:b,modifiers:n});ee(r,k)||(a.goToDate(k,r),p(k))}},S={focusedDay:r,focusTarget:f,blur:x,focus:p,focusDayAfter:function(){return w("day","after")},focusDayBefore:function(){return w("day","before")},focusWeekAfter:function(){return w("week","after")},focusWeekBefore:function(){return w("week","before")},focusMonthBefore:function(){return w("month","before")},focusMonthAfter:function(){return w("month","after")},focusYearBefore:function(){return w("year","before")},focusYearAfter:function(){return w("year","after")},focusStartOfWeek:function(){return w("startOfWeek","before")},focusEndOfWeek:function(){return w("endOfWeek","after")}};return e.jsx(sn.Provider,{value:S,children:t.children})}function ea(){var t=u.useContext(sn);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function _r(t,a){var n=an(),s=Qt(t,n,a);return s}var ta=u.createContext(void 0);function Sr(t){if(!yt(t.initialProps)){var a={selected:void 0};return e.jsx(ta.Provider,{value:a,children:t.children})}return e.jsx(kr,{initialProps:t.initialProps,children:t.children})}function kr(t){var a=t.initialProps,n=t.children,s=function(l,i,d){var m,h,f;if((m=a.onDayClick)===null||m===void 0||m.call(a,l,i,d),i.selected&&!a.required){(h=a.onSelect)===null||h===void 0||h.call(a,void 0,l,i,d);return}(f=a.onSelect)===null||f===void 0||f.call(a,l,l,i,d)},r={selected:a.selected,onDayClick:s};return e.jsx(ta.Provider,{value:r,children:n})}function rn(){var t=u.useContext(ta);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Mr(t,a){var n=I(),s=rn(),r=Gt(),l=Jt(),i=ea(),d=i.focusDayAfter,m=i.focusDayBefore,h=i.focusWeekAfter,f=i.focusWeekBefore,x=i.blur,p=i.focus,b=i.focusMonthBefore,w=i.focusMonthAfter,S=i.focusYearBefore,g=i.focusYearAfter,O=i.focusStartOfWeek,k=i.focusEndOfWeek,Z=function(C){var y,oe,ce,de;yt(n)?(y=s.onDayClick)===null||y===void 0||y.call(s,t,a,C):nt(n)?(oe=r.onDayClick)===null||oe===void 0||oe.call(r,t,a,C):st(n)?(ce=l.onDayClick)===null||ce===void 0||ce.call(l,t,a,C):(de=n.onDayClick)===null||de===void 0||de.call(n,t,a,C)},M=function(C){var y;p(t),(y=n.onDayFocus)===null||y===void 0||y.call(n,t,a,C)},P=function(C){var y;x(),(y=n.onDayBlur)===null||y===void 0||y.call(n,t,a,C)},A=function(C){var y;(y=n.onDayMouseEnter)===null||y===void 0||y.call(n,t,a,C)},me=function(C){var y;(y=n.onDayMouseLeave)===null||y===void 0||y.call(n,t,a,C)},Ke=function(C){var y;(y=n.onDayPointerEnter)===null||y===void 0||y.call(n,t,a,C)},je=function(C){var y;(y=n.onDayPointerLeave)===null||y===void 0||y.call(n,t,a,C)},Ne=function(C){var y;(y=n.onDayTouchCancel)===null||y===void 0||y.call(n,t,a,C)},we=function(C){var y;(y=n.onDayTouchEnd)===null||y===void 0||y.call(n,t,a,C)},ze=function(C){var y;(y=n.onDayTouchMove)===null||y===void 0||y.call(n,t,a,C)},F=function(C){var y;(y=n.onDayTouchStart)===null||y===void 0||y.call(n,t,a,C)},se=function(C){var y;(y=n.onDayKeyUp)===null||y===void 0||y.call(n,t,a,C)},re=function(C){var y;switch(C.key){case"ArrowLeft":C.preventDefault(),C.stopPropagation(),n.dir==="rtl"?d():m();break;case"ArrowRight":C.preventDefault(),C.stopPropagation(),n.dir==="rtl"?m():d();break;case"ArrowDown":C.preventDefault(),C.stopPropagation(),h();break;case"ArrowUp":C.preventDefault(),C.stopPropagation(),f();break;case"PageUp":C.preventDefault(),C.stopPropagation(),C.shiftKey?S():b();break;case"PageDown":C.preventDefault(),C.stopPropagation(),C.shiftKey?g():w();break;case"Home":C.preventDefault(),C.stopPropagation(),O();break;case"End":C.preventDefault(),C.stopPropagation(),k();break}(y=n.onDayKeyDown)===null||y===void 0||y.call(n,t,a,C)},be={onClick:Z,onFocus:M,onBlur:P,onKeyDown:re,onKeyUp:se,onMouseEnter:A,onMouseLeave:me,onPointerEnter:Ke,onPointerLeave:je,onTouchCancel:Ne,onTouchEnd:we,onTouchMove:ze,onTouchStart:F};return be}function Tr(){var t=I(),a=rn(),n=Gt(),s=Jt(),r=yt(t)?a.selected:nt(t)?n.selected:st(t)?s.selected:void 0;return r}function Or(t){return Object.values(ie).includes(t)}function Pr(t,a){var n=[t.classNames.day];return Object.keys(a).forEach(function(s){var r=t.modifiersClassNames[s];if(r)n.push(r);else if(Or(s)){var l=t.classNames["day_".concat(s)];l&&n.push(l)}}),n}function Lr(t,a){var n=_({},t.styles.day);return Object.keys(a).forEach(function(s){var r;n=_(_({},n),(r=t.modifiersStyles)===null||r===void 0?void 0:r[s])}),n}function Fr(t,a,n){var s,r,l,i=I(),d=ea(),m=_r(t,a),h=Mr(t,m),f=Tr(),x=!!(i.onDayClick||i.mode!=="default");u.useEffect(function(){var A;m.outside||d.focusedDay&&x&&ee(d.focusedDay,t)&&((A=n.current)===null||A===void 0||A.focus())},[d.focusedDay,t,n,x,m.outside]);var p=Pr(i,m).join(" "),b=Lr(i,m),w=!!(m.outside&&!i.showOutsideDays||m.hidden),S=(l=(r=i.components)===null||r===void 0?void 0:r.DayContent)!==null&&l!==void 0?l:tr,g=e.jsx(S,{date:t,displayMonth:a,activeModifiers:m}),O={style:b,className:p,children:g,role:"gridcell"},k=d.focusTarget&&ee(d.focusTarget,t)&&!m.outside,Z=d.focusedDay&&ee(d.focusedDay,t),M=_(_(_({},O),(s={disabled:m.disabled,role:"gridcell"},s["aria-selected"]=m.selected,s.tabIndex=Z||k?0:-1,s)),h),P={isButton:x,isHidden:w,activeModifiers:m,selectedDays:f,buttonProps:M,divProps:O};return P}function Ir(t){var a=u.useRef(null),n=Fr(t.date,t.displayMonth,a);return n.isHidden?e.jsx("div",{role:"gridcell"}):n.isButton?e.jsx(pt,_({name:"day",ref:a},n.buttonProps)):e.jsx("div",_({},n.divProps))}function Ar(t){var a=t.number,n=t.dates,s=I(),r=s.onWeekNumberClick,l=s.styles,i=s.classNames,d=s.locale,m=s.labels.labelWeekNumber,h=s.formatters.formatWeekNumber,f=h(Number(a),{locale:d});if(!r)return e.jsx("span",{className:i.weeknumber,style:l.weeknumber,children:f});var x=m(Number(a),{locale:d}),p=function(b){r(a,n,b)};return e.jsx(pt,{name:"week-number","aria-label":x,className:i.weeknumber,style:l.weeknumber,onClick:p,children:f})}function Er(t){var a,n,s=I(),r=s.styles,l=s.classNames,i=s.showWeekNumber,d=s.components,m=(a=d==null?void 0:d.Day)!==null&&a!==void 0?a:Ir,h=(n=d==null?void 0:d.WeekNumber)!==null&&n!==void 0?n:Ar,f;return i&&(f=e.jsx("td",{className:l.cell,style:r.cell,children:e.jsx(h,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:l.row,style:r.row,children:[f,t.dates.map(function(x){return e.jsx("td",{className:l.cell,style:r.cell,role:"presentation",children:e.jsx(m,{displayMonth:t.displayMonth,date:x})},us(x))})]})}function da(t,a,n){for(var s=n!=null&&n.ISOWeek?Za(a):Ut(a,n),r=n!=null&&n.ISOWeek?zt(t):et(t,n),l=ge(s,r),i=[],d=0;d<=l;d++)i.push(G(r,d));var m=i.reduce(function(h,f){var x=n!=null&&n.ISOWeek?Un(f):Zn(f,n),p=h.find(function(b){return b.weekNumber===x});return p?(p.dates.push(f),h):(h.push({weekNumber:x,dates:[f]}),h)},[]);return m}function Rr(t,a){var n=da(te(t),$t(t),a);if(a!=null&&a.useFixedWeeks){var s=fs(t,a);if(s<6){var r=n[n.length-1],l=r.dates[r.dates.length-1],i=Et(l,6-s),d=da(Et(l,1),i,a);n.push.apply(n,d)}}return n}function Br(t){var a,n,s,r=I(),l=r.locale,i=r.classNames,d=r.styles,m=r.hideHead,h=r.fixedWeeks,f=r.components,x=r.weekStartsOn,p=r.firstWeekContainsDate,b=r.ISOWeek,w=Rr(t.displayMonth,{useFixedWeeks:!!h,ISOWeek:b,locale:l,weekStartsOn:x,firstWeekContainsDate:p}),S=(a=f==null?void 0:f.Head)!==null&&a!==void 0?a:er,g=(n=f==null?void 0:f.Row)!==null&&n!==void 0?n:Er,O=(s=f==null?void 0:f.Footer)!==null&&s!==void 0?s:Xs;return e.jsxs("table",{id:t.id,className:i.table,style:d.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!m&&e.jsx(S,{}),e.jsx("tbody",{className:i.tbody,style:d.tbody,children:w.map(function(k){return e.jsx(g,{displayMonth:t.displayMonth,dates:k.dates,weekNumber:k.weekNumber},k.weekNumber)})}),e.jsx(O,{displayMonth:t.displayMonth})]})}function Wr(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Yr=Wr()?u.useLayoutEffect:u.useEffect,Ft=!1,Vr=0;function ua(){return"react-day-picker-".concat(++Vr)}function Hr(t){var a,n=t??(Ft?ua():null),s=u.useState(n),r=s[0],l=s[1];return Yr(function(){r===null&&l(ua())},[]),u.useEffect(function(){Ft===!1&&(Ft=!0)},[]),(a=t??r)!==null&&a!==void 0?a:void 0}function Kr(t){var a,n,s=I(),r=s.dir,l=s.classNames,i=s.styles,d=s.components,m=rt().displayMonths,h=Hr(s.id?"".concat(s.id,"-").concat(t.displayIndex):void 0),f=s.id?"".concat(s.id,"-grid-").concat(t.displayIndex):void 0,x=[l.month],p=i.month,b=t.displayIndex===0,w=t.displayIndex===m.length-1,S=!b&&!w;r==="rtl"&&(a=[b,w],w=a[0],b=a[1]),b&&(x.push(l.caption_start),p=_(_({},p),i.caption_start)),w&&(x.push(l.caption_end),p=_(_({},p),i.caption_end)),S&&(x.push(l.caption_between),p=_(_({},p),i.caption_between));var g=(n=d==null?void 0:d.Caption)!==null&&n!==void 0?n:Gs;return e.jsxs("div",{className:x.join(" "),style:p,children:[e.jsx(g,{id:h,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(Br,{id:f,"aria-labelledby":h,displayMonth:t.displayMonth})]},t.displayIndex)}function zr(t){var a=I(),n=a.classNames,s=a.styles;return e.jsx("div",{className:n.months,style:s.months,children:t.children})}function $r(t){var a,n,s=t.initialProps,r=I(),l=ea(),i=rt(),d=u.useState(!1),m=d[0],h=d[1];u.useEffect(function(){r.initialFocus&&l.focusTarget&&(m||(l.focus(l.focusTarget),h(!0)))},[r.initialFocus,m,l.focus,l.focusTarget,l]);var f=[r.classNames.root,r.className];r.numberOfMonths>1&&f.push(r.classNames.multiple_months),r.showWeekNumber&&f.push(r.classNames.with_weeknumber);var x=_(_({},r.styles.root),r.style),p=Object.keys(s).filter(function(w){return w.startsWith("data-")}).reduce(function(w,S){var g;return _(_({},w),(g={},g[S]=s[S],g))},{}),b=(n=(a=s.components)===null||a===void 0?void 0:a.Months)!==null&&n!==void 0?n:zr;return e.jsx("div",_({className:f.join(" "),style:x,dir:r.dir,id:r.id,nonce:s.nonce,title:s.title,lang:s.lang},p,{children:e.jsx(b,{children:i.displayMonths.map(function(w,S){return e.jsx(Kr,{displayIndex:S,displayMonth:w},S)})})}))}function Ur(t){var a=t.children,n=ps(t,["children"]);return e.jsx(As,{initialProps:n,children:e.jsx($s,{children:e.jsx(Sr,{initialProps:n,children:e.jsx(ar,{initialProps:n,children:e.jsx(rr,{initialProps:n,children:e.jsx(fr,{children:e.jsx(Dr,{children:a})})})})})})})}function Zr(t){return e.jsx(Ur,_({},t,{children:e.jsx($r,{initialProps:t})}))}function aa({className:t,classNames:a,showOutsideDays:n=!0,...s}){return e.jsx(Zr,{showOutsideDays:n,className:L("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:L(ra({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:L(ra({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:({...r})=>e.jsx(qn,{className:"h-4 w-4"}),IconRight:({...r})=>e.jsx(Gn,{className:"h-4 w-4"})},...s})}aa.displayName="Calendar";const qr=[{value:"deadline",label:"Prazo (mais distante)"},{value:"title",label:"Título (A → Z)"},{value:"status",label:"Status"}],ma={Pendente:0,Agendado:1,"A fazer":2,"Em andamento":3,Concluído:4},Gr=["Pendente","Agendado","A fazer","Em andamento","Concluído"],Xr={Pendente:"border-t-red-500/60",Agendado:"border-t-blue-500/60","A fazer":"border-t-orange-500/60","Em andamento":"border-t-yellow-500/60",Concluído:"border-t-green-500/60"};function Jr(t,a){return[...t].sort((n,s)=>{switch(a){case"deadline":return!n.dueDate&&!s.dueDate?0:n.dueDate?s.dueDate?s.dueDate.localeCompare(n.dueDate):-1:1;case"title":return n.title.localeCompare(s.title,"pt-BR");case"status":return(ma[n.status]??0)-(ma[s.status]??0);default:return 0}})}function Qr({id:t,children:a}){const{attributes:n,listeners:s,setNodeRef:r,transform:l,transition:i,isDragging:d}=Ya({id:t}),m={transform:Va.Transform.toString(l),transition:i};return e.jsx("div",{ref:r,style:m,...n,...s,className:L("touch-none",d&&"opacity-30"),children:a})}function eo({status:t,isOver:a,items:n,itemIds:s,today:r,onEdit:l,onDelete:i,showRichNotes:d,borderColor:m,badgeColor:h,statusLabel:f}){const{setNodeRef:x}=Ea({id:t});return e.jsxs("div",{className:L("flex flex-col rounded-xl border border-border border-t-4 bg-card/40 min-h-[400px] transition-colors",m||"border-t-muted/60",a&&"bg-card/80 ring-2 ring-primary/20"),children:[e.jsxs("div",{className:"flex items-center gap-2 p-4 border-b border-border shadow-sm bg-background/50 backdrop-blur-md rounded-t-xl",children:[e.jsx(U,{variant:"secondary",className:h,children:f}),e.jsx(U,{variant:"secondary",className:"ml-auto text-xs bg-secondary/50",children:n.length})]}),e.jsxs("div",{ref:x,"data-column-status":t,className:"flex-1 p-3 space-y-3",children:[e.jsx(Ra,{items:s,strategy:Ba,children:n.map(p=>e.jsx(Qr,{id:p.id,children:e.jsx(Bt,{sub:p,today:r,onEdit:()=>l(p),onDelete:()=>i(p.id),showRichNotes:d})},p.id))}),n.length===0&&e.jsxs("div",{className:"sticky top-[40vh] flex flex-col items-center justify-center text-xs text-muted-foreground/50 border-2 border-dashed border-border/50 rounded-xl p-4 text-center gap-1",children:[e.jsx(U,{variant:"secondary",className:L("font-medium mb-1",h),children:f}),e.jsx("span",{children:"Arraste subtarefas para cá"})]})]})]})}const Bt=u.memo(function({sub:a,today:n,showStatus:s,onEdit:r,onDelete:l,showRichNotes:i}){const d=a.dueDate&&a.dueDate<n&&a.status!=="Concluído";return e.jsx(Je,{className:L("group transition-shadow duration-150 hover:shadow-md cursor-pointer",d&&"border-destructive/50"),onClick:r,children:e.jsx(Qe,{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1 flex-wrap",children:[s&&e.jsx(U,{variant:"secondary",className:L("text-[10px]",va[a.status]),children:Vt[a.status]}),d&&e.jsx(U,{variant:"destructive",className:"text-[10px]",children:"Atrasada"})]}),e.jsx("p",{className:L("font-medium text-sm",a.completed&&"line-through text-muted-foreground"),children:a.title}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[e.jsx("span",{className:"font-medium",children:"Tarefa:"})," ",a.parentTaskTitle]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-1 text-xs text-muted-foreground",children:[a.projectName&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(bt,{className:"w-3 h-3"}),a.projectName]}),a.assignee&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(jt,{className:"w-3 h-3"}),a.assignee]}),a.dueDate&&e.jsxs("span",{className:L("flex items-center gap-1",d&&"text-destructive font-medium"),children:[e.jsx(He,{className:"w-3 h-3"}),new Date(a.dueDate+"T12:00:00").toLocaleDateString("pt-BR")]})]}),a.notes&&i&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 prose prose-xs max-w-none [&>*]:m-0 [&>*]:text-xs line-clamp-4",dangerouslySetInnerHTML:{__html:xa(a.notes)||a.notes}}),a.notes&&!i&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:a.notes.replace(/<[^>]*>/g,"")})]}),e.jsxs("div",{className:"flex gap-0.5 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(ne,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:m=>{m.stopPropagation(),r()},children:e.jsx(Ka,{className:"w-3.5 h-3.5"})}),e.jsx(ne,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive",onClick:m=>{m.stopPropagation(),l()},children:e.jsx(Kt,{className:"w-3.5 h-3.5"})})]})]})})})});function to({tasks:t,projects:a,loading:n,onCreateSubtask:s,onUpdateSubtask:r,onDeleteSubtask:l}){const{allOptions:i,getOrderedValues:d,getLabelsMap:m,getColorsMap:h,getBorderColorsMap:f}=Yt(),x=u.useMemo(()=>{const c=d("subtarefa_status");return c.length>0?c:Gr},[i]),p=u.useMemo(()=>{const c=m("subtarefa_status");return Object.keys(c).length>0?c:Vt},[i]),b=u.useMemo(()=>{const c=h("subtarefa_status");return Object.keys(c).length>0?c:va},[i]),w=u.useMemo(()=>{const c=f("subtarefa_status");return Object.keys(c).length>0?c:Xr},[i]),[S,g]=u.useState(!1),[O,k]=u.useState(null),[Z,M]=u.useState("kanban"),[P,A]=u.useState(""),[me,Ke]=u.useState("all"),[je,Ne]=u.useState("all"),[we,ze]=u.useState("all"),[F,se]=u.useState("all"),[re,be]=u.useState("all"),[C,y]=u.useState("deadline"),[oe,ce]=u.useState(!1),[de,Ae]=u.useState(!1),[Ee,ue]=u.useState(null),[ot,Re]=u.useState(null),[Nt,fe]=u.useState(null),wt=Pa(La(Wa,{activationConstraint:{distance:8}})),Ce=u.useMemo(()=>{const c={};return a.forEach(N=>{c[N.id]=N.name}),c},[a]),$=u.useMemo(()=>t.flatMap(c=>c.subtasks.map(N=>({...N,parentTaskTitle:c.title,projectId:c.projectId,projectName:c.projectId?Ce[c.projectId]:void 0}))),[t,Ce]),De=u.useMemo(()=>{const c=new Date,N=new Date(c.getFullYear(),c.getMonth(),c.getDate()),D=new Date(N);D.setDate(N.getDate()+(7-N.getDay()));const X=new Date(c.getFullYear(),c.getMonth()+1,0),q=$.filter(B=>{if(P&&!B.title.toLowerCase().includes(P.toLowerCase())||me!=="all"&&B.status!==me||je!=="all"&&B.assignee!==je||we!=="all"&&B.projectId!==we||F!=="all"&&B.parentTaskId!==F||oe&&B.status==="Concluído")return!1;if(re!=="all"){if(!B.dueDate)return re==="sem_prazo";const J=new Date(B.dueDate+"T23:59:59");switch(re){case"atrasadas":return J<N&&B.status!=="Concluído";case"hoje":return B.dueDate===ae;case"esta_semana":return J>=N&&J<=D;case"este_mes":return J>=N&&J<=X;case"sem_prazo":return!1}}return!0});return Jr(q,C)},[$,P,me,je,we,F,C,oe,re]),ae=u.useMemo(()=>{const c=new Date;return`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")}`},[]);u.useMemo(()=>{const c={};x.forEach(D=>{c[D]=0});const N=$.filter(D=>D.dueDate&&D.dueDate<ae&&D.status!=="Concluído").length;return $.forEach(D=>{c[D.status]!==void 0&&c[D.status]++}),{...c,overdue:N,total:$.length}},[$,ae]);const _e=u.useCallback(()=>{k(null),g(!0)},[]),$e=u.useCallback(c=>{k(c),g(!0)},[]),Se=u.useCallback(async(c,N,D)=>{N?await s(c.parentTaskId,{title:c.title,deadline:c.deadline||void 0,status:c.status,assignee:c.assignee||void 0,notes:c.notes||void 0}):D&&await r(D,{title:c.title,deadline:c.deadline||void 0,status:c.status,assignee:c.assignee||void 0,notes:c.notes||void 0})},[s,r]),Ct=u.useCallback(async()=>{Ee&&(await l(Ee),ue(null))},[Ee,l]),ke=u.useMemo(()=>{const c={};return x.forEach(N=>{c[N]=[]}),De.forEach(N=>{c[N.status]&&c[N.status].push(N)}),c},[De,x]),Dt=u.useCallback(c=>{Re(String(c.active.id))},[]),Be=u.useCallback(c=>{const{over:N}=c;if(!N){fe(null);return}const D=String(N.id),X=$.find(B=>B.id===D),q=X?X.status:x.includes(D)?D:null;fe(q)},[$,x]),_t=u.useCallback(async c=>{const{active:N,over:D}=c;if(Re(null),fe(null),!D)return;const X=String(N.id),q=String(D.id);if(X===q)return;const B=$.find(Ze=>Ze.id===X);if(!B)return;const J=$.find(Ze=>Ze.id===q),xe=J?J.status:x.includes(q)?q:B.status;B.status!==xe&&await r(X,{status:xe})},[$,r,x]),We=u.useCallback(()=>{Re(null),fe(null)},[]),lt=ot?$.find(c=>c.id===ot):null,he=u.useMemo(()=>x.filter(c=>!oe||c!=="Concluído"),[oe,x]),Ue=u.useMemo(()=>[{key:"title",label:"Título",width:250,minWidth:150,sticky:!0,sortable:!0,sortFn:(c,N)=>c.title.localeCompare(N.title,"pt-BR"),render:c=>e.jsx("span",{className:"font-medium",children:c.title})},{key:"status",label:"Status",width:130,sortable:!0,sortFn:(c,N)=>c.status.localeCompare(N.status),render:c=>e.jsx(U,{variant:"secondary",className:L("text-[10px]",b[c.status]),children:p[c.status]||c.status}),inlineEdit:(c,N)=>e.jsxs(W,{value:c.status,onValueChange:N,children:[e.jsx(Y,{className:"h-7 text-xs w-full",children:e.jsx(V,{})}),e.jsx(H,{children:x.map(D=>e.jsx(T,{value:D,children:p[D]||D},D))})]})},{key:"parentTaskTitle",label:"Tarefa-mãe",width:200,sortable:!0,sortFn:(c,N)=>c.parentTaskTitle.localeCompare(N.parentTaskTitle,"pt-BR"),render:c=>e.jsx("span",{className:"text-xs",children:c.parentTaskTitle})},{key:"dueDate",label:"Prazo",width:110,sortable:!0,sortFn:(c,N)=>!c.dueDate&&!N.dueDate?0:c.dueDate?N.dueDate?N.dueDate.localeCompare(c.dueDate):-1:1,render:c=>c.dueDate?e.jsxs("span",{className:L("text-xs flex items-center gap-1",c.dueDate<ae&&c.status!=="Concluído"&&"text-destructive font-medium"),children:[e.jsx(He,{className:"w-3 h-3"}),new Date(c.dueDate+"T12:00:00").toLocaleDateString("pt-BR")]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"}),inlineEdit:(c,N)=>e.jsxs(ft,{children:[e.jsx(ht,{asChild:!0,children:e.jsxs(ne,{variant:"outline",className:L("h-7 text-xs w-full justify-start font-normal",!c.dueDate&&"text-muted-foreground"),children:[e.jsx(He,{className:"w-3 h-3 mr-1"}),c.dueDate?new Date(c.dueDate+"T12:00:00").toLocaleDateString("pt-BR"):"Selecionar"]})}),e.jsx(xt,{className:"w-auto p-0",align:"start",children:e.jsx(aa,{mode:"single",selected:c.dueDate?new Date(c.dueDate+"T12:00:00"):void 0,onSelect:D=>{if(D){const X=D.getFullYear(),q=String(D.getMonth()+1).padStart(2,"0"),B=String(D.getDate()).padStart(2,"0");N(`${X}-${q}-${B}`)}else N("")},initialFocus:!0,className:"p-3 pointer-events-auto"})})]})},{key:"assignee",label:"Responsável",width:130,sortable:!0,sortFn:(c,N)=>(c.assignee??"").localeCompare(N.assignee??"","pt-BR"),render:c=>c.assignee?e.jsxs("span",{className:"text-xs flex items-center gap-1",children:[e.jsx(jt,{className:"w-3 h-3"}),c.assignee]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"}),inlineEdit:(c,N)=>e.jsxs(W,{value:c.assignee||"_none_",onValueChange:D=>N(D==="_none_"?"":D),children:[e.jsx(Y,{className:"h-7 text-xs w-full",children:e.jsx(V,{})}),e.jsxs(H,{children:[e.jsx(T,{value:"_none_",children:"— Sem responsável —"}),It.map(D=>e.jsx(T,{value:D,children:D},D))]})]})},{key:"project",label:"Projeto",width:130,render:c=>c.projectName?e.jsxs(U,{variant:"outline",className:"text-[10px] gap-1",children:[e.jsx(bt,{className:"w-3 h-3"}),c.projectName]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"})}],[ae]),ye=u.useCallback((c,N,D)=>{N==="status"?r(c,{status:D}):N==="assignee"?r(c,{assignee:D||void 0}):N==="dueDate"&&r(c,{deadline:D||void 0})},[r]),Me=u.useCallback(c=>{c.forEach(N=>l(N))},[l]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-3 glass p-4 rounded-xl border border-border shadow-sm mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:[e.jsxs("div",{className:"relative w-full sm:min-w-[220px] sm:max-w-xs",children:[e.jsx(Ht,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"}),e.jsx(mt,{placeholder:"Buscar subtarefa...",value:P,onChange:c=>A(c.target.value),className:"pl-9 w-full text-sm"})]}),e.jsxs("div",{className:"flex gap-2 items-center ml-auto flex-wrap",children:[e.jsxs(ne,{onClick:_e,className:"gold-gradient text-primary-foreground shadow-md hover:opacity-90 transition-opacity h-9",children:[e.jsx(Oa,{className:"mr-1.5 h-4 w-4"})," Nova Subtarefa"]}),e.jsxs("div",{className:"flex border border-border rounded-lg overflow-hidden bg-muted/40",children:[e.jsxs("button",{onClick:()=>M("kanban"),className:L("flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors",Z==="kanban"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx($a,{className:"w-4 h-4"})," Kanban"]}),e.jsxs("button",{onClick:()=>M("list"),className:L("flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors",Z==="list"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx(Ha,{className:"w-4 h-4"})," Lista"]}),e.jsxs("button",{onClick:()=>M("table"),className:L("flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors",Z==="table"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx(ba,{className:"w-4 h-4"})," Tabela"]})]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap flex-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Status"}),e.jsxs(W,{value:me,onValueChange:Ke,children:[e.jsx(Y,{className:"w-[130px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos Status"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todos Status"}),x.map(c=>e.jsx(T,{value:c,children:p[c]||c},c))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Prazo"}),e.jsxs(W,{value:re,onValueChange:be,children:[e.jsx(Y,{className:"w-[120px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todos"}),e.jsx(T,{value:"atrasadas",children:"Atrasadas"}),e.jsx(T,{value:"hoje",children:"Vence hoje"}),e.jsx(T,{value:"esta_semana",children:"Esta semana"}),e.jsx(T,{value:"este_mes",children:"Este mês"}),e.jsx(T,{value:"sem_prazo",children:"Sem prazo"})]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Responsável"}),e.jsxs(W,{value:je,onValueChange:Ne,children:[e.jsx(Y,{className:"w-[120px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todos"}),It.map(c=>e.jsx(T,{value:c,children:c},c))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Tarefa-mãe"}),e.jsxs(W,{value:F,onValueChange:se,children:[e.jsx(Y,{className:"w-[160px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todas"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todas"}),t.map(c=>e.jsx(T,{value:c.id,children:c.title},c.id))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Ordenar por"}),e.jsxs(W,{value:C,onValueChange:c=>y(c),children:[e.jsx(Y,{className:"w-[160px] h-8 text-xs",children:e.jsx(V,{})}),e.jsx(H,{children:qr.map(c=>e.jsx(T,{value:c.value,children:c.label},c.value))})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5 ml-auto shrink-0",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground cursor-pointer select-none justify-end",children:["Ocultar concluídas",e.jsx(Xe,{checked:oe,onCheckedChange:ce,className:"scale-75"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground cursor-pointer select-none justify-end",children:["Observações formatadas",e.jsx(Xe,{checked:de,onCheckedChange:Ae,className:"scale-75"})]})]})]})]}),e.jsx(vs,{open:S,onOpenChange:g,subtask:O,tasks:t,onSave:Se,onDelete:c=>ue(c)}),e.jsx(wa,{open:!!Ee,onOpenChange:c=>!c&&ue(null),children:e.jsxs(Ca,{children:[e.jsxs(Da,{children:[e.jsx(_a,{children:"Remover subtarefa?"}),e.jsx(Sa,{children:"Esta ação não pode ser desfeita. A subtarefa será removida permanentemente."})]}),e.jsxs(ka,{children:[e.jsx(Ma,{children:"Cancelar"}),e.jsx(Ta,{onClick:Ct,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remover"})]})]})}),n?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(c=>e.jsx(Je,{children:e.jsx(Qe,{className:"p-4",children:e.jsx("div",{className:"h-16 bg-muted animate-pulse rounded"})})},c))}):Z==="table"?e.jsx(ya,{data:De,columns:Ue,onEdit:c=>$e(c),onDelete:c=>ue(c),onBulkDelete:Me,onInlineChange:ye,emptyMessage:"Nenhuma subtarefa encontrada."}):Z==="list"?e.jsx("div",{className:"space-y-3",children:De.length===0?e.jsx(Je,{children:e.jsx(Qe,{className:"p-8 text-center text-muted-foreground",children:"Nenhuma subtarefa encontrada."})}):De.map(c=>e.jsx(Bt,{sub:c,today:ae,showStatus:!0,onEdit:()=>$e(c),onDelete:()=>ue(c.id),showRichNotes:de},c.id))}):e.jsxs(Fa,{sensors:wt,collisionDetection:Ia,onDragStart:Dt,onDragOver:Be,onDragEnd:_t,onDragCancel:We,children:[e.jsx("div",{className:"overflow-x-auto -mx-2 px-2 pb-4",children:e.jsx("div",{className:"flex gap-4",style:{minWidth:`${he.length*300}px`},children:he.map(c=>{const N=Nt===c,D=ke[c],X=D.map(q=>q.id);return e.jsx("div",{className:"flex-1 min-w-[260px]",children:e.jsx(eo,{status:c,isOver:N,items:D,itemIds:X,today:ae,onEdit:$e,onDelete:ue,showRichNotes:de,borderColor:w[c]||"border-t-muted/60",badgeColor:b[c]||"",statusLabel:p[c]||c})},c)})})}),e.jsx(Aa,{children:lt&&e.jsx("div",{className:"shadow-xl ring-2 ring-primary/30 rotate-[2deg] scale-105",children:e.jsx(Bt,{sub:lt,today:ae,showStatus:!0,onEdit:()=>{},onDelete:()=>{},showRichNotes:de})})})]})]})}const ao=u.lazy(()=>yn(()=>import("./AdminCrmDashboard-BsuKnusX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]))),no=[{value:"deadline",label:"Prazo (mais distante)"},{value:"priority",label:"Prioridade (Alta → Baixa)"},{value:"title",label:"Título (A → Z)"},{value:"client",label:"Cliente (A → Z)"}],gt={alta:0,media:1,baixa:2};function fa(t,a){return[...t].sort((n,s)=>{switch(a){case"deadline":return!n.dueDate&&!s.dueDate?0:n.dueDate?s.dueDate?s.dueDate.localeCompare(n.dueDate):-1:1;case"priority":return(gt[n.priority]??1)-(gt[s.priority]??1);case"title":return n.title.localeCompare(s.title,"pt-BR");case"client":return(n.client??"").localeCompare(s.client??"","pt-BR");default:return 0}})}const so={client:!0,dueDate:!0,priority:!0,subtasks:!0,tags:!0,description:!1},ha={client:"Cliente",dueDate:"Data de entrega",priority:"Prioridade",subtasks:"Subtarefas",tags:"Tags",description:"Descrição"},ro=["pendente","agendado","em_andamento","em_tramite","concluida","cancelada"],oo={pendente:"border-t-red-500/60",agendado:"border-t-blue-500/60",em_andamento:"border-t-yellow-500/60",em_tramite:"border-t-orange-500/60",concluida:"border-t-green-500/60",cancelada:"border-t-muted/60"},lo={pendente:za,agendado:ns,em_andamento:At,em_tramite:At,concluida:Qn,cancelada:as},io=[{value:"all",label:"Todos"},{value:"today",label:"Hoje"},{value:"this_week",label:"Esta semana"},{value:"this_month",label:"Este mês"},{value:"overdue",label:"Atrasadas"},{value:"no_deadline",label:"Sem prazo"}],Wt=u.memo(function({task:a,cardFields:n,today:s,isExpanded:r,onToggleExpand:l,onToggleSubtask:i,onEdit:d,onDelete:m,showStatus:h,isDragging:f,isOverlay:x,projectName:p}){const b=a.subtasks.filter(g=>g.completed).length,w=a.subtasks.length,S=a.dueDate&&a.dueDate<s&&a.status!=="concluida"&&a.status!=="cancelada";return e.jsx(Je,{className:L("relative group transition-all duration-200 hover:shadow-md cursor-pointer",f?"opacity-40 scale-95":"",x&&"shadow-2xl ring-2 ring-primary/40 rotate-[2deg] scale-105 cursor-grabbing","border-border/50 bg-card"),onClick:()=>d==null?void 0:d(a),children:e.jsxs(Qe,{className:"p-3.5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-1",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[p&&e.jsx("div",{className:"mb-2",children:e.jsxs(U,{variant:"outline",className:"text-[10px] px-1.5 py-0 gap-1 font-normal",children:[e.jsx(bt,{className:"w-3 h-3"}),p]})}),e.jsx("p",{className:"font-medium text-sm mb-1",children:a.title})]}),!x&&e.jsxs("div",{className:"flex gap-0.5 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(ne,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:g=>{g.stopPropagation(),d==null||d(a)},children:e.jsx(Ka,{className:"w-3.5 h-3.5"})}),e.jsx(ne,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive",onClick:g=>{g.stopPropagation(),m(a.id)},children:e.jsx(Kt,{className:"w-3.5 h-3.5"})})]})]}),n.description&&a.description&&e.jsx("div",{className:"text-xs text-muted-foreground mb-2 prose prose-xs max-w-none [&>*]:m-0 [&>*]:text-xs line-clamp-4",dangerouslySetInnerHTML:{__html:xa(a.description)||a.description}}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[n.priority&&e.jsx(U,{variant:"secondary",className:`text-[10px] ${ja[a.priority]}`,children:Ge[a.priority]}),h&&e.jsx(U,{variant:"secondary",className:`text-[10px] ${ga[a.status]}`,children:pa[a.status]}),n.dueDate&&a.dueDate&&e.jsxs("span",{className:L("flex items-center gap-1",S&&"text-destructive font-medium"),children:[S?e.jsx(za,{className:"w-3 h-3"}):e.jsx(He,{className:"w-3 h-3"}),new Date(a.dueDate+"T12:00:00").toLocaleDateString("pt-BR")]}),S&&e.jsx("span",{className:"text-destructive font-medium",children:"Atrasada"}),a.assignee&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(jt,{className:"w-3 h-3"}),a.assignee]})]}),n.subtasks&&w>0&&!x&&e.jsx("div",{className:"flex justify-end mt-2",children:e.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-muted-foreground",children:[e.jsx(Ua,{className:"w-3 h-3"}),b,"/",w]})}),n.tags&&a.tags&&a.tags.length>0&&!x&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:a.tags.map(g=>e.jsx(U,{variant:"outline",className:"text-[10px]",children:g},g))})]})})});function co(t){const{attributes:a,listeners:n,setNodeRef:s,transform:r,transition:l,isDragging:i}=Ya({id:t.task.id}),d={transform:Va.Transform.toString(r),transition:l};return e.jsx("div",{ref:s,style:d,...a,...n,children:e.jsx(Wt,{...t,isDragging:i})})}function uo({status:t,tasks:a,isOver:n,cardFields:s,today:r,expandedTasks:l,onToggleExpand:i,onToggleSubtask:d,onEdit:m,onDelete:h,projectMap:f,statusLabel:x,borderColor:p,badgeColor:b}){const w=u.useMemo(()=>a.map(O=>O.id),[a]),{setNodeRef:S}=Ea({id:t}),g=lo[t]||At;return e.jsxs("div",{className:L("flex flex-col rounded-xl border border-border border-t-4 bg-card/40 min-h-[400px] transition-colors",p||"border-t-muted/60",n&&"bg-card/80 ring-2 ring-primary/20"),children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 px-4",children:[e.jsx(g,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(U,{variant:"secondary",className:L("text-xs",b),children:x}),e.jsx(U,{variant:"secondary",className:"ml-auto text-xs bg-secondary/50 tabular-nums",children:a.length})]}),e.jsxs("div",{ref:S,"data-column-status":t,className:"flex-1 p-3 pt-0 space-y-3",children:[e.jsx(Ra,{items:w,strategy:Ba,children:a.map(O=>e.jsx(co,{task:O,cardFields:s,today:r,isExpanded:l.has(O.id),onToggleExpand:i,onToggleSubtask:d,onEdit:m,onDelete:h,projectName:f.get(O.projectId||"")},O.id))}),a.length===0&&e.jsx("div",{className:"flex flex-col items-center justify-center text-xs text-muted-foreground/50 border-2 border-dashed border-border/50 rounded-xl p-4 text-center gap-1 min-h-[100px]",children:e.jsx("span",{children:"Arraste tarefas para cá"})})]})]})}function mo({projectId:t,clientNameFilter:a,hideHeader:n,forceTab:s}={}){const{tasks:r,setTasks:l,loading:i,error:d,updateTaskStatus:m,deleteTask:h,createTask:f,updateTask:x,createSubtask:p,updateSubtask:b,deleteSubtask:w}=In(),{projects:S}=An(),{allOptions:g,getOrderedValues:O,getLabelsMap:k,getColorsMap:Z,getBorderColorsMap:M}=Yt(),P=u.useMemo(()=>{const o=O("tarefa_status");return o.length>0?o:ro},[g]),A=u.useMemo(()=>{const o=k("tarefa_status");return Object.keys(o).length>0?o:pa},[g]),me=u.useMemo(()=>{const o=Z("tarefa_status");return Object.keys(o).length>0?o:ga},[g]),Ke=u.useMemo(()=>{const o=M("tarefa_status");return Object.keys(o).length>0?o:oo},[g]),[je,Ne]=u.useState(!1),[we,ze]=u.useState(null),F=u.useMemo(()=>a||t?r.filter(o=>{var E;const v=a&&((E=o.client)==null?void 0:E.toLowerCase().includes(a.toLowerCase())),j=t&&o.projectId===t;return a&&t?v||j:a?v:j}):r,[r,a,t]),[se,re]=u.useState("kanban"),[be,C]=u.useState(""),[y,oe]=u.useState("all"),[ce,de]=u.useState("all"),[Ae,Ee]=u.useState("all"),[ue,ot]=u.useState(t||"all"),[Re,Nt]=u.useState(new Set),[fe,wt]=u.useState(so),[Ce,$]=u.useState(null),[De,ae]=u.useState(null),[_e,$e]=u.useState("deadline"),[Se,Ct]=u.useState(!1),[ke,Dt]=u.useState(!1),[Be,_t]=u.useState("all"),[We,lt]=u.useState("all"),he=u.useMemo(()=>{const o=new Date;return`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`},[]),Ue=u.useMemo(()=>[...new Set(F.map(o=>o.assignee).filter(Boolean))],[F]),ye=u.useMemo(()=>{const v=!!(t&&a)?"all":t||ue,j=new Date,E=new Date(j);E.setDate(j.getDate()+7);const K=new Date(j.getFullYear(),j.getMonth()+1,0),ve=`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}-${String(E.getDate()).padStart(2,"0")}`,ct=`${K.getFullYear()}-${String(K.getMonth()+1).padStart(2,"0")}-${String(K.getDate()).padStart(2,"0")}`,qe=F.filter(z=>{var dt;if(be&&!z.title.toLowerCase().includes(be.toLowerCase())||y!=="all"&&z.status!==y||ce!=="all"&&z.priority!==ce||Ae!=="all"&&z.client!==Ae||We!=="all"&&z.assignee!==We||v!=="all"&&z.projectId!==v||Se&&z.status==="concluida"||ke&&z.status==="cancelada")return!1;if(Be!=="all"){const Q=(dt=z.dueDate)==null?void 0:dt.split("T")[0];switch(Be){case"today":if(Q!==he)return!1;break;case"this_week":if(!Q||Q<he||Q>ve)return!1;break;case"this_month":if(!Q||Q<he||Q>ct)return!1;break;case"overdue":if(!Q||Q>=he||z.status==="concluida"||z.status==="cancelada")return!1;break;case"no_deadline":if(Q)return!1;break}}return!0});return fa(qe,_e)},[F,be,y,ce,Ae,We,ue,_e,Be,he,Se,ke]),Me=he,c=u.useMemo(()=>Ce?F.find(o=>o.id===Ce):null,[Ce,F]),N=u.useMemo(()=>[...new Set(F.map(o=>o.client).filter(Boolean))],[F]),D=u.useMemo(()=>{const o=new Map;return S.forEach(v=>o.set(v.id,v.name)),o},[S]),X=u.useMemo(()=>F.reduce((o,v)=>o+v.subtasks.length,0),[F]),q=u.useCallback(o=>{Nt(v=>{const j=new Set(v);return j.has(o)?j.delete(o):j.add(o),j})},[]),B=u.useCallback((o,v)=>{l(j=>j.map(E=>E.id===o?{...E,subtasks:E.subtasks.map(K=>K.id===v?{...K,completed:!K.completed}:K)}:E))},[l]),[J,xe]=u.useState(null),Ze=u.useCallback(async()=>{J&&(l(o=>o.filter(v=>v.id!==J)),h(J),xe(null))},[J,h,l]),on=u.useCallback(o=>{wt(v=>({...v,[o]:!v[o]}))},[]),ln=u.useCallback(()=>{ze(null),Ne(!0)},[]),St=u.useCallback(o=>{ze(o),Ne(!0)},[]),cn=u.useCallback(async(o,v,j)=>{v?await f({title:o.title,deadline:o.deadline,priority:o.priority,status:o.status,clientName:o.clientName,projectId:o.projectId,assignee:o.assignee,description:o.description,numeroProcesso:o.numeroProcesso}):j&&await x(j,{title:o.title,deadline:o.deadline,priority:o.priority,status:o.status,clientName:o.clientName,projectId:o.projectId,assignee:o.assignee,description:o.description,numeroProcesso:o.numeroProcesso})},[f,x]),dn=Pa(La(Wa,{activationConstraint:{distance:8}}));u.useCallback(o=>{const v=F.find(j=>j.id===o);return v==null?void 0:v.status},[F]);const un=u.useCallback(o=>{$(o.active.id)},[]),mn=u.useCallback(o=>{const{over:v}=o;if(!v){ae(null);return}const j=v.id,E=F.find(ve=>ve.id===j),K=E?E.status:P.includes(j)?j:null;ae(K)},[F]),fn=u.useCallback(o=>{const{active:v,over:j}=o;if($(null),ae(null),!j)return;const E=v.id,K=j.id;if(E===K)return;const ve=F.find(z=>z.id===E);if(!ve)return;const ct=F.find(z=>z.id===K),qe=ct?ct.status:P.includes(K)?K:ve.status;ve.status!==qe&&(l(z=>{const dt=z.map(Q=>Q.id===E?{...Q,status:qe}:Q);return fa(dt,_e)}),m(E,qe))},[F,m,_e]),hn=u.useCallback(()=>{$(null),ae(null)},[]),xn=u.useMemo(()=>{const o={};return P.forEach(v=>{o[v]=[]}),ye.forEach(v=>{o[v.status]&&o[v.status].push(v)}),o},[ye,P]),na=u.useMemo(()=>P.filter(o=>!(Se&&o==="concluida"||ke&&o==="cancelada")),[Se,ke,P]),vn=u.useMemo(()=>[{key:"title",label:"Título",width:280,minWidth:150,sticky:!0,sortable:!0,sortFn:(o,v)=>o.title.localeCompare(v.title,"pt-BR"),render:o=>e.jsx("span",{className:"font-medium",children:o.title})},{key:"status",label:"Status",width:140,sortable:!0,sortFn:(o,v)=>o.status.localeCompare(v.status),render:o=>e.jsx(U,{variant:"secondary",className:L("text-[10px]",me[o.status]),children:A[o.status]||o.status}),inlineEdit:(o,v)=>e.jsxs(W,{value:o.status,onValueChange:v,children:[e.jsx(Y,{className:"h-7 text-xs w-full",children:e.jsx(V,{})}),e.jsx(H,{children:P.map(j=>e.jsx(T,{value:j,children:A[j]||j},j))})]})},{key:"priority",label:"Prioridade",width:110,sortable:!0,sortFn:(o,v)=>(gt[o.priority]??1)-(gt[v.priority]??1),render:o=>e.jsx(U,{variant:"secondary",className:L("text-[10px]",ja[o.priority]),children:Ge[o.priority]}),inlineEdit:(o,v)=>e.jsxs(W,{value:o.priority,onValueChange:v,children:[e.jsx(Y,{className:"h-7 text-xs w-full",children:e.jsx(V,{})}),e.jsx(H,{children:Object.entries(Ge).map(([j,E])=>e.jsx(T,{value:j,children:E},j))})]})},{key:"dueDate",label:"Prazo",width:150,sortable:!0,sortFn:(o,v)=>!o.dueDate&&!v.dueDate?0:o.dueDate?v.dueDate?v.dueDate.localeCompare(o.dueDate):-1:1,render:o=>o.dueDate?e.jsxs("span",{className:L("text-xs flex items-center gap-1",o.dueDate<Me&&o.status!=="concluida"&&"text-destructive font-medium"),children:[e.jsx(He,{className:"w-3 h-3"}),new Date(o.dueDate+"T12:00:00").toLocaleDateString("pt-BR")]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"}),inlineEdit:(o,v)=>e.jsxs(ft,{children:[e.jsx(ht,{asChild:!0,children:e.jsxs(ne,{variant:"outline",className:L("h-7 text-xs w-full justify-start font-normal",!o.dueDate&&"text-muted-foreground"),children:[e.jsx(He,{className:"w-3 h-3 mr-1"}),o.dueDate?new Date(o.dueDate+"T12:00:00").toLocaleDateString("pt-BR"):"Selecionar"]})}),e.jsx(xt,{className:"w-auto p-0",align:"start",children:e.jsx(aa,{mode:"single",selected:o.dueDate?new Date(o.dueDate+"T12:00:00"):void 0,onSelect:j=>{if(j){const E=j.getFullYear(),K=String(j.getMonth()+1).padStart(2,"0"),ve=String(j.getDate()).padStart(2,"0");v(`${E}-${K}-${ve}`)}else v("")},initialFocus:!0,className:"p-3 pointer-events-auto"})})]})},{key:"assignee",label:"Responsável",width:140,sortable:!0,sortFn:(o,v)=>(o.assignee??"").localeCompare(v.assignee??"","pt-BR"),render:o=>o.assignee?e.jsxs("span",{className:"text-xs flex items-center gap-1",children:[e.jsx(jt,{className:"w-3 h-3"}),o.assignee]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"}),inlineEdit:(o,v)=>e.jsxs(W,{value:o.assignee||"_none_",onValueChange:j=>v(j==="_none_"?"":j),children:[e.jsx(Y,{className:"h-7 text-xs w-full",children:e.jsx(V,{})}),e.jsxs(H,{children:[e.jsx(T,{value:"_none_",children:"— Sem responsável —"}),Ue.map(j=>e.jsx(T,{value:j,children:j},j))]})]})},{key:"client",label:"Cliente",width:140,sortable:!0,sortFn:(o,v)=>(o.client??"").localeCompare(v.client??"","pt-BR"),render:o=>o.client?e.jsx("span",{className:"text-xs",children:o.client}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"}),inlineEdit:(o,v)=>e.jsxs(W,{value:o.client||"_none_",onValueChange:j=>v(j==="_none_"?"":j),children:[e.jsx(Y,{className:"h-7 text-xs w-full",children:e.jsx(V,{})}),e.jsxs(H,{children:[e.jsx(T,{value:"_none_",children:"— Sem cliente —"}),N.map(j=>e.jsx(T,{value:j,children:j},j))]})]})},{key:"project",label:"Projeto",width:140,render:o=>{const v=D.get(o.projectId||"");return v?e.jsxs(U,{variant:"outline",className:"text-[10px] gap-1",children:[e.jsx(bt,{className:"w-3 h-3"}),v]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"})}}],[Me,Ue,D,N]),pn=u.useCallback((o,v,j)=>{v==="status"?m(o,j):v==="assignee"?x(o,{responsavel:j||null}):v==="priority"?x(o,{prioridade:j}):v==="client"?x(o,{cliente:j||null}):v==="dueDate"&&x(o,{deadline:j||null})},[m,x]),gn=u.useCallback(o=>{o.forEach(v=>h(v))},[h]),[it,jn]=u.useState(s||"overview");return e.jsxs(sa.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[!s&&e.jsx("div",{className:"flex items-center gap-1 rounded-2xl border border-border bg-muted/40 p-1 w-fit backdrop-blur-sm mb-5",children:[{id:"overview",label:"Visão Geral",icon:Jn},{id:"tarefas",label:"Tarefas",icon:es,count:ye.length},{id:"subtarefas",label:"Subtarefas",icon:Ua,count:X}].map(o=>{const v=it===o.id,j=o.icon;return e.jsxs("button",{onClick:()=>jn(o.id),className:L("relative flex items-center gap-2 rounded-xl px-5 py-2.5 text-sm font-medium transition-all duration-200",v?"text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-background/50"),children:[v&&e.jsx(sa.div,{layoutId:"tarefas-tab-bg",className:"absolute inset-0 rounded-xl gold-gradient shadow-sm",transition:{type:"spring",bounce:.15,duration:.5}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),o.label,"count"in o&&e.jsx("span",{className:L("inline-flex items-center justify-center rounded-full px-2 py-0.5 text-[10px] font-semibold tabular-nums min-w-[22px] transition-colors",v?"bg-primary-foreground/20 text-primary-foreground":"bg-secondary text-muted-foreground"),children:o.count})]})]},o.id)})}),it==="overview"&&e.jsx(u.Suspense,{fallback:e.jsxs("div",{className:"space-y-4",children:[e.jsx(kt,{className:"h-10 w-full"}),e.jsx(kt,{className:"h-40 w-full"}),e.jsx(kt,{className:"h-40 w-full"})]}),children:e.jsx(ao,{})}),it==="tarefas"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-3 glass p-4 rounded-xl border border-border shadow-sm mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:[e.jsxs("div",{className:"relative w-full sm:min-w-[220px] sm:max-w-xs",children:[e.jsx(Ht,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"}),e.jsx(mt,{placeholder:"Buscar tarefas...",value:be,onChange:o=>C(o.target.value),className:"pl-9 w-full text-sm"})]}),e.jsxs("div",{className:"flex gap-2 items-center ml-auto flex-wrap",children:[e.jsxs(ne,{onClick:ln,className:"gold-gradient text-primary-foreground shadow-md hover:opacity-90 transition-opacity h-9",children:[e.jsx(Oa,{className:"mr-1.5 h-4 w-4"})," Nova Tarefa"]}),e.jsxs("div",{className:"flex border border-border rounded-lg overflow-hidden bg-muted/40",children:[e.jsxs("button",{onClick:()=>re("kanban"),className:L("flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors",se==="kanban"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx($a,{className:"w-4 h-4"})," Kanban"]}),e.jsxs("button",{onClick:()=>re("list"),className:L("flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors",se==="list"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx(Ha,{className:"w-4 h-4"})," Lista"]}),e.jsxs("button",{onClick:()=>re("table"),className:L("flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium transition-colors",se==="table"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx(ba,{className:"w-4 h-4"})," Tabela"]})]}),d&&e.jsx("span",{className:"text-xs text-destructive",children:"Erro ao carregar"}),e.jsxs(ft,{children:[e.jsx(ht,{asChild:!0,children:e.jsx(ne,{variant:"outline",size:"icon",className:"h-9 w-9",children:e.jsx(rs,{className:"w-4 h-4"})})}),e.jsx(xt,{className:"w-56",align:"end",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Mostrar nos cards"}),Object.keys(ha).map(o=>e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsx(Xn,{htmlFor:`field-${o}`,className:"text-sm cursor-pointer",children:ha[o]}),e.jsx(Xe,{id:`field-${o}`,checked:fe[o],onCheckedChange:()=>on(o)})]},o))]})})]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap items-end",children:[e.jsx(ts,{className:"w-4 h-4 text-muted-foreground shrink-0 mb-2"}),e.jsxs("div",{className:"flex items-end gap-2 flex-wrap flex-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Status"}),e.jsxs(W,{value:y,onValueChange:oe,children:[e.jsx(Y,{className:"w-[130px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos Status"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todos Status"}),P.map(o=>e.jsx(T,{value:o,children:A[o]||o},o))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Prioridade"}),e.jsxs(W,{value:ce,onValueChange:de,children:[e.jsx(Y,{className:"w-[110px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todas"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todas"}),Object.keys(Ge).map(o=>e.jsx(T,{value:o,children:Ge[o]},o))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Prazo"}),e.jsxs(W,{value:Be,onValueChange:o=>_t(o),children:[e.jsx(Y,{className:"w-[110px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos"})}),e.jsx(H,{children:io.map(o=>e.jsx(T,{value:o.value,children:o.label},o.value))})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Responsável"}),e.jsxs(W,{value:We,onValueChange:lt,children:[e.jsx(Y,{className:"w-[120px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todos"}),Ue.map(o=>e.jsx(T,{value:o,children:o},o))]})]})]}),!t&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Projeto"}),e.jsxs(W,{value:ue,onValueChange:ot,children:[e.jsx(Y,{className:"w-[150px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todos Projetos"}),S.map(o=>e.jsx(T,{value:o.id,children:o.name},o.id))]})]})]}),N.length>0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Cliente"}),e.jsxs(W,{value:Ae,onValueChange:Ee,children:[e.jsx(Y,{className:"w-[130px] h-8 text-xs",children:e.jsx(V,{placeholder:"Todos"})}),e.jsxs(H,{children:[e.jsx(T,{value:"all",children:"Todos Clientes"}),N.map(o=>e.jsx(T,{value:o,children:o},o))]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Ordenar por"}),e.jsxs(W,{value:_e,onValueChange:o=>$e(o),children:[e.jsx(Y,{className:"w-[160px] h-8 text-xs",children:e.jsx(V,{})}),e.jsxs(H,{children:[e.jsx(T,{value:"deadline",children:"Sem ordenação"}),no.map(o=>e.jsx(T,{value:o.value,children:o.label},o.value))]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5 ml-auto shrink-0",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground cursor-pointer select-none justify-end",children:["Ocultar canceladas",e.jsx(Xe,{checked:ke,onCheckedChange:Dt,className:"scale-75"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground cursor-pointer select-none justify-end",children:["Ocultar concluídas",e.jsx(Xe,{checked:Se,onCheckedChange:Ct,className:"scale-75"})]})]})]})]}),e.jsx(Dn,{open:je,onOpenChange:Ne,task:we,onSave:cn,onDelete:o=>xe(o),onCreateSubtask:p,onUpdateSubtask:b,onDeleteSubtask:w}),e.jsx(wa,{open:!!J,onOpenChange:o=>!o&&xe(null),children:e.jsxs(Ca,{children:[e.jsxs(Da,{children:[e.jsx(_a,{children:"Remover tarefa?"}),e.jsx(Sa,{children:"Esta ação não pode ser desfeita. A tarefa será removida permanentemente."})]}),e.jsxs(ka,{children:[e.jsx(Ma,{children:"Cancelar"}),e.jsx(Ta,{onClick:Ze,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remover"})]})]})}),i?se==="list"||se==="table"?e.jsx(Yn,{}):e.jsx(Vn,{}):se==="table"?e.jsx(ya,{data:ye,columns:vn,onEdit:St,onDelete:xe,onBulkDelete:gn,onInlineChange:pn,emptyMessage:"Nenhuma tarefa encontrada."}):se==="list"?e.jsx("div",{className:"space-y-3",children:ye.length===0?e.jsx(Je,{children:e.jsx(Qe,{className:"p-8 text-center text-muted-foreground",children:"Nenhuma tarefa encontrada."})}):ye.map(o=>e.jsx(Wt,{task:o,cardFields:fe,today:Me,isExpanded:Re.has(o.id),onToggleExpand:q,onToggleSubtask:B,onEdit:St,onDelete:xe,showStatus:!0,projectName:D.get(o.projectId||"")},o.id))}):e.jsxs(Fa,{sensors:dn,collisionDetection:Ia,onDragStart:un,onDragOver:mn,onDragEnd:fn,onDragCancel:hn,children:[e.jsx("div",{className:"overflow-x-auto -mx-2 px-2 pb-4",children:e.jsx("div",{className:"flex gap-4",style:{minWidth:`${na.length*280}px`},children:na.map(o=>e.jsx("div",{className:"flex-1 min-w-[260px]",children:e.jsx(uo,{status:o,tasks:xn[o]||[],isOver:De===o&&Ce!==null,cardFields:fe,today:Me,expandedTasks:Re,onToggleExpand:q,onToggleSubtask:B,onEdit:St,onDelete:xe,projectMap:D,statusLabel:A[o]||o,borderColor:Ke[o]||"border-t-muted/60",badgeColor:me[o]||""})},o))})}),e.jsx(Aa,{dropAnimation:{duration:200,easing:"cubic-bezier(0.18, 0.67, 0.6, 1.22)"},children:c?e.jsx("div",{className:"w-[260px]",children:e.jsx(Wt,{task:c,cardFields:fe,today:Me,isExpanded:!1,onToggleExpand:()=>{},onToggleSubtask:()=>{},onDelete:()=>{},isOverlay:!0,projectName:D.get(c.projectId||"")})}):null})]})]}),it==="subtarefas"&&e.jsx(to,{tasks:t?F.filter(o=>o.projectId===t):F,projects:S,loading:i,onCreateSubtask:p,onUpdateSubtask:b,onDeleteSubtask:w})]})}const Xo=Object.freeze(Object.defineProperty({__proto__:null,default:mo},Symbol.toStringTag,{value:"Module"}));export{mo as A,Ua as L,Xo as a};
